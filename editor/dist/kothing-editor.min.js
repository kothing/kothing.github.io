!function(){"use strict";var e={name:"font",display:"submenu",add:function(e,t){const i=e.context,n=e.icons;i.font={targetText:t.querySelector(".txt"),targetTooltip:t.parentNode.querySelector(".ke-tooltip-text"),fontList:null,currentFont:"",icon:n.font};let l=this.setSubmenu(e);l.querySelector(".ke-list-inner").addEventListener("click",this.pickup.bind(e)),i.font.fontList=l.querySelectorAll("ul li button"),e.initMenuTarget(this.name,t,l),l=null},setSubmenu:function(e){const t=e.options,i=e.lang,n=e.util.createElement("DIV");let l,o,s,a;n.className="ke-submenu ke-list-layer ke-list-font-family";const r=t.font?t.font:["Arial","Comic Sans MS","Courier New","Impact","Georgia","tahoma","Trebuchet MS","Verdana"];let c='<div class="ke-list-inner"><ul class="ke-list-basic"><li><button type="button" class="default_value ke-btn-list" title="'+i.toolbar.default+'">('+i.toolbar.default+")</button></li>";for(s=0,a=r.length;s<a;s++)l=r[s],o=l.split(",")[0],c+='<li><button type="button" class="ke-btn-list" data-value="'+l+'" data-txt="'+o+'" title="'+o+'" style="font-family:'+l+';">'+o+"</button></li>";return c+="</ul></div>",n.innerHTML=c,n},active:function(e){const t=this.context.font.targetText.firstElementChild,i=this.context.font.targetTooltip,n=this.context.font.icon;if(e){if(e.style&&e.style.fontFamily.length>0){const n=e.style.fontFamily.replace(/["']/g,"");return this.util.changeElement(t,`<span>${n}</span>`),this.util.changeTxt(i,this.lang.toolbar.font+" ("+n+")"),!0}}else{const e=this.hasFocus?this.wwComputedStyle.fontFamily?`<span>${JSON.parse(this.wwComputedStyle.fontFamily)}</span>`:"":n;this.util.changeElement(t,e);const l=this.hasFocus?this.wwComputedStyle.fontFamily?JSON.parse(this.wwComputedStyle.fontFamily):"":this.lang.toolbar.font;this.util.changeTxt(i,this.hasFocus?this.lang.toolbar.font+" ("+l+")":l)}return!1},on:function(){const e=this.context.font,t=e.fontList,i=e.targetText.textContent;if(i!==e.currentFont){for(let e=0,n=t.length;e<n;e++)i===t[e].getAttribute("data-value")?this.util.addClass(t[e],"active"):this.util.removeClass(t[e],"active");e.currentFont=i}},pickup:function(e){if(!/^BUTTON$/i.test(e.target.tagName))return!1;e.preventDefault(),e.stopPropagation();const t=e.target.getAttribute("data-value");if(t){const e=this.util.createElement("SPAN");e.style.fontFamily=t,this.nodeChange(e,["font-family"],null,null)}else this.nodeChange(null,["font-family"],["span"],!0);this.submenuOff()}},t={name:"colorPicker",add:function(e){const t=e.context;t.colorPicker={colorListHTML:"",colorInput:"",defaultColor:"#000",styleProperty:"color",currentColor:"",colorList:[]},t.colorPicker.colorListHTML=this.createColorList(e,this.makeColorList)},createColorList:function(e,t){const i=e.options,n=e.lang,l=i.colorList&&0!==i.colorList.length?i.colorList:["#ff0000","#ff5e00","#ffe400","#abf200","#00d8ff","#0055ff","#6600ff","#ff00dd","#000000","#ffd8d8","#fae0d4","#faf4c0","#e4f7ba","#d4f4fa","#d9e5ff","#e8d9ff","#ffd9fa","#f1f1f1","#ffa7a7","#ffc19e","#faed7d","#cef279","#b2ebf4","#b2ccff","#d1b2ff","#ffb2f5","#bdbdbd","#f15f5f","#f29661","#e5d85c","#bce55c","#5cd1e5","#6699ff","#a366ff","#f261df","#8c8c8c","#980000","#993800","#998a00","#6b9900","#008299","#003399","#3d0099","#990085","#353535","#670000","#662500","#665c00","#476600","#005766","#002266","#290066","#660058","#222222"];let o=[],s='<div class="ke-list-inner">';for(let a,r=0,c=l.length;r<c;r++)a=l[r],a&&("string"===typeof a&&(o.push(a),r<c-1)||(o.length>0&&(s+='<div class="ke-selector-color">'+t(o)+"</div>",o=[]),"object"===typeof a&&(s+='<div class="ke-selector-color">'+t(a)+"</div>")));return s+='<form class="ke-submenu-form-group"><input type="text" maxlength="9" class="_ke_color_picker_input ke-color-input"/><button type="submit" class="ke-btn-primary _ke_color_picker_submit" title="'+n.dialogBox.submitButton+'">'+e.icons.checked+'</button><button type="button" class="ke-btn _ke_color_picker_remove" title="'+n.toolbar.removeFormat+'">'+e.icons.erase+"</button></form></div>",s},makeColorList:function(e){let t="";t+='<ul class="ke-color-pallet">';for(let i,n=0,l=e.length;n<l;n++)i=e[n],"string"===typeof i&&(t+='<li><button type="button" data-value="'+i+'" title="'+i+'" style="background-color:'+i+';"></button></li>');return t+="</ul>",t},init:function(e,t){const i=this.plugins.colorPicker;let n=t||(i.getColorInNode.call(this,e)||this.context.colorPicker.defaultColor);n=i.isHexColor(n)?n:i.rgb2hex(n)||n;const l=this.context.colorPicker.colorList;if(l)for(let o=0,s=l.length;o<s;o++)n.toLowerCase()===l[o].getAttribute("data-value").toLowerCase()?this.util.addClass(l[o],"active"):this.util.removeClass(l[o],"active");i.setInputText.call(this,i.colorName2hex.call(this,n))},setCurrentColor:function(e){this.context.colorPicker.currentColor=e,this.context.colorPicker.colorInput.style.borderColor=e},setInputText:function(e){e=/^#/.test(e)?e:"#"+e,this.context.colorPicker.colorInput.value=e,this.plugins.colorPicker.setCurrentColor.call(this,e)},getColorInNode:function(e){let t="";const i=this.context.colorPicker.styleProperty;for(;e&&!this.util.isWysiwygDiv(e)&&0===t.length;)1===e.nodeType&&e.style[i]&&(t=e.style[i]),e=e.parentNode;return t},isHexColor:function(e){return/^#[0-9a-f]{3}(?:[0-9a-f]{3})?$/i.test(e)},rgb2hex:function(e){const t=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return t&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""},colorName2hex:function(e){if(/^#/.test(e))return e;const t=this.util.createElement("div");t.style.display="none",t.style.color=e;const i=this._window.getComputedStyle(this._document.body.appendChild(t)).color.match(/\d+/g).map((function(e){return parseInt(e,10)}));return this.util.removeItem(t),i.length>=3&&"#"+((1<<24)+(i[0]<<16)+(i[1]<<8)+i[2]).toString(16).substr(1)}},i={name:"fontColor",display:"submenu",add:function(e,i){e.addModule([t]);const n=e.context;n.fontColor={previewEl:null,colorInput:null,colorList:null};let l=this.setSubmenu(e);n.fontColor.colorInput=l.querySelector("._ke_color_picker_input"),n.fontColor.colorInput.addEventListener("keyup",this.onChangeInput.bind(e)),l.querySelector("._ke_color_picker_submit").addEventListener("click",this.submit.bind(e)),l.querySelector("._ke_color_picker_remove").addEventListener("click",this.remove.bind(e)),l.addEventListener("click",this.pickup.bind(e)),n.fontColor.colorList=l.querySelectorAll("li button"),e.initMenuTarget(this.name,i,l),l=null},setSubmenu:function(e){const t=e.context.colorPicker.colorListHTML,i=e.util.createElement("DIV");return i.className="ke-submenu ke-list-layer",i.innerHTML=t,i},on:function(){const e=this.context.colorPicker,t=this.context.fontColor;e.colorInput=t.colorInput;const i=this.wwComputedStyle.color;e.defaultColor=i?this.plugins.colorPicker.isHexColor(i)?i:this.plugins.colorPicker.rgb2hex(i):"#333333",e.styleProperty="color",e.colorList=t.colorList,this.plugins.colorPicker.init.call(this,this.getSelectionNode(),null)},onChangeInput:function(e){this.plugins.colorPicker.setCurrentColor.call(this,e.target.value)},submit:function(){this.plugins.fontColor.applyColor.call(this,this.context.colorPicker.currentColor)},pickup:function(e){e.preventDefault(),e.stopPropagation(),this.plugins.fontColor.applyColor.call(this,e.target.getAttribute("data-value"))},remove:function(){this.nodeChange(null,["color"],["span"],!0),this.submenuOff()},applyColor:function(e){if(!e)return;const t=this.util.createElement("SPAN");t.style.color=e,this.nodeChange(t,["color"],null,null),this.submenuOff()}},n={name:"hiliteColor",display:"submenu",add:function(e,i){e.addModule([t]);const n=e.context;n.hiliteColor={previewEl:null,colorInput:null,colorList:null};let l=this.setSubmenu(e);n.hiliteColor.colorInput=l.querySelector("._ke_color_picker_input"),n.hiliteColor.colorInput.addEventListener("keyup",this.onChangeInput.bind(e)),l.querySelector("._ke_color_picker_submit").addEventListener("click",this.submit.bind(e)),l.querySelector("._ke_color_picker_remove").addEventListener("click",this.remove.bind(e)),l.addEventListener("click",this.pickup.bind(e)),n.hiliteColor.colorList=l.querySelectorAll("li button"),e.initMenuTarget(this.name,i,l),l=null},setSubmenu:function(e){const t=e.context.colorPicker.colorListHTML,i=e.util.createElement("DIV");return i.className="ke-submenu ke-list-layer",i.innerHTML=t,i},on:function(){const e=this.context.colorPicker,t=this.context.hiliteColor;e.colorInput=t.colorInput;const i=this.wwComputedStyle.backgroundColor;e.defaultColor=i?this.plugins.colorPicker.isHexColor(i)?i:this.plugins.colorPicker.rgb2hex(i):"#ffffff",e.styleProperty="backgroundColor",e.colorList=t.colorList,this.plugins.colorPicker.init.call(this,this.getSelectionNode(),null)},onChangeInput:function(e){this.plugins.colorPicker.setCurrentColor.call(this,e.target.value)},submit:function(){this.plugins.hiliteColor.applyColor.call(this,this.context.colorPicker.currentColor)},pickup:function(e){e.preventDefault(),e.stopPropagation(),this.plugins.hiliteColor.applyColor.call(this,e.target.getAttribute("data-value"))},remove:function(){this.nodeChange(null,["background-color"],["span"],!0),this.submenuOff()},applyColor:function(e){if(!e)return;const t=this.util.createElement("SPAN");t.style.backgroundColor=e,this.nodeChange(t,["background-color"],null,null),this.submenuOff()}},l={name:"template",display:"submenu",add:function(e,t){e.context.template={};let i=this.setSubmenu(e);i.querySelector("ul").addEventListener("click",this.pickup.bind(e)),e.initMenuTarget(this.name,t,i),i=null},setSubmenu:function(e){const t=e.options.templates;if(!t||0===t.length)throw Error('[KothingEditor.plugins.template.fail] To use the "template" plugin, please define the "templates" option.');const i=e.util.createElement("DIV");i.className="ke-list-layer";let n='<div class="ke-submenu ke-list-inner"><ul class="ke-list-basic">';for(let l,o=0,s=t.length;o<s;o++)l=t[o],n+='<li><button type="button" class="ke-btn-list" data-value="'+o+'" title="'+l.name+'">'+l.name+"</button></li>";return n+="</ul></div>",i.innerHTML=n,i},pickup:function(e){if(!/^BUTTON$/i.test(e.target.tagName))return!1;e.preventDefault(),e.stopPropagation();const t=this.options.templates[e.target.getAttribute("data-value")];if(!t.html)throw this.submenuOff(),Error('[KothingEditor.template.fail] cause : "templates[i].html not found"');this.setContents(t.html),this.submenuOff()}};const o={_document:document,_window:window,isIE:navigator.userAgent.indexOf("Trident")>-1,isIE_Edge:navigator.userAgent.indexOf("Trident")>-1||navigator.appVersion.indexOf("Edge")>-1,isOSX_IOS:/(Mac|iPhone|iPod|iPad)/.test(navigator.platform),allowedEmptyNodeList:".ke-component, pre, blockquote, hr, li, table, img, iframe, video, audio, canvas",typeOf:function(e){return{"[object String]":"string","[object Number]":"number","[object Boolean]":"boolean","[object Array]":"array","[object Object]":"object","[object Function]":"function","[object Undefined]":"undefined","[object Null]":"null","[object Date]":"date","[object Symbol]":"symbol","[object RegExp]":"regExp","[object Error]":"error","[object HTMLDocument]":"document","[object Window]":"window"}[Object.prototype.toString.call(e)]},getXMLHttpRequest:function(){if(!this._window.ActiveXObject)return this._window.XMLHttpRequest?new XMLHttpRequest:null;try{return new this._window.ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{return new this._window.ActiveXObject("Microsoft.XMLHTTP")}catch(t){return null}}},createElement:function(e){return this._document.createElement(e)},createTextNode:function(e){return this._document.createTextNode(e||"")},HTMLEncoder:function(e){const t={"<":"$lt;",">":"$gt;"};return e.replace(/<|>/g,(function(e){return"string"===typeof t[e]?t[e]:e}))},HTMLDecoder:function(e){const t={"$lt;":"<","$gt;":">"};return e.replace(/\$lt;|\$gt;/g,(function(e){return"string"===typeof t[e]?t[e]:e}))},HTMLConvertor:function(e){const t={"&":"&amp;","\xa0":"&nbsp;","'":"&apos;",'"':"&quot;","<":"&lt;",">":"&gt;"};return e.replace(/&|\u00A0|'|"|<|>/g,(function(e){return"string"===typeof t[e]?t[e]:e}))},zeroWidthSpace:String.fromCharCode(8203),zeroWidthRegExp:new RegExp(String.fromCharCode(8203),"g"),onlyZeroWidthRegExp:new RegExp("^"+String.fromCharCode(8203)+"+$"),onlyZeroWidthSpace:function(e){return"string"!==typeof e&&(e=e.textContent),""===e||this.onlyZeroWidthRegExp.test(e)},hasOwn:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},getIncludePath:function(e,t){let i="";const n=[],l="js"===t?"script":"link",o="js"===t?"src":"href";let s="(:";for(let c=0,d=e.length;c<d;c++)s+=e[c]+(c<d-1?"|":")");const a=new this._window.RegExp("(^|.*[\\/])"+s+"(\\.[^\\/]+)?."+t+"(:\\?.*|;.*)?$","i"),r=new this._window.RegExp(".+\\."+t+"(:\\?.*|;.*)?$","i");for(let c=this._document.getElementsByTagName(l),d=0;d<c.length;d++)r.test(c[d][o])&&n.push(c[d]);for(let c=0;c<n.length;c++){let e=n[c][o].match(a);if(e){i=e[0];break}}if(""===i&&(i=n.length>0?n[0][o]:""),-1===i.indexOf(":/")&&"//"!==i.slice(0,2)&&(i=0===i.indexOf("/")?location.href.match(/^.*:\/\/[^\/]*/)[0]+i:location.href.match(/^[^\?]*\/(:)/)[0]+i),!i)throw"[KothingEditor.util.getIncludePath.fail] The KothingEditor installation path could not be automatically detected. (name: +"+name+", extension: "+t+")";return i},getPageStyle:function(e){let t="";const i=(e||this._document).styleSheets;for(let l,o=0,s=i.length;o<s;o++){try{l=i[o].cssRules}catch(n){continue}if(l)for(let e=0,i=l.length;e<i;e++)t+=l[e].cssText}return t},getIframeDocument:function(e){let t=e.contentWindow||e.contentDocument;return t.document&&(t=t.document),t},getAttributesToString:function(e,t){if(!e.attributes)return"";const i=e.attributes;let n="";for(let l=0,o=i.length;l<o;l++)t&&t.indexOf(i[l].name)>-1||(n+=i[l].name+'="'+i[l].value+'" ');return n},getByteLength:function(e){if(!e||!e.toString)return 0;e=e.toString();const t=this._window.encodeURIComponent;let i,n;return this.isIE_Edge?(n=this._window.unescape(t(e)).length,i=0,null!==t(e).match(/(%0A|%0D)/gi)&&(i=t(e).match(/(%0A|%0D)/gi).length),n+i):(n=new this._window.TextEncoder("utf-8").encode(e).length,i=0,null!==t(e).match(/(%0A|%0D)/gi)&&(i=t(e).match(/(%0A|%0D)/gi).length),n+i)},isWysiwygDiv:function(e){return e&&1===e.nodeType&&(this.hasClass(e,"ke-wrapper-wysiwyg")||/^BODY$/i.test(e.nodeName))},isNonEditable:function(e){return e&&1===e.nodeType&&"false"===e.getAttribute("contenteditable")},isTextStyleElement:function(e){return e&&3!==e.nodeType&&/^(strong|span|font|b|var|i|em|u|ins|s|strike|del|sub|sup|mark|a|label|code)$/i.test(e.nodeName)},isFormatElement:function(e){return e&&1===e.nodeType&&(/^(P|DIV|H[1-6]|PRE|LI|TH|TD)$/i.test(e.nodeName)||this.hasClass(e,"(\\s|^)__ke__format__replace_.+(\\s|$)|(\\s|^)__ke__format__free_.+(\\s|$)"))&&!this.isComponent(e)&&!this.isWysiwygDiv(e)},isRangeFormatElement:function(e){return e&&1===e.nodeType&&(/^(BLOCKQUOTE|OL|UL|FIGCAPTION|TABLE|THEAD|TBODY|TR|TH|TD)$/i.test(e.nodeName)||this.hasClass(e,"(\\s|^)__ke__format__range_.+(\\s|$)"))},isClosureRangeFormatElement:function(e){return e&&1===e.nodeType&&(/^(TH|TD)$/i.test(e.nodeName)||this.hasClass(e,"(\\s|^)__ke__format__range__closure_.+(\\s|$)"))},isFreeFormatElement:function(e){return e&&1===e.nodeType&&(/^PRE$/i.test(e.nodeName)||this.hasClass(e,"(\\s|^)__ke__format__free_.+(\\s|$)"))&&!this.isComponent(e)&&!this.isWysiwygDiv(e)},isClosureFreeFormatElement:function(e){return e&&1===e.nodeType&&this.hasClass(e,"(\\s|^)__ke__format__free__closure_.+(\\s|$)")},isComponent:function(e){return e&&(/ke-component/.test(e.className)||/^(TABLE|HR)$/.test(e.nodeName))},isUneditableComponent:function(e){return e&&this.hasClass(e,"__ke__uneditable")},isMediaComponent:function(e){return e&&/ke-component/.test(e.className)},isNotCheckingNode:function(e){return e&&/katex|__ke__tag/.test(e.className)},getFormatElement:function(e,t){if(!e)return null;for(t||(t=function(){return!0});e;){if(this.isWysiwygDiv(e))return null;if(this.isRangeFormatElement(e)&&e.firstElementChild,this.isFormatElement(e)&&t(e))return e;e=e.parentNode}return null},getRangeFormatElement:function(e,t){if(!e)return null;for(t||(t=function(){return!0});e;){if(this.isWysiwygDiv(e))return null;if(this.isRangeFormatElement(e)&&!/^(THEAD|TBODY|TR)$/i.test(e.nodeName)&&t(e))return e;e=e.parentNode}return null},getFreeFormatElement:function(e,t){if(!e)return null;for(t||(t=function(){return!0});e;){if(this.isWysiwygDiv(e))return null;if(this.isFreeFormatElement(e)&&t(e))return e;e=e.parentNode}return null},getClosureFreeFormatElement:function(e,t){if(!e)return null;for(t||(t=function(){return!0});e;){if(this.isWysiwygDiv(e))return null;if(this.isClosureFreeFormatElement(e)&&t(e))return e;e=e.parentNode}return null},copyTagAttributes:function(e,t){t.style.cssText&&(e.style.cssText+=t.style.cssText);const i=t.classList;for(let n=0,l=i.length;n<l;n++)this.addClass(e,i[n]);e.style.cssText||e.removeAttribute("style"),e.className.trim()||e.removeAttribute("class")},copyFormatAttributes:function(e,t){(t=t.cloneNode(!1)).className=t.className.replace(/(\s|^)__ke__format__[^\s]+/g,""),this.copyTagAttributes(e,t)},getArrayItem:function(e,t,i){if(!e||0===e.length)return null;t=t||function(){return!0};const n=[];for(let l,o=0,s=e.length;o<s;o++)if(l=e[o],t(l)){if(!i)return l;n.push(l)}return i?n:null},getArrayIndex:function(e,t){let i=-1;for(let n=0,l=e.length;n<l;n++)if(e[n]===t){i=n;break}return i},nextIdx:function(e,t){let i=this.getArrayIndex(e,t);return-1===i?-1:i+1},prevIdx:function(e,t){let i=this.getArrayIndex(e,t);return-1===i?-1:i-1},getPositionIndex:function(e){let t=0;for(;e=e.previousSibling;)t+=1;return t},getNodePath:function(e,t,i){const n=[];let l=!0;return this.getParentElement(e,function(e){if(e===t&&(l=!1),l&&!this.isWysiwygDiv(e)){if(i&&3===e.nodeType){let t=null,n=null;i.s=i.e=0;let l=e.previousSibling;for(;l&&3===l.nodeType;)n=l.textContent.replace(this.zeroWidthRegExp,""),i.s+=n.length,e.textContent=n+e.textContent,t=l,l=l.previousSibling,this.removeItem(t);let o=e.nextSibling;for(;o&&3===o.nodeType;)n=o.textContent.replace(this.zeroWidthRegExp,""),i.e+=n.length,e.textContent+=n,t=o,o=o.nextSibling,this.removeItem(t)}n.push(e)}return!1}.bind(this)),n.map((e=>this.getPositionIndex(e))).reverse()},getNodeFromPath:function(e,t){let i,n=t;for(let l=0,o=e.length;l<o&&(i=n.childNodes,0!==i.length);l++)n=i.length<=e[l]?i[i.length-1]:i[e[l]];return n},isSameAttributes:function(e,t){if(3===e.nodeType&&3===t.nodeType)return!0;if(3===e.nodeType||3===t.nodeType)return!1;const i=e.style,n=t.style;let l=0;for(let c=0,d=i.length;c<d;c++)i[i[c]]===n[i[c]]&&l++;const o=e.classList,s=t.classList,a=this._window.RegExp;let r=0;for(let c=0,d=o.length;c<d;c++)a("(s|^)"+o[c]+"(s|$)").test(s.value)&&r++;return l===n.length&&l===i.length&&r===s.length&&r===o.length},isEmptyLine:function(e){return!e||!e.parentNode||!e.querySelector("IMG, IFRAME, AUDIO, VIDEO, CANVAS, TABLE")&&this.onlyZeroWidthSpace(e.textContent)},isList:function(e){return e&&/^(OL|UL)$/i.test("string"===typeof e?e:e.nodeName)},isListCell:function(e){return e&&/^LI$/i.test("string"===typeof e?e:e.nodeName)},isTable:function(e){return e&&/^(TABLE|THEAD|TBODY|TR|TH|TD)$/i.test("string"===typeof e?e:e.nodeName)},isCell:function(e){return e&&/^(TD|TH)$/i.test("string"===typeof e?e:e.nodeName)},isBreak:function(e){return e&&/^BR$/i.test("string"===typeof e?e:e.nodeName)},isAnchor:function(e){return e&&/^A$/i.test("string"===typeof e?e:e.nodeName)},isMedia:function(e){return e&&/^(IMG|IFRAME|AUDIO|VIDEO|CANVAS)$/i.test("string"===typeof e?e:e.nodeName)},isNumber:function(e){return!!e&&/^-?\d+(\.\d+)?$/.test(e+"")},getNumber:function(e,t){if(!e)return 0;let i=(e+"").match(/-?\d+(\.\d+)?/);if(!i||!i[0])return 0;let n=Number(i[0]);return t<0?1*n:0===t?this._window.Math.round(1*n):(1*n).toFixed(t)},getListChildren:function(e,t){const i=[];return e&&e.children&&0!==e.children.length?(t=t||function(){return!0},function n(l){if(e!==l&&t(l)&&i.push(l),l.children)for(let e=0,t=l.children.length;e<t;e++)n(l.children[e])}(e),i):i},getListChildNodes:function(e,t){const i=[];return e&&0!==e.childNodes.length?(t=t||function(){return!0},function n(l){e!==l&&t(l)&&i.push(l);for(let e=0,t=l.childNodes.length;e<t;e++)n(l.childNodes[e])}(e),i):i},getElementDepth:function(e){if(!e||this.isWysiwygDiv(e))return-1;let t=0;for(e=e.parentNode;e&&!this.isWysiwygDiv(e);)t+=1,e=e.parentNode;return t},compareElements:function(e,t){let i=e,n=t;for(;i&&n&&i.parentNode!==n.parentNode;)i=i.parentNode,n=n.parentNode;if(!i||!n)return{ancestor:null,a:e,b:t,result:0};const l=i.parentNode.childNodes,o=this.getArrayIndex(l,i),s=this.getArrayIndex(l,n);return{ancestor:i.parentNode,a:i,b:n,result:o>s?1:o<s?-1:0}},getParentElement:function(e,t){let i;if("function"===typeof t)i=t;else{let e;/^\./.test(t)?(e="className",t=t.split(".")[1]):/^#/.test(t)?(e="id",t="^"+t.split("#")[1]+"$"):/^:/.test(t)?(e="name",t="^"+t.split(":")[1]+"$"):(e="nodeName",t="^"+t+"$");const n=new this._window.RegExp(t,"i");i=function(t){return n.test(t[e])}}for(;e&&!i(e);){if(this.isWysiwygDiv(e))return null;e=e.parentNode}return e},getChildElement:function(e,t,i){let n;if("function"===typeof t)n=t;else{let e;/^\./.test(t)?(e="className",t=t.split(".")[1]):/^#/.test(t)?(e="id",t="^"+t.split("#")[1]+"$"):/^:/.test(t)?(e="name",t="^"+t.split(":")[1]+"$"):(e="nodeName",t="^"+("text"===t?"#"+t:t)+"$");const i=new this._window.RegExp(t,"i");n=function(t){return i.test(t[e])}}const l=this.getListChildNodes(e,(function(e){return n(e)}));return l[i?l.length-1:0]},getEdgeChildNodes:function(e,t){if(e){for(t||(t=e);e&&1===e.nodeType&&e.childNodes.length>0&&!this.isBreak(e);)e=e.firstChild;for(;t&&1===t.nodeType&&t.childNodes.length>0&&!this.isBreak(t);)t=t.lastChild;return{sc:e,ec:t||e}}},getOffset:function(e,t){let i=0,n=0,l=3===e.nodeType?e.parentElement:e;const o=this.getParentElement(e,this.isWysiwygDiv.bind(this));for(;l&&!this.hasClass(l,"ke-container")&&l!==o;)i+=l.offsetLeft,n+=l.offsetTop,l=l.offsetParent;const s=t&&/iframe/i.test(t.nodeName);return{left:i+(s?t.parentElement.offsetLeft:0),top:n-(o?o.scrollTop:0)+(s?t.parentElement.offsetTop:0)}},getOverlapRangeAtIndex:function(e,t,i,n){if(e<=n?t<i:t>i)return 0;const l=(e>i?e:i)-(t<n?t:n);return(l<0?-1*l:l)+1},changeTxt:function(e,t){e&&t&&(e.textContent=t)},changeElement:function(e,t){if("string"===typeof t)if(e.outerHTML)e.outerHTML=t;else{const i=this.createElement("DIV");i.innerHTML=t,e.parentNode.replaceChild(i.firstChild,e)}else 1===t.nodeType&&e.parentNode.replaceChild(t,e)},setStyle:function(e,t,i){e.style[t]=i,i||e.style.cssText||e.removeAttribute("style")},hasClass:function(e,t){if(e)return new this._window.RegExp(t).test(e.className)},addClass:function(e,t){if(!e)return;new this._window.RegExp("(\\s|^)"+t+"(\\s|$)").test(e.className)||(e.className+=(e.className.length>0?" ":"")+t)},removeClass:function(e,t){if(!e)return;const i=new this._window.RegExp("(\\s|^)"+t+"(\\s|$)");e.className=e.className.replace(i," ").trim(),e.className.trim()||e.removeAttribute("class")},toggleClass:function(e,t){if(!e)return;let i=!1;const n=new this._window.RegExp("(\\s|^)"+t+"(\\s|$)");return n.test(e.className)?e.className=e.className.replace(n," ").trim():(e.className+=" "+t,i=!0),e.className.trim()||e.removeAttribute("class"),i},setDisabledButtons:function(e,t){for(let i=0,n=t.length;i<n;i++)t[i].disabled=e},removeItem:function(e){e&&("function"===typeof e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e))},removeItemAllParents:function(e,t,i){if(!e)return null;let n=null;return t||(t=function(e){if(e===i||this.isComponent(e))return!1;const t=e.textContent.trim();return 0===t.length||/^(\n|\u200B)+$/.test(t)}.bind(this)),function e(i){if(!o.isWysiwygDiv(i)){const l=i.parentNode;l&&t(i)&&(n={sc:i.previousElementSibling,ec:i.nextElementSibling},o.removeItem(i),e(l))}}(e),n},detachNestedList:function(e,t){const i=this.deleteNestedList(e);let n,l,o;if(i){n=i.cloneNode(!1),l=i.childNodes;const t=this.getPositionIndex(e);for(;l[t];)n.appendChild(l[t])}else n=e;if(t)o=this.getListChildren(n,function(e){return this.isListCell(e)&&!e.previousElementSibling}.bind(this));else{const t=this.getElementDepth(e)+2;o=this.getListChildren(e,function(e){return this.isListCell(e)&&!e.previousElementSibling&&this.getElementDepth(e)===t}.bind(this))}for(let s=0,a=o.length;s<a;s++)this.deleteNestedList(o[s]);return i&&(i.parentNode.insertBefore(n,i.nextSibling),l&&0===l.length&&this.removeItem(i)),n===e?n.parentNode:n},deleteNestedList:function(e){const t=e.parentNode;let i,n,l,o,s,a=t,r=a.parentNode;for(;this.isListCell(r);){for(o=this.getPositionIndex(e),i=r.nextElementSibling,n=r.parentNode,l=a;l;){if(a=a.nextSibling,this.isList(l)){for(s=l.childNodes;s[o];)n.insertBefore(s[o],i);0===s.length&&this.removeItem(l)}else n.appendChild(l);l=a}a=n,r=n.parentNode}return 0===t.children.length&&this.removeItem(t),n},splitElement:function(e,t,i){const n=e.parentNode;let l,s,a,r=0,c=!0;if((!i||i<0)&&(i=0),3===e.nodeType){if(r=this.getPositionIndex(e),t>=0){e.splitText(t);const i=this.getNodeFromPath([r+1],n);this.onlyZeroWidthSpace(i)&&(i.data=this.zeroWidthSpace)}}else 1===e.nodeType&&(e.previousSibling?e=e.previousSibling:this.getElementDepth(e)===i&&(c=!1));let d=e;for(;this.getElementDepth(d)>i;)for(r=this.getPositionIndex(d)+1,d=d.parentNode,a=l,l=d.cloneNode(!1),s=d.childNodes,a&&(this.isListCell(l)&&this.isList(a)&&a.firstElementChild?(l.innerHTML=a.firstElementChild.innerHTML,o.removeItem(a.firstElementChild),a.children.length>0&&l.appendChild(a)):l.appendChild(a));s[r];)l.appendChild(s[r]);d.childNodes.length<=1&&(!d.firstChild||0===d.firstChild.textContent.length)&&(d.innerHTML="<br>");const u=d.parentNode;return c&&(d=d.nextSibling),l?(this.mergeSameTags(l,null,!1),this.mergeNestedTags(l,function(e){return this.isList(e)}.bind(this)),l.childNodes.length>0?u.insertBefore(l,d):l=d,0===n.childNodes.length&&this.removeItem(n),l):d},mergeSameTags:function(e,t,i){const n=this,l=t?t.length:0;let o=null;return l&&(o=this._window.Array.apply(null,new this._window.Array(l)).map(this._window.Number.prototype.valueOf,0)),function e(s,a,r){const c=s.childNodes;for(let d,u,h=0,g=c.length;h<g&&(d=c[h],u=c[h+1],d);h++)if(i&&n.isIgnoreNodeChange(d)||!i&&(n.isTable(d)||n.isListCell(d)||n.isFormatElement(d)&&!n.isFreeFormatElement(d)))(n.isTable(d)||n.isListCell(d))&&e(d,a+1,h);else{if(1===g&&s.nodeName===d.nodeName&&s.parentNode){if(l){let e,i,o,r,c;for(let u=0;u<l;u++)if(e=t[u],e&&e[a]===h){for(i=d,o=s,r=a,c=!0;r>=0;){if(n.getArrayIndex(o.childNodes,i)!==e[r]){c=!1;break}i=d.parentNode,o=i.parentNode,r--}c&&(e.splice(a,1),e[a]=h)}}n.copyTagAttributes(d,s),s.parentNode.insertBefore(d,s),n.removeItem(s)}if(!u){1===d.nodeType&&e(d,a+1,h);break}if(d.nodeName===u.nodeName&&n.isSameAttributes(d,u)&&d.href===u.href){const e=d.childNodes;let i=0;for(let t=0,n=e.length;t<n;t++)e[t].textContent.length>0&&i++;const s=d.lastChild,c=u.firstChild;let g=0;if(s&&c){const e=3===s.nodeType&&3===c.nodeType;g=s.textContent.length;let n=s.previousSibling;for(;n&&3===n.nodeType;)g+=n.textContent.length,n=n.previousSibling;if(i>0&&3===s.nodeType&&3===c.nodeType&&(s.textContent.length>0||c.textContent.length>0)&&i--,l){let n=null;for(let d=0;d<l;d++)if(n=t[d],n&&n[a]>h){if(a>0&&n[a-1]!==r)continue;n[a]-=1,n[a+1]>=0&&n[a]===h&&(n[a+1]+=i,e&&s&&3===s.nodeType&&c&&3===c.nodeType&&(o[d]+=g))}}}if(3===d.nodeType){if(g=d.textContent.length,d.textContent+=u.textContent,l){let e=null;for(let n=0;n<l;n++)if(e=t[n],e&&e[a]>h){if(a>0&&e[a-1]!==r)continue;e[a]-=1,e[a+1]>=0&&e[a]===h&&(e[a+1]+=i,o[n]+=g)}}}else d.innerHTML+=u.innerHTML;n.removeItem(u),h--}else 1===d.nodeType&&e(d,a+1,h)}}(e,0,0),o},mergeNestedTags:function(e,t){"string"===typeof t?t=function(e){return this.test(e.tagName)}.bind(new this._window.RegExp("^("+(t||".+")+")$","i")):"function"!==typeof t&&(t=function(){return!0}),function e(i){let n=i.children,l="function"!==typeof t||t(i);if(1===n.length&&n[0].nodeName===i.nodeName&&l){const e=n[0];for(n=e.children;n[0];)i.appendChild(n[0]);i.removeChild(e)}for(let t=0,o=i.children.length;t<o;t++)e(i.children[t])}(e)},removeEmptyNode:function(e,t){const i=this;t&&(t=i.getParentElement(t,(function(t){return e===t.parentElement}))),function n(l){if(i.notTextNode(l)||l===t||i.isNonEditable(l))return 0;if(l===e||!i.onlyZeroWidthSpace(l.textContent)||l.firstChild&&i.isBreak(l.firstChild)||l.querySelector(i.allowedEmptyNodeList)){const e=l.children;for(let t=0,l=e.length,o=0;t<l;t++)e[t+o]&&!i.isComponent(e[t+o])&&(o+=n(e[t+o]))}else if(l.parentNode)return l.parentNode.removeChild(l),-1;return 0}(e),0===e.childNodes.length&&(e.innerHTML="<br>")},htmlRemoveWhiteSpace:function(e){return e?e.trim().replace(/<\/?(?!strong|span|font|b|var|i|em|u|ins|s|strike|del|sub|sup|mark|a|label|code)[^>^<]+>\s+(?=<)/gi,(function(e){return e.trim()})):""},sortByDepth:function(e,t){const i=t?1:-1,n=-1*i;e.sort(function(e,t){return this.isListCell(e)&&this.isListCell(t)?(e=this.getElementDepth(e))>(t=this.getElementDepth(t))?i:e<t?n:0:0}.bind(this))},isIgnoreNodeChange:function(e){return e&&3!==e.nodeType&&(this.isNonEditable(e)||!this.isTextStyleElement(e))},isMaintainedNode:function(e){return e&&3!==e.nodeType&&/^(a|label|code)$/i.test("string"===typeof e?e:e.nodeName)},isSizeNode:function(e){return e&&3!==e.nodeType&&this.isTextStyleElement(e)&&!!e.style.fontSize},notTextNode:function(e){return e&&3!==e.nodeType&&(this.isComponent(e)||/^(br|input|select|canvas|img|iframe|audio|video)$/i.test("string"===typeof e?e:e.nodeName))},disallowedTags:function(e){return/^(meta|script|link|style|[a-z]+\:[a-z]+)$/i.test(e.nodeName)},createTagsWhitelist:function(e){return new RegExp("<\\/?\\b(?!\\b"+e.replace(/\|/g,"\\b|\\b")+"\\b)[^>]*>","gi")},consistencyCheckOfHTML:function(e,t){const i=[],n=[],l=[],o=[],s=this.getListChildNodes(e,function(s){if(1!==s.nodeType)return!1;if(!t.test(s.nodeName)&&0===s.childNodes.length&&this.isNotCheckingNode(s))return i.push(s),!1;const a=!this.getParentElement(s,this.isNotCheckingNode);if(!this.isTable(s)&&!this.isListCell(s)&&(this.isFormatElement(s)||this.isRangeFormatElement(s)||this.isTextStyleElement(s))&&0===s.childNodes.length&&a)return n.push(s),!1;if(this.isList(s.parentNode)&&!this.isList(s)&&!this.isListCell(s))return l.push(s),!1;if(this.isCell(s)){const e=s.firstElementChild;if(!this.isFormatElement(e)&&!this.isRangeFormatElement(e)&&!this.isComponent(e))return o.push(s),!1}return s.parentNode!==e&&(this.isFormatElement(s)||this.isComponent(s)||this.isList(s))&&!this.isRangeFormatElement(s.parentNode)&&!this.isListCell(s.parentNode)&&!this.getParentElement(s,this.isComponent)&&a}.bind(this));for(let r=0,c=i.length;r<c;r++)this.removeItem(i[r]);const a=[];for(let r,c,d=0,u=s.length;d<u;d++)r=s[d],c=r.parentNode,c&&c.parentNode&&(c.parentNode.insertBefore(r,c),a.push(c));for(let r,c=0,d=a.length;c<d;c++)r=a[c],this.onlyZeroWidthSpace(r.textContent.trim())&&this.removeItem(r);for(let r=0,c=n.length;r<c;r++)this.removeItem(n[r]);for(let r,c,d,u,h=0,g=l.length;h<g;h++){for(r=l[h],c=this.createElement("LI"),d=r.childNodes;d[0];)c.appendChild(d[0]);u=r.parentNode,u&&(u.insertBefore(c,r),this.removeItem(r))}for(let r,c,d=0,u=o.length;d<u;d++)r=o[d],c=this.createElement("DIV"),c.innerHTML=0===r.textContent.trim().length&&0===r.children.length?"<br>":r.innerHTML,r.innerHTML=c.outerHTML},setDefaultOptionStyle:function(e,t){let i="";e.height&&(i+="height:"+e.height+";"),e.minHeight&&(i+="min-height:"+e.minHeight+";"),e.maxHeight&&(i+="max-height:"+e.maxHeight+";"),e.position&&(i+="position:"+e.position+";"),e.width&&(i+="width:"+e.width+";"),e.minWidth&&(i+="min-width:"+e.minWidth+";"),e.maxWidth&&(i+="max-width:"+e.maxWidth+";");let n="",l="",o="";const s=(t=i+t).split(";");for(let a,r=0,c=s.length;r<c;r++)a=s[r].trim(),a&&(/^(min-|max-)?width\s*:/.test(a)||/^(z-index|position)\s*:/.test(a)?n+=a+";":/^(min-|max-)?height\s*:/.test(a)?(/^height/.test(a)&&"auto"===a.split(":")[1].trim()&&(e.height="auto"),l+=a+";"):o+=a+";");return{top:n,frame:l,editor:o}},setIframeDocument:function(e,t){e.setAttribute("scrolling","auto"),e.contentDocument.head.innerHTML='<meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1">'+this.setIframeCssTags(t),e.contentDocument.body.className=t.editableClass,e.contentDocument.body.setAttribute("contenteditable",!0)},setIframeCssTags:function(e){const t=e.iframeCSSFileName,i=this._window.RegExp;let n="";for(let l,o=0,s=t.length;o<s;o++){if(l=[],/(^https:\/\/)|(^data:text\/css,)/.test(t[o]))l.push(t[o]);else{const e=new i("(^|.*[\\/])"+t[o]+"(\\..+)?\\.css(:\\?.*|;.*)?$","i");for(let t,i=document.getElementsByTagName("link"),n=0,o=i.length;n<o;n++)t=i[n].href.match(e),t&&l.push(t[0])}if(!l||0===l.length)throw'[KothingEditor.constructor.iframe.fail] The KothingEditor CSS files installation path could not be automatically detected. Please set the option property "iframeCSSFileName" before creating editor instances.';for(let e=0,t=l.length;e<t;e++)n+='<link href="'+l[e]+'" rel="stylesheet">'}return n+("auto"===e.height?"<style>\n/** Iframe height auto */\nbody{height: min-content; overflow: hidden;}\n</style>":"")}};var s=o,a={name:"dialog",util:s,add:function(e){const t=e.context;t.dialog={kind:"",updateModal:!1,closeSignal:!1};let i=e.util.createElement("DIV");i.className="ke-dialog kothing-editor-common";let n=e.util.createElement("DIV");n.className="ke-dialog-back",n.style.display="none";let l=e.util.createElement("DIV");l.className="ke-dialog-inner",l.style.display="none",i.appendChild(n),i.appendChild(l),t.dialog.modalArea=i,t.dialog.back=n,t.dialog.modal=l,t.dialog.modal.addEventListener("mousedown",this.onMouseDown_dialog.bind(e)),t.dialog.modal.addEventListener("click",this.onClick_dialog.bind(e)),t.element.relative.appendChild(i),i=null,n=null,l=null},onMouseDown_dialog:function(e){/ke-dialog-inner/.test(e.target.className)?this.context.dialog.closeSignal=!0:this.context.dialog.closeSignal=!1},onClick_dialog:function(e){e.stopPropagation(),(/close/.test(e.target.getAttribute("data-command"))||this.context.dialog.closeSignal)&&this.plugins.dialog.close.call(this)},open:function(e,t){if(this.modalForm)return!1;this.plugins.dialog.bindClose&&(this._document.removeEventListener("keydown",this.plugins.dialog.bindClose),this.plugins.dialog.bindClose=null),this.plugins.dialog.bindClose=function(e){/27/.test(e.keyCode)&&this.plugins.dialog.close.call(this)}.bind(this),this._document.addEventListener("keydown",this.plugins.dialog.bindClose),this.context.dialog.updateModal=t,"full"===this.context.options.popupDisplay?this.context.dialog.modalArea.style.position="fixed":this.context.dialog.modalArea.style.position="absolute",this.context.dialog.kind=e,this.modalForm=this.context[e].modal;const i=this.context[e].focusElement;"function"===typeof this.plugins[e].on&&this.plugins[e].on.call(this,t),s.addClass(this.context.dialog.modalArea,"dialog--open"),this.context.dialog.modalArea.style.display="block",this.context.dialog.back.style.display="block",this.context.dialog.modal.style.display="block",this.modalForm.style.display="block",i&&i.focus()},bindClose:null,close:function(){this.plugins.dialog.bindClose&&(this._document.removeEventListener("keydown",this.plugins.dialog.bindClose),this.plugins.dialog.bindClose=null);const e=this.context.dialog,t=this.context.dialog.kind;s.removeClass(e.modalArea,"dialog--open"),s.addClass(e.modalArea,"dialog--close"),setTimeout((()=>{s.removeClass(e.modalArea,"dialog--close"),e.back.style.display="none",e.modalArea.style.display="none",this.modalForm.style.display="none",e.updateModal=!1,e.kind="",this.modalForm=null,this.focus()}),200),"function"===typeof this.plugins[t].init&&this.plugins[t].init.call(this)}},r={name:"selectMenu",add:function(e){e.context.selectMenu={caller:{},callerContext:null}},setForm:function(){return'<div class="ke-select-list"></div>'},createList:function(e,t,i){e.form.innerHTML="<ul>"+i+"</ul>",e.items=t,e.menus=e.form.querySelectorAll("li")},initEvent:function(e,t){const i=t.querySelector(".ke-select-list"),n=this.context.selectMenu.caller[e]={form:i,items:[],menus:[],index:-1,item:null,clickMethod:null,callerName:e};i.addEventListener("mousedown",this.plugins.selectMenu.onMousedown_list),i.addEventListener("mousemove",this.plugins.selectMenu.onMouseMove_list.bind(this,n)),i.addEventListener("click",this.plugins.selectMenu.onClick_list.bind(this,n))},onMousedown_list:function(e){e.preventDefault(),e.stopPropagation()},onMouseMove_list:function(e,t){this.util.addClass(e.form,"__ke_select-menu-mouse-move");const i=t.target.getAttribute("data-index");i&&(e.index=1*i)},onClick_list:function(e,t){const i=t.target.getAttribute("data-index");i&&e.clickMethod.call(this,e.items[i])},moveItem:function(e,t){this.util.removeClass(e.form,"__ke_select-menu-mouse-move"),t=e.index+t;const i=e.menus,n=i.length,l=e.index=t>=n?0:t<0?n-1:t;for(let o=0;o<n;o++)o===l?this.util.addClass(i[o],"active"):this.util.removeClass(i[o],"active");e.item=e.items[l]},getItem:function(e,t){return t=!t||t<0?e.index:t,e.items[t]},on:function(e,t){const i=this.context.selectMenu.caller[e];this.context.selectMenu.callerContext=i,i.clickMethod=t,i.callerName=e},open:function(e,t){const i=e.form;i.style.visibility="hidden",i.style.display="block",t(i),i.style.visibility=""},close:function(e){e.form.style.display="none",e.items=[],e.menus=[],e.index=-1,e.item=null},init:function(e){e&&(e.items=[],e.menus=[],e.index=-1,e.item=null,e.callerName="",this.context.selectMenu.callerContext=null)}},c={name:"anchor",add:function(e){e.addModule([r]),e.context.anchor={caller:{},forms:this.setDialogForm(e),host:(e._window.location.origin+e._window.location.pathname).replace(/\/$/,""),callerContext:null}},setDialogForm:function(e){const t=e.lang,i=e.options.linkRel,n=(e.options.linkRelDefault.default||"").split(" "),l=e.icons,o=e.util.createElement("DIV");let s='<div class="ke-dialog-body"><div class="ke-dialog-form"><label>'+t.dialogBox.linkBox.url+'</label><div class="ke-dialog-form-files"><input class="ke-input-form ke-input-url" type="text" placeholder="'+(e.options.protocol||"")+'" /><button type="button" class="ke-btn ke-dialog-files-edge-button _ke_bookmark_button" title="'+t.dialogBox.linkBox.bookmark+'">'+l.bookmark+"</button>"+e.plugins.selectMenu.setForm()+'</div><div class="ke-anchor-preview-form"><span class="ke-svg ke-anchor-preview-icon _ke_anchor_bookmark_icon">'+l.bookmark+'</span><span class="ke-svg ke-anchor-preview-icon _ke_anchor_download_icon">'+l.download+'</span><pre class="ke-link-preview"></pre></div></div><div class="ke-dialog-form"><label>'+t.dialogBox.linkBox.text+'</label><input class="ke-input-form _ke_anchor_text" type="text" /></div><div class="ke-dialog-form-footer"><label><input type="checkbox" class="ke-dialog-btn-check _ke_anchor_check" />&nbsp;'+t.dialogBox.linkBox.newWindowCheck+'</label><label><input type="checkbox" class="ke-dialog-btn-check _ke_anchor_download" />&nbsp;'+t.dialogBox.linkBox.downloadLinkCheck+"</label>";if(i.length>0){s+='<div class="ke-anchor-rel"><button type="button" class="ke-btn ke-btn-select ke-anchor-rel-btn">&lt;rel&gt;</button><div class="ke-anchor-rel-wrapper"><pre class="ke-link-preview ke-anchor-rel-preview"></pre></div><div class="ke-list-layer"><div class="ke-list-inner"><ul class="ke-list-basic ke-list-checked">';for(let e,t=0,o=i.length;t<o;t++)e=i[t],s+='<li><button type="button" class="ke-btn-list'+(n.indexOf(e)>-1?" ke-checked":"")+'" data-command="'+e+'" title="'+e+'"><span class="ke-svg">'+l.checked+"</span>"+e+"</button></li>";s+="</ul></div></div></div>"}return s+="</div></div>",o.innerHTML=s,o},initEvent:function(e,t){const i=this.plugins.anchor,n=this.context.anchor.caller[e]={modal:t,urlInput:null,linkDefaultRel:this.options.linkRelDefault,defaultRel:this.options.linkRelDefault.default||"",currentRel:[],linkAnchor:null,linkValue:"",change:!1,callerName:e};"string"===typeof n.linkDefaultRel.default&&(n.linkDefaultRel.default=n.linkDefaultRel.default.trim()),"string"===typeof n.linkDefaultRel.check_new_window&&(n.linkDefaultRel.check_new_window=n.linkDefaultRel.check_new_window.trim()),"string"===typeof n.linkDefaultRel.check_bookmark&&(n.linkDefaultRel.check_bookmark=n.linkDefaultRel.check_bookmark.trim()),n.urlInput=t.querySelector(".ke-input-url"),n.anchorText=t.querySelector("._ke_anchor_text"),n.newWindowCheck=t.querySelector("._ke_anchor_check"),n.downloadCheck=t.querySelector("._ke_anchor_download"),n.download=t.querySelector("._ke_anchor_download_icon"),n.preview=t.querySelector(".ke-link-preview"),n.bookmark=t.querySelector("._ke_anchor_bookmark_icon"),n.bookmarkButton=t.querySelector("._ke_bookmark_button"),this.plugins.selectMenu.initEvent.call(this,e,t);const l=this.context.selectMenu.caller[e];this.options.linkRel.length>0&&(n.relButton=t.querySelector(".ke-anchor-rel-btn"),n.relList=t.querySelector(".ke-list-layer"),n.relPreview=t.querySelector(".ke-anchor-rel-preview"),n.relButton.addEventListener("click",i.onClick_relButton.bind(this,n)),n.relList.addEventListener("click",i.onClick_relList.bind(this,n))),n.newWindowCheck.addEventListener("change",i.onChange_newWindowCheck.bind(this,n)),n.downloadCheck.addEventListener("change",i.onChange_downloadCheck.bind(this,n)),n.anchorText.addEventListener("input",i.onChangeAnchorText.bind(this,n)),n.urlInput.addEventListener("input",i.onChangeUrlInput.bind(this,n)),n.urlInput.addEventListener("keydown",i.onKeyDownUrlInput.bind(this,l)),n.urlInput.addEventListener("focus",i.onFocusUrlInput.bind(this,n,l)),n.urlInput.addEventListener("blur",i.onBlurUrlInput.bind(this,l)),n.bookmarkButton.addEventListener("click",i.onClick_bookmarkButton.bind(this,n))},on:function(e,t){if(t){if(e.linkAnchor){this.context.dialog.updateModal=!0;const t=e.linkAnchor.href;e.linkValue=e.preview.textContent=e.urlInput.value=/#.+$/.test(t)?t.substr(t.lastIndexOf("#")):t,e.anchorText.value=e.linkAnchor.textContent.trim()||e.linkAnchor.getAttribute("alt"),e.newWindowCheck.checked=!!/_blank/i.test(e.linkAnchor.target),e.downloadCheck.checked=e.linkAnchor.download}}else this.plugins.anchor.init.call(this,e),e.anchorText.value=this.getSelection().toString();this.context.anchor.callerContext=e,this.plugins.anchor.setRel.call(this,e,t&&e.linkAnchor?e.linkAnchor.rel:e.defaultRel),this.plugins.anchor.setLinkPreview.call(this,e,e.linkValue),this.plugins.selectMenu.on.call(this,e.callerName,this.plugins.anchor.setHeaderBookmark)},closeRelMenu:null,toggleRelList:function(e,t){if(t){const t=e.relButton,i=e.relList;this.util.addClass(t,"active"),i.style.visibility="hidden",i.style.display="block",this.options.rtl?i.style.left=t.offsetLeft-i.offsetWidth-1+"px":i.style.left=t.offsetLeft+t.offsetWidth+1+"px",i.style.top=t.offsetTop+t.offsetHeight/2-i.offsetHeight/2+"px",i.style.visibility="",this.plugins.anchor.closeRelMenu=function(e,t,i){i&&(e.relButton.contains(i.target)||e.relList.contains(i.target))||(this.util.removeClass(t,"active"),e.relList.style.display="none",this.modalForm.removeEventListener("click",this.plugins.anchor.closeRelMenu),this.plugins.anchor.closeRelMenu=null)}.bind(this,e,t),this.modalForm.addEventListener("click",this.plugins.anchor.closeRelMenu)}else this.plugins.anchor.closeRelMenu&&this.plugins.anchor.closeRelMenu()},onClick_relButton:function(e,t){this.plugins.anchor.toggleRelList.call(this,e,!this.util.hasClass(t.target,"active"))},onClick_relList:function(e,t){const i=t.target,n=i.getAttribute("data-command");if(!n)return;const l=e.currentRel,o=this.util.toggleClass(i,"ke-checked"),s=l.indexOf(n);o?-1===s&&l.push(n):s>-1&&l.splice(s,1),e.relPreview.title=e.relPreview.textContent=l.join(" ")},setRel:function(e,t){const i=e.relList,n=e.currentRel=t?t.split(" "):[];if(!i)return;const l=i.querySelectorAll("button");for(let o,s=0,a=l.length;s<a;s++)o=l[s].getAttribute("data-command"),n.indexOf(o)>-1?this.util.addClass(l[s],"ke-checked"):this.util.removeClass(l[s],"ke-checked");e.relPreview.title=e.relPreview.textContent=n.join(" ")},createHeaderList:function(e,t,i){const n=this.util.getListChildren(this.context.element.wysiwyg,(function(e){return/h[1-6]/i.test(e.nodeName)}));if(0===n.length)return;const l=new this._window.RegExp("^"+i.replace(/^#/,""),"i"),o=[];let s="";for(let a,r=0,c=n.length;r<c;r++)a=n[r],l.test(a.textContent)&&(o.push(a),s+='<li class="ke-select-item" data-index="'+r+'">'+a.textContent+"</li>");0===o.length?this.plugins.selectMenu.close.call(this,t):(this.plugins.selectMenu.createList(t,o,s),this.plugins.selectMenu.open.call(this,t,this.plugins.anchor.setMenuListPosition.bind(this,e)))},setMenuListPosition:function(e,t){t.style.top=e.urlInput.offsetHeight+1+"px"},onKeyDownUrlInput:function(e,t){switch(t.keyCode){case 38:t.preventDefault(),t.stopPropagation(),this.plugins.selectMenu.moveItem.call(this,e,-1);break;case 40:t.preventDefault(),t.stopPropagation(),this.plugins.selectMenu.moveItem.call(this,e,1);break;case 13:e.index>-1&&(t.preventDefault(),t.stopPropagation(),this.plugins.anchor.setHeaderBookmark.call(this,this.plugins.selectMenu.getItem(e,null)))}},setHeaderBookmark:function(e){const t=this.context.anchor.callerContext,i=e.id||"h_"+this._window.Math.random().toString().replace(/.+\./,"");e.id=i,t.urlInput.value="#"+i,t.anchorText.value.trim()&&t.change||(t.anchorText.value=e.textContent),this.plugins.anchor.setLinkPreview.call(this,t,t.urlInput.value),this.plugins.selectMenu.close.call(this,this.context.selectMenu.callerContext),this.context.anchor.callerContext.urlInput.focus()},onChangeAnchorText:function(e,t){e.change=!!t.target.value.trim()},onChangeUrlInput:function(e,t){const i=t.target.value.trim();this.plugins.anchor.setLinkPreview.call(this,e,i),/^#/.test(i)?this.plugins.anchor.createHeaderList.call(this,e,this.context.selectMenu.callerContext,i):this.plugins.selectMenu.close.call(this,this.context.selectMenu.callerContext)},onFocusUrlInput:function(e,t){const i=e.urlInput.value;/^#/.test(i)&&this.plugins.anchor.createHeaderList.call(this,e,t,i)},onBlurUrlInput:function(e){this.plugins.selectMenu.close.call(this,e)},setLinkPreview:function(e,t){const i=e.preview,n=this.options.linkProtocol,l=/^(mailto:|tel:|sms:|https*:\/\/|#)/.test(t),o=!!n&&this._window.RegExp("^"+t.substr(0,n.length)).test(n);e.linkValue=i.textContent=t?!n||l||o?l?t:/^www\./.test(t)?"http://"+t:this.context.anchor.host+(/^\//.test(t)?"":"/")+t:n+t:"",0===t.indexOf("#")?(e.bookmark.style.display="inline-block",this.util.addClass(e.bookmarkButton,"active")):(e.bookmark.style.display="none",this.util.removeClass(e.bookmarkButton,"active")),-1===t.indexOf("#")&&e.downloadCheck.checked?e.download.style.display="block":e.download.style.display="none"},setCtx:function(e,t){e&&(t.linkAnchor=e,t.linkValue=e.href,t.currentRel=e.rel.split(" "))},updateAnchor:function(e,t,i,n,l){!/^#/.test(t)&&n.downloadCheck.checked?e.setAttribute("download",i||t):e.removeAttribute("download"),n.newWindowCheck.checked?e.target="_blank":e.removeAttribute("target");const o=n.currentRel.join(" ");o?e.rel=o:e.removeAttribute("rel"),e.href=t,e.setAttribute("alt",i),l?0===e.children.length&&(e.textContent=""):e.textContent=i},createAnchor:function(e,t){if(0===e.linkValue.length)return null;const i=e.linkValue,n=e.anchorText,l=0===n.value.length?i:n.value,o=e.linkAnchor||this.util.createElement("A");return this.plugins.anchor.updateAnchor(o,i,l,e,t),e.linkValue=e.preview.textContent=e.urlInput.value=e.anchorText.value="",o},onClick_bookmarkButton:function(e){let t=e.urlInput.value;/^#/.test(t)?(t=t.substr(1),e.bookmark.style.display="none",this.util.removeClass(e.bookmarkButton,"active"),this.plugins.selectMenu.close.call(this,this.context.selectMenu.callerContext)):(t="#"+t,e.bookmark.style.display="block",this.util.addClass(e.bookmarkButton,"active"),e.downloadCheck.checked=!1,e.download.style.display="none",this.plugins.anchor.createHeaderList.call(this,e,this.context.selectMenu.callerContext,t)),e.urlInput.value=t,this.plugins.anchor.setLinkPreview.call(this,e,t),e.urlInput.focus()},onChange_newWindowCheck:function(e,t){"string"===typeof e.linkDefaultRel.check_new_window&&(t.target.checked?this.plugins.anchor.setRel.call(this,e,this.plugins.anchor.relMerge.call(this,e,e.linkDefaultRel.check_new_window)):this.plugins.anchor.setRel.call(this,e,this.plugins.anchor.relDelete.call(this,e,e.linkDefaultRel.check_new_window)))},onChange_downloadCheck:function(e,t){t.target.checked?(e.download.style.display="block",e.bookmark.style.display="none",this.util.removeClass(e.bookmarkButton,"active"),e.linkValue=e.preview.textContent=e.urlInput.value=e.urlInput.value.replace(/^#+/,""),"string"===typeof e.linkDefaultRel.check_bookmark&&this.plugins.anchor.setRel.call(this,e,this.plugins.anchor.relMerge.call(this,e,e.linkDefaultRel.check_bookmark))):(e.download.style.display="none","string"===typeof e.linkDefaultRel.check_bookmark&&this.plugins.anchor.setRel.call(this,e,this.plugins.anchor.relDelete.call(this,e,e.linkDefaultRel.check_bookmark)))},relMerge:function(e,t){const i=e.currentRel;if(!t)return i.join(" ");if(/^only:/.test(t))return t=t.replace(/^only:/,"").trim(),e.currentRel=t.split(" "),t;const n=t.split(" ");for(let l,o=0,s=n.length;o<s;o++)l=i.indexOf(n[o]),-1===l&&i.push(n[o]);return i.join(" ")},relDelete:function(e,t){if(!t)return e.currentRel.join(" ");/^only:/.test(t)&&(t=t.replace(/^only:/,"").trim());const i=e.currentRel.join(" ").replace(this._window.RegExp(t+"\\s*"),"");return e.currentRel=i.split(" "),i},init:function(e){e.linkAnchor=null,e.linkValue=e.preview.textContent=e.urlInput.value="",e.anchorText.value="",e.newWindowCheck.checked=!1,e.downloadCheck.checked=!1,e.change=!1,this.plugins.anchor.setRel.call(this,e,e.defaultRel),e.relList&&this.plugins.anchor.toggleRelList.call(this,e,!1),this.context.anchor.callerContext=null,this.plugins.selectMenu.init.call(this,this.context.selectMenu.callerContext)}},d={name:"component",set_container:function(e,t){const i=this.util.createElement("DIV");return i.className="ke-component "+t,i.setAttribute("contenteditable",!1),i.appendChild(e),i},set_cover:function(e){const t=this.util.createElement("FIGURE");return t.appendChild(e),t},create_caption:function(){const e=this.util.createElement("FIGCAPTION");return e.setAttribute("contenteditable",!0),e.innerHTML="<div>"+this.lang.dialogBox.caption+"</div>",e}},u={name:"resizing",add:function(e){const t=e.icons,i=e.context;i.resizing={resizeClientX:0,resizeClientY:0,resize_plugin:"",resize_w:0,resize_h:0,origin_w:0,origin_h:0,rotateVertical:!1,resize_direction:"",move_path:null,isChange:!1,alignIcons:{basic:t.align_justify,left:t.align_left,right:t.align_right,center:t.align_center}};let n=this.setController_resize(e);i.resizing.resizeContainer=n,i.resizing.resizeDiv=n.querySelector(".ke-modal-resize"),i.resizing.resizeDot=n.querySelector(".ke-resize-dot"),i.resizing.resizeDisplay=n.querySelector(".ke-resize-display");let l=this.setController_button(e);i.resizing.resizeButton=l;let o=i.resizing.resizeHandles=i.resizing.resizeDot.querySelectorAll("span");i.resizing.resizeButtonGroup=l.querySelector("._ke_resizing_btn_group"),i.resizing.rotationButtons=l.querySelectorAll("._ke_resizing_btn_group ._ke_rotation"),i.resizing.percentageButtons=l.querySelectorAll("._ke_resizing_btn_group ._ke_percentage"),i.resizing.alignMenu=l.querySelector(".ke-resizing-align-list"),i.resizing.alignMenuList=i.resizing.alignMenu.querySelectorAll("button"),i.resizing.alignButton=l.querySelector("._ke_resizing_align_button"),i.resizing.autoSizeButton=l.querySelector("._ke_resizing_btn_group ._ke_auto_size"),i.resizing.captionButton=l.querySelector("._ke_resizing_caption_button"),n.addEventListener("mousedown",(function(e){e.preventDefault()})),o[0].addEventListener("mousedown",this.onMouseDown_resize_handle.bind(e)),o[1].addEventListener("mousedown",this.onMouseDown_resize_handle.bind(e)),o[2].addEventListener("mousedown",this.onMouseDown_resize_handle.bind(e)),o[3].addEventListener("mousedown",this.onMouseDown_resize_handle.bind(e)),o[4].addEventListener("mousedown",this.onMouseDown_resize_handle.bind(e)),o[5].addEventListener("mousedown",this.onMouseDown_resize_handle.bind(e)),o[6].addEventListener("mousedown",this.onMouseDown_resize_handle.bind(e)),o[7].addEventListener("mousedown",this.onMouseDown_resize_handle.bind(e)),l.addEventListener("click",this.onClick_resizeButton.bind(e)),i.element.relative.appendChild(n),i.element.relative.appendChild(l),n=null,l=null,o=null},setController_resize:function(e){const t=e.util.createElement("DIV");return t.className="ke-controller ke-resizing-container",t.style.display="none",t.innerHTML='<div class="ke-modal-resize"></div><div class="ke-resize-dot"><span class="tl"></span><span class="tr"></span><span class="bl"></span><span class="br"></span><span class="lw"></span><span class="th"></span><span class="rw"></span><span class="bh"></span><div class="ke-resize-display"></div></div>',t},setController_button:function(e){const t=e.lang,i=e.icons,n=e.util.createElement("DIV");return n.className="ke-controller ke-controller-resizing",n.innerHTML='<div class="ke-arrow ke-arrow-up"></div><div class="ke-btn-group _ke_resizing_btn_group"><button type="button" data-command="percent" data-value="1" class="ke-tooltip _ke_percentage"><span>100%</span><span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.controller.resize100+'</span></span></button><button type="button" data-command="percent" data-value="0.75" class="ke-tooltip _ke_percentage"><span>75%</span><span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.controller.resize75+'</span></span></button><button type="button" data-command="percent" data-value="0.5" class="ke-tooltip _ke_percentage"><span>50%</span><span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.controller.resize50+'</span></span></button><button type="button" data-command="auto" class="ke-btn ke-tooltip _ke_auto_size">'+i.auto_size+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.controller.autoSize+'</span></span></button><button type="button" data-command="rotate" data-value="-90" class="ke-btn ke-tooltip _ke_rotation">'+i.rotate_left+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.controller.rotateLeft+'</span></span></button><button type="button" data-command="rotate" data-value="90" class="ke-btn ke-tooltip _ke_rotation">'+i.rotate_right+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.controller.rotateRight+'</span></span></button></div><div class="ke-btn-group" style="padding-top: 0;"><button type="button" data-command="mirror" data-value="h" class="ke-btn ke-tooltip">'+i.mirror_horizontal+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.controller.mirrorHorizontal+'</span></span></button><button type="button" data-command="mirror" data-value="v" class="ke-btn ke-tooltip">'+i.mirror_vertical+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.controller.mirrorVertical+'</span></span></button><button type="button" data-command="onalign" class="ke-btn ke-tooltip _ke_resizing_align_button">'+i.align_justify+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.toolbar.align+'</span></span></button><div class="ke-btn-group-sub kothing-editor-common ke-list-layer ke-resizing-align-list"><div class="ke-list-inner"><ul class="ke-list-basic"><li><button type="button" class="ke-btn-list ke-tooltip" data-command="align" data-value="basic">'+i.align_justify+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.dialogBox.basic+'</span></span></button></li><li><button type="button" class="ke-btn-list ke-tooltip" data-command="align" data-value="left">'+i.align_left+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.dialogBox.left+'</span></span></button></li><li><button type="button" class="ke-btn-list ke-tooltip" data-command="align" data-value="center">'+i.align_center+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.dialogBox.center+'</span></span></button></li><li><button type="button" class="ke-btn-list ke-tooltip" data-command="align" data-value="right">'+i.align_right+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.dialogBox.right+'</span></span></button></li></ul></div></div><button type="button" data-command="caption" class="ke-btn ke-tooltip _ke_resizing_caption_button">'+i.caption+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.dialogBox.caption+'</span></span></button><button type="button" data-command="revert" class="ke-btn ke-tooltip">'+i.revert+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.dialogBox.revertButton+'</span></span></button><button type="button" data-command="update" class="ke-btn ke-tooltip">'+i.modify+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.controller.edit+'</span></span></button><button type="button" data-command="delete" class="ke-btn ke-tooltip">'+i.delete+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.controller.remove+"</span></span></button></div>",n},module_getSizeX:function(e,t,i,n){return t||(t=e.element),i||(i=e.cover),n||(n=e.container),t?/%$/.test(t.style.width)?(n&&this.util.getNumber(n.style.width,2)||100)+"%":t.style.width:""},module_getSizeY:function(e,t,i,n){return t||(t=e.element),i||(i=e.cover),n||(n=e.container),n&&i?this.util.getNumber(i.style.paddingBottom,0)>0&&!this.context.resizing.rotateVertical?i.style.height:/%$/.test(t.style.height)&&/%$/.test(t.style.width)?(n&&this.util.getNumber(n.style.height,2)||100)+"%":t.style.height:t&&t.style.height||""},module_setModifyInputSize:function(e,t){const i=e.onlyPercentage&&this.context.resizing.rotateVertical;e.proportion.checked=e.proportionChecked="false"!==e.element.getAttribute("data-proportion");let n=i?"":this.plugins.resizing.module_getSizeX.call(this,e);if(n===e.defaultSizeX&&(n=""),e.onlyPercentage&&(n=this.util.getNumber(n,2)),e.inputX.value=n,t.setInputSize.call(this,"x"),!e.onlyPercentage){let t=i?"":this.plugins.resizing.module_getSizeY.call(this,e);t===e.defaultSizeY&&(t=""),e.onlyPercentage&&(t=this.util.getNumber(t,2)),e.inputY.value=t}e.inputX.disabled=!!i,e.inputY.disabled=!!i,e.proportion.disabled=!!i,t.setRatio.call(this)},module_setInputSize:function(e,t){if(e.onlyPercentage)"x"===t&&e.inputX.value>100&&(e.inputX.value=100);else if(e.proportion.checked&&e.ratio&&/\d/.test(e.inputX.value)&&/\d/.test(e.inputY.value)){const i=e.inputX.value.replace(/\d+|\./g,"")||e.sizeUnit,n=e.inputY.value.replace(/\d+|\./g,"")||e.sizeUnit;if(i!==n)return;const l="%"===i?2:0;"x"===t?e.inputY.value=this.util.getNumber(e.ratioY*this.util.getNumber(e.inputX.value,l),l)+n:e.inputX.value=this.util.getNumber(e.ratioX*this.util.getNumber(e.inputY.value,l),l)+i}},module_setRatio:function(e){const t=e.inputX.value,i=e.inputY.value;if(e.proportion.checked&&/\d+/.test(t)&&/\d+/.test(i)){if((t.replace(/\d+|\./g,"")||e.sizeUnit)!==(i.replace(/\d+|\./g,"")||e.sizeUnit))e.ratio=!1;else if(!e.ratio){const n=this.util.getNumber(t,0),l=this.util.getNumber(i,0);e.ratio=!0,e.ratioX=n/l,e.ratioY=l/n}}else e.ratio=!1},module_sizeRevert:function(e){e.onlyPercentage?e.inputX.value=e.origin_w>100?100:e.origin_w:(e.inputX.value=e.origin_w,e.inputY.value=e.origin_h)},module_saveCurrentSize:function(e){const t=this.plugins.resizing.module_getSizeX.call(this,e),i=this.plugins.resizing.module_getSizeY.call(this,e);e.element.setAttribute("data-size",t+","+i),e.videoRatio&&(e.videoRatio=i)},call_controller_resize:function(e,t){const i=this.context.resizing,n=this.context[t];i.resize_plugin=t;const l=i.resizeContainer,o=i.resizeDiv,s=this.util.getOffset(e,this.context.element.wysiwygFrame),a=i.rotateVertical=/^(90|270)$/.test(Math.abs(e.getAttribute("data-rotate")).toString()),r=a?e.offsetHeight:e.offsetWidth,c=a?e.offsetWidth:e.offsetHeight,d=s.top,u=s.left-this.context.element.wysiwygFrame.scrollLeft;l.style.top=d+"px",l.style.left=u+"px",l.style.width=r+"px",l.style.height=c+"px",o.style.top="0px",o.style.left="0px",o.style.width=r+"px",o.style.height=c+"px";let h=e.getAttribute("data-align")||"basic";h="none"===h?"basic":h;const g=this.util.getParentElement(e,this.util.isComponent),p=this.util.getParentElement(e,"FIGURE"),m=this.plugins.resizing.module_getSizeX.call(this,n,e,p,g)||"auto",f=n.onlyPercentage&&"image"===t?"":", "+(this.plugins.resizing.module_getSizeY.call(this,n,e,p,g)||"auto");this.util.changeTxt(i.resizeDisplay,this.lang.dialogBox[h]+" ("+m+f+")"),i.resizeButtonGroup.style.display=n.resizing?"":"none";const b=!n.resizing||n.resizeDotHide||n.onlyPercentage?"none":"flex",v=i.resizeHandles;for(let _=0,S=v.length;_<S;_++)v[_].style.display=b;if(n.resizing){const e=i.rotationButtons;e[0].style.display=e[1].style.display=n.rotation?"":"none"}const y=i.alignMenuList;this.util.changeElement(i.alignButton.firstElementChild,i.alignIcons[h]);for(let _=0,S=y.length;_<S;_++)y[_].getAttribute("data-value")===h?this.util.addClass(y[_],"on"):this.util.removeClass(y[_],"on");const k=i.percentageButtons,w=/%$/.test(e.style.width)&&/%$/.test(g.style.width)?this.util.getNumber(g.style.width,0)/100+"":"";for(let _=0,S=k.length;_<S;_++)k[_].getAttribute("data-value")===w?this.util.addClass(k[_],"active"):this.util.removeClass(k[_],"active");n.captionShow?(i.captionButton.style.display="",this.util.getChildElement(e.parentNode,"figcaption")?(this.util.addClass(i.captionButton,"active"),n.captionChecked=!0):(this.util.removeClass(i.captionButton,"active"),n.captionChecked=!1)):i.captionButton.style.display="none",l.style.display="block";const C={left:0,top:50};this.options.iframe&&(C.left-=this.context.element.wysiwygFrame.parentElement.offsetLeft,C.top-=this.context.element.wysiwygFrame.parentElement.offsetTop),this.setControllerPosition(i.resizeButton,l,"bottom",C),this.controllersOn(l,i.resizeButton,this.util.setDisabledButtons.bind(this,!1,this.resizingDisabledButtons),e,t),this.util.setDisabledButtons(!0,this.resizingDisabledButtons),i.resize_w=r,i.resize_h=c;const x=(e.getAttribute("origin-size")||"").split(",");return i.origin_w=x[0]||e.naturalWidth,i.origin_h=x[1]||e.naturalHeight,{w:r,h:c,t:d,l:u}},closeAlignMenu:null,openAlignMenu:function(){const e=this.context.resizing.alignButton;this.util.addClass(e,"on"),this.context.resizing.alignMenu.style.top=e.offsetTop+e.offsetHeight+"px",this.context.resizing.alignMenu.style.left=e.offsetLeft-e.offsetWidth/2+"px",this.context.resizing.alignMenu.style.display="block",this.plugins.resizing.closeAlignMenu=function(){this.util.removeClass(this.context.resizing.alignButton,"on"),this.context.resizing.alignMenu.style.display="none",this.removeDocEvent("click",this.plugins.resizing.closeAlignMenu),this.plugins.resizing.closeAlignMenu=null}.bind(this),this.addDocEvent("click",this.plugins.resizing.closeAlignMenu)},onClick_resizeButton:function(e){e.stopPropagation();const t=e.target,i=t.getAttribute("data-command")||t.parentNode.getAttribute("data-command");if(!i)return;const n=t.getAttribute("data-value")||t.parentNode.getAttribute("data-value"),l=this.context.resizing.resize_plugin,o=this.context[l],s=o.element,a=this.plugins[l];if(e.preventDefault(),"function"!==typeof this.plugins.resizing.closeAlignMenu||(this.plugins.resizing.closeAlignMenu(),"onalign"!==i)){switch(i){case"auto":this.plugins.resizing.resetTransform.call(this,s),a.setAutoSize.call(this),this.selectComponent(s,l);break;case"percent":let e=this.plugins.resizing.module_getSizeY.call(this,o);if(this.context.resizing.rotateVertical){const t=s.getAttribute("data-percentage");t&&(e=t.split(",")[1])}this.plugins.resizing.resetTransform.call(this,s),a.setPercentSize.call(this,100*n,null!==this.util.getNumber(e,0)&&/%$/.test(e)?e:""),this.selectComponent(s,l);break;case"mirror":const t=s.getAttribute("data-rotate")||"0";let i=s.getAttribute("data-rotateX")||"",r=s.getAttribute("data-rotateY")||"";"h"===n&&!this.context.resizing.rotateVertical||"v"===n&&this.context.resizing.rotateVertical?r=r?"":"180":i=i?"":"180",s.setAttribute("data-rotateX",i),s.setAttribute("data-rotateY",r),this.plugins.resizing.setTransForm(s,t,i,r);break;case"rotate":const c=this.context.resizing,d=1*s.getAttribute("data-rotate")+1*n,u=this._window.Math.abs(d)>=360?0:d;s.setAttribute("data-rotate",u),c.rotateVertical=/^(90|270)$/.test(this._window.Math.abs(u).toString()),this.plugins.resizing.setTransformSize.call(this,s,null,null),this.selectComponent(s,l);break;case"onalign":return void this.plugins.resizing.openAlignMenu.call(this);case"align":const h="basic"===n?"none":n;a.setAlign.call(this,h,null,null,null),this.selectComponent(s,l);break;case"caption":const g=!o.captionChecked;if(a.openModify.call(this,!0),o.captionChecked=o.captionCheckEl.checked=g,a.update_image.call(this,!1,!1,!1),g){const e=this.util.getChildElement(o.caption,(function(e){return 3===e.nodeType}));e?this.setRange(e,0,e,e.textContent.length):o.caption.focus(),this.controllersOff()}else this.selectComponent(s,l),a.openModify.call(this,!0);break;case"revert":a.setOriginSize.call(this),this.selectComponent(s,l);break;case"update":a.openModify.call(this),this.controllersOff();break;case"delete":a.destroy.call(this)}this.history.push(!1)}},resetTransform:function(e){const t=(e.getAttribute("data-size")||e.getAttribute("data-origin")||"").split(",");this.context.resizing.rotateVertical=!1,e.style.maxWidth="",e.style.transform="",e.style.transformOrigin="",e.setAttribute("data-rotate",""),e.setAttribute("data-rotateX",""),e.setAttribute("data-rotateY",""),this.plugins[this.context.resizing.resize_plugin].setSize.call(this,t[0]?t[0]:"auto",t[1]?t[1]:"",!0)},setTransformSize:function(e,t,i){let n=e.getAttribute("data-percentage");const l=this.context.resizing.rotateVertical,o=1*e.getAttribute("data-rotate");let s="";if(n&&!l)n=n.split(","),"auto"===n[0]&&"auto"===n[1]?this.plugins[this.context.resizing.resize_plugin].setAutoSize.call(this):this.plugins[this.context.resizing.resize_plugin].setPercentSize.call(this,n[0],n[1]);else{const n=this.util.getParentElement(e,"FIGURE"),a=t||e.offsetWidth,r=i||e.offsetHeight,c=(l?r:a)+"px",d=(l?a:r)+"px";if(this.plugins[this.context.resizing.resize_plugin].cancelPercentAttr.call(this),this.plugins[this.context.resizing.resize_plugin].setSize.call(this,a+"px",r+"px",!0),n.style.width=c,n.style.height=this.context[this.context.resizing.resize_plugin].caption?"":d,l){const e=a/2+"px "+a/2+"px 0",t=r/2+"px "+r/2+"px 0";s=90===o||-270===o?t:e}}e.style.transformOrigin=s,this.plugins.resizing.setTransForm(e,o.toString(),e.getAttribute("data-rotateX")||"",e.getAttribute("data-rotateY")||""),e.style.maxWidth=l?"none":"",this.plugins.resizing.setCaptionPosition.call(this,e)},setTransForm:function(e,t,i,n){let l=(e.offsetWidth-e.offsetHeight)*(/-/.test(t)?1:-1),o="";if(/[1-9]/.test(t)&&(i||n))switch(o=i?"Y":"X",t){case"90":o=i&&n?"X":n?o:"";break;case"270":l*=-1,o=i&&n?"Y":i?o:"";break;case"-90":o=i&&n?"Y":i?o:"";break;case"-270":l*=-1,o=i&&n?"X":n?o:"";break;default:o=""}t%180===0&&(e.style.maxWidth=""),e.style.transform="rotate("+t+"deg)"+(i?" rotateX("+i+"deg)":"")+(n?" rotateY("+n+"deg)":"")+(o?" translate"+o+"("+l+"px)":"")},setCaptionPosition:function(e){const t=this.util.getChildElement(this.util.getParentElement(e,"FIGURE"),"FIGCAPTION");t&&(t.style.marginTop=(this.context.resizing.rotateVertical?e.offsetWidth-e.offsetHeight:0)+"px")},onMouseDown_resize_handle:function(e){e.stopPropagation(),e.preventDefault();const t=this.context.resizing,i=t.resize_direction=e.target.classList[0];t.resizeClientX=e.clientX,t.resizeClientY=e.clientY,this.context.element.resizeBackground.style.display="block",t.resizeButton.style.display="none",t.resizeDiv.style.float=/l/.test(i)?"right":/r/.test(i)?"left":"none";const n=this.plugins.resizing.resizing_element.bind(this,t,i,this.context[t.resize_plugin]),l=function(e){if("keydown"===e.type&&27!==e.keyCode)return;const o=t.isChange;t.isChange=!1,this.removeDocEvent("mousemove",n),this.removeDocEvent("mouseup",l),this.removeDocEvent("keydown",l),"keydown"===e.type?(this.controllersOff(),this.context.element.resizeBackground.style.display="none",this.plugins[this.context.resizing.resize_plugin].init.call(this)):(this.plugins.resizing.cancel_controller_resize.call(this,i),o&&this.history.push(!1))}.bind(this);this.addDocEvent("mousemove",n),this.addDocEvent("mouseup",l),this.addDocEvent("keydown",l)},resizing_element:function(e,t,i,n){const l=n.clientX,o=n.clientY;let s=i.element_w,a=i.element_h;const r=i.element_w+(/r/.test(t)?l-e.resizeClientX:e.resizeClientX-l),c=i.element_h+(/b/.test(t)?o-e.resizeClientY:e.resizeClientY-o),d=i.element_h/i.element_w*r;/t/.test(t)&&(e.resizeDiv.style.top=i.element_h-(/h/.test(t)?c:d)+"px"),/l/.test(t)&&(e.resizeDiv.style.left=i.element_w-r+"px"),/r|l/.test(t)&&(e.resizeDiv.style.width=r+"px",s=r),/^(t|b)[^h]$/.test(t)?(e.resizeDiv.style.height=d+"px",a=d):/^(t|b)h$/.test(t)&&(e.resizeDiv.style.height=c+"px",a=c),e.resize_w=s,e.resize_h=a,this.util.changeTxt(e.resizeDisplay,this._window.Math.round(s)+" x "+this._window.Math.round(a)),e.isChange=!0},cancel_controller_resize:function(e){const t=this.context.resizing.rotateVertical;this.controllersOff(),this.context.element.resizeBackground.style.display="none";let i=this._window.Math.round(t?this.context.resizing.resize_h:this.context.resizing.resize_w),n=this._window.Math.round(t?this.context.resizing.resize_w:this.context.resizing.resize_h);if(!t&&!/%$/.test(i)){const e=16,t=this.context.element.wysiwygFrame.clientWidth-2*e-2;this.util.getNumber(i,0)>t&&(n=this._window.Math.round(n/i*t),i=t)}const l=this.context.resizing.resize_plugin;this.plugins[l].setSize.call(this,i,n,!1,e),t&&this.plugins.resizing.setTransformSize.call(this,this.context[this.context.resizing.resize_plugin].element,i,n),this.selectComponent(this.context[l].element,l)}},h={name:"fileManager",xmlHttp:null,checkMediaComponent:function(e){return/IMG/i.test(e)?!/FIGURE/i.test(e.parentElement.nodeName)||!/FIGURE/i.test(e.parentElement.parentElement.nodeName):!/VIDEO/i.test(e)||!/FIGURE/i.test(e.parentElement.nodeName)},upload:function(e,t,i,n,l){this.showLoading();const o=this.plugins.fileManager,s=o.xmlHttp=this.util.getXMLHttpRequest();if(s.onreadystatechange=o.callBackUpload.bind(this,s,n,l),s.open("post",e,!0),null!==t&&"object"===typeof t&&this._window.Object.keys(t).length>0)for(const a in t)s.setRequestHeader(a,t[a]);s.send(i)},callBackUpload:function(e,t,i){if(4===e.readyState)if(200===e.status)try{t(e)}catch(n){throw Error('[KothingEditor.fileManager.upload.callBack.fail] cause : "'+n.message+'"')}finally{this.closeLoading()}else{this.closeLoading();const t=e.responseText?JSON.parse(e.responseText):e;if("function"!==typeof i||i("",t,this)){const i="[KothingEditor.fileManager.upload.serverException] status: "+e.status+", response: "+(t.errorMessage||e.responseText);throw this.functions.noticeOpen(i),Error(i)}}},checkInfo:function(e,t,i,n,l){let o=[];for(let g=0,p=t.length;g<p;g++)o=o.concat([].slice.call(this.context.element.wysiwyg.getElementsByTagName(t[g])));const s=this.plugins.fileManager,a=this.context[e],r=a.infoList,c=s.setInfo.bind(this);if(o.length===r.length){if(this.componentsInfoReset){for(let t=0,n=o.length;t<n;t++)c(e,o[t],i,null,l);return}{let e=!1;for(let t,i=0,n=r.length;i<n;i++)if(t=r[i],0===o.filter((function(e){return t.src===e.src&&t.index.toString()===e.getAttribute("data-index")})).length){e=!0;break}if(!e)return}}const d=l?this.context.resizing.resize_plugin:"";l&&(this.context.resizing.resize_plugin=e);const u=[],h=[];for(let g=0,p=r.length;g<p;g++)h[g]=r[g].index;for(let g,p=0,m=o.length;p<m;p++)g=o[p],this.util.getParentElement(g,this.util.isMediaComponent)&&s.checkMediaComponent(g)?!g.getAttribute("data-index")||h.indexOf(1*g.getAttribute("data-index"))<0?(u.push(a.infoIndex),g.removeAttribute("data-index"),c(e,g,i,null,l)):u.push(1*g.getAttribute("data-index")):(u.push(a.infoIndex),n(g));for(let g,p=0;p<r.length;p++)g=r[p].index,u.indexOf(g)>-1||(r.splice(p,1),"function"===typeof i&&i(null,g,"delete",null,0,this),p--);l&&(this.context.resizing.resize_plugin=d)},setInfo:function(e,t,i,n,l){const o=l?this.context.resizing.resize_plugin:"";l&&(this.context.resizing.resize_plugin=e);const s=this.plugins[e],a=this.context[e],r=a.infoList;let c=t.getAttribute("data-index"),d=null,u="";if(n||(n={name:t.getAttribute("data-file-name")||("string"===typeof t.src?t.src.split("/").pop():""),size:t.getAttribute("data-file-size")||0}),!c||this.componentsInfoInit)u="create",c=a.infoIndex++,t.setAttribute("data-index",c),t.setAttribute("data-file-name",n.name),t.setAttribute("data-file-size",n.size),d={src:t.src,index:1*c,name:n.name,size:n.size},r.push(d);else{u="update",c*=1;for(let e=0,t=r.length;e<t;e++)if(c===r[e].index){d=r[e];break}d||(c=a.infoIndex++,d={index:c},r.push(d)),d.src=t.src,d.name=t.getAttribute("data-file-name"),d.size=1*t.getAttribute("data-file-size")}if(d.element=t,d.delete=s.destroy.bind(this,t),d.select=function(e){e.scrollIntoView(!0),this._window.setTimeout(s.select.bind(this,e))}.bind(this,t),l){if(!t.getAttribute("origin-size")&&t.naturalWidth&&t.setAttribute("origin-size",t.naturalWidth+","+t.naturalHeight),!t.getAttribute("data-origin")){const e=this.util.getParentElement(t,this.util.isMediaComponent),i=this.util.getParentElement(t,"FIGURE"),n=this.plugins.resizing.module_getSizeX.call(this,a,t,i,e),l=this.plugins.resizing.module_getSizeY.call(this,a,t,i,e);t.setAttribute("data-origin",n+","+l),t.setAttribute("data-size",n+","+l)}if(!t.style.width){const e=(t.getAttribute("data-size")||t.getAttribute("data-origin")||"").split(",");s.onModifyMode.call(this,t,null),s.applySize.call(this,e[0],e[1])}this.context.resizing.resize_plugin=o}"function"===typeof i&&i(t,c,u,d,--a.uploadFileLength<0?0:a.uploadFileLength,this)},deleteInfo:function(e,t,i){if(t>=0){const n=this.context[e].infoList;for(let e=0,l=n.length;e<l;e++)if(t===n[e].index)return n.splice(e,1),void("function"===typeof i&&i(null,t,"delete",null,0,this))}},resetInfo:function(e,t){const i=this.context[e];if("function"===typeof t){const e=i.infoList;for(let i=0,n=e.length;i<n;i++)t(null,e[i].index,"delete",null,0,this)}i.infoList=[],i.infoIndex=0}},g={name:"fileBrowser",xmlHttp:null,loading:null,add:function(e){const t=e.context;t.fileBrowser={closeSignal:!1,area:null,header:null,tagArea:null,body:null,list:null,tagElements:null,items:[],selectedTags:[],selectorHandler:null,contextPlugin:"",columnSize:4};let i=e.util.createElement("DIV");i.className="ke-file-browser kothing-editor-common";let n=e.util.createElement("DIV");n.className="ke-file-browser-back";let l=e.util.createElement("DIV");l.className="ke-file-browser-inner",l.innerHTML=this.set_browser(e),i.appendChild(n),i.appendChild(l),this.loading=i.querySelector(".ke-loading-box"),t.fileBrowser.area=i,t.fileBrowser.header=l.querySelector(".ke-file-browser-header"),t.fileBrowser.titleArea=l.querySelector(".ke-file-browser-title"),t.fileBrowser.tagArea=l.querySelector(".ke-file-browser-tags"),t.fileBrowser.body=l.querySelector(".ke-file-browser-body"),t.fileBrowser.list=l.querySelector(".ke-file-browser-list"),t.fileBrowser.tagArea.addEventListener("click",this.onClickTag.bind(e)),t.fileBrowser.list.addEventListener("click",this.onClickFile.bind(e)),l.addEventListener("mousedown",this.onMouseDown_browser.bind(e)),l.addEventListener("click",this.onClick_browser.bind(e)),t.element.relative.appendChild(i),i=null,n=null,l=null},set_browser:function(e){return'<div class="ke-file-browser-content"><div class="ke-file-browser-header"><button type="button" data-command="close" class="ke-btn ke-file-browser-close" class="close" aria-label="Close" title="'+e.lang.dialogBox.close+'">'+e.icons.cancel+'</button><span class="ke-file-browser-title"></span><div class="ke-file-browser-tags"></div></div><div class="ke-file-browser-body"><div class="ke-loading-box kothing-editor-common"><div class="ke-loading-effect"></div></div><div class="ke-file-browser-list"></div></div></div>'},onMouseDown_browser:function(e){/ke-file-browser-inner/.test(e.target.className)?this.context.fileBrowser.closeSignal=!0:this.context.fileBrowser.closeSignal=!1},onClick_browser:function(e){e.stopPropagation(),(/close/.test(e.target.getAttribute("data-command"))||this.context.fileBrowser.closeSignal)&&this.plugins.fileBrowser.close.call(this)},open:function(e,t){this.plugins.fileBrowser.bindClose&&(this._document.removeEventListener("keydown",this.plugins.fileBrowser.bindClose),this.plugins.fileBrowser.bindClose=null),this.plugins.fileBrowser.bindClose=function(e){/27/.test(e.keyCode)&&this.plugins.fileBrowser.close.call(this)}.bind(this),this._document.addEventListener("keydown",this.plugins.fileBrowser.bindClose);const i=this.context.fileBrowser;i.contextPlugin=e,i.selectorHandler=t;const n=this.context[e],l=n.listClass;this.util.hasClass(i.list,l)||(i.list.className="ke-file-browser-list "+l),"full"===this.options.popupDisplay?i.area.style.position="fixed":i.area.style.position="absolute",i.titleArea.textContent=n.title,i.area.style.display="block",this.plugins.fileBrowser.drawFileList.call(this,this.context[e].url,this.context[e].header)},bindClose:null,close:function(){const e=this.plugins.fileBrowser;e.xmlHttp&&e.xmlHttp.abort(),e.bindClose&&(this._document.removeEventListener("keydown",e.bindClose),e.bindClose=null);const t=this.context.fileBrowser;t.area.style.display="none",t.selectorHandler=null,t.selectedTags=[],t.items=[],t.list.innerHTML=t.tagArea.innerHTML=t.titleArea.textContent="","function"===typeof this.plugins[t.contextPlugin].init&&this.plugins[t.contextPlugin].init.call(this),t.contextPlugin=""},showBrowserLoading:function(){this.loading.style.display="block"},closeBrowserLoading:function(){this.loading.style.display="none"},drawFileList:function(e,t){const i=this.plugins.fileBrowser,n=i.xmlHttp=this.util.getXMLHttpRequest();if(n.onreadystatechange=i.callBackGet.bind(this,n),n.open("get",e,!0),null!==t&&"object"===typeof t&&this._window.Object.keys(t).length>0)for(const l in t)n.setRequestHeader(l,t[l]);n.send(null),this.plugins.fileBrowser.showBrowserLoading()},callBackGet:function(e){if(4===e.readyState)if(this.plugins.fileBrowser.xmlHttp=null,200===e.status)try{this.plugins.fileBrowser.drawListItem.call(this,JSON.parse(e.responseText).result,!0)}catch(t){throw Error('[KothingEditor.fileBrowser.drawList.fail] cause : "'+t.message+'"')}finally{this.plugins.fileBrowser.closeBrowserLoading(),this.context.fileBrowser.body.style.maxHeight=this._window.innerHeight-this.context.fileBrowser.header.offsetHeight-50+"px"}else if(this.plugins.fileBrowser.closeBrowserLoading(),0!==e.status){const t=e.responseText?JSON.parse(e.responseText):e,i="[KothingEditor.fileBrowser.get.serverException] status: "+e.status+", response: "+(t.errorMessage||e.responseText);throw Error(i)}},drawListItem:function(e,t){const i=this.context.fileBrowser,n=this.context[i.contextPlugin],l=[],o=e.length,s=n.columnSize||i.columnSize,a=s<=1?1:Math.round(o/s)||1,r=n.itemTemplateHandler;let c="",d='<div class="ke-file-item-column">',u=1;for(let h,g,p=0;p<o;p++)if(h=e[p],g=h.tag?"string"===typeof h.tag?h.tag.split(","):h.tag:[],g=h.tag=g.map((function(e){return e.trim()})),d+=r(h),(p+1)%a===0&&u<s&&p+1<o&&(u++,d+='</div><div class="ke-file-item-column">'),t&&g.length>0)for(let e,t=0,i=g.length;t<i;t++)e=g[t],e&&-1===l.indexOf(e)&&(l.push(e),c+='<a title="'+e+'">'+e+"</a>");d+="</div>",i.list.innerHTML=d,t&&(i.items=e,i.tagArea.innerHTML=c,i.tagElements=i.tagArea.querySelectorAll("A"))},onClickTag:function(e){const t=e.target;if(!this.util.isAnchor(t))return;const i=t.textContent,n=this.plugins.fileBrowser,l=this.context.fileBrowser,o=l.tagArea.querySelector('a[title="'+i+'"]'),s=l.selectedTags,a=s.indexOf(i);a>-1?(s.splice(a,1),this.util.removeClass(o,"on")):(s.push(i),this.util.addClass(o,"on")),n.drawListItem.call(this,0===s.length?l.items:l.items.filter((function(e){return e.tag.some((function(e){return s.indexOf(e)>-1}))})),!1)},onClickFile:function(e){e.preventDefault(),e.stopPropagation();const t=this.context.fileBrowser,i=t.list;let n=e.target,l=null;if(n===i)return;for(;i!==n.parentNode&&(l=n.getAttribute("data-command"),!l);)n=n.parentNode;if(!l)return;const o=t.selectorHandler||this.context[t.contextPlugin].selectorHandler;this.plugins.fileBrowser.close.call(this),o(n)}},p={blockquote:{name:"blockquote",display:"command",add:function(e,t){e.context.blockquote={targetButton:t,tag:e.util.createElement("BLOCKQUOTE")}},active:function(e){if(e){if(/blockquote/i.test(e.nodeName))return this.util.addClass(this.context.blockquote.targetButton,"active"),!0}else this.util.removeClass(this.context.blockquote.targetButton,"active");return!1},action:function(){const e=this.util.getParentElement(this.getSelectionNode(),"blockquote");e?this.detachRangeFormatElement(e,null,null,!1,!1):this.applyRangeFormatElement(this.context.blockquote.tag.cloneNode(!1))}},align:{name:"align",display:"submenu",add:function(e,t){const i=e.icons,n=e.context;n.align={targetButton:t,alignList:null,currentAlign:"",defaultDir:e.options.rtl?"right":"left",icons:{justify:i.align_justify,left:i.align_left,right:i.align_right,center:i.align_center}};let l=this.setSubmenu(e),o=l.querySelector("ul");o.addEventListener("click",this.pickup.bind(e)),n.align.alignList=o.querySelectorAll("li button"),e.initMenuTarget(this.name,t,l),l=null,o=null},setSubmenu:function(e){const t=e.lang,i=e.icons,n=e.util.createElement("DIV"),l="left"===e.context.align.defaultDir,o='<li><button type="button" class="ke-btn-list ke-btn-align" data-command="justifyleft" data-value="left" title="'+t.toolbar.alignLeft+'"><span class="ke-list-icon">'+i.align_left+"</span>"+t.toolbar.alignLeft+"</button></li>",s='<li><button type="button" class="ke-btn-list ke-btn-align" data-command="justifyright" data-value="right" title="'+t.toolbar.alignRight+'"><span class="ke-list-icon">'+i.align_right+"</span>"+t.toolbar.alignRight+"</button></li>";return n.className="ke-submenu ke-list-layer ke-list-align",n.innerHTML='<div class="ke-list-inner"><ul class="ke-list-basic">'+(l?o:s)+'<li><button type="button" class="ke-btn-list ke-btn-align" data-command="justifycenter" data-value="center" title="'+t.toolbar.alignCenter+'"><span class="ke-list-icon">'+i.align_center+"</span>"+t.toolbar.alignCenter+"</button></li>"+(l?s:o)+'<li><button type="button" class="ke-btn-list ke-btn-align" data-command="justifyfull" data-value="justify" title="'+t.toolbar.alignJustify+'"><span class="ke-list-icon">'+i.align_justify+"</span>"+t.toolbar.alignJustify+"</button></li></ul></div>",n},active:function(e){const t=this.context.align,i=t.targetButton,n=i.firstElementChild;if(e){if(this.util.isFormatElement(e)){const l=e.style.textAlign;if(l)return this.util.changeElement(n,t.icons[l]||t.icons[t.defaultDir]),i.setAttribute("data-focus",l),!0}}else this.util.changeElement(n,t.icons[t.defaultDir]),i.removeAttribute("data-focus");return!1},on:function(){const e=this.context.align,t=e.alignList,i=e.targetButton.getAttribute("data-focus")||e.defaultDir;if(i!==e.currentAlign){for(let e=0,n=t.length;e<n;e++)i===t[e].getAttribute("data-value")?this.util.addClass(t[e],"active"):this.util.removeClass(t[e],"active");e.currentAlign=i}},pickup:function(e){e.preventDefault(),e.stopPropagation();let t=e.target,i=null;for(;!i&&!/UL/i.test(t.tagName);)i=t.getAttribute("data-value"),t=t.parentNode;if(!i)return;const n=this.context.align.defaultDir,l=this.getSelectedElements();for(let o=0,s=l.length;o<s;o++)this.util.setStyle(l[o],"textAlign",i===n?"":i);this.effectNode=null,this.submenuOff(),this.focus(),this.history.push(!1)}},font:e,fontSize:{name:"fontSize",display:"submenu",add:function(e,t){const i=e.context,n=e.icons;i.fontSize={targetText:t.querySelector(".txt"),sizeList:null,currentSize:"",icon:n.font_size};let l=this.setSubmenu(e),o=l.querySelector("ul");o.addEventListener("click",this.pickup.bind(e)),i.fontSize.sizeList=o.querySelectorAll("li button"),e.initMenuTarget(this.name,t,l),l=null,o=null},setSubmenu:function(e){const t=e.options,i=e.lang,n=e.util.createElement("DIV");n.className="ke-submenu ke-list-layer ke-list-font-size";const l=t.fontSize?t.fontSize:[8,9,10,11,12,14,16,18,20,22,24,26,28,36,48,72];let o='<div class="ke-list-inner"><ul class="ke-list-basic"><li><button type="button" class="default_value ke-btn-list" title="'+i.toolbar.default+'">('+i.toolbar.default+")</button></li>";for(let s,a=0,r=t.fontSizeUnit,c=l.length;a<c;a++)s=l[a],o+='<li><button type="button" class="ke-btn-list" data-value="'+s+r+'" title="'+s+r+'" style="font-size:'+s+r+';">'+s+"</button></li>";return o+="</ul></div>",n.innerHTML=o,n},active:function(e){const t=this.context.fontSize.targetText.firstElementChild,i=this.context.fontSize.icon;if(e){if(e.style&&e.style.fontSize.length>0)return this.util.changeElement(t,`<span>${e.style.fontSize}</span>`),!0}else{const e=this.hasFocus?this.wwComputedStyle.fontSize?`<span>${this.wwComputedStyle.fontSize}</span>`:"":i;this.util.changeElement(t,e)}return!1},on:function(){const e=this.context.fontSize,t=e.sizeList,i=e.targetText.textContent;if(i!==e.currentSize){for(let e=0,n=t.length;e<n;e++)i===t[e].getAttribute("data-value")?this.util.addClass(t[e],"active"):this.util.removeClass(t[e],"active");e.currentSize=i}},pickup:function(e){if(!/^BUTTON$/i.test(e.target.tagName))return!1;e.preventDefault(),e.stopPropagation();const t=e.target.getAttribute("data-value");if(t){const e=this.util.createElement("SPAN");e.style.fontSize=t,this.nodeChange(e,["font-size"],null,null)}else this.nodeChange(null,["font-size"],["span"],!0);this.submenuOff()}},fontColor:i,hiliteColor:n,horizontalRule:{name:"horizontalRule",display:"submenu",add:function(e,t){e.context.horizontalRule={currentHR:null};let i=this.setSubmenu(e);i.querySelector("ul").addEventListener("click",this.horizontalRulePick.bind(e)),e.initMenuTarget(this.name,t,i),i=null},setSubmenu:function(e){const t=e.lang,i=e.util.createElement("DIV");return i.className="ke-submenu ke-list-layer ke-list-line",i.innerHTML='<div class="ke-list-inner"><ul class="ke-list-basic"><li><button type="button" class="ke-btn-list btn_line" data-command="horizontalRule" data-value="solid" title="'+t.toolbar.hr_solid+'"><hr style="border-width: 1px 0 0; border-style: solid none none; border-color: black; border-image: initial; height: 1px;" /></button></li><li><button type="button" class="ke-btn-list btn_line" data-command="horizontalRule" data-value="dotted" title="'+t.toolbar.hr_dotted+'"><hr style="border-width: 1px 0 0; border-style: dotted none none; border-color: black; border-image: initial; height: 1px;" /></button></li><li><button type="button" class="ke-btn-list btn_line" data-command="horizontalRule" data-value="dashed" title="'+t.toolbar.hr_dashed+'"><hr style="border-width: 1px 0 0; border-style: dashed none none; border-color: black; border-image: initial; height: 1px;" /></button></li></ul></div>',i},active:function(e){if(e){if(/HR/i.test(e.nodeName))return this.context.horizontalRule.currentHR=e,this.util.hasClass(e,"on")||(this.util.addClass(e,"on"),this.controllersOn("hr",this.util.removeClass.bind(this.util,e,"on"))),!0}else this.util.hasClass(this.context.horizontalRule.currentHR,"on")&&this.controllersOff();return!1},appendHr:function(e){const t=this.util.createElement("HR");return t.className=e,this.focus(),this.insertComponent(t,!1,!0,!1)},horizontalRulePick:function(e){e.preventDefault(),e.stopPropagation();let t=e.target,i=null;for(;!i&&!/UL/i.test(t.tagName);)i=t.getAttribute("data-value"),t=t.parentNode;if(!i)return;const n=this.plugins.horizontalRule.appendHr.call(this,"__ke__"+i);n&&(this.setRange(n,0,n,0),this.submenuOff())}},list:{name:"list",display:"submenu",add:function(e,t){const i=e.context;i.list={targetButton:t,list:null,currentList:"",icons:{bullets:e.icons.list_bullets,number:e.icons.list_number}};let n=this.setSubmenu(e),l=n.querySelector("ul");l.addEventListener("click",this.pickup.bind(e)),i.list.list=l.querySelectorAll("li button"),e.initMenuTarget(this.name,t,n),n=null,l=null},setSubmenu:function(e){const t=e.lang,i=e.util.createElement("DIV");return i.className="ke-submenu ke-list-layer",i.innerHTML='<div class="ke-list-inner"><ul class="ke-list-basic"><li><button type="button" class="ke-btn-list ke-tooltip" data-command="OL" title="'+t.toolbar.orderList+'">'+e.icons.list_number+'</button></li><li><button type="button" class="ke-btn-list ke-tooltip" data-command="UL" title="'+t.toolbar.unorderList+'">'+e.icons.list_bullets+"</button></li></ul></div>",i},active:function(e){const t=this.context.list.targetButton,i=t.firstElementChild,n=this.util;if(e){if(n.isList(e)){const l=e.nodeName;return t.setAttribute("data-focus",l),n.addClass(t,"active"),/UL/i.test(l)?n.changeElement(i,this.context.list.icons.bullets):n.changeElement(i,this.context.list.icons.number),!0}}else t.removeAttribute("data-focus"),n.changeElement(i,this.context.list.icons.number),n.removeClass(t,"active");return!1},on:function(){const e=this.context.list,t=e.list,i=e.targetButton.getAttribute("data-focus")||"";if(i!==e.currentList){for(let e=0,n=t.length;e<n;e++)i===t[e].getAttribute("data-command")?this.util.addClass(t[e],"active"):this.util.removeClass(t[e],"active");e.currentList=i}},editList:function(e,t,i){let n=this.getRange(),l=t||this.getSelectedElementsAndComponents(!1);if(0===l.length){if(t)return;if(n=this.getRange_addLine(n,null),l=this.getSelectedElementsAndComponents(!1),0===l.length)return}const o=this.util;o.sortByDepth(l,!0);const s=l[0],a=l[l.length-1];let r=!o.isListCell(s)&&!o.isComponent(s)||s.previousElementSibling?s.previousElementSibling:s.parentNode.previousElementSibling,c=!o.isListCell(a)&&!o.isComponent(a)||a.nextElementSibling?a.nextElementSibling:a.parentNode.nextElementSibling;const d={sc:n.startContainer,so:n.startOffset,ec:n.endContainer,eo:n.endOffset};let u=!0;for(let h=0,g=l.length;h<g;h++)if(!o.isList(o.getRangeFormatElement(l[h],function(e){return this.getRangeFormatElement(e)&&e!==l[h]}.bind(o)))){u=!1;break}if(!u||r&&s.tagName===r.tagName&&e===r.tagName.toUpperCase()||c&&a.tagName===c.tagName&&e===c.tagName.toUpperCase()){const t=r?r.parentNode:r,i=c?c.parentNode:c;r=t&&!o.isWysiwygDiv(t)&&t.nodeName===e?t:r,c=i&&!o.isWysiwygDiv(i)&&i.nodeName===e?i:c;const n=r&&r.tagName===e,s=c&&c.tagName===e;let a=n?r:o.createElement(e),d=null,u=null;const h=function(e){return!this.isComponent(e)&&!this.isList(e)}.bind(o);for(let r,c,g,p,m,f,b,v,y,k=0,w=l.length;k<w;k++)if(c=l[k],0!==c.childNodes.length||o.isIgnoreNodeChange(c)){if(p=l[k+1],m=c.parentNode,f=p?p.parentNode:null,g=o.isListCell(c),y=o.isRangeFormatElement(m)?m:null,b=g&&!o.isWysiwygDiv(m)?m.parentNode:m,v=g&&!o.isWysiwygDiv(m)?!p||o.isListCell(b)?m:m.nextSibling:c.nextSibling,r=o.createElement("LI"),o.copyFormatAttributes(r,c),o.isComponent(c)){const e=/^HR$/i.test(c.nodeName);e||(r.innerHTML="<br>"),r.innerHTML+=c.outerHTML,e&&(r.innerHTML+="<br>")}else{const e=c.childNodes;for(;e[0];)r.appendChild(e[0])}a.appendChild(r),p&&b===f&&!o.isRangeFormatElement(v)||(d||(d=a),n&&p&&b===f||p&&o.isList(f)&&f===m||a.parentNode!==b&&b.insertBefore(a,v)),o.removeItem(c),n&&null===u&&(u=a.children.length-1),p&&(o.getRangeFormatElement(f,h)!==o.getRangeFormatElement(m,h)||o.isList(f)&&o.isList(m)&&o.getElementDepth(f)!==o.getElementDepth(m))&&(a=o.createElement(e)),y&&0===y.children.length&&o.removeItem(y)}else o.removeItem(c);u&&(d=d.children[u]),s&&(a.innerHTML+=c.innerHTML,o.removeItem(c))}else{if(i)for(let e=0,i=l.length;e<i;e++)for(let t=e-1;t>=0;t--)if(l[t].contains(l[e])){l.splice(e,1),e--,i--;break}const t=o.getRangeFormatElement(s),n=t&&t.tagName===e;let a,r;const c=function(e){return!this.isComponent(e)}.bind(o);n||(r=o.createElement(e));for(let s,d,u=0,h=l.length;u<h;u++)d=o.getRangeFormatElement(l[u],c),d&&o.isList(d)&&(s?s!==d?(i&&o.isListCell(d.parentNode)?this.plugins.list.detachNested.call(this,a.f):this.detachRangeFormatElement(a.f[0].parentNode,a.f,r,!1,!0),d=l[u].parentNode,n||(r=o.createElement(e)),s=d,a={r:s,f:[o.getParentElement(l[u],"LI")]}):a.f.push(o.getParentElement(l[u],"LI")):(s=d,a={r:s,f:[o.getParentElement(l[u],"LI")]}),u===h-1&&(i&&o.isListCell(d.parentNode)?this.plugins.list.detachNested.call(this,a.f):this.detachRangeFormatElement(a.f[0].parentNode,a.f,r,!1,!0)))}return this.effectNode=null,d},detachNested:function(e){const t=e[0],i=e[e.length-1],n=i.nextElementSibling,l=t.parentNode,o=l.parentNode.nextElementSibling,s=l.parentNode.parentNode;for(let r=0,c=e.length;r<c;r++)s.insertBefore(e[r],o);if(n&&l.children.length>0){const e=l.cloneNode(!1),t=l.childNodes,o=this.util.getPositionIndex(n);for(;t[o];)e.appendChild(t[o]);i.appendChild(e)}0===l.children.length&&this.util.removeItem(l),this.util.mergeSameTags(s);const a=this.util.getEdgeChildNodes(t,i);return{cc:t.parentNode,sc:a.sc,ec:a.ec}},editInsideList:function(e,t){const i=(t=t||this.getSelectedElements().filter(function(e){return this.isListCell(e)}.bind(this.util))).length;if(0===i||!e&&!this.util.isListCell(t[0].previousElementSibling)&&!this.util.isListCell(t[i-1].nextElementSibling))return{sc:t[0],so:0,ec:t[i-1],eo:1};let n=t[0].parentNode,l=t[i-1],o=null;if(e){if(n!==l.parentNode&&this.util.isList(l.parentNode.parentNode)&&l.nextElementSibling)for(l=l.nextElementSibling;l;)t.push(l),l=l.nextElementSibling;o=this.plugins.list.editList.call(this,n.nodeName.toUpperCase(),t,!0)}else{let e=this.util.createElement(n.nodeName),s=t[0].previousElementSibling,a=l.nextElementSibling;const r={s:null,e:null,sl:n,el:n};for(let l,o=0,u=i;o<u;o++)l=t[o],l.parentNode!==n&&(this.plugins.list.insiedList.call(this,n,e,s,a,r),n=l.parentNode,e=this.util.createElement(n.nodeName)),s=l.previousElementSibling,a=l.nextElementSibling,e.appendChild(l);this.plugins.list.insiedList.call(this,n,e,s,a,r);const c=this.util.getNodeFromPath(r.s,r.sl),d=this.util.getNodeFromPath(r.e,r.el);o={sc:c,so:0,ec:d,eo:d.textContent.length}}return o},insiedList:function(e,t,i,n,l){let o=!1;if(i&&t.tagName===i.tagName){const e=t.children;for(;e[0];)i.appendChild(e[0]);t=i,o=!0}if(n&&t.tagName===n.tagName){const e=n.children;for(;e[0];)t.appendChild(e[0]);const i=n.nextElementSibling;n.parentNode.removeChild(n),n=i}if(!o){this.util.isListCell(i)&&(e=i,n=null),e.insertBefore(t,n),l.s||(l.s=this.util.getNodePath(t.firstElementChild.firstChild,e,null),l.sl=e);const o=e.contains(l.sl)?this.util.getNodePath(l.sl,e):null;l.e=this.util.getNodePath(t.lastElementChild.firstChild,e,null),l.el=e,this.util.mergeSameTags(e,[l.s,l.e,o],!1),this.util.mergeNestedTags(e),o&&(l.sl=this.util.getNodeFromPath(o,e))}return t},pickup:function(e){e.preventDefault(),e.stopPropagation();let t=e.target,i="";for(;!i&&!/^UL$/i.test(t.tagName);)i=t.getAttribute("data-command"),t=t.parentNode;if(!i)return;const n=this.plugins.list.editList.call(this,i,null,!1);n&&this.setRange(n.sc,n.so,n.ec,n.eo),this.submenuOff(),this.history.push(!1)}},table:{name:"table",display:"submenu",init:function(){const e=this.context.table,t=this.plugins.table;if(t.removeEvents.call(this),t.selectedTable){const e=t.selectedTable.querySelectorAll(".ke-table-selected-cell");for(let t=0,i=e.length;t<i;t++)this.util.removeClass(e[t],"ke-table-selected-cell")}t.toggleEditor.call(this,!0),e.element=null,e.tdElement=null,e.trElement=null,e.trElements=null,e.tableXY=[],e.maxWidth=!0,e.fixedColumn=!1,e.physical_cellCnt=0,e.logical_cellCnt=0,e.rowCnt=0,e.rowIndex=0,e.physical_cellIndex=0,e.logical_cellIndex=0,e.current_colSpan=0,e.current_rowSpan=0,t.shift=!1,t.selectedCells=null,t.selectedTable=null,t.ref=null,t.fixedCell=null,t.selectedCell=null,t.fixedCellName=null},add:function(e,t){const i=e.context;let n=i.table={element:null,tdElement:null,trElement:null,trElements:null,tableXY:[],maxWidth:!0,fixedColumn:!1,rtl:e.options.rtl,cellControllerTop:"top"===e.options.tableCellControllerPosition,resizeText:null,headerButton:null,mergeButton:null,splitButton:null,splitMenu:null,maxText:e.lang.controller.maxSize,minText:e.lang.controller.minSize,physical_cellCnt:0,logical_cellCnt:0,rowCnt:0,rowIndex:0,physical_cellIndex:0,logical_cellIndex:0,current_colSpan:0,current_rowSpan:0,icons:{expansion:e.icons.expansion,reduction:e.icons.reduction}},l=this.setSubmenu(e),o=l.querySelector(".ke-controller-table-picker");n.tableHighlight=l.querySelector(".ke-table-size-highlighted"),n.tableUnHighlight=l.querySelector(".ke-table-size-unhighlighted"),n.tableDisplay=l.querySelector(".ke-table-size-display"),e.options.rtl&&(n.tableHighlight.style.left="167px");let s=this.setController_table(e);n.tableController=s,n.resizeButton=s.querySelector("._ke_table_resize"),n.resizeText=s.querySelector("._ke_table_resize > span > span"),n.columnFixedButton=s.querySelector("._ke_table_fixed_column"),n.headerButton=s.querySelector("._ke_table_header");let a=this.setController_tableEditor(e,n.cellControllerTop);n.resizeDiv=a,n.splitMenu=a.querySelector(".ke-btn-group-sub"),n.mergeButton=a.querySelector("._ke_table_merge_button"),n.splitButton=a.querySelector("._ke_table_split_button"),n.insertRowAboveButton=a.querySelector("._ke_table_insert_row_a"),n.insertRowBelowButton=a.querySelector("._ke_table_insert_row_b"),o.addEventListener("mousemove",this.onMouseMove_tablePicker.bind(e,n)),o.addEventListener("click",this.appendTable.bind(e)),a.addEventListener("click",this.onClick_tableController.bind(e)),s.addEventListener("click",this.onClick_tableController.bind(e)),e.initMenuTarget(this.name,t,l),i.element.relative.appendChild(a),i.element.relative.appendChild(s),l=null,o=null,a=null,s=null,n=null},setSubmenu:function(e){const t=e.util.createElement("DIV");return t.className="ke-submenu ke-selector-table",t.innerHTML='<div class="ke-table-size"><div class="ke-table-size-picker ke-controller-table-picker"></div><div class="ke-table-size-highlighted"></div><div class="ke-table-size-unhighlighted"></div></div><div class="ke-table-size-display">1 x 1</div>',t},setController_table:function(e){const t=e.lang,i=e.icons,n=e.util.createElement("DIV");return n.className="ke-controller ke-controller-table",n.innerHTML='<div><div class="ke-btn-group"><button type="button" data-command="resize" class="ke-btn ke-tooltip _ke_table_resize">'+i.expansion+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.controller.maxSize+'</span></span></button><button type="button" data-command="layout" class="ke-btn ke-tooltip _ke_table_fixed_column">'+i.fixed_column_width+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.controller.fixedColumnWidth+'</span></span></button><button type="button" data-command="header" class="ke-btn ke-tooltip _ke_table_header">'+i.table_header+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.controller.tableHeader+'</span></span></button><button type="button" data-command="remove" class="ke-btn ke-tooltip">'+i.delete+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.controller.remove+"</span></span></button></div></div>",n},setController_tableEditor:function(e,t){const i=e.lang,n=e.icons,l=e.util.createElement("DIV");return l.className="ke-controller ke-controller-table-cell",l.innerHTML=(t?"":'<div class="ke-arrow ke-arrow-up"></div>')+'<div class="ke-btn-group"><button type="button" data-command="insert" data-value="row" data-option="up" class="ke-btn ke-tooltip _ke_table_insert_row_a">'+n.insert_row_above+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+i.controller.insertRowAbove+'</span></span></button><button type="button" data-command="insert" data-value="row" data-option="down" class="ke-btn ke-tooltip _ke_table_insert_row_b">'+n.insert_row_below+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+i.controller.insertRowBelow+'</span></span></button><button type="button" data-command="delete" data-value="row" class="ke-btn ke-tooltip">'+n.delete_row+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+i.controller.deleteRow+'</span></span></button><button type="button" data-command="merge" class="_ke_table_merge_button ke-btn ke-tooltip" disabled>'+n.merge_cell+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+i.controller.mergeCells+'</span></span></button></div><div class="ke-btn-group" style="padding-top: 0;"><button type="button" data-command="insert" data-value="cell" data-option="left" class="ke-btn ke-tooltip">'+n.insert_column_left+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+i.controller.insertColumnBefore+'</span></span></button><button type="button" data-command="insert" data-value="cell" data-option="right" class="ke-btn ke-tooltip">'+n.insert_column_right+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+i.controller.insertColumnAfter+'</span></span></button><button type="button" data-command="delete" data-value="cell" class="ke-btn ke-tooltip">'+n.delete_column+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+i.controller.deleteColumn+'</span></span></button><button type="button" data-command="onsplit" class="_ke_table_split_button ke-btn ke-tooltip">'+n.split_cell+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+i.controller.splitCells+'</span></span></button><div class="ke-btn-group-sub kothing-editor-common ke-list-layer ke-table-split"><div class="ke-list-inner"><ul class="ke-list-basic"><li class="ke-btn-list" data-command="split" data-value="vertical" style="line-height:32px;" title="'+i.controller.VerticalSplit+'">'+i.controller.VerticalSplit+'</li><li class="ke-btn-list" data-command="split" data-value="horizontal" style="line-height:32px;" title="'+i.controller.HorizontalSplit+'">'+i.controller.HorizontalSplit+"</li></ul></div></div></div>",l},appendTable:function(){const e=this.util.createElement("TABLE"),t=this.plugins.table.createCells,i=this.context.table.tableXY[0];let n=this.context.table.tableXY[1],l="<tbody>";for(;n>0;)l+="<tr>"+t.call(this,"td",i)+"</tr>",--n;l+="</tbody>",e.innerHTML=l;if(this.insertComponent(e,!1,!0,!1)){const t=e.querySelector("td div");this.setRange(t,0,t,0),this.plugins.table.reset_table_picker.call(this)}},createCells:function(e,t,i){if(e=e.toLowerCase(),i){const t=this.util.createElement(e);return t.innerHTML="<div><br></div>",t}{let i="";for(;t>0;)i+="<"+e+"><div><br></div></"+e+">",t--;return i}},onMouseMove_tablePicker:function(e,t){t.stopPropagation();let i=this._window.Math.ceil(t.offsetX/18),n=this._window.Math.ceil(t.offsetY/18);i=i<1?1:i,n=n<1?1:n,e.rtl&&(e.tableHighlight.style.left=18*i-13+"px",i=11-i),e.tableHighlight.style.width=i+"em",e.tableHighlight.style.height=n+"em",this.util.changeTxt(e.tableDisplay,i+" x "+n),e.tableXY=[i,n]},reset_table_picker:function(){if(!this.context.table.tableHighlight)return;const e=this.context.table.tableHighlight.style,t=this.context.table.tableUnHighlight.style;e.width="1em",e.height="1em",t.width="10em",t.height="10em",this.util.changeTxt(this.context.table.tableDisplay,"1 x 1"),this.submenuOff()},call_controller_tableEdit:function(e){const t=this.plugins.table,i=this.context.table;if(!this.getSelection().isCollapsed&&!t.selectedCell)return this.controllersOff(),void this.util.removeClass(e,"ke-table-selected-cell");const n=i.element||this.plugins.table.selectedTable||this.util.getParentElement(e,"TABLE");i.maxWidth=this.util.hasClass(n,"ke-table-size-100")||"100%"===n.style.width||!n.style.width&&!this.util.hasClass(n,"ke-table-size-auto"),i.fixedColumn=this.util.hasClass(n,"ke-table-layout-fixed")||"fixed"===n.style.tableLayout,t.setTableStyle.call(this,i.maxWidth?"width|column":"width"),t.setPositionControllerTop.call(this,n),t.setPositionControllerDiv.call(this,e,t.shift),t.shift||this.controllersOn(i.resizeDiv,i.tableController,t.init.bind(this),e,"table")},setPositionControllerTop:function(e){this.setControllerPosition(this.context.table.tableController,e,"top",{left:0,top:0})},setPositionControllerDiv:function(e,t){const i=this.context.table,n=i.resizeDiv;this.plugins.table.setCellInfo.call(this,e,t),i.cellControllerTop?this.setControllerPosition(n,i.element,"top",{left:i.tableController.offsetWidth,top:0}):this.setControllerPosition(n,e,"bottom",{left:0,top:0})},setCellInfo:function(e,t){const i=this.context.table,n=i.element=this.plugins.table.selectedTable||this.util.getParentElement(e,"TABLE");if(/THEAD/i.test(n.firstElementChild.nodeName)?this.util.addClass(i.headerButton,"active"):this.util.removeClass(i.headerButton,"active"),t||0===i.physical_cellCnt){i.tdElement!==e&&(i.tdElement=e,i.trElement=e.parentNode);const t=i.trElements=n.rows,l=e.cellIndex;let o=0;for(let e=0,i=t[0].cells,n=t[0].cells.length;e<n;e++)o+=i[e].colSpan;const s=i.rowIndex=i.trElement.rowIndex;i.rowCnt=t.length,i.physical_cellCnt=i.trElement.cells.length,i.logical_cellCnt=o,i.physical_cellIndex=l,i.current_colSpan=i.tdElement.colSpan-1,i.current_rowSpan,i.trElement.cells[l].rowSpan;let a=[],r=[];for(let e,n,c=0;c<=s;c++){e=t[c].cells,n=0;for(let t,o,d,u,h=0,g=e.length;h<g;h++){if(t=e[h],o=t.colSpan-1,d=t.rowSpan-1,u=h+n,r.length>0)for(let e,t=0;t<r.length;t++)e=r[t],e.row>c||(u>=e.index?(n+=e.cs,u+=e.cs,e.rs-=1,e.row=c+1,e.rs<1&&(r.splice(t,1),t--)):h===g-1&&(e.rs-=1,e.row=c+1,e.rs<1&&(r.splice(t,1),t--)));if(c===s&&h===l){i.logical_cellIndex=u;break}d>0&&a.push({index:u,cs:o+1,rs:d,row:-1}),n+=o}r=r.concat(a).sort((function(e,t){return e.index-t.index})),a=[]}a=null,r=null}},editTable:function(e,t){const i=this.plugins.table,n=this.context.table,l=n.element,o="row"===e;if(o){const e=n.trElement.parentNode;if(/^THEAD$/i.test(e.nodeName)){if("up"===t)return;if(!e.nextElementSibling||!/^TBODY$/i.test(e.nextElementSibling.nodeName))return void(l.innerHTML+="<tbody><tr>"+i.createCells.call(this,"td",n.logical_cellCnt,!1)+"</tr></tbody>")}}if(i.ref){const e=n.tdElement,l=i.selectedCells;if(o)if(t)i.setCellInfo.call(this,"up"===t?l[0]:l[l.length-1],!0),i.editRow.call(this,t,e);else{let e=l[0].parentNode;const n=[l[0]];for(let t,i=1,o=l.length;i<o;i++)t=l[i],e!==t.parentNode&&(n.push(t),e=t.parentNode);for(let l=0,o=n.length;l<o;l++)i.setCellInfo.call(this,n[l],!0),i.editRow.call(this,t)}else{const n=l[0].parentNode;if(t){let o=null;for(let e=0,t=l.length-1;e<t;e++)if(n!==l[e+1].parentNode){o=l[e];break}i.setCellInfo.call(this,"left"===t?l[0]:o||l[0],!0),i.editCell.call(this,t,e)}else{const e=[l[0]];for(let t,i=1,o=l.length;i<o&&(t=l[i],n===t.parentNode);i++)e.push(t);for(let n=0,l=e.length;n<l;n++)i.setCellInfo.call(this,e[n],!0),i.editCell.call(this,t)}}t||i.init.call(this)}else i[o?"editRow":"editCell"].call(this,t);if(!t){const e=l.children;for(let t=0;t<e.length;t++)0===e[t].children.length&&(this.util.removeItem(e[t]),t--);0===l.children.length&&this.util.removeItem(l)}},editRow:function(e,t){const i=this.context.table,n=!e,l="up"===e,o=i.rowIndex,s=n||l?o:o+i.current_rowSpan+1,a=n?-1:1,r=i.trElements;let c=i.logical_cellCnt;for(let d,u=0,h=o+(n?-1:0);u<=h;u++){if(d=r[u].cells,0===d.length)return;for(let e,t,i=0,n=d.length;i<n;i++)e=d[i].rowSpan,t=d[i].colSpan,e<2&&t<2||e+u>s&&s>u&&(d[i].rowSpan=e+a,c-=t)}if(n){const e=r[o+1];if(e){const t=[];let i=r[o].cells,n=0;for(let e,l,o=0,s=i.length;o<s;o++)e=i[o],l=o+n,n+=e.colSpan-1,e.rowSpan>1&&(e.rowSpan-=1,t.push({cell:e.cloneNode(!1),index:l}));if(t.length>0){let l=t.shift();i=e.cells,n=0;for(let o,s,a=0,r=i.length;a<r&&(o=i[a],s=a+n,n+=o.colSpan-1,!(s>=l.index)||(a--,n--,n+=l.cell.colSpan-1,e.insertBefore(l.cell,o),l=t.shift(),l));a++);if(l){e.appendChild(l.cell);for(let i=0,n=t.length;i<n;i++)e.appendChild(t[i].cell)}}}i.element.deleteRow(s)}else{i.element.insertRow(s).innerHTML=this.plugins.table.createCells.call(this,"td",c,!1)}n?this.controllersOff():this.plugins.table.setPositionControllerDiv.call(this,t||i.tdElement,!0)},editCell:function(e,t){const i=this.context.table,n=this.util,l=!e,o="left"===e,s=i.current_colSpan,a=l||o?i.logical_cellIndex:i.logical_cellIndex+s+1,r=i.trElements;let c=[],d=[],u=0;const h=[],g=[];for(let p,m,f,b,v,y,k=0,w=i.rowCnt;k<w;k++){p=r[k],m=a,v=!1,f=p.cells,y=0;for(let e,t,i,o,r=0,p=f.length;r<p&&(e=f[r],e);r++)if(t=e.rowSpan-1,i=e.colSpan-1,l){if(o=r+y,d.length>0){const e=!f[r+1];for(let t,i=0;i<d.length;i++)t=d[i],t.row>k||(o>=t.index?(y+=t.cs,o=r+y,t.rs-=1,t.row=k+1,t.rs<1&&(d.splice(i,1),i--)):e&&(t.rs-=1,t.row=k+1,t.rs<1&&(d.splice(i,1),i--)))}t>0&&c.push({rs:t,cs:i+1,index:o,row:-1}),o>=m&&o+i<=m+s?h.push(e):o<=m+s&&o+i>=m?e.colSpan-=n.getOverlapRangeAtIndex(a,a+s,o,o+i):t>0&&(o<m||o+i>m+s)&&g.push({cell:e,i:k,rs:k+t}),y+=i}else{if(r>=m)break;if(i>0){if(u<1&&i+r>=m){e.colSpan+=1,m=null,u=t+1;break}m-=i}if(!v){for(let e,t=0;t<d.length;t++)e=d[t],m-=e.cs,e.rs-=1,e.rs<1&&(d.splice(t,1),t--);v=!0}}if(d=d.concat(c).sort((function(e,t){return e.index-t.index})),c=[],!l){if(u>0){u-=1;continue}null!==m&&f.length>0&&(b=this.plugins.table.createCells.call(this,f[0].nodeName,0,!0),b=p.insertBefore(b,f[m]))}}if(l){let e,t;for(let i,l=0,o=h.length;l<o;l++)i=h[l].parentNode,n.removeItem(h[l]),0===i.cells.length&&(e||(e=n.getArrayIndex(r,i)),t=n.getArrayIndex(r,i),n.removeItem(i));for(let i,l=0,o=g.length;l<o;l++)i=g[l],i.cell.rowSpan=n.getOverlapRangeAtIndex(e,t,i.i,i.rs);this.controllersOff()}else this.plugins.table.setPositionControllerDiv.call(this,t||i.tdElement,!0)},closeSplitMenu:null,openSplitMenu:function(){this.util.addClass(this.context.table.splitButton,"on"),this.context.table.splitMenu.style.display="inline-table",this.plugins.table.closeSplitMenu=function(){this.util.removeClass(this.context.table.splitButton,"on"),this.context.table.splitMenu.style.display="none",this.removeDocEvent("click",this.plugins.table.closeSplitMenu),this.plugins.table.closeSplitMenu=null}.bind(this),this.addDocEvent("click",this.plugins.table.closeSplitMenu)},splitCells:function(e){const t=this.util,i="vertical"===e,n=this.context.table,l=n.tdElement,o=n.trElements,s=n.trElement,a=n.logical_cellIndex,r=n.rowIndex,c=this.plugins.table.createCells.call(this,l.nodeName,0,!0);if(i){const e=l.colSpan;if(c.rowSpan=l.rowSpan,e>1)c.colSpan=this._window.Math.floor(e/2),l.colSpan=e-c.colSpan,s.insertBefore(c,l.nextElementSibling);else{let t=[],i=[];for(let s,r,c=0,d=n.rowCnt;c<d;c++){s=o[c].cells,r=0;for(let n,o,d,u,h=0,g=s.length;h<g;h++){if(n=s[h],o=n.colSpan-1,d=n.rowSpan-1,u=h+r,i.length>0)for(let e,t=0;t<i.length;t++)e=i[t],e.row>c||(u>=e.index?(r+=e.cs,u+=e.cs,e.rs-=1,e.row=c+1,e.rs<1&&(i.splice(t,1),t--)):h===g-1&&(e.rs-=1,e.row=c+1,e.rs<1&&(i.splice(t,1),t--)));if(u<=a&&d>0&&t.push({index:u,cs:o+1,rs:d,row:-1}),n!==l&&u<=a&&u+o>=a+e-1){n.colSpan+=1;break}if(u>a)break;r+=o}i=i.concat(t).sort((function(e,t){return e.index-t.index})),t=[]}s.insertBefore(c,l.nextElementSibling)}}else{const e=l.rowSpan;if(c.colSpan=l.colSpan,e>1){c.rowSpan=this._window.Math.floor(e/2);const i=e-c.rowSpan,n=[],r=t.getArrayIndex(o,s)+i;for(let e,t,l=0;l<r;l++){e=o[l].cells,t=0;for(let i,o,s,c=0,d=e.length;c<d&&(s=c+t,!(s>=a));c++)i=e[c],o=i.rowSpan-1,o>0&&o+l>=r&&s<a&&n.push({index:s,cs:i.colSpan}),t+=i.colSpan-1}const d=o[r],u=d.cells;let h=n.shift();for(let e,t,l,o,s=0,g=u.length,p=0;s<g;s++){if(l=s+p,e=u[s],t=e.colSpan-1,o=l+t+1,h&&o>=h.index&&(p+=h.cs,o+=h.cs,h=n.shift()),o>=a||s===g-1){d.insertBefore(c,e.nextElementSibling);break}p+=t}l.rowSpan=i}else{c.rowSpan=l.rowSpan;const e=t.createElement("TR");e.appendChild(c);for(let t,n=0;n<r;n++){if(t=o[n].cells,0===t.length)return;for(let e=0,i=t.length;e<i;e++)n+t[e].rowSpan-1>=r&&(t[e].rowSpan+=1)}const i=n.physical_cellIndex,a=s.cells;for(let t=0,n=a.length;t<n;t++)t!==i&&(a[t].rowSpan+=1);s.parentNode.insertBefore(e,s.nextElementSibling)}}this.focusEdge(l),this.plugins.table.setPositionControllerDiv.call(this,l,!0)},mergeCells:function(){const e=this.plugins.table,t=this.context.table,i=this.util,n=e.ref,l=e.selectedCells,o=l[0];let s=null,a=null;const r=n.ce-n.cs+1;let c=n.re-n.rs+1,d="",u=null;for(let h,g,p=1,m=l.length;p<m;p++){h=l[p],u!==h.parentNode&&(u=h.parentNode),g=h.children;for(let e=0,t=g.length;e<t;e++)i.isFormatElement(g[e])&&i.onlyZeroWidthSpace(g[e].textContent)&&i.removeItem(g[e]);d+=h.innerHTML,i.removeItem(h),0===u.cells.length&&(s?a=u:s=u,c-=1)}if(s){const e=t.trElements,n=i.getArrayIndex(e,s),l=i.getArrayIndex(e,a||s),o=[];for(let t,s=0;s<=l;s++)if(t=e[s].cells,0!==t.length)for(let e,o,a=0,r=t.length;a<r;a++)e=t[a],o=e.rowSpan-1,o>0&&s+o>=n&&(e.rowSpan-=i.getOverlapRangeAtIndex(n,l,s,s+o));else o.push(e[s]);for(let t=0,s=o.length;t<s;t++)i.removeItem(o[t])}o.innerHTML+=d,o.colSpan=r,o.rowSpan=c,this.controllersOff(),e.setActiveButton.call(this,!0,!1),e.call_controller_tableEdit.call(this,o),i.addClass(o,"ke-table-selected-cell"),this.focusEdge(o)},toggleHeader:function(){const e=this.util,t=this.context.table.headerButton,i=e.hasClass(t,"active"),n=this.context.table.element;if(i)e.removeItem(n.querySelector("thead"));else{const t=e.createElement("THEAD");t.innerHTML="<tr>"+this.plugins.table.createCells.call(this,"th",this.context.table.logical_cellCnt,!1)+"</tr>",n.insertBefore(t,n.firstElementChild)}e.toggleClass(t,"active"),/TH/i.test(this.context.table.tdElement.nodeName)?this.controllersOff():this.plugins.table.setPositionControllerDiv.call(this,this.context.table.tdElement,!1)},setTableStyle:function(e){const t=this.context.table,i=t.element;let n,l,o,s;e.indexOf("width")>-1&&(n=t.resizeButton.firstElementChild,l=t.resizeText,t.maxWidth?(o=t.icons.reduction,s=t.minText,t.columnFixedButton.style.display="block",this.util.removeClass(i,"ke-table-size-auto"),this.util.addClass(i,"ke-table-size-100")):(o=t.icons.expansion,s=t.maxText,t.columnFixedButton.style.display="none",this.util.removeClass(i,"ke-table-size-100"),this.util.addClass(i,"ke-table-size-auto")),this.util.changeElement(n,o),this.util.changeTxt(l,s)),e.indexOf("column")>-1&&(t.fixedColumn?(this.util.removeClass(i,"ke-table-layout-auto"),this.util.addClass(i,"ke-table-layout-fixed"),this.util.addClass(t.columnFixedButton,"active")):(this.util.removeClass(i,"ke-table-layout-fixed"),this.util.addClass(i,"ke-table-layout-auto"),this.util.removeClass(t.columnFixedButton,"active")))},setActiveButton:function(e,t){const i=this.context.table;/^TH$/i.test(e.nodeName)?(i.insertRowAboveButton.setAttribute("disabled",!0),i.insertRowBelowButton.setAttribute("disabled",!0)):(i.insertRowAboveButton.removeAttribute("disabled"),i.insertRowBelowButton.removeAttribute("disabled")),t&&e!==t?(i.splitButton.setAttribute("disabled",!0),i.mergeButton.removeAttribute("disabled")):(i.splitButton.removeAttribute("disabled"),i.mergeButton.setAttribute("disabled",!0))},bindOnSelect:null,bindOffSelect:null,bindOffShift:null,selectedCells:null,shift:!1,fixedCell:null,fixedCellName:null,selectedCell:null,selectedTable:null,ref:null,toggleEditor:function(e){this.context.element.wysiwyg.setAttribute("contenteditable",e),e?this.util.removeClass(this.context.element.wysiwyg,"ke-disabled"):this.util.addClass(this.context.element.wysiwyg,"ke-disabled")},offCellMultiSelect:function(e){e.stopPropagation();const t=this.plugins.table;t.shift?t.initBind&&(this._wd.removeEventListener("touchmove",t.initBind),t.initBind=null):(t.removeEvents.call(this),t.toggleEditor.call(this,!0)),t.fixedCell&&t.selectedTable&&(t.setActiveButton.call(this,t.fixedCell,t.selectedCell),t.call_controller_tableEdit.call(this,t.selectedCell||t.fixedCell),t.selectedCells=t.selectedTable.querySelectorAll(".ke-table-selected-cell"),t.selectedCell&&t.fixedCell&&this.focusEdge(t.selectedCell),t.shift||(t.fixedCell=null,t.selectedCell=null,t.fixedCellName=null))},onCellMultiSelect:function(e){this.antiBlur=!0;const t=this.plugins.table,i=this.util.getParentElement(e.target,this.util.isCell);if(t.shift)i===t.fixedCell?t.toggleEditor.call(this,!0):t.toggleEditor.call(this,!1);else if(!t.ref){if(i===t.fixedCell)return;t.toggleEditor.call(this,!1)}i&&i!==t.selectedCell&&t.fixedCellName===i.nodeName&&t.selectedTable===this.util.getParentElement(i,"TABLE")&&(t.selectedCell=i,t.setMultiCells.call(this,t.fixedCell,i))},setMultiCells:function(e,t){const i=this.plugins.table,n=i.selectedTable.rows,l=this.util,o=i.selectedTable.querySelectorAll(".ke-table-selected-cell");for(let d=0,u=o.length;d<u;d++)l.removeClass(o[d],"ke-table-selected-cell");if(e===t&&(l.addClass(e,"ke-table-selected-cell"),!i.shift))return;let s=!0,a=[],r=[];const c=i.ref={_i:0,cs:null,ce:null,rs:null,re:null};for(let d,u,h=0,g=n.length;h<g;h++){d=n[h].cells,u=0;for(let i,n,o,g,p=0,m=d.length;p<m;p++){if(i=d[p],o=i.colSpan-1,g=i.rowSpan-1,n=p+u,a.length>0)for(let e,t=0;t<a.length;t++)e=a[t],e.row>h||(n>=e.index?(u+=e.cs,n+=e.cs,e.rs-=1,e.row=h+1,e.rs<1&&(a.splice(t,1),t--)):p===m-1&&(e.rs-=1,e.row=h+1,e.rs<1&&(a.splice(t,1),t--)));if(s){if(i!==e&&i!==t||(c.cs=null!==c.cs&&c.cs<n?c.cs:n,c.ce=null!==c.ce&&c.ce>n+o?c.ce:n+o,c.rs=null!==c.rs&&c.rs<h?c.rs:h,c.re=null!==c.re&&c.re>h+g?c.re:h+g,c._i+=1),2===c._i){s=!1,a=[],r=[],h=-1;break}}else if(l.getOverlapRangeAtIndex(c.cs,c.ce,n,n+o)&&l.getOverlapRangeAtIndex(c.rs,c.re,h,h+g)){const e=c.cs<n?c.cs:n,t=c.ce>n+o?c.ce:n+o,s=c.rs<h?c.rs:h,d=c.re>h+g?c.re:h+g;if(c.cs!==e||c.ce!==t||c.rs!==s||c.re!==d){c.cs=e,c.ce=t,c.rs=s,c.re=d,h=-1,a=[],r=[];break}l.addClass(i,"ke-table-selected-cell")}g>0&&r.push({index:n,cs:o+1,rs:g,row:-1}),u+=i.colSpan-1}a=a.concat(r).sort((function(e,t){return e.index-t.index})),r=[]}},removeEvents:function(){const e=this.plugins.table;e.initBind&&(this._wd.removeEventListener("touchmove",e.initBind),e.initBind=null),e.bindOnSelect&&(this._wd.removeEventListener("mousedown",e.bindOnSelect),this._wd.removeEventListener("mousemove",e.bindOnSelect),e.bindOnSelect=null),e.bindOffSelect&&(this._wd.removeEventListener("mouseup",e.bindOffSelect),e.bindOffSelect=null),e.bindOffShift&&(this._wd.removeEventListener("keyup",e.bindOffShift),e.bindOffShift=null)},initBind:null,onTableCellMultiSelect:function(e,t){const i=this.plugins.table;i.removeEvents.call(this),this.controllersOff(),i.shift=t,i.fixedCell=e,i.fixedCellName=e.nodeName,i.selectedTable=this.util.getParentElement(e,"TABLE");const n=i.selectedTable.querySelectorAll(".ke-table-selected-cell");for(let l=0,o=n.length;l<o;l++)this.util.removeClass(n[l],"ke-table-selected-cell");this.util.addClass(e,"ke-table-selected-cell"),i.bindOnSelect=i.onCellMultiSelect.bind(this),i.bindOffSelect=i.offCellMultiSelect.bind(this),t?(i.bindOffShift=function(){this.controllersOn(this.context.table.resizeDiv,this.context.table.tableController,this.plugins.table.init.bind(this),e,"table"),i.ref||this.controllersOff()}.bind(this),this._wd.addEventListener("keyup",i.bindOffShift,!1),this._wd.addEventListener("mousedown",i.bindOnSelect,!1)):this._wd.addEventListener("mousemove",i.bindOnSelect,!1),this._wd.addEventListener("mouseup",i.bindOffSelect,!1),i.initBind=i.init.bind(this),this._wd.addEventListener("touchmove",i.initBind,!1)},onClick_tableController:function(e){e.stopPropagation();const t=e.target.getAttribute("data-command")?e.target:e.target.parentNode;if(t.getAttribute("disabled"))return;const i=t.getAttribute("data-command"),n=t.getAttribute("data-value"),l=t.getAttribute("data-option"),o=this.plugins.table;if("function"===typeof o.closeSplitMenu&&(o.closeSplitMenu(),"onsplit"===i))return;if(!i)return;e.preventDefault();const s=this.context.table;switch(i){case"insert":case"delete":o.editTable.call(this,n,l);break;case"header":o.toggleHeader.call(this);break;case"onsplit":o.openSplitMenu.call(this);break;case"split":o.splitCells.call(this,n);break;case"merge":o.mergeCells.call(this);break;case"resize":s.maxWidth=!s.maxWidth,o.setTableStyle.call(this,"width"),o.setPositionControllerTop.call(this,s.element),o.setPositionControllerDiv.call(this,s.tdElement,o.shift);break;case"layout":s.fixedColumn=!s.fixedColumn,o.setTableStyle.call(this,"column"),o.setPositionControllerTop.call(this,s.element),o.setPositionControllerDiv.call(this,s.tdElement,o.shift);break;case"remove":const e=s.element.parentNode;this.util.removeItem(s.element),this.controllersOff(),e!==this.context.element.wysiwyg&&this.util.removeItemAllParents(e,(function(e){return 0===e.childNodes.length}),null),this.focus()}this.history.push(!1)}},formatBlock:{name:"formatBlock",display:"submenu",add:function(e,t){const i=e.context,n=e.icons;i.formatBlock={targetText:t.querySelector(".txt"),targetTooltip:t.parentNode.querySelector(".ke-tooltip-text"),formatList:null,currentFormat:"",icon:n.format_block};let l=this.setSubmenu(e);l.querySelector("ul").addEventListener("click",this.pickUp.bind(e)),i.formatBlock.formatList=l.querySelectorAll("li button"),e.initMenuTarget(this.name,t,l),l=null},setSubmenu:function(e){const t=e.options,i=e.lang.toolbar,n=e.util.createElement("DIV");n.className="ke-submenu ke-list-layer ke-list-format";const l=["p","div","blockquote","pre","h1","h2","h3","h4","h5","h6"],o=t.formats&&0!==t.formats.length?t.formats:l;let s='<div class="ke-list-inner"><ul class="ke-list-basic">';for(let a,r,c,d,u,h,g,p=0,m=o.length;p<m;p++)a=o[p],"string"===typeof a&&l.indexOf(a)>-1?(r=a.toLowerCase(),c="blockquote"===r?"range":"pre"===r?"free":"replace",u=/^h/.test(r)?r.match(/\d+/)[0]:"",d=i["tag_"+(u?"h":r)]+u,g="",h=""):(r=a.tag.toLowerCase(),c=a.command,d=a.name||r,g=a.class,h=g?' class="'+g+'"':""),s+='<li><button type="button" class="ke-btn-list" data-command="'+c+'" data-value="'+r+'" data-class="'+g+'" title="'+d+'"><'+r+h+">"+d+"</"+r+"></button></li>";return s+="</ul></div>",n.innerHTML=s,n},active:function(e){let t=this.lang.toolbar.formats;const i=this.context.formatBlock.targetText.firstElementChild,n=this.context.formatBlock.icon;if(e){if(this.util.isFormatElement(e)){const n=this.context.formatBlock.formatList,l=e.nodeName.toLowerCase(),o=(e.className.match(/(\s|^)__ke__format__[^\s]+/)||[""])[0].trim();for(let e,i=0,s=n.length;i<s;i++)if(e=n[i],l===e.getAttribute("data-value")&&o===e.getAttribute("data-class")){t=e.title;break}return this.util.changeElement(i,`<span>${t}</span>`),i.setAttribute("data-value",l),i.setAttribute("data-class",o),!0}}else this.util.changeElement(i,n);return!1},on:function(){const e=this.context.formatBlock,t=e.formatList,i=e.targetText,n=(i.getAttribute("data-value")||"")+(i.getAttribute("data-class")||"");if(n!==e.currentFormat){for(let e,i=0,l=t.length;i<l;i++)e=t[i],n===e.getAttribute("data-value")+e.getAttribute("data-class")?this.util.addClass(e,"active"):this.util.removeClass(e,"active");e.currentFormat=n}},pickUp:function(e){e.preventDefault(),e.stopPropagation();let t=e.target,i=null,n=null,l=null,o="";for(;!i&&!/UL/i.test(t.tagName);){if(i=t.getAttribute("data-command"),n=t.getAttribute("data-value"),o=t.getAttribute("data-class"),i){l=t.firstChild;break}t=t.parentNode}if(i){if("range"===i){const e=l.cloneNode(!1);this.applyRangeFormatElement(e)}else{let e=this.getRange(),t=this.getSelectedElementsAndComponents(!1);if(0===t.length&&(e=this.getRange_addLine(e,null),t=this.getSelectedElementsAndComponents(!1),0===t.length))return;const s=e.startOffset,a=e.endOffset,r=this.util;let c=t[0],d=t[t.length-1];const u=r.getNodePath(e.startContainer,c,null,null),h=r.getNodePath(e.endContainer,d,null,null),g=this.detachList(t,!1);g.sc&&(c=g.sc),g.ec&&(d=g.ec),this.setRange(r.getNodeFromPath(u,c),s,r.getNodeFromPath(h,d),a);const p=this.getSelectedElementsAndComponents(!1);if("free"===i){const e=p.length-1;let t=p[e].parentNode,i=l.cloneNode(!1);const n=i;for(let o,s,a,c,d,u,h=e,g=!0;h>=0;h--)if(o=p[h],o!==(p[h+1]?p[h+1].parentNode:null)){if(u=r.isComponent(o),s=u?"":o.innerHTML.replace(/(?!>)\s+(?=<)|\n/g," "),a=r.getParentElement(o,(function(e){return e.parentNode===t})),(t!==o.parentNode||u)&&(r.isFormatElement(t)?(t.parentNode.insertBefore(i,t.nextSibling),t=t.parentNode):(t.insertBefore(i,a?a.nextSibling:null),t=o.parentNode),c=i.nextSibling,c&&i.nodeName===c.nodeName&&r.isSameAttributes(i,c)&&(i.innerHTML+="<BR>"+c.innerHTML,r.removeItem(c)),i=l.cloneNode(!1),g=!0),d=i.innerHTML,i.innerHTML=(g||!s||!d||/<br>$/i.test(s)?s:s+"<BR>")+d,0===h){t.insertBefore(i,o),c=o.nextSibling,c&&i.nodeName===c.nodeName&&r.isSameAttributes(i,c)&&(i.innerHTML+="<BR>"+c.innerHTML,r.removeItem(c));const e=i.previousSibling;e&&i.nodeName===e.nodeName&&r.isSameAttributes(i,e)&&(e.innerHTML+="<BR>"+i.innerHTML,r.removeItem(i))}u||r.removeItem(o),s&&(g=!1)}this.setRange(n,0,n,0)}else{for(let e,t,i=0,s=p.length;i<s;i++)e=p[i],e.nodeName.toLowerCase()===n.toLowerCase()&&(e.className.match(/(\s|^)__ke__format__[^\s]+/)||[""])[0].trim()===o||r.isComponent(e)||(t=l.cloneNode(!1),r.copyFormatAttributes(t,e),t.innerHTML=e.innerHTML,e.parentNode.replaceChild(t,e)),0===i&&(c=t||e),i===s-1&&(d=t||e),t=null;this.setRange(r.getNodeFromPath(u,c),s,r.getNodeFromPath(h,d),a)}this.history.push(!1)}this.submenuOff()}}},lineHeight:{name:"lineHeight",display:"submenu",add:function(e,t){const i=e.context;i.lineHeight={sizeList:null,currentSize:-1};let n=this.setSubmenu(e),l=n.querySelector("ul");l.addEventListener("click",this.pickup.bind(e)),i.lineHeight.sizeList=l.querySelectorAll("li button"),e.initMenuTarget(this.name,t,n),n=null,l=null},setSubmenu:function(e){const t=e.options,i=e.lang,n=e.util.createElement("DIV");n.className="ke-submenu ke-list-layer";const l=t.lineHeights?t.lineHeights:[{text:"1",value:1},{text:"1.15",value:1.15},{text:"1.5",value:1.5},{text:"2",value:2}];let o='<div class="ke-list-inner"><ul class="ke-list-basic"><li><button type="button" class="default_value ke-btn-list" title="'+i.toolbar.default+'">('+i.toolbar.default+")</button></li>";for(let s,a=0,r=l.length;a<r;a++)s=l[a],o+='<li><button type="button" class="ke-btn-list" data-value="'+s.value+'" title="'+s.text+'">'+s.text+"</button></li>";return o+="</ul></div>",n.innerHTML=o,n},on:function(){const e=this.context.lineHeight,t=e.sizeList,i=this.util.getFormatElement(this.getSelectionNode()),n=i?i.style.lineHeight+"":"";if(n!==e.currentSize){for(let e=0,i=t.length;e<i;e++)n===t[e].getAttribute("data-value")?this.util.addClass(t[e],"active"):this.util.removeClass(t[e],"active");e.currentSize=n}},pickup:function(e){if(!/^BUTTON$/i.test(e.target.tagName))return!1;e.preventDefault(),e.stopPropagation();const t=e.target.getAttribute("data-value")||"",i=this.getSelectedElements();for(let n=0,l=i.length;n<l;n++)i[n].style.lineHeight=t;this.submenuOff(),this.history.push(!1)}},template:l,paragraphStyle:{name:"paragraphStyle",display:"submenu",add:function(e,t){const i=e.context;i.paragraphStyle={classList:null};let n=this.setSubmenu(e);n.querySelector("ul").addEventListener("click",this.pickUp.bind(e)),i.paragraphStyle.classList=n.querySelectorAll("li button"),e.initMenuTarget(this.name,t,n),n=null},setSubmenu:function(e){const t=e.options,i=e.util.createElement("DIV");i.className="ke-submenu ke-list-layer ke-list-format";const n=e.lang.menu,l={spaced:{name:n.spaced,class:"__ke__p-spaced",_class:""},bordered:{name:n.bordered,class:"__ke__p-bordered",_class:""},neon:{name:n.neon,class:"__ke__p-neon",_class:""}},o=t.paragraphStyles&&0!==t.paragraphStyles.length?t.paragraphStyles:["spaced","bordered","neon"];let s='<div class="ke-list-inner"><ul class="ke-list-basic">';for(let a,r,c,d,u=0,h=o.length;u<h;u++){if(a=o[u],"string"===typeof a){const e=l[a.toLowerCase()];if(!e)continue;a=e}r=a.name,c=a.class?' class="'+a.class+'"':"",d=a.class,s+='<li><button type="button" class="ke-btn-list'+(d?" "+d:"")+'" data-value="'+a.class+'" title="'+r+'"><div'+c+">"+r+"</div></button></li>"}return s+="</ul></div>",i.innerHTML=s,i},on:function(){const e=this.context.paragraphStyle.classList,t=this.util.getFormatElement(this.getSelectionNode());for(let i=0,n=e.length;i<n;i++)this.util.hasClass(t,e[i].getAttribute("data-value"))?this.util.addClass(e[i],"active"):this.util.removeClass(e[i],"active")},pickUp:function(e){e.preventDefault(),e.stopPropagation();let t=e.target,i=null;for(;!/^UL$/i.test(t.tagName)&&(i=t.getAttribute("data-value"),!i);)t=t.parentNode;if(!i)return;let n=this.getSelectedElements();if(0===n.length&&(this.getRange_addLine(this.getRange(),null),n=this.getSelectedElements(),0===n.length))return;const l=this.util.hasClass(t,"active")?this.util.removeClass.bind(this.util):this.util.addClass.bind(this.util);for(let o=0,s=n.length;o<s;o++)l(n[o],i);this.submenuOff(),this.history.push(!1)}},textStyle:{name:"textStyle",display:"submenu",add:function(e,t){const i=e.context;i.textStyle={styleList:null};let n=this.setSubmenu(e),l=n.querySelector("ul");l.addEventListener("click",this.pickup.bind(e)),i.textStyle.styleList=n.querySelectorAll("li button"),e.initMenuTarget(this.name,t,n),n=null,l=null},setSubmenu:function(e){const t=e.options,i=e.util.createElement("DIV");i.className="ke-submenu ke-list-layer ke-list-format";const n={code:{name:e.lang.menu.code,class:"__ke__t-code",tag:"code"},translucent:{name:e.lang.menu.translucent,style:"opacity: 0.5;",tag:"span"},shadow:{name:e.lang.menu.shadow,class:"__ke__t-shadow",tag:"span"}},l=t.textStyles?t.textStyles:e._window.Object.keys(n);let o='<div class="ke-list-inner"><ul class="ke-list-basic">';for(let s,a,r,c,d,u,h,g=0,p=l.length;g<p;g++){if(s=l[g],c="",u="",d=[],"string"===typeof s){const e=n[s.toLowerCase()];if(!e)continue;s=e}r=s.name,a=s.tag||"span",h=s.class,s.style&&(c+=' style="'+s.style+'"',u+=s.style.replace(/:[^;]+(;|$)\s*/g,","),d.push("style")),s.class&&(c+=' class="'+s.class+'"',u+="."+s.class.trim().replace(/\s+/g,",."),d.push("class")),u=u.replace(/,$/,""),o+='<li><button type="button" class="ke-btn-list'+(h?" "+h:"")+'" data-command="'+a+'" data-value="'+u+'" title="'+r+'"><'+a+c+">"+r+"</"+a+"></button></li>"}return o+="</ul></div>",i.innerHTML=o,i},on:function(){const e=this.util,t=this.context.textStyle.styleList,i=this.getSelectionNode();for(let n,l,o,s=0,a=t.length;s<a;s++){n=t[s],l=n.getAttribute("data-value").split(",");for(let t,s,a=0;a<l.length;a++){for(t=i,o=!1;t&&!e.isFormatElement(t)&&!e.isComponent(t);){if(t.nodeName.toLowerCase()===n.getAttribute("data-command").toLowerCase()&&(s=l[a],/^\./.test(s)?e.hasClass(t,s.replace(/^\./,"")):t.style[s])){o=!0;break}t=t.parentNode}if(!o)break}o?e.addClass(n,"active"):e.removeClass(n,"active")}},pickup:function(e){e.preventDefault(),e.stopPropagation();let t=e.target,i=null,n=null;for(;!i&&!/UL/i.test(t.tagName);){if(i=t.getAttribute("data-command"),i){n=t.firstChild;break}t=t.parentNode}if(!i)return;const l=n.style.cssText.replace(/:.+(;|$)/g,",").split(",");l.pop();const o=n.classList;for(let r=0,c=o.length;r<c;r++)l.push("."+o[r]);const s=this.util.hasClass(t,"active")?null:n.cloneNode(!1),a=s?null:[n.nodeName];this.nodeChange(s,l,a,!0),this.submenuOff()}},link:{name:"link",display:"dialog",add:function(e){e.addModule([a,c]);const t=e.context,i=t.link={focusElement:null,linkAnchor:null,anchorCtx:null};let n=this.setDialog(e);i.modal=n;let l=this.setController_LinkButton(e);i.linkController=l,n.querySelector("form").addEventListener("submit",this.submit.bind(e)),l.addEventListener("click",this.onClick_linkController.bind(e)),t.dialog.modal.appendChild(n),t.element.relative.appendChild(l),e.plugins.anchor.initEvent.call(e,"link",n),i.focusElement=t.anchor.caller.link.urlInput,n=null,l=null},setDialog:function(e){const t=e.lang,i=e.util.createElement("DIV"),n=e.icons;i.className="ke-dialog-content",i.style.display="none";const l='<form><div class="ke-dialog-header"><button type="button" data-command="close" class="ke-btn ke-dialog-close" aria-label="Close" title="'+t.dialogBox.close+'">'+n.cancel+'</button><span class="ke-modal-title">'+t.dialogBox.linkBox.title+"</span></div>"+e.context.anchor.forms.innerHTML+'<div class="ke-dialog-footer"><button type="submit" class="ke-btn-primary" title="'+t.dialogBox.submitButton+'"><span>'+t.dialogBox.submitButton+"</span></button></div></form>";return i.innerHTML=l,i},setController_LinkButton:function(e){const t=e.lang,i=e.icons,n=e.util.createElement("DIV");return n.className="ke-controller ke-controller-link",n.innerHTML='<div class="ke-arrow ke-arrow-up"></div><div class="link-content"><span><a target="_blank" href=""></a>&nbsp;</span><div class="ke-btn-group"><button type="button" data-command="update" tabindex="-1" class="ke-btn ke-tooltip">'+i.edit+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.controller.edit+'</span></span></button><button type="button" data-command="unlink" tabindex="-1" class="ke-btn ke-tooltip">'+i.unlink+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.controller.unlink+'</span></span></button><button type="button" data-command="delete" tabindex="-1" class="ke-btn ke-tooltip">'+i.delete+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.controller.remove+"</span></span></button></div></div>",n},open:function(){this.plugins.dialog.open.call(this,"link","link"===this.currentControllerName)},submit:function(e){this.showLoading(),e.preventDefault(),e.stopPropagation();try{const e=this.plugins.anchor.createAnchor.call(this,this.context.anchor.caller.link,!1);if(this.context.dialog.updateModal){const e=this.context.link.linkAnchor.childNodes[0];this.setRange(e,0,e,e.textContent.length)}else{const t=this.getSelectedElements();if(t.length>1){const i=this.util.createElement(t[0].nodeName);if(i.appendChild(e),!this.insertNode(i,null,!0))return}else if(!this.insertNode(e,null,!0))return;this.setRange(e.childNodes[0],0,e.childNodes[0],e.textContent.length)}}finally{this.plugins.dialog.close.call(this),this.closeLoading(),this.history.push(!1)}return!1},active:function(e){if(e){if(this.util.isAnchor(e)&&null===e.getAttribute("data-image-link"))return this.controllerArray.indexOf(this.context.link.linkController)<0&&this.plugins.link.call_controller.call(this,e),!0}else this.controllerArray.indexOf(this.context.link.linkController)>-1&&this.controllersOff();return!1},on:function(e){this.plugins.anchor.on.call(this,this.context.anchor.caller.link,e)},call_controller:function(e){this.editLink=this.context.link.linkAnchor=this.context.anchor.caller.link.linkAnchor=e;const t=this.context.link.linkController,i=t.querySelector("a");i.href=e.href,i.title=e.textContent,i.textContent=e.textContent,this.util.addClass(e,"on"),this.setControllerPosition(t,e,"bottom",{left:0,top:0}),this.controllersOn(t,e,"link",this.util.removeClass.bind(this.util,this.context.link.linkAnchor,"on"))},onClick_linkController:function(e){e.stopPropagation();const t=e.target.getAttribute("data-command")||e.target.parentNode.getAttribute("data-command");if(t){if(e.preventDefault(),/update/.test(t))this.plugins.dialog.open.call(this,"link",!0);else if(/unlink/.test(t)){const e=this.util.getChildElement(this.context.link.linkAnchor,(function(e){return 0===e.childNodes.length||3===e.nodeType}),!1),t=this.util.getChildElement(this.context.link.linkAnchor,(function(e){return 0===e.childNodes.length||3===e.nodeType}),!0);this.setRange(e,0,t,t.textContent.length),this.nodeChange(null,null,["A"],!1)}else this.util.removeItem(this.context.link.linkAnchor),this.context.anchor.caller.link.linkAnchor=null,this.focus(),this.history.push(!1);this.controllersOff()}},init:function(){this.context.link.linkController.style.display="none",this.plugins.anchor.init.call(this,this.context.anchor.caller.link)}},image:{name:"image",display:"dialog",add:function(e){e.addModule([a,c,d,u,h]);const t=e.options,i=e.context,n=i.image={infoList:[],infoIndex:0,uploadFileLength:0,focusElement:null,sizeUnit:t.imageSizeUnit,linkElement:"",altText:{},align:"none",floatClassRegExp:"__ke__float\\-[a-z]+",v_src:{linkValue:""},svgDefaultSize:"30%",base64RenderIndex:0,element:null,cover:null,container:null,inputX:null,inputY:null,element_w:1,element_h:1,element_l:0,element_t:0,defaultSizeX:"auto",defaultSizeY:"auto",origin_w:"auto"===t.imageWidth?"":t.imageWidth,origin_h:"auto"===t.imageHeight?"":t.imageHeight,proportionChecked:!0,resizing:t.imageResizing,resizeDotHide:!t.imageHeightShow,rotation:t.imageRotation,onlyPercentage:t.imageSizeOnlyPercentage,ratio:!1,ratioX:1,ratioY:1,captionShow:!0,captionChecked:!1,caption:null,captionCheckEl:null};let l=this.setDialog(e);n.modal=l,n.imgInputFile=l.querySelector("._ke_image_file"),n.imgUrlFile=l.querySelector("._ke_image_url"),n.focusElement=n.imgInputFile||n.imgUrlFile,n.altText=l.querySelector("._ke_image_alt"),n.captionCheckEl=l.querySelector("._ke_image_check_caption"),n.previewSrc=l.querySelector("._ke_tab_content_image .ke-link-preview"),l.querySelector(".ke-dialog-tabs").addEventListener("click",this.openTab.bind(e)),l.querySelector("form").addEventListener("submit",this.submit.bind(e)),n.imgInputFile&&l.querySelector(".ke-file-remove").addEventListener("click",this.removeSelectedFiles.bind(n.imgInputFile,n.imgUrlFile,n.previewSrc)),n.imgUrlFile&&n.imgUrlFile.addEventListener("input",this.onLinkPreview.bind(n.previewSrc,n.v_src,t.linkProtocol)),n.imgInputFile&&n.imgUrlFile&&n.imgInputFile.addEventListener("change",this.fileInputChange.bind(n));const o=l.querySelector(".__ke__gallery");o&&o.addEventListener("click",this.openGallery.bind(e)),n.proportion={},n.inputX={},n.inputY={},t.imageResizing&&(n.proportion=l.querySelector("._ke_image_check_proportion"),n.inputX=l.querySelector("._ke_image_size_x"),n.inputY=l.querySelector("._ke_image_size_y"),n.inputX.value=t.imageWidth,n.inputY.value=t.imageHeight,n.inputX.addEventListener("keyup",this.setInputSize.bind(e,"x")),n.inputY.addEventListener("keyup",this.setInputSize.bind(e,"y")),n.inputX.addEventListener("change",this.setRatio.bind(e)),n.inputY.addEventListener("change",this.setRatio.bind(e)),n.proportion.addEventListener("change",this.setRatio.bind(e)),l.querySelector(".ke-dialog-btn-revert").addEventListener("click",this.sizeRevert.bind(e))),i.dialog.modal.appendChild(l),e.plugins.anchor.initEvent.call(e,"image",l.querySelector("._ke_tab_content_url")),n.anchorCtx=e.context.anchor.caller.image,l=null},setDialog:function(e){const t=e.options,i=e.lang,n=e.util.createElement("DIV");n.className="ke-dialog-content ke-dialog-image",n.style.display="none";let l='<div class="ke-dialog-header"><button type="button" data-command="close" class="ke-btn ke-dialog-close" class="close" aria-label="Close" title="'+i.dialogBox.close+'">'+e.icons.cancel+'</button><span class="ke-modal-title">'+i.dialogBox.imageBox.title+'</span></div><div class="ke-dialog-tabs"><button type="button" class="_ke_tab_link active" data-tab-link="image">'+i.toolbar.image+'</button><button type="button" class="_ke_tab_link" data-tab-link="url">'+i.toolbar.link+'</button></div><form method="post" enctype="multipart/form-data"><div class="_ke_tab_content _ke_tab_content_image"><div class="ke-dialog-body"><div style="border-bottom: 1px dashed #ccc;">';if(t.imageFileInput&&(l+='<div class="ke-dialog-form"><label>'+i.dialogBox.imageBox.file+'</label><div class="ke-dialog-form-files"><input class="ke-input-form _ke_image_file" type="file" accept="'+t.imageAccept+'"'+(t.imageMultipleFile?' multiple="multiple"':"")+'/><button type="button" class="ke-btn ke-dialog-files-edge-button ke-file-remove" title="'+i.controller.remove+'">'+e.icons.cancel+"</button></div></div>"),t.imageUrlInput&&(l+='<div class="ke-dialog-form"><label>'+i.dialogBox.imageBox.url+'</label><div class="ke-dialog-form-files"><input class="ke-input-form ke-input-url _ke_image_url" type="text" />'+(t.imageGalleryUrl&&e.plugins.imageGallery?'<button type="button" class="ke-btn ke-dialog-files-edge-button __ke__gallery" title="'+i.toolbar.imageGallery+'">'+e.icons.image_gallery+"</button>":"")+'</div><pre class="ke-link-preview"></pre></div>'),l+='</div><div class="ke-dialog-form"><label>'+i.dialogBox.imageBox.altText+'</label><input class="ke-input-form _ke_image_alt" type="text" /></div>',t.imageResizing){const n=t.imageSizeOnlyPercentage,o=n?' style="display: none !important;"':"",s=t.imageHeightShow?"":' style="display: none !important;"';l+='<div class="ke-dialog-form">',n||!t.imageHeightShow?l+='<div class="ke-dialog-size-text"><label class="size-w">'+i.dialogBox.size+"</label></div>":l+='<div class="ke-dialog-size-text"><label class="size-w">'+i.dialogBox.width+'</label><label class="ke-dialog-size-x">&nbsp;</label><label class="size-h">'+i.dialogBox.height+"</label></div>",l+='<input class="ke-input-control _ke_image_size_x" placeholder="auto"'+(n?' type="number" min="1"':'type="text"')+(n?' max="100"':"")+' /><label class="ke-dialog-size-x"'+s+">"+(n?"%":"x")+'</label><input type="text" class="ke-input-control _ke_image_size_y" placeholder="auto"'+o+(n?' max="100"':"")+s+"/><label"+o+s+'><input type="checkbox" class="ke-dialog-btn-check _ke_image_check_proportion" checked/>&nbsp;'+i.dialogBox.proportion+'</label><button type="button" title="'+i.dialogBox.revertButton+'" class="ke-btn ke-dialog-btn-revert" style="float: right;">'+e.icons.revert+"</button></div>"}return l+='<div class="ke-dialog-form ke-dialog-form-footer"><label><input type="checkbox" class="ke-dialog-btn-check _ke_image_check_caption" />&nbsp;'+i.dialogBox.caption+'</label></div></div></div><div class="_ke_tab_content _ke_tab_content_url" style="display: none">'+e.context.anchor.forms.innerHTML+'</div><div class="ke-dialog-footer"><div><label><input type="radio" name="kothingEditor_image_radio" class="ke-dialog-btn-radio" value="none" checked>'+i.dialogBox.basic+'</label><label><input type="radio" name="kothingEditor_image_radio" class="ke-dialog-btn-radio" value="left">'+i.dialogBox.left+'</label><label><input type="radio" name="kothingEditor_image_radio" class="ke-dialog-btn-radio" value="center">'+i.dialogBox.center+'</label><label><input type="radio" name="kothingEditor_image_radio" class="ke-dialog-btn-radio" value="right">'+i.dialogBox.right+'</label></div><button type="submit" class="ke-btn-primary" title="'+i.dialogBox.submitButton+'"><span>'+i.dialogBox.submitButton+"</span></button></div></form>",n.innerHTML=l,n},fileInputChange:function(){this.imgInputFile.value?(this.imgUrlFile.setAttribute("disabled",!0),this.previewSrc.style.textDecoration="line-through"):(this.imgUrlFile.removeAttribute("disabled"),this.previewSrc.style.textDecoration="")},removeSelectedFiles:function(e,t){this.value="",e&&(e.removeAttribute("disabled"),t.style.textDecoration="")},openGallery:function(){this.callPlugin("imageGallery",this.plugins.imageGallery.open.bind(this,this.plugins.image.setUrlInput.bind(this.context.image)),null)},setUrlInput:function(e){this.altText.value=e.alt,this.v_src.linkValue=this.previewSrc.textContent=this.imgUrlFile.value=e.src,this.imgUrlFile.focus()},onLinkPreview:function(e,t,i){const n=i.target.value.trim();e.linkValue=this.textContent=n?t&&-1===n.indexOf("://")&&0!==n.indexOf("#")?t+n:-1===n.indexOf("://")?"/"+n:n:""},fileTags:["img"],select:function(e){this.plugins.image.onModifyMode.call(this,e,this.plugins.resizing.call_controller_resize.call(this,e,"image"))},destroy:function(e){const t=e||this.context.image.element,i=this.util.getParentElement(t,this.util.isMediaComponent)||t,n=1*t.getAttribute("data-index"),l=i.previousElementSibling||i.nextElementSibling,o=i.parentNode;this.util.removeItem(i),this.plugins.image.init.call(this),this.controllersOff(),o!==this.context.element.wysiwyg&&this.util.removeItemAllParents(o,(function(e){return 0===e.childNodes.length}),null),this.focusEdge(l),this.plugins.fileManager.deleteInfo.call(this,"image",n,this.functions.onImageUpload),this.history.push(!1)},on:function(e){const t=this.context.image;e?t.imgInputFile&&this.options.imageMultipleFile&&t.imgInputFile.removeAttribute("multiple"):(t.inputX.value=t.origin_w=this.options.imageWidth===t.defaultSizeX?"":this.options.imageWidth,t.inputY.value=t.origin_h=this.options.imageHeight===t.defaultSizeY?"":this.options.imageHeight,t.imgInputFile&&this.options.imageMultipleFile&&t.imgInputFile.setAttribute("multiple","multiple")),this.plugins.anchor.on.call(this,t.anchorCtx,e)},open:function(){this.plugins.dialog.open.call(this,"image","image"===this.currentControllerName)},openTab:function(e){const t=this.context.image.modal,i="init"===e?t.querySelector("._ke_tab_link"):e.target;if(!/^BUTTON$/i.test(i.tagName))return!1;const n=i.getAttribute("data-tab-link"),l="_ke_tab_content",o=t.getElementsByClassName(l);for(let a=0;a<o.length;a++)o[a].style.display="none";const s=t.getElementsByClassName("_ke_tab_link");for(let a=0;a<s.length;a++)this.util.removeClass(s[a],"active");return t.querySelector("._ke_tab_content_"+n).style.display="block",this.util.addClass(i,"active"),"image"===n&&this.context.image.focusElement?this.context.image.focusElement.focus():"url"===n&&this.context.anchor.caller.image.urlInput.focus(),!1},submit:function(e){const t=this.context.image,i=this.plugins.image;e.preventDefault(),e.stopPropagation(),t.align=t.modal.querySelector('input[name="kothingEditor_image_radio"]:checked').value,t.captionChecked=t.captionCheckEl.checked,t.resizing&&(t.proportionChecked=t.proportion.checked);try{this.context.dialog.updateModal&&i.update_image.call(this,!1,!0,!1),t.imgInputFile&&t.imgInputFile.files.length>0?(this.showLoading(),i.submitAction.call(this,this.context.image.imgInputFile.files)):t.imgUrlFile&&t.v_src.linkValue.length>0&&(this.showLoading(),i.onRender_imgUrl.call(this))}catch(n){throw this.closeLoading(),Error('[KothingEditor.image.submit.fail] cause : "'+n.message+'"')}finally{this.plugins.dialog.close.call(this)}return!1},submitAction:function(e){if(0===e.length)return;let t=0,i=[];for(let s=0,a=e.length;s<a;s++)/image/i.test(e[s].type)&&(i.push(e[s]),t+=e[s].size);const n=this.options.imageUploadSizeLimit;if(n>0){let e=0;const i=this.context.image.infoList;for(let t=0,n=i.length;t<n;t++)e+=1*i[t].size;if(t+e>n){this.closeLoading();const i="[KothingEditor.imageUpload.fail] Size of uploadable total images: "+n/1e3+"KB";return void(("function"!==typeof this.functions.onImageUploadError||this.functions.onImageUploadError(i,{limitSize:n,currentSize:e,uploadSize:t},this))&&this.functions.noticeOpen(i))}}const l=this.context.image;l.uploadFileLength=i.length;const o={anchor:this.plugins.anchor.createAnchor.call(this,l.anchorCtx,!0),inputWidth:l.inputX.value,inputHeight:l.inputY.value,align:l.align,isUpdate:this.context.dialog.updateModal,element:l.element};if("function"===typeof this.functions.onImageUploadBefore){const e=this.functions.onImageUploadBefore(i,o,this,function(e){e&&this._window.Array.isArray(e.result)?this.plugins.image.register.call(this,o,e):this.plugins.image.upload.call(this,o,e)}.bind(this));if("undefined"===typeof e)return;if(!e)return void this.closeLoading();this._window.Array.isArray(e)&&e.length>0&&(i=e)}this.plugins.image.upload.call(this,o,i)},error:function(e,t){if(this.closeLoading(),"function"!==typeof this.functions.onImageUploadError||this.functions.onImageUploadError(e,t,this))throw this.functions.noticeOpen(e),Error("[KothingEditor.plugin.image.error] response: "+e)},upload:function(e,t){if(!t)return void this.closeLoading();if("string"===typeof t)return void this.plugins.image.error.call(this,t,null);const i=this.options.imageUploadUrl,n=this.context.dialog.updateModal?1:t.length;if("string"===typeof i&&i.length>0){const l=new FormData;for(let e=0;e<n;e++)l.append("file-"+e,t[e]);this.plugins.fileManager.upload.call(this,i,this.options.imageUploadHeader,l,this.plugins.image.callBack_imgUpload.bind(this,e),this.functions.onImageUploadError)}else this.plugins.image.setup_reader.call(this,t,e.anchor,e.inputWidth,e.inputHeight,e.align,n,e.isUpdate)},callBack_imgUpload:function(e,t){if("function"===typeof this.functions.imageUploadHandler)this.functions.imageUploadHandler(t,e,this);else{const i=JSON.parse(t.responseText);i.errorMessage?this.plugins.image.error.call(this,i.errorMessage,i):this.plugins.image.register.call(this,e,i)}},register:function(e,t){const i=t.result;for(let n,l=0,o=i.length;l<o;l++){if(n={name:i[l].name,size:i[l].size},e.isUpdate){this.plugins.image.update_src.call(this,i[l].url,e.element,n);break}this.plugins.image.create_image.call(this,i[l].url,e.anchor,e.inputWidth,e.inputHeight,e.align,n)}this.closeLoading()},setup_reader:function(e,t,i,n,l,o,s){try{this.context.image.base64RenderIndex=o;const a=this._window.FileReader,r=[o];this.context.image.inputX.value=i,this.context.image.inputY.value=n;for(let c,d,u=0;u<o;u++)c=new a,d=e[u],c.onload=function(e,o,s,a,c){r[c]={result:e.result,file:a},0===--this.context.image.base64RenderIndex&&(this.plugins.image.onRender_imgBase64.call(this,o,r,s,t,i,n,l),this.closeLoading())}.bind(this,c,s,this.context.image.element,d,u),c.readAsDataURL(d)}catch(a){throw this.closeLoading(),Error('[KothingEditor.image.setup_reader.fail] cause : "'+a.message+'"')}},onRender_imgBase64:function(e,t,i,n,l,o,s){const a=this.plugins.image.update_src,r=this.plugins.image.create_image;for(let c=0,d=t.length;c<d;c++)e?(this.context.image.element.setAttribute("data-file-name",t[c].file.name),this.context.image.element.setAttribute("data-file-size",t[c].file.size),a.call(this,t[c].result,i,t[c].file)):r.call(this,t[c].result,n,l,o,s,t[c].file)},onRender_imgUrl:function(){const e=this.context.image;if(0===e.v_src.linkValue.length)return!1;try{const t={name:e.v_src.linkValue.split("/").pop(),size:0};this.context.dialog.updateModal?this.plugins.image.update_src.call(this,e.v_src.linkValue,e.element,t):this.plugins.image.create_image.call(this,e.v_src.linkValue,this.plugins.anchor.createAnchor.call(this,e.anchorCtx,!0),e.inputX.value,e.inputY.value,e.align,t)}catch(t){throw Error('[KothingEditor.image.URLRendering.fail] cause : "'+t.message+'"')}finally{this.closeLoading()}},onRender_link:function(e,t){return t?(t.setAttribute("data-image-link","image"),e.setAttribute("data-image-link",t.href),t.appendChild(e),t):e},setInputSize:function(e,t){t&&32===t.keyCode?t.preventDefault():this.plugins.resizing.module_setInputSize.call(this,this.context.image,e)},setRatio:function(){this.plugins.resizing.module_setRatio.call(this,this.context.image)},checkFileInfo:function(){const e=this.plugins.image,t=this.context.image,i=function(i){e.onModifyMode.call(this,i,null),e.openModify.call(this,!0),t.inputX.value=t.origin_w,t.inputY.value=t.origin_h;const n=this.util.getFormatElement(i);n&&(t.align=n.style.textAlign||n.style.float);this.util.getParentElement(i,this.util.isAnchor)&&!t.anchorCtx.linkValue&&(t.anchorCtx.linkValue=" "),e.update_image.call(this,!0,!1,!0)}.bind(this);this.plugins.fileManager.checkInfo.call(this,"image",["img"],this.functions.onImageUpload,i,!0)},resetFileInfo:function(){this.plugins.fileManager.resetInfo.call(this,"image",this.functions.onImageUpload)},create_image:function(e,t,i,n,l,o){const s=this.plugins.image,a=this.context.image;this.context.resizing.resize_plugin="image";const r=this.util.createElement("IMG");r.src=e,r.alt=a.altText.value,r.setAttribute("data-rotate","0"),t=s.onRender_link.call(this,r,t),a.resizing&&r.setAttribute("data-proportion",a.proportionChecked);const c=this.plugins.component.set_cover.call(this,t),d=this.plugins.component.set_container.call(this,c,"ke-image-container");a.captionChecked&&(a.caption=this.plugins.component.create_caption.call(this),a.caption.setAttribute("contenteditable",!1),c.appendChild(a.caption)),a.element=r,a.cover=c,a.container=d,s.applySize.call(this,i,n),s.setAlign.call(this,l,r,c,d),r.onload=s.image_create_onload.bind(this,r,a.svgDefaultSize,d),this.insertComponent(d,!0,!0,!0)&&this.plugins.fileManager.setInfo.call(this,"image",r,this.functions.onImageUpload,o,!0),this.context.resizing.resize_plugin=""},image_create_onload:function(e,t,i){if(0===e.offsetWidth&&this.plugins.image.applySize.call(this,t,""),this.options.mediaAutoSelect)this.selectComponent(e,"image");else{const e=this.appendFormatTag(i,null);this.setRange(e,0,e,0)}},update_image:function(e,t,i){const n=this.context.image;let l,o=n.element,s=n.cover,a=n.container,r=!1;null===s&&(r=!0,o=n.element.cloneNode(!0),s=this.plugins.component.set_cover.call(this,o)),null===a?(s=s.cloneNode(!0),o=s.querySelector("img"),r=!0,a=this.plugins.component.set_container.call(this,s,"ke-image-container")):r&&(a.innerHTML="",a.appendChild(s),n.cover=s,n.element=o,r=!1);const c=this.util.isNumber(n.inputX.value)?n.inputX.value+n.sizeUnit:n.inputX.value,d=this.util.isNumber(n.inputY.value)?n.inputY.value+n.sizeUnit:n.inputY.value;l=/%$/.test(o.style.width)?c!==a.style.width||d!==a.style.height:c!==o.style.width||d!==o.style.height,o.alt=n.altText.value;let u=!1;n.captionChecked?n.caption||(n.caption=this.plugins.component.create_caption.call(this),s.appendChild(n.caption),u=!0):n.caption&&(this.util.removeItem(n.caption),n.caption=null,u=!0);const h=this.plugins.anchor.createAnchor.call(this,n.anchorCtx,!0);if(h)n.linkElement=n.linkElement===h?h.cloneNode(!1):h,s.insertBefore(this.plugins.image.onRender_link.call(this,o,n.linkElement),n.caption);else if(null!==n.linkElement){const e=o;if(e.setAttribute("data-image-link",""),s.contains(n.linkElement)){const t=e.cloneNode(!0);s.removeChild(n.linkElement),s.insertBefore(t,n.caption),o=t}}if(r){const e=this.util.isRangeFormatElement(n.element.parentNode)||this.util.isWysiwygDiv(n.element.parentNode)?n.element:/^A$/i.test(n.element.parentNode.nodeName)?n.element.parentNode:this.util.getFormatElement(n.element)||n.element;if(this.util.isFormatElement(e)&&e.childNodes.length>0)e.parentNode.insertBefore(a,e),this.util.removeItem(n.element),this.util.removeEmptyNode(e,null),0===e.children.length&&(e.innerHTML=this.util.htmlRemoveWhiteSpace(e.innerHTML));else if(this.util.isFormatElement(e.parentNode)){const t=e.parentNode;t.parentNode.insertBefore(a,e.previousSibling?t.nextElementSibling:t),this.util.removeItem(e)}else e.parentNode.replaceChild(a,e);o=a.querySelector("img"),n.element=o,n.cover=s,n.container=a}(u||!n.onlyPercentage&&l)&&!e&&(/\d+/.test(o.style.height)||this.context.resizing.rotateVertical&&n.captionChecked)&&(/%$/.test(n.inputX.value)||/%$/.test(n.inputY.value)?this.plugins.resizing.resetTransform.call(this,o):this.plugins.resizing.setTransformSize.call(this,o,this.util.getNumber(n.inputX.value,0),this.util.getNumber(n.inputY.value,0))),n.resizing&&(o.setAttribute("data-proportion",n.proportionChecked),l&&this.plugins.image.applySize.call(this)),this.plugins.image.setAlign.call(this,null,o,null,null),e&&this.plugins.fileManager.setInfo.call(this,"image",o,this.functions.onImageUpload,null,!0),t&&this.selectComponent(o,"image"),i||this.history.push(!1)},update_src:function(e,t,i){t.src=e,this._window.setTimeout(this.plugins.fileManager.setInfo.bind(this,"image",t,this.functions.onImageUpload,i,!0)),this.selectComponent(t,"image")},onModifyMode:function(e,t){if(!e)return;const i=this.context.image;i.linkElement=i.anchorCtx.linkAnchor=/^A$/i.test(e.parentNode.nodeName)?e.parentNode:null,i.element=e,i.cover=this.util.getParentElement(e,"FIGURE"),i.container=this.util.getParentElement(e,this.util.isMediaComponent),i.caption=this.util.getChildElement(i.cover,"FIGCAPTION"),i.align=e.style.float||e.getAttribute("data-align")||"none",e.style.float="",this.plugins.anchor.setCtx(i.linkElement,i.anchorCtx),t&&(i.element_w=t.w,i.element_h=t.h,i.element_t=t.t,i.element_l=t.l);let n,l,o=i.element.getAttribute("data-size")||i.element.getAttribute("data-origin");o?(o=o.split(","),n=o[0],l=o[1]):t&&(n=t.w,l=t.h),i.origin_w=n||e.style.width||e.width||"",i.origin_h=l||e.style.height||e.height||""},openModify:function(e){const t=this.context.image;t.imgUrlFile&&(t.v_src.linkValue=t.previewSrc.textContent=t.imgUrlFile.value=t.element.src),t.altText.value=t.element.alt,t.modal.querySelector('input[name="kothingEditor_image_radio"][value="'+t.align+'"]').checked=!0,t.align=t.modal.querySelector('input[name="kothingEditor_image_radio"]:checked').value,t.captionChecked=t.captionCheckEl.checked=!!t.caption,t.resizing&&this.plugins.resizing.module_setModifyInputSize.call(this,t,this.plugins.image),e||this.plugins.dialog.open.call(this,"image",!0)},applySize:function(e,t){const i=this.context.image;return e||(e=i.inputX.value||this.options.imageWidth),t||(t=i.inputY.value||this.options.imageHeight),i.onlyPercentage&&e||/%$/.test(e)?(this.plugins.image.setPercentSize.call(this,e,t),!0):(e&&"auto"!==e||t&&"auto"!==t?this.plugins.image.setSize.call(this,e,t,!1):this.plugins.image.setAutoSize.call(this),!1)},sizeRevert:function(){this.plugins.resizing.module_sizeRevert.call(this,this.context.image)},setSize:function(e,t,i,n){const l=this.context.image,o=/^(rw|lw)$/.test(n);/^(th|bh)$/.test(n)||(l.element.style.width=this.util.isNumber(e)?e+l.sizeUnit:e,this.plugins.image.cancelPercentAttr.call(this)),o||(l.element.style.height=this.util.isNumber(t)?t+l.sizeUnit:/%$/.test(t)?"":t),"center"===l.align&&this.plugins.image.setAlign.call(this,null,null,null,null),i||l.element.removeAttribute("data-percentage"),this.plugins.resizing.module_saveCurrentSize.call(this,l)},setAutoSize:function(){const e=this.context.image;this.plugins.resizing.resetTransform.call(this,e.element),this.plugins.image.cancelPercentAttr.call(this),e.element.style.maxWidth="",e.element.style.width="",e.element.style.height="",e.cover.style.width="",e.cover.style.height="",this.plugins.image.setAlign.call(this,null,null,null,null),e.element.setAttribute("data-percentage","auto,auto"),this.plugins.resizing.module_saveCurrentSize.call(this,e)},setOriginSize:function(){const e=this.context.image;e.element.removeAttribute("data-percentage"),this.plugins.resizing.resetTransform.call(this,e.element),this.plugins.image.cancelPercentAttr.call(this);const t=(e.element.getAttribute("data-origin")||"").split(","),i=t[0],n=t[1];t&&(e.onlyPercentage||/%$/.test(i)&&(/%$/.test(n)||!/\d/.test(n))?this.plugins.image.setPercentSize.call(this,i,n):this.plugins.image.setSize.call(this,i,n),this.plugins.resizing.module_saveCurrentSize.call(this,e))},setPercentSize:function(e,t){const i=this.context.image;t=!t||/%$/.test(t)||this.util.getNumber(t,0)?this.util.isNumber(t)?t+i.sizeUnit:t||"":this.util.isNumber(t)?t+"%":t;const n=/%$/.test(t);i.container.style.width=this.util.isNumber(e)?e+"%":e,i.container.style.height="",i.cover.style.width="100%",i.cover.style.height=n?t:"",i.element.style.width="100%",i.element.style.height=n?"":t,i.element.style.maxWidth="","center"===i.align&&this.plugins.image.setAlign.call(this,null,null,null,null),i.element.setAttribute("data-percentage",e+","+t),this.plugins.resizing.setCaptionPosition.call(this,i.element),this.plugins.resizing.module_saveCurrentSize.call(this,i)},cancelPercentAttr:function(){const e=this.context.image;e.cover.style.width="",e.cover.style.height="",e.container.style.width="",e.container.style.height="",this.util.removeClass(e.container,this.context.image.floatClassRegExp),this.util.addClass(e.container,"__ke__float-"+e.align),"center"===e.align&&this.plugins.image.setAlign.call(this,null,null,null,null)},setAlign:function(e,t,i,n){const l=this.context.image;e||(e=l.align),t||(t=l.element),i||(i=l.cover),n||(n=l.container),i.style.margin=e&&"none"!==e?"auto":"0",/%$/.test(t.style.width)&&"center"===e?(n.style.minWidth="100%",i.style.width=n.style.width):(n.style.minWidth="",i.style.width=this.context.resizing.rotateVertical?t.style.height||t.offsetHeight:t.style.width&&"auto"!==t.style.width?t.style.width||"100%":""),this.util.hasClass(n,"__ke__float-"+e)||(this.util.removeClass(n,l.floatClassRegExp),this.util.addClass(n,"__ke__float-"+e)),t.setAttribute("data-align",e)},init:function(){const e=this.context.image;e.imgInputFile&&(e.imgInputFile.value=""),e.imgUrlFile&&(e.v_src.linkValue=e.previewSrc.textContent=e.imgUrlFile.value=""),e.imgInputFile&&e.imgUrlFile&&(e.imgUrlFile.removeAttribute("disabled"),e.previewSrc.style.textDecoration=""),e.altText.value="",e.modal.querySelector('input[name="kothingEditor_image_radio"][value="none"]').checked=!0,e.captionCheckEl.checked=!1,e.element=null,this.plugins.image.openTab.call(this,"init"),e.resizing&&(e.inputX.value=this.options.imageWidth===e.defaultSizeX?"":this.options.imageWidth,e.inputY.value=this.options.imageHeight===e.defaultSizeY?"":this.options.imageHeight,e.proportion.checked=!0,e.ratio=!1,e.ratioX=1,e.ratioY=1),this.plugins.anchor.init.call(this,e.anchorCtx)}},video:{name:"video",display:"dialog",add:function(e){e.addModule([a,d,u,h]);const t=e.options,i=e.context,n=i.video={infoList:[],infoIndex:0,uploadFileLength:0,focusElement:null,sizeUnit:t.videoSizeUnit,align:"none",floatClassRegExp:"__ke__float\\-[a-z]+",youtubeQuery:t.youtubeQuery,videoRatio:100*t.videoRatio+"%",defaultRatio:100*t.videoRatio+"%",linkValue:"",element:null,cover:null,container:null,inputX:null,inputY:null,element_w:1,element_h:1,element_l:0,element_t:0,defaultSizeX:"100%",defaultSizeY:100*t.videoRatio+"%",origin_w:"100%"===t.videoWidth?"":t.videoWidth,origin_h:"56.25%"===t.videoHeight?"":t.videoHeight,proportionChecked:!0,resizing:t.videoResizing,resizeDotHide:!t.videoHeightShow,rotation:t.videoRotation,onlyPercentage:t.videoSizeOnlyPercentage,ratio:!1,ratioX:1,ratioY:1,captionShow:!1};let l=this.setDialog(e);n.modal=l,n.videoInputFile=l.querySelector("._ke_video_file"),n.videoUrlFile=l.querySelector(".ke-input-url"),n.focusElement=n.videoUrlFile||n.videoInputFile,n.preview=l.querySelector(".ke-link-preview"),l.querySelector("form").addEventListener("submit",this.submit.bind(e)),n.videoInputFile&&l.querySelector(".ke-dialog-files-edge-button").addEventListener("click",this.removeSelectedFiles.bind(n.videoInputFile,n.videoUrlFile,n.preview)),n.videoInputFile&&n.videoUrlFile&&n.videoInputFile.addEventListener("change",this.fileInputChange.bind(n)),n.videoUrlFile&&n.videoUrlFile.addEventListener("input",this.onLinkPreview.bind(n.preview,n,t.linkProtocol)),n.proportion={},n.videoRatioOption={},n.inputX={},n.inputY={},t.videoResizing&&(n.proportion=l.querySelector("._ke_video_check_proportion"),n.videoRatioOption=l.querySelector(".ke-video-ratio"),n.inputX=l.querySelector("._ke_video_size_x"),n.inputY=l.querySelector("._ke_video_size_y"),n.inputX.value=t.videoWidth,n.inputY.value=t.videoHeight,n.inputX.addEventListener("keyup",this.setInputSize.bind(e,"x")),n.inputY.addEventListener("keyup",this.setInputSize.bind(e,"y")),n.inputX.addEventListener("change",this.setRatio.bind(e)),n.inputY.addEventListener("change",this.setRatio.bind(e)),n.proportion.addEventListener("change",this.setRatio.bind(e)),n.videoRatioOption.addEventListener("change",this.setVideoRatio.bind(e)),l.querySelector(".ke-dialog-btn-revert").addEventListener("click",this.sizeRevert.bind(e))),i.dialog.modal.appendChild(l),l=null},setDialog:function(e){const t=e.options,i=e.lang,n=e.util.createElement("DIV");n.className="ke-dialog-content",n.style.display="none";let l='<form method="post" enctype="multipart/form-data"><div class="ke-dialog-header"><button type="button" data-command="close" class="ke-btn ke-dialog-close" aria-label="Close" title="'+i.dialogBox.close+'">'+e.icons.cancel+'</button><span class="ke-modal-title">'+i.dialogBox.videoBox.title+'</span></div><div class="ke-dialog-body">';if(t.videoFileInput&&(l+='<div class="ke-dialog-form"><label>'+i.dialogBox.videoBox.file+'</label><div class="ke-dialog-form-files"><input class="ke-input-form _ke_video_file" type="file" accept="'+t.videoAccept+'"'+(t.videoMultipleFile?' multiple="multiple"':"")+'/><button type="button" data-command="filesRemove" class="ke-btn ke-dialog-files-edge-button ke-file-remove" title="'+i.controller.remove+'">'+e.icons.cancel+"</button></div></div>"),t.videoUrlInput&&(l+='<div class="ke-dialog-form"><label>'+i.dialogBox.videoBox.url+'</label><input class="ke-input-form ke-input-url" type="text" /><pre class="ke-link-preview"></pre></div>'),t.videoResizing){const n=t.videoRatioList||[{name:"16:9",value:.5625},{name:"4:3",value:.75},{name:"21:9",value:.4285}],o=t.videoRatio,s=t.videoSizeOnlyPercentage,a=s?' style="display: none !important;"':"",r=t.videoHeightShow?"":' style="display: none !important;"',c=t.videoRatioShow?"":' style="display: none !important;"',d=s||t.videoHeightShow||t.videoRatioShow?"":' style="display: none !important;"';l+='<div class="ke-dialog-form"><div class="ke-dialog-size-text"><label class="size-w">'+i.dialogBox.width+'</label><label class="ke-dialog-size-x">&nbsp;</label><label class="size-h"'+r+">"+i.dialogBox.height+'</label><label class="size-h"'+c+">("+i.dialogBox.ratio+')</label></div><input class="ke-input-control _ke_video_size_x" placeholder="100%"'+(s?' type="number" min="1"':'type="text"')+(s?' max="100"':"")+'/><label class="ke-dialog-size-x"'+d+">"+(s?"%":"x")+'</label><input class="ke-input-control _ke_video_size_y" placeholder="'+100*t.videoRatio+'%"'+(s?' type="number" min="1"':'type="text"')+(s?' max="100"':"")+r+'/><select class="ke-input-select ke-video-ratio" title="'+i.dialogBox.ratio+'"'+c+">",r||(l+='<option value=""> - </option>');for(let e=0,t=n.length;e<t;e++)l+='<option value="'+n[e].value+'"'+(o.toString()===n[e].value.toString()?" selected":"")+">"+n[e].name+"</option>";l+='</select><button type="button" title="'+i.dialogBox.revertButton+'" class="ke-btn ke-dialog-btn-revert" style="float: right;">'+e.icons.revert+'</button></div><div class="ke-dialog-form ke-dialog-form-footer"'+a+d+'><label><input type="checkbox" class="ke-dialog-btn-check _ke_video_check_proportion" checked/>&nbsp;'+i.dialogBox.proportion+"</label></div>"}return l+='</div><div class="ke-dialog-footer"><div><label><input type="radio" name="kothingEditor_video_radio" class="ke-dialog-btn-radio" value="none" checked>'+i.dialogBox.basic+'</label><label><input type="radio" name="kothingEditor_video_radio" class="ke-dialog-btn-radio" value="left">'+i.dialogBox.left+'</label><label><input type="radio" name="kothingEditor_video_radio" class="ke-dialog-btn-radio" value="center">'+i.dialogBox.center+'</label><label><input type="radio" name="kothingEditor_video_radio" class="ke-dialog-btn-radio" value="right">'+i.dialogBox.right+'</label></div><button type="submit" class="ke-btn-primary" title="'+i.dialogBox.submitButton+'"><span>'+i.dialogBox.submitButton+"</span></button></div></form>",n.innerHTML=l,n},fileInputChange:function(){this.videoInputFile.value?(this.videoUrlFile.setAttribute("disabled",!0),this.preview.style.textDecoration="line-through"):(this.videoUrlFile.removeAttribute("disabled"),this.preview.style.textDecoration="")},removeSelectedFiles:function(e,t){this.value="",e&&(e.removeAttribute("disabled"),t.style.textDecoration="")},onLinkPreview:function(e,t,i){const n=i.target.value.trim();/^<iframe.*\/iframe>$/.test(n)?(e.linkValue=n,this.textContent='<IFrame :src=".."></IFrame>'):e.linkValue=this.textContent=n?t&&-1===n.indexOf("://")&&0!==n.indexOf("#")?t+n:-1===n.indexOf("://")?"/"+n:n:""},setTagAttrs:function(e){e.setAttribute("controls",!0);const t=this.options.videoTagAttrs;if(t)for(const i in t)this.util.hasOwn(t,i)&&e.setAttribute(i,t[i])},createVideoTag:function(){const e=this.util.createElement("VIDEO");return this.plugins.video.setTagAttrs.call(this,e),e},setIframeAttrs:function(e){e.frameBorder="0",e.allowFullscreen=!0;const t=this.options.videoIframeAttrs;if(t)for(const i in t)this.util.hasOwn(t,i)&&e.setAttribute(i,t[i])},createIframeTag:function(){const e=this.util.createElement("IFRAME");return this.plugins.video.setIframeAttrs.call(this,e),e},fileTags:["iframe","video"],select:function(e){this.plugins.video.onModifyMode.call(this,e,this.plugins.resizing.call_controller_resize.call(this,e,"video"))},destroy:function(e){const t=e||this.context.video.element,i=this.context.video.container,n=1*t.getAttribute("data-index"),l=i.previousElementSibling||i.nextElementSibling,o=i.parentNode;this.util.removeItem(i),this.plugins.video.init.call(this),this.controllersOff(),o!==this.context.element.wysiwyg&&this.util.removeItemAllParents(o,(function(e){return 0===e.childNodes.length}),null),this.focusEdge(l),this.plugins.fileManager.deleteInfo.call(this,"video",n,this.functions.onVideoUpload),this.history.push(!1)},on:function(e){const t=this.context.video;e?t.videoInputFile&&this.options.videoMultipleFile&&t.videoInputFile.removeAttribute("multiple"):(t.inputX.value=t.origin_w=this.options.videoWidth===t.defaultSizeX?"":this.options.videoWidth,t.inputY.value=t.origin_h=this.options.videoHeight===t.defaultSizeY?"":this.options.videoHeight,t.proportion.disabled=!0,t.videoInputFile&&this.options.videoMultipleFile&&t.videoInputFile.setAttribute("multiple","multiple")),t.resizing&&this.plugins.video.setVideoRatioSelect.call(this,t.origin_h||t.defaultRatio)},open:function(){this.plugins.dialog.open.call(this,"video","video"===this.currentControllerName)},setVideoRatio:function(e){const t=this.context.video,i=e.target.options[e.target.selectedIndex].value;t.defaultSizeY=t.videoRatio=i?100*i+"%":t.defaultSizeY,t.inputY.placeholder=i?100*i+"%":"",t.inputY.value=""},setInputSize:function(e,t){if(t&&32===t.keyCode)return void t.preventDefault();const i=this.context.video;this.plugins.resizing.module_setInputSize.call(this,i,e),"y"===e&&this.plugins.video.setVideoRatioSelect.call(this,t.target.value||i.defaultRatio)},setRatio:function(){this.plugins.resizing.module_setRatio.call(this,this.context.video)},submit:function(e){const t=this.context.video,i=this.plugins.video;e.preventDefault(),e.stopPropagation(),t.align=t.modal.querySelector('input[name="kothingEditor_video_radio"]:checked').value;try{t.videoInputFile&&t.videoInputFile.files.length>0?(this.showLoading(),i.submitAction.call(this,this.context.video.videoInputFile.files)):t.videoUrlFile&&t.linkValue.length>0&&(this.showLoading(),i.setup_url.call(this))}catch(n){throw this.closeLoading(),Error('[KothingEditor.video.submit.fail] cause : "'+n.message+'"')}finally{this.plugins.dialog.close.call(this)}return!1},submitAction:function(e){if(0===e.length)return;let t=0,i=[];for(let s=0,a=e.length;s<a;s++)/video/i.test(e[s].type)&&(i.push(e[s]),t+=e[s].size);const n=this.options.videoUploadSizeLimit;if(n>0){let e=0;const i=this.context.video.infoList;for(let t=0,n=i.length;t<n;t++)e+=1*i[t].size;if(t+e>n){this.closeLoading();const i="[KothingEditor.videoUpload.fail] Size of uploadable total videos: "+n/1e3+"KB";return void(("function"!==typeof this.functions.onVideoUploadError||this.functions.onVideoUploadError(i,{limitSize:n,currentSize:e,uploadSize:t},this))&&this.functions.noticeOpen(i))}}const l=this.context.video;l.uploadFileLength=i.length;const o={inputWidth:l.inputX.value,inputHeight:l.inputY.value,align:l.align,isUpdate:this.context.dialog.updateModal,element:l.element};if("function"===typeof this.functions.onVideoUploadBefore){const e=this.functions.onVideoUploadBefore(i,o,this,function(e){e&&this._window.Array.isArray(e.result)?this.plugins.video.register.call(this,o,e):this.plugins.video.upload.call(this,o,e)}.bind(this));if("undefined"===typeof e)return;if(!e)return void this.closeLoading();"object"===typeof e&&e.length>0&&(i=e)}this.plugins.video.upload.call(this,o,i)},error:function(e,t){if(this.closeLoading(),"function"!==typeof this.functions.onVideoUploadError||this.functions.onVideoUploadError(e,t,this))throw this.functions.noticeOpen(e),Error("[KothingEditor.plugin.video.error] response: "+e)},upload:function(e,t){if(!t)return void this.closeLoading();if("string"===typeof t)return void this.plugins.video.error.call(this,t,null);const i=this.options.videoUploadUrl,n=this.context.dialog.updateModal?1:t.length;if(!("string"===typeof i&&i.length>0))throw Error('[KothingEditor.videoUpload.fail] cause : There is no "videoUploadUrl" option.');{const l=new FormData;for(let e=0;e<n;e++)l.append("file-"+e,t[e]);this.plugins.fileManager.upload.call(this,i,this.options.videoUploadHeader,l,this.plugins.video.callBack_videoUpload.bind(this,e),this.functions.onVideoUploadError)}},callBack_videoUpload:function(e,t){if("function"===typeof this.functions.videoUploadHandler)this.functions.videoUploadHandler(t,e,this);else{const i=JSON.parse(t.responseText);i.errorMessage?this.plugins.video.error.call(this,i.errorMessage,i):this.plugins.video.register.call(this,e,i)}},register:function(e,t){const i=t.result,n=this.plugins.video.createVideoTag.call(this);for(let l,o=0,s=i.length;o<s;o++)l={name:i[o].name,size:i[o].size},this.plugins.video.create_video.call(this,e.isUpdate?e.element:n.cloneNode(!1),i[o].url,e.inputWidth,e.inputHeight,e.align,l,e.isUpdate);this.closeLoading()},setup_url:function(){try{const e=this.context.video;let t=e.linkValue;if(0===t.length)return!1;if(/^<iframe.*\/iframe>$/.test(t)){if(t=(new this._window.DOMParser).parseFromString(t,"text/html").querySelector("iframe").src,0===t.length)return!1}if(/youtu\.?be/.test(t)){if(/^http/.test(t)||(t="https://"+t),t=t.replace("watch?v=",""),/^\/\/.+\/embed\//.test(t)||(t=t.replace(t.match(/\/\/.+\//)[0],"//www.youtube.com/embed/").replace("&","?&")),e.youtubeQuery.length>0)if(/\?/.test(t)){const i=t.split("?");t=i[0]+"?"+e.youtubeQuery+"&"+i[1]}else t+="?"+e.youtubeQuery}else/vimeo\.com/.test(t)&&(t.endsWith("/")&&(t=t.slice(0,-1)),t="https://player.vimeo.com/video/"+t.slice(t.lastIndexOf("/")+1));this.plugins.video.create_video.call(this,this.plugins.video.createIframeTag.call(this),t,e.inputX.value,e.inputY.value,e.align,null,this.context.dialog.updateModal)}catch(e){throw Error('[KothingEditor.video.upload.fail] cause : "'+e.message+'"')}finally{this.closeLoading()}},create_video:function(e,t,i,n,l,o,s){this.context.resizing.resize_plugin="video";const a=this.context.video;let r=null,c=null,d=!1;if(s){if((e=a.element).src!==t){d=!0;const i=/youtu\.?be/.test(t),n=/vimeo\.com/.test(t);if(!i&&!n||/^iframe$/i.test(e.nodeName))if(i||n||/^videoo$/i.test(e.nodeName))e.src=t;else{const i=this.plugins.video.createVideoTag.call(this);i.src=t,e.parentNode.replaceChild(i,e),a.element=e=i}else{const i=this.plugins.video.createIframeTag.call(this);i.src=t,e.parentNode.replaceChild(i,e),a.element=e=i}}c=a.container,r=this.util.getParentElement(e,"FIGURE")}else d=!0,e.src=t,a.element=e,r=this.plugins.component.set_cover.call(this,e),c=this.plugins.component.set_container.call(this,r,"ke-video-container");a.cover=r,a.container=c;const u=this.plugins.resizing.module_getSizeX.call(this,a)!==(i||a.defaultSizeX)||this.plugins.resizing.module_getSizeY.call(this,a)!==(n||a.videoRatio),h=!s||u;a.resizing&&(this.context.video.proportionChecked=a.proportion.checked,e.setAttribute("data-proportion",a.proportionChecked));let g=!1;h&&(g=this.plugins.video.applySize.call(this)),g&&"center"===l||this.plugins.video.setAlign.call(this,null,e,r,c);let p=!0;if(s)a.resizing&&this.context.resizing.rotateVertical&&h&&this.plugins.resizing.setTransformSize.call(this,e,null,null);else if(p=this.insertComponent(c,!1,!0,!this.options.mediaAutoSelect),!this.options.mediaAutoSelect){const e=this.appendFormatTag(c,null);this.setRange(e,0,e,0)}p&&(d&&this.plugins.fileManager.setInfo.call(this,"video",e,this.functions.onVideoUpload,o,!0),s&&(this.selectComponent(e,"video"),this.history.push(!1))),this.context.resizing.resize_plugin=""},update_videoCover:function(e){if(!e)return;const t=this.context.video;/^video$/i.test(e.nodeName)?this.plugins.video.setTagAttrs.call(this,e):this.plugins.video.setIframeAttrs.call(this,e);const i=this.util.getParentElement(e,this.util.isMediaComponent)||this.util.getParentElement(e,function(e){return this.isWysiwygDiv(e.parentNode)}.bind(this.util)),n=e;t.element=e=e.cloneNode(!0);const l=t.cover=this.plugins.component.set_cover.call(this,e),o=t.container=this.plugins.component.set_container.call(this,l,"ke-video-container");try{const s=i.querySelector("figcaption");let a=null;s&&(a=this.util.createElement("DIV"),a.innerHTML=s.innerHTML,this.util.removeItem(s));const r=(e.getAttribute("data-size")||e.getAttribute("data-origin")||"").split(",");this.plugins.video.applySize.call(this,r[0]||n.style.width||n.width||"",r[1]||n.style.height||n.height||"");const c=this.util.getFormatElement(n);c&&(t.align=c.style.textAlign||c.style.float),this.plugins.video.setAlign.call(this,null,e,l,o),this.util.isFormatElement(i)&&i.childNodes.length>0?(i.parentNode.insertBefore(o,i),this.util.removeItem(n),this.util.removeEmptyNode(i,null),0===i.children.length&&(i.innerHTML=this.util.htmlRemoveWhiteSpace(i.innerHTML))):i.parentNode.replaceChild(o,i),a&&i.parentNode.insertBefore(a,o.nextElementSibling)}catch(s){console.warn("[KothingEditor.video.error] Maybe the video tag is nested.",s)}this.plugins.fileManager.setInfo.call(this,"video",e,this.functions.onVideoUpload,null,!0)},onModifyMode:function(e,t){const i=this.context.video;i.element=e,i.cover=this.util.getParentElement(e,"FIGURE"),i.container=this.util.getParentElement(e,this.util.isMediaComponent),i.align=e.style.float||e.getAttribute("data-align")||"none",e.style.float="",t&&(i.element_w=t.w,i.element_h=t.h,i.element_t=t.t,i.element_l=t.l);let n,l,o=i.element.getAttribute("data-size")||i.element.getAttribute("data-origin");o?(o=o.split(","),n=o[0],l=o[1]):t&&(n=t.w,l=t.h),i.origin_w=n||e.style.width||e.width||"",i.origin_h=l||e.style.height||e.height||""},openModify:function(e){const t=this.context.video;if(t.videoUrlFile&&(t.linkValue=t.preview.textContent=t.videoUrlFile.value=t.element.src||(t.element.querySelector("source")||"").src||""),t.modal.querySelector('input[name="kothingEditor_video_radio"][value="'+t.align+'"]').checked=!0,t.resizing){this.plugins.resizing.module_setModifyInputSize.call(this,t,this.plugins.video);const e=t.videoRatio=this.plugins.resizing.module_getSizeY.call(this,t);this.plugins.video.setVideoRatioSelect.call(this,e)||(t.inputY.value=t.onlyPercentage?this.util.getNumber(e,2):e)}e||this.plugins.dialog.open.call(this,"video",!0)},setVideoRatioSelect:function(e){let t=!1;const i=this.context.video,n=i.videoRatioOption.options;/%$/.test(e)||i.onlyPercentage?e=this.util.getNumber(e,2)/100+"":(!this.util.isNumber(e)||1*e>=1)&&(e=""),i.inputY.placeholder="";for(let l=0,o=n.length;l<o;l++)n[l].value===e?(t=n[l].selected=!0,i.inputY.placeholder=e?100*e+"%":""):n[l].selected=!1;return t},checkFileInfo:function(){this.plugins.fileManager.checkInfo.call(this,"video",["iframe","video"],this.functions.onVideoUpload,this.plugins.video.update_videoCover.bind(this),!0)},resetFileInfo:function(){this.plugins.fileManager.resetInfo.call(this,"video",this.functions.onVideoUpload)},applySize:function(e,t){const i=this.context.video;return e||(e=i.inputX.value||this.options.videoWidth),t||(t=i.inputY.value||this.options.videoHeight),i.onlyPercentage||/%$/.test(e)||!e?(this.plugins.video.setPercentSize.call(this,e||"100%",t||(/%$/.test(i.videoRatio)?i.videoRatio:i.defaultRatio)),!0):(e&&"auto"!==e||t&&"auto"!==t?this.plugins.video.setSize.call(this,e,t||i.videoRatio||i.defaultRatio,!1):this.plugins.video.setAutoSize.call(this),!1)},sizeRevert:function(){this.plugins.resizing.module_sizeRevert.call(this,this.context.video)},setSize:function(e,t,i,n){const l=this.context.video,o=/^(rw|lw)$/.test(n),s=/^(th|bh)$/.test(n);s||(e=this.util.getNumber(e,0)),o||(t=this.util.isNumber(t)?t+l.sizeUnit:t||""),s||(l.element.style.width=e?e+l.sizeUnit:""),o||(l.cover.style.paddingBottom=l.cover.style.height=t),s||/%$/.test(e)||(l.cover.style.width="",l.container.style.width=""),o||/%$/.test(t)?l.element.style.height="":l.element.style.height=t,i||l.element.removeAttribute("data-percentage"),this.plugins.resizing.module_saveCurrentSize.call(this,l)},setAutoSize:function(){this.plugins.video.setPercentSize.call(this,100,this.context.video.defaultRatio)},setOriginSize:function(e){const t=this.context.video;t.element.removeAttribute("data-percentage"),this.plugins.resizing.resetTransform.call(this,t.element),this.plugins.video.cancelPercentAttr.call(this);const i=((e?t.element.getAttribute("data-size"):"")||t.element.getAttribute("data-origin")||"").split(",");if(i){const e=i[0],n=i[1];t.onlyPercentage||/%$/.test(e)&&(/%$/.test(n)||!/\d/.test(n))?this.plugins.video.setPercentSize.call(this,e,n):this.plugins.video.setSize.call(this,e,n),this.plugins.resizing.module_saveCurrentSize.call(this,t)}},setPercentSize:function(e,t){const i=this.context.video;t=!t||/%$/.test(t)||this.util.getNumber(t,0)?this.util.isNumber(t)?t+i.sizeUnit:t||i.defaultRatio:this.util.isNumber(t)?t+"%":t,i.container.style.width=this.util.isNumber(e)?e+"%":e,i.container.style.height="",i.cover.style.width="100%",i.cover.style.height=t,i.cover.style.paddingBottom=t,i.element.style.width="100%",i.element.style.height="100%",i.element.style.maxWidth="","center"===i.align&&this.plugins.video.setAlign.call(this,null,null,null,null),i.element.setAttribute("data-percentage",e+","+t),this.plugins.resizing.module_saveCurrentSize.call(this,i)},cancelPercentAttr:function(){const e=this.context.video;e.cover.style.width="",e.cover.style.height="",e.cover.style.paddingBottom="",e.container.style.width="",e.container.style.height="",this.util.removeClass(e.container,this.context.video.floatClassRegExp),this.util.addClass(e.container,"__ke__float-"+e.align),"center"===e.align&&this.plugins.video.setAlign.call(this,null,null,null,null)},setAlign:function(e,t,i,n){const l=this.context.video;e||(e=l.align),t||(t=l.element),i||(i=l.cover),n||(n=l.container),i.style.margin=e&&"none"!==e?"auto":"0",/%$/.test(t.style.width)&&"center"===e?(n.style.minWidth="100%",i.style.width=n.style.width,i.style.height=n.style.height,i.style.paddingBottom=/%$/.test(i.style.height)?this.util.getNumber(this.util.getNumber(i.style.height,2)/100*this.util.getNumber(i.style.width,2),2)+"%":i.style.height):(n.style.minWidth="",i.style.width=this.context.resizing.rotateVertical?t.style.height||t.offsetHeight:t.style.width||"100%",i.style.paddingBottom=i.style.height),this.util.hasClass(n,"__ke__float-"+e)||(this.util.removeClass(n,l.floatClassRegExp),this.util.addClass(n,"__ke__float-"+e)),t.setAttribute("data-align",e)},init:function(){const e=this.context.video;e.videoInputFile&&(e.videoInputFile.value=""),e.videoUrlFile&&(e.linkValue=e.preview.textContent=e.videoUrlFile.value=""),e.videoInputFile&&e.videoUrlFile&&(e.videoUrlFile.removeAttribute("disabled"),e.preview.style.textDecoration=""),e.origin_w=this.options.videoWidth,e.origin_h=this.options.videoHeight,e.modal.querySelector('input[name="kothingEditor_video_radio"][value="none"]').checked=!0,e.resizing&&(e.inputX.value=this.options.videoWidth===e.defaultSizeX?"":this.options.videoWidth,e.inputY.value=this.options.videoHeight===e.defaultSizeY?"":this.options.videoHeight,e.proportion.checked=!0,e.proportion.disabled=!0,this.plugins.video.setVideoRatioSelect.call(this,e.defaultRatio))}},audio:{name:"audio",display:"dialog",add:function(e){e.addModule([a,d,h]);const t=e.context,i=t.audio={infoList:[],infoIndex:0,uploadFileLength:0,focusElement:null,targetSelect:null,origin_w:e.options.audioWidth,origin_h:e.options.audioHeight,linkValue:"",element:null,cover:null,container:null};let n=this.setDialog(e);i.modal=n,i.audioInputFile=n.querySelector("._ke_audio_files"),i.audioUrlFile=n.querySelector(".ke-input-url"),i.focusElement=i.audioInputFile||i.audioUrlFile,i.preview=n.querySelector(".ke-link-preview");let l=this.setController(e);i.controller=l,n.querySelector("form").addEventListener("submit",this.submit.bind(e)),i.audioInputFile&&n.querySelector(".ke-dialog-files-edge-button").addEventListener("click",this.removeSelectedFiles.bind(i.audioInputFile,i.audioUrlFile,i.preview)),i.audioInputFile&&i.audioUrlFile&&i.audioInputFile.addEventListener("change",this.fileInputChange.bind(i)),l.addEventListener("click",this.onClick_controller.bind(e)),i.audioUrlFile&&i.audioUrlFile.addEventListener("input",this.onLinkPreview.bind(i.preview,i,e.options.linkProtocol)),t.dialog.modal.appendChild(n),t.element.relative.appendChild(l),n=null,l=null},setDialog:function(e){const t=e.options,i=e.lang,n=e.util.createElement("DIV");n.className="ke-dialog-content",n.style.display="none";let l='<form method="post" enctype="multipart/form-data"><div class="ke-dialog-header"><button type="button" data-command="close" class="ke-btn ke-dialog-close" aria-label="Close" title="'+i.dialogBox.close+'">'+e.icons.cancel+'</button><span class="ke-modal-title">'+i.dialogBox.audioBox.title+'</span></div><div class="ke-dialog-body">';return t.audioFileInput&&(l+='<div class="ke-dialog-form"><label>'+i.dialogBox.audioBox.file+'</label><div class="ke-dialog-form-files"><input class="ke-input-form _ke_audio_files" type="file" accept="'+t.audioAccept+'"'+(t.audioMultipleFile?' multiple="multiple"':"")+'/><button type="button" data-command="filesRemove" class="ke-btn ke-dialog-files-edge-button ke-file-remove" title="'+i.controller.remove+'">'+e.icons.cancel+"</button></div></div>"),t.audioUrlInput&&(l+='<div class="ke-dialog-form"><label>'+i.dialogBox.audioBox.url+'</label><input class="ke-input-form ke-input-url" type="text" /><pre class="ke-link-preview"></pre></div>'),l+='</div><div class="ke-dialog-footer"><button type="submit" class="ke-btn-primary" title="'+i.dialogBox.submitButton+'"><span>'+i.dialogBox.submitButton+"</span></button></div></form>",n.innerHTML=l,n},setController:function(e){const t=e.lang,i=e.icons,n=e.util.createElement("DIV");return n.className="ke-controller ke-controller-link",n.innerHTML='<div class="ke-arrow ke-arrow-up"></div><div class="link-content"><div class="ke-btn-group"><button type="button" data-command="update" tabindex="-1" class="ke-tooltip">'+i.edit+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.controller.edit+'</span></span></button><button type="button" data-command="delete" tabindex="-1" class="ke-tooltip">'+i.delete+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.controller.remove+"</span></span></button></div></div>",n},fileInputChange:function(){this.audioInputFile.value?(this.audioUrlFile.setAttribute("disabled",!0),this.preview.style.textDecoration="line-through"):(this.audioUrlFile.removeAttribute("disabled"),this.preview.style.textDecoration="")},removeSelectedFiles:function(e,t){this.value="",e&&(e.removeAttribute("disabled"),t.style.textDecoration="")},createAudioTag:function(){const e=this.util.createElement("AUDIO");this.plugins.audio.setTagAttrs.call(this,e);const t=this.context.audio.origin_w,i=this.context.audio.origin_h;return e.setAttribute("origin-size",t+","+i),e.style.cssText=(t?"width:"+t+"; ":"")+(i?"height:"+i+";":""),e},setTagAttrs:function(e){e.setAttribute("controls",!0);const t=this.options.audioTagAttrs;if(t)for(const i in t)this.util.hasOwn(t,i)&&e.setAttribute(i,t[i])},onLinkPreview:function(e,t,i){const n=i.target.value.trim();e.linkValue=this.textContent=n?t&&-1===n.indexOf("://")&&0!==n.indexOf("#")?t+n:-1===n.indexOf("://")?"/"+n:n:""},fileTags:["audio"],select:function(e){this.plugins.audio.onModifyMode.call(this,e)},destroy:function(e){e=e||this.context.audio.element;const t=this.util.getParentElement(e,this.util.isComponent)||e,i=1*e.getAttribute("data-index"),n=t.previousElementSibling||t.nextElementSibling,l=t.parentNode;this.util.removeItem(t),this.plugins.audio.init.call(this),this.controllersOff(),l!==this.context.element.wysiwyg&&this.util.removeItemAllParents(l,(function(e){return 0===e.childNodes.length}),null),this.focusEdge(n),this.plugins.fileManager.deleteInfo.call(this,"audio",i,this.functions.onAudioUpload),this.history.push(!1)},checkFileInfo:function(){this.plugins.fileManager.checkInfo.call(this,"audio",["audio"],this.functions.onAudioUpload,this.plugins.audio.updateCover.bind(this),!1)},resetFileInfo:function(){this.plugins.fileManager.resetInfo.call(this,"audio",this.functions.onAudioUpload)},on:function(e){const t=this.context.audio;e?t.element?(this.context.dialog.updateModal=!0,t.linkValue=t.preview.textContent=t.audioUrlFile.value=t.element.src,t.audioInputFile&&this.options.audioMultipleFile&&t.audioInputFile.removeAttribute("multiple")):t.audioInputFile&&this.options.audioMultipleFile&&t.audioInputFile.removeAttribute("multiple"):(this.plugins.audio.init.call(this),t.audioInputFile&&this.options.audioMultipleFile&&t.audioInputFile.setAttribute("multiple","multiple"))},open:function(){this.plugins.dialog.open.call(this,"audio","audio"===this.currentControllerName)},submit:function(e){const t=this.context.audio;e.preventDefault(),e.stopPropagation();try{t.audioInputFile&&t.audioInputFile.files.length>0?(this.showLoading(),this.plugins.audio.submitAction.call(this,t.audioInputFile.files)):t.audioUrlFile&&t.linkValue.length>0&&(this.showLoading(),this.plugins.audio.setupUrl.call(this,t.linkValue))}catch(i){throw this.closeLoading(),Error('[KothingEditor.audio.submit.fail] cause : "'+i.message+'"')}finally{this.plugins.dialog.close.call(this)}return!1},submitAction:function(e){if(0===e.length)return;let t=0,i=[];for(let s=0,a=e.length;s<a;s++)/audio/i.test(e[s].type)&&(i.push(e[s]),t+=e[s].size);const n=this.options.audioUploadSizeLimit;if(n>0){let e=0;const i=this.context.audio.infoList;for(let t=0,n=i.length;t<n;t++)e+=1*i[t].size;if(t+e>n){this.closeLoading();const i="[KothingEditor.audioUpload.fail] Size of uploadable total audios: "+n/1e3+"KB";return void(("function"!==typeof this.functions.onAudioUploadError||this.functions.onAudioUploadError(i,{limitSize:n,currentSize:e,uploadSize:t},this))&&this.functions.noticeOpen(i))}}const l=this.context.audio;l.uploadFileLength=i.length;const o={isUpdate:this.context.dialog.updateModal,element:l.element};if("function"===typeof this.functions.onAudioUploadBefore){const e=this.functions.onAudioUploadBefore(i,o,this,function(e){e&&this._window.Array.isArray(e.result)?this.plugins.audio.register.call(this,o,e):this.plugins.audio.upload.call(this,o,e)}.bind(this));if("undefined"===typeof e)return;if(!e)return void this.closeLoading();"object"===typeof e&&e.length>0&&(i=e)}this.plugins.audio.upload.call(this,o,i)},error:function(e,t){if(this.closeLoading(),"function"!==typeof this.functions.onAudioUploadError||this.functions.onAudioUploadError(e,t,this))throw this.functions.noticeOpen(e),Error("[KothingEditor.plugin.audio.exception] response: "+e)},upload:function(e,t){if(!t)return void this.closeLoading();if("string"===typeof t)return void this.plugins.audio.error.call(this,t,null);const i=this.options.audioUploadUrl,n=this.context.dialog.updateModal?1:t.length,l=new FormData;for(let o=0;o<n;o++)l.append("file-"+o,t[o]);this.plugins.fileManager.upload.call(this,i,this.options.audioUploadHeader,l,this.plugins.audio.callBack_upload.bind(this,e),this.functions.onAudioUploadError)},callBack_upload:function(e,t){if("function"===typeof this.functions.audioUploadHandler)this.functions.audioUploadHandler(t,e,this);else{const i=JSON.parse(t.responseText);i.errorMessage?this.plugins.audio.error.call(this,i.errorMessage,i):this.plugins.audio.register.call(this,e,i)}},register:function(e,t){const i=t.result;for(let n,l,o=0,s=i.length;o<s;o++)l=e.isUpdate?e.element:this.plugins.audio.createAudioTag.call(this),n={name:i[o].name,size:i[o].size},this.plugins.audio.create_audio.call(this,l,i[o].url,n,e.isUpdate);this.closeLoading()},setupUrl:function(e){try{if(0===e.length)return!1;this.plugins.audio.create_audio.call(this,this.plugins.audio.createAudioTag.call(this),e,null,this.context.dialog.updateModal)}catch(t){throw Error('[KothingEditor.audio.audio.fail] cause : "'+t.message+'"')}finally{this.closeLoading()}},create_audio:function(e,t,i,n){const l=this.context.audio;if(n){if(l.element&&(e=l.element),!e||e.src===t)return void this.selectComponent(e,"audio");e.src=t,this.selectComponent(e,"audio")}else{e.src=t;const i=this.plugins.component.set_cover.call(this,e),n=this.plugins.component.set_container.call(this,i,"");if(!this.insertComponent(n,!1,!0,!this.options.mediaAutoSelect))return void this.focus();if(!this.options.mediaAutoSelect){const e=this.appendFormatTag(n,null);this.setRange(e,0,e,0)}}this.plugins.fileManager.setInfo.call(this,"audio",e,this.functions.onAudioUpload,i,!1),n&&this.history.push(!1)},updateCover:function(e){const t=this.context.audio;this.plugins.audio.setTagAttrs.call(this,e);const i=this.util.getParentElement(e,this.util.isMediaComponent)||this.util.getParentElement(e,function(e){return this.isWysiwygDiv(e.parentNode)}.bind(this.util)),n=e;t.element=e=e.cloneNode(!1);const l=this.plugins.component.set_cover.call(this,e),o=this.plugins.component.set_container.call(this,l,"ke-audio-container");try{this.util.isFormatElement(i)&&i.childNodes.length>0?(i.parentNode.insertBefore(o,i),this.util.removeItem(n),this.util.removeEmptyNode(i,null),0===i.children.length&&(i.innerHTML=this.util.htmlRemoveWhiteSpace(i.innerHTML))):i.parentNode.replaceChild(o,i)}catch(s){console.warn("[KothingEditor.audio.error] Maybe the audio tag is nested.",s)}this.plugins.fileManager.setInfo.call(this,"audio",e,this.functions.onAudioUpload,null,!1)},onModifyMode:function(e){const t=this.context.audio;this.setControllerPosition(t.controller,e,"bottom",{left:0,top:0}),this.controllersOn(t.controller,e,this.plugins.audio.onControllerOff.bind(this,e),"audio"),this.util.addClass(e,"active"),t.element=e,t.cover=this.util.getParentElement(e,"FIGURE"),t.container=this.util.getParentElement(e,this.util.isComponent)},openModify:function(e){if(this.context.audio.audioUrlFile){const e=this.context.audio;e.linkValue=e.preview.textContent=e.audioUrlFile.value=e.element.src}e||this.plugins.dialog.open.call(this,"audio",!0)},onClick_controller:function(e){e.stopPropagation();const t=e.target.getAttribute("data-command");t&&(e.preventDefault(),/update/.test(t)?this.plugins.audio.openModify.call(this,!1):this.plugins.audio.destroy.call(this,this.context.audio.element),this.controllersOff())},onControllerOff:function(e){this.util.removeClass(e,"active"),this.context.audio.controller.style.display="none"},init:function(){if(this.context.dialog.updateModal)return;const e=this.context.audio;e.audioInputFile&&(e.audioInputFile.value=""),e.audioUrlFile&&(e.linkValue=e.preview.textContent=e.audioUrlFile.value=""),e.audioInputFile&&e.audioUrlFile&&(e.audioUrlFile.removeAttribute("disabled"),e.preview.style.textDecoration=""),e.element=null}},math:{name:"math",display:"dialog",add:function(e){e.addModule([a]);const t=e.context;t.math={focusElement:null,previewElement:null,fontSizeElement:null,defaultFontSize:"",mathExp:null};let i=this.setDialog(e);t.math.modal=i,t.math.focusElement=i.querySelector(".ke-math-exp"),t.math.previewElement=i.querySelector(".ke-math-preview"),t.math.fontSizeElement=i.querySelector(".ke-math-size"),t.math.focusElement.addEventListener("keyup",this.renderMathExp.bind(e,t.math),!1),t.math.focusElement.addEventListener("change",this.renderMathExp.bind(e,t.math),!1),t.math.fontSizeElement.addEventListener("change",function(e){this.fontSize=e.target.value}.bind(t.math.previewElement.style),!1);let n=this.setController_MathButton(e);t.math.mathController=n,t.math.mathExp=null,i.querySelector("form").addEventListener("submit",this.submit.bind(e),!1),n.addEventListener("click",this.onClick_mathController.bind(e)),t.math.previewElement.style.fontSize=t.math.defaultFontSize,t.dialog.modal.appendChild(i),t.element.relative.appendChild(n),i=null,n=null},setDialog:function(e){const t=e.lang,i=e.util.createElement("DIV"),n=e.options.mathFontSize;let l=n[0].value;i.className="ke-dialog-content",i.style.display="none";let o='<form><div class="ke-dialog-header"><button type="button" data-command="close" class="ke-btn ke-dialog-close" aria-label="Close" title="'+t.dialogBox.close+'">'+e.icons.cancel+'</button><span class="ke-modal-title">'+t.dialogBox.mathBox.title+'</span></div><div class="ke-dialog-body"><div class="ke-dialog-form"><label>'+t.dialogBox.mathBox.inputLabel+' (<a href="https://katex.org/docs/supported.html" target="_blank">KaTeX</a>)</label><textarea class="ke-input-form ke-math-exp" type="text"></textarea></div><div class="ke-dialog-form"><label>'+t.dialogBox.mathBox.fontSizeLabel+'</label><select class="ke-input-select ke-math-size">';for(let s,a=0,r=n.length;a<r;a++)s=n[a],s.default&&(l=s.value),o+='<option value="'+s.value+'"'+(s.default?" selected":"")+">"+s.text+"</option>";return o+='</select></div><div class="ke-dialog-form"><label>'+t.dialogBox.mathBox.previewLabel+'</label><p class="ke-math-preview"></p></div></div><div class="ke-dialog-footer"><button type="submit" class="ke-btn-primary" title="'+t.dialogBox.submitButton+'"><span>'+t.dialogBox.submitButton+"</span></button></div></form>",e.context.math.defaultFontSize=l,i.innerHTML=o,i},setController_MathButton:function(e){const t=e.lang,i=e.util.createElement("DIV");return i.className="ke-controller ke-controller-link",i.innerHTML='<div class="ke-arrow ke-arrow-up"></div><div class="link-content"><div class="ke-btn-group"><button type="button" data-command="update" tabindex="-1" class="ke-btn ke-tooltip">'+e.icons.edit+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.controller.edit+'</span></span></button><button type="button" data-command="delete" tabindex="-1" class="ke-btn ke-tooltip">'+e.icons.delete+'<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+t.controller.remove+"</span></span></button></div></div>",i},open:function(){this.plugins.dialog.open.call(this,"math","math"===this.currentControllerName)},managedTags:function(){return{className:"katex",method:function(e){if(!e.getAttribute("data-exp")||!this.options.katex)return;const t=this._document.createRange().createContextualFragment(this.plugins.math.renderer.call(this,this.util.HTMLDecoder(e.getAttribute("data-exp"))));e.innerHTML=t.querySelector(".katex").innerHTML}}},render:function(e){const t=this.options.katex;return t.src.renderToString(e,t.options)},renderMathExp:function(e,t){e.previewElement.innerHTML=this.plugins.math.render.call(this,t.target.value)},submit:function(e){this.showLoading(),e.preventDefault(),e.stopPropagation();const t=function(){if(0===this.context.math.focusElement.value.trim().length)return!1;const e=this.context.math,t=e.focusElement.value,i=e.previewElement.querySelector(".katex");if(!i)return!1;if(i.className="__ke__katex "+i.className,i.setAttribute("contenteditable",!1),i.setAttribute("data-exp",this.util.HTMLEncoder(t)),i.setAttribute("data-font-size",e.fontSizeElement.value),i.style.fontSize=e.fontSizeElement.value,this.context.dialog.updateModal){const t=this.util.getParentElement(e.mathExp,".katex");t.parentNode.replaceChild(i,t),this.setRange(i,0,i,1)}else{const e=this.getSelectedElements();if(e.length>1){const t=this.util.createElement(e[0].nodeName);if(t.appendChild(i),!this.insertNode(t,null,!0))return!1}else if(!this.insertNode(i,null,!0))return!1;const t=this.util.createTextNode(this.util.zeroWidthSpace);i.parentNode.insertBefore(t,i.nextSibling),this.setRange(i,0,i,1)}return e.focusElement.value="",e.fontSizeElement.value="1em",e.previewElement.style.fontSize="1em",e.previewElement.innerHTML="",!0}.bind(this);try{t()&&(this.plugins.dialog.close.call(this),this.history.push(!1))}catch(e){this.plugins.dialog.close.call(this)}finally{this.closeLoading()}return!1},active:function(e){if(e){if(e.getAttribute("data-exp"))return this.controllerArray.indexOf(this.context.math.mathController)<0&&(this.setRange(e,0,e,1),this.plugins.math.call_controller.call(this,e)),!0}else this.controllerArray.indexOf(this.context.math.mathController)>-1&&this.controllersOff();return!1},on:function(e){if(e){const e=this.context.math;if(e.mathExp){const t=this.util.HTMLDecoder(e.mathExp.getAttribute("data-exp")),i=e.mathExp.getAttribute("data-font-size")||"1em";this.context.dialog.updateModal=!0,e.focusElement.value=t,e.fontSizeElement.value=i,e.previewElement.innerHTML=this.plugins.math.render.call(this,t),e.previewElement.style.fontSize=i}}else this.plugins.math.init.call(this)},call_controller:function(e){this.context.math.mathExp=e;const t=this.context.math.mathController;this.setControllerPosition(t,e,"bottom",{left:0,top:0}),this.controllersOn(t,e,"math")},onClick_mathController:function(e){e.stopPropagation();const t=e.target.getAttribute("data-command")||e.target.parentNode.getAttribute("data-command");t&&(e.preventDefault(),/update/.test(t)?(this.context.math.focusElement.value=this.util.HTMLDecoder(this.context.math.mathExp.getAttribute("data-exp")),this.plugins.dialog.open.call(this,"math",!0)):(this.util.removeItem(this.context.math.mathExp),this.context.math.mathExp=null,this.focus(),this.history.push(!1)),this.controllersOff())},init:function(){const e=this.context.math;e.mathController.style.display="none",e.mathExp=null,e.focusElement.value="",e.previewElement.innerHTML=""}},imageGallery:{name:"imageGallery",add:function(e){e.addModule([g]);e.context.imageGallery={title:e.lang.toolbar.imageGallery,url:e.options.imageGalleryUrl,header:e.options.imageGalleryHeader,listClass:"ke-image-list",itemTemplateHandler:this.drawItems,selectorHandler:this.setImage.bind(e),columnSize:4}},open:function(e){this.plugins.fileBrowser.open.call(this,"imageGallery",e)},drawItems:function(e){const t=e.src.split("/").pop();return'<div class="ke-file-item-img"><img src="'+e.src+'" alt="'+(e.alt||t)+'" data-command="pick"><div class="ke-file-img-name ke-file-name-back"></div><div class="ke-file-img-name __ke__img_name">'+(e.name||t)+"</div></div>"},setImage:function(e){this.callPlugin("image",function(){const t={name:e.parentNode.querySelector(".__ke__img_name").textContent,size:0};this.context.image.altText.value=e.alt,this.plugins.image.create_image.call(this,e.src,null,this.context.image.origin_w,this.context.image.origin_h,"none",t)}.bind(this),null)}}},m={redo:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2-29.4-29.4-52.5-63.6-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5c-16.1 38.1-39.2 72.3-68.6 101.7-9.3 9.3-19.1 18-29.3 26L668.2 724c-4.1-5.3-12.5-3.5-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 0.8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z" /></svg>',undo:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M511.4 124C290.5 124.3 112 303 112 523.9c0 128 60.2 242 153.8 315.2l-37.5 48c-4.1 5.3-0.3 13 6.3 12.9l167-0.8c5.2 0 9-4.9 7.7-9.9L369.8 727c-1.6-6.5-10-8.3-14.1-3L315 776.1c-10.2-8-20-16.7-29.3-26-29.4-29.4-52.5-63.6-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5c-16.1 38.1-39.2 72.3-68.6 101.7-7.5 7.5-15.3 14.5-23.4 21.2-3.4 2.8-3.9 7.7-1.2 11.1l39.4 50.5c2.8 3.5 7.9 4.1 11.4 1.3C854.5 760.8 912 649.1 912 523.9c0-221.1-179.4-400.2-400.6-399.9z" /></svg>',bold:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M697.8 481.4c33.6-35 54.2-82.3 54.2-134.3v-10.2C752 229.3 663.9 142 555.3 142H259.4c-15.1 0-27.4 12.3-27.4 27.4v679.1c0 16.3 13.2 29.5 29.5 29.5h318.7c117 0 211.8-94.2 211.8-210.5v-11c0-73-37.4-137.3-94.2-175.1zM328 238h224.7c57.1 0 103.3 44.4 103.3 99.3v9.5c0 54.8-46.3 99.3-103.3 99.3H328V238z m366.6 429.4c0 62.9-51.7 113.9-115.5 113.9H328V542.7h251.1c63.8 0 115.5 51 115.5 113.9v10.8z" /></svg>',underline:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M824 804H200c-4.4 0-8 3.4-8 7.6v60.8c0 4.2 3.6 7.6 8 7.6h624c4.4 0 8-3.4 8-7.6v-60.8c0-4.2-3.6-7.6-8-7.6zM512 728c69.4 0 134.6-27.1 183.8-76.2C745 602.7 772 537.4 772 468V156c0-6.6-5.4-12-12-12h-60c-6.6 0-12 5.4-12 12v312c0 97-79 176-176 176s-176-79-176-176V156c0-6.6-5.4-12-12-12h-60c-6.6 0-12 5.4-12 12v312c0 69.4 27.1 134.6 76.2 183.8C377.3 701 442.6 728 512 728z" /></svg>',italic:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M798 160H366c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h181.2l-156 544H229c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h432c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8H474.4l156-544H798c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z" /></svg>',strike:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M952 474H569.9c-10-2-20.5-4-31.6-6-15.9-2.9-22.2-4.1-30.8-5.8-51.3-10-82.2-20-106.8-34.2-35.1-20.5-52.2-48.3-52.2-85.1 0-37 15.2-67.7 44-89 28.4-21 68.8-32.1 116.8-32.1 54.8 0 97.1 14.4 125.8 42.8 14.6 14.4 25.3 32.1 31.8 52.6 1.3 4.1 2.8 10 4.3 17.8 0.9 4.8 5.2 8.2 9.9 8.2h72.8c5.6 0 10.1-4.6 10.1-10.1v-1c-0.7-6.8-1.3-12.1-2-16-7.3-43.5-28-81.7-59.7-110.3-44.4-40.5-109.7-61.8-188.7-61.8-72.3 0-137.4 18.1-183.3 50.9-25.6 18.4-45.4 41.2-58.6 67.7-13.5 27.1-20.3 58.4-20.3 92.9 0 29.5 5.7 54.5 17.3 76.5 8.3 15.7 19.6 29.5 34.1 42H72c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h433.2c2.1 0.4 3.9 0.8 5.9 1.2 30.9 6.2 49.5 10.4 66.6 15.2 23 6.5 40.6 13.3 55.2 21.5 35.8 20.2 53.3 49.2 53.3 89 0 35.3-15.5 66.8-43.6 88.8-30.5 23.9-75.6 36.4-130.5 36.4-43.7 0-80.7-8.5-110.2-25-29.1-16.3-49.1-39.8-59.7-69.5-0.8-2.2-1.7-5.2-2.7-9-1.2-4.4-5.3-7.5-9.7-7.5h-79.7c-5.6 0-10.1 4.6-10.1 10.1v1c0.2 2.3 0.4 4.2 0.6 5.7 6.5 48.8 30.3 88.8 70.7 118.8 47.1 34.8 113.4 53.2 191.8 53.2 84.2 0 154.8-19.8 204.2-57.3 25-18.9 44.2-42.2 57.1-69 13-27.1 19.7-57.9 19.7-91.5 0-31.8-5.8-58.4-17.8-81.4-5.8-11.2-13.1-21.5-21.8-30.8H952c4.4 0 8-3.6 8-8v-60c0-4.3-3.6-7.9-8-7.9z" /></svg>',subscript:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M359.936 529.8688l195.4816-195.5328a40.96 40.96 0 1 1 57.9584 57.9584L417.792 587.776l195.5328 195.4816a40.96 40.96 0 1 1-57.9584 57.9584L359.936 645.632l-195.4816 195.584a40.96 40.96 0 1 1-57.9584-57.9584L302.08 587.776 106.496 392.2944A40.96 40.96 0 1 1 164.4544 334.336l195.4816 195.584z m417.1264 400.8448h130.5088c13.0048 0 22.8864 2.56 29.696 7.7824a25.088 25.088 0 0 1 10.2912 21.1456 27.648 27.648 0 0 1-8.1408 20.1216c-5.376 5.5296-13.6192 8.2944-24.576 8.2944h-184.0128c-12.544 0-22.272-3.3792-29.2864-10.0864a31.7952 31.7952 0 0 1-10.496-23.7056c0-5.8368 2.2528-13.568 6.7584-23.1936a82.944 82.944 0 0 1 14.7456-22.7328c22.1696-22.3232 42.1888-41.472 60.0064-57.4464 17.8176-15.9744 30.5664-26.4704 38.2464-31.488 13.6704-9.3696 25.088-18.8416 34.1504-28.3136 9.0624-9.472 15.9744-19.2 20.736-29.184 4.7616-9.9328 7.1168-19.6608 7.1168-29.184a51.6096 51.6096 0 0 0-28.3648-46.9504 61.2864 61.2864 0 0 0-28.672-6.8096c-21.8112 0-38.9632 9.3184-51.456 27.9552a119.3984 119.3984 0 0 0-8.3968 19.968 82.3808 82.3808 0 0 1-13.2096 24.9856c-4.9152 5.8368-12.1344 8.704-21.6576 8.704a28.5696 28.5696 0 0 1-20.736-7.9872 29.0816 29.0816 0 0 1-8.2432-21.8624c0-11.1616 2.56-22.8352 7.7312-34.9696 5.1712-12.1856 12.9024-23.1936 23.1424-33.0752s23.2448-17.8688 39.0144-23.9104a153.4976 153.4976 0 0 1 55.3472-9.1136c25.4976 0 47.2576 3.8912 65.2288 11.6736a98.0992 98.0992 0 0 1 51.4048 52.8384 101.5808 101.5808 0 0 1-7.9872 91.8528c-10.24 16.384-20.736 29.2864-31.3856 38.6048-10.6496 9.3184-28.5696 23.9616-53.6576 43.8784-25.088 19.968-42.2912 35.3792-51.6096 46.3872a138.3936 138.3936 0 0 0-12.288 15.8208z"></path></svg>',superscript:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M802.6624 444.3136h130.5088c13.0048 0 22.8864 2.56 29.696 7.7824a25.088 25.088 0 0 1 10.2912 21.1456 27.648 27.648 0 0 1-8.1408 20.1216c-5.376 5.5296-13.6192 8.2944-24.576 8.2944h-184.0128c-12.544 0-22.272-3.3792-29.2864-10.0864a31.7952 31.7952 0 0 1-10.496-23.7056c0-5.8368 2.2528-13.568 6.7584-23.1936a82.944 82.944 0 0 1 14.7456-22.7328c22.1696-22.3232 42.1888-41.472 60.0064-57.4464 17.8176-15.9744 30.5664-26.4704 38.2464-31.488 13.6704-9.3696 25.088-18.8416 34.1504-28.3136 9.0624-9.472 15.9744-19.2 20.736-29.184 4.7616-9.9328 7.1168-19.6608 7.1168-29.184a51.6096 51.6096 0 0 0-28.3648-46.9504 61.2864 61.2864 0 0 0-28.672-6.8096c-21.8112 0-38.9632 9.3184-51.456 27.9552a119.3984 119.3984 0 0 0-8.3968 19.968 82.3808 82.3808 0 0 1-13.2096 24.9856c-4.9152 5.8368-12.1344 8.704-21.6576 8.704a28.5696 28.5696 0 0 1-20.736-7.9872 29.0816 29.0816 0 0 1-8.2432-21.8624c0-11.1616 2.56-22.8352 7.7312-34.9696 5.1712-12.1856 12.9024-23.1936 23.1424-33.0752s23.2448-17.8688 39.0144-23.9104a153.4976 153.4976 0 0 1 55.3472-9.1136c25.4976 0 47.2576 3.8912 65.2288 11.6736a98.0992 98.0992 0 0 1 51.4048 52.8384 101.5808 101.5808 0 0 1-7.9872 91.8528c-10.24 16.384-20.736 29.2864-31.3856 38.6048-10.6496 9.3184-28.5696 23.9616-53.6576 43.8784-25.088 19.968-42.2912 35.3792-51.6096 46.3872a138.3936 138.3936 0 0 0-12.288 15.8208zM359.936 529.8688l195.4816-195.5328a40.96 40.96 0 1 1 57.9584 57.9584L417.792 587.776l195.5328 195.4816a40.96 40.96 0 1 1-57.9584 57.9584L359.936 645.632l-195.4816 195.584a40.96 40.96 0 1 1-57.9584-57.9584L302.08 587.776 106.496 392.2944A40.96 40.96 0 1 1 164.4544 334.336l195.4816 195.584z"></path></svg>',erase:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M452.225 146.9L111.637 487.488a33.223 33.223 0 0 1-47.132 0c-13.073-13.073-12.9-34.059 0-47.132L405.093 99.768a33.223 33.223 0 0 1 47.132 0 33.223 33.223 0 0 1 0 47.132zM924.232 618.735L583.644 959.323a33.223 33.223 0 0 1-47.132 0c-13.073-13.073-12.901-34.06 0-47.132L877.1 571.603a33.223 33.223 0 0 1 47.132 0c13.073 13.073 12.9 34.23 0 47.132zM451.193 620.799L348.157 723.835a33.223 33.223 0 0 1-47.132 0c-13.073-13.073-12.901-34.058 0-47.131L404.06 573.667a33.223 33.223 0 0 1 47.132 0c13.073 13.073 13.073 34.23 0 47.132zM298.444 524.987l-74.654 74.654a33.223 33.223 0 0 1-47.132 0c-13.073-13.073-12.9-34.059 0-47.132l74.655-74.654a33.223 33.223 0 0 1 47.131 0c12.902 13.073 12.902 34.231 0 47.132zM545.285 772l-74.654 74.653a33.223 33.223 0 0 1-47.132 0c-13.073-13.073-12.901-34.058 0-47.131l74.654-74.655a33.223 33.223 0 0 1 47.132 0 33.223 33.223 0 0 1 0 47.132z"></path><path d="M536.34 959.323L64.505 487.66a33.223 33.223 0 0 1 0-47.132c13.073-13.073 34.06-12.9 47.132 0l471.835 471.835a33.223 33.223 0 0 1 0 47.132c-13.073 12.9-34.059 12.9-47.132-0.172zM732.264 763.57L260.43 291.737a33.223 33.223 0 0 1 0-47.132c13.073-13.073 34.06-12.901 47.132 0L779.224 716.44a33.223 33.223 0 0 1 0 47.132c-12.901 13.073-34.059 12.9-46.96 0zM912.363 219.49L804.682 111.637a33.223 33.223 0 0 1 0-47.132c13.073-13.073 34.059-12.9 47.132 0l107.68 107.853a33.223 33.223 0 0 1 0 47.132c-13.072 13.073-34.23 13.073-47.131 0zM587.256 328.719L405.437 146.9a33.223 33.223 0 0 1 0-47.132c13.073-13.073 34.06-12.9 47.132 0L634.56 281.76a33.223 33.223 0 0 1 0 47.132c-13.073 12.901-34.23 12.901-47.304-0.172zM877.1 618.563L695.28 436.743a33.223 33.223 0 0 1 0-47.131c13.073-13.073 34.059-12.901 47.132 0l181.99 181.99a33.223 33.223 0 0 1 0 47.133c-13.072 12.9-34.23 12.9-47.303-0.172z"></path><path d="M959.323 219.49L742.24 436.572a33.223 33.223 0 0 1-47.132 0c-13.073-13.073-12.901-34.059 0-47.132l217.082-217.082a33.223 33.223 0 0 1 47.132 0c13.073 12.901 13.073 34.059 0 47.132zM851.642 111.637L634.388 328.72a33.223 33.223 0 0 1-47.132 0c-13.073-13.073-12.9-34.059 0-47.132L804.51 64.505a33.223 33.223 0 0 1 47.132 0c13.073 13.073 12.9 34.06 0 47.132z"></path></svg>',indent:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM400 646c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zM904 160H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 792H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519c4.5-3.5 4.5-10.3 0-13.9L142.4 381.9c-5.8-4.6-14.4-0.5-14.4 6.9v246.3c0 7.4 8.5 11.6 14.4 7z" /></svg>',outdent:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM400 646c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zM904 160H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 792H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4 0.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1c-4.5 3.5-4.5 10.3 0 13.8z" /></svg>',expansion:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M342 88H120c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V168h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zM920 664h-48c-8.8 0-16 7.2-16 16v176H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V680c0-8.8-7.2-16-16-16zM342 856H168V680c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zM904 88H682c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V120c0-17.7-14.3-32-32-32z" /></svg>',reduction:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M326 664H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h174v176c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V696c0-17.7-14.3-32-32-32zM342 88h-48c-8.8 0-16 7.2-16 16v176H104c-8.8 0-16 7.2-16 16v48c0 8.8 7.2 16 16 16h222c17.7 0 32-14.3 32-32V104c0-8.8-7.2-16-16-16zM920 664H698c-17.7 0-32 14.3-32 32v224c0 8.8 7.2 16 16 16h48c8.8 0 16-7.2 16-16V744h174c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16zM920 280H746V104c0-8.8-7.2-16-16-16h-48c-8.8 0-16 7.2-16 16v224c0 17.7 14.3 32 32 32h222c8.8 0 16-7.2 16-16v-48c0-8.8-7.2-16-16-16z" /></svg>',code_view:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M438.4 849.1l222.7-646.7c0.2-0.5 0.3-1.1 0.4-1.6L438.4 849.1zM661.2 168.7h-67.5c-3.4 0-6.5 2.2-7.6 5.4L354.7 846c-0.3 0.8-0.4 1.7-0.4 2.6 0 4.4 3.6 8 8 8h67.8c3.4 0 6.5-2.2 7.6-5.4l0.7-2.1 223.1-648.3 7.4-21.4c0.3-0.8 0.4-1.7 0.4-2.6-0.1-4.5-3.6-8.1-8.1-8.1zM954.6 502.1c-0.8-1-1.7-1.9-2.7-2.7l-219-171.3c-3.5-2.7-8.5-2.1-11.2 1.4-1.1 1.4-1.7 3.1-1.7 4.9v81.3c0 2.5 1.1 4.8 3.1 6.3l115 90-115 90c-1.9 1.5-3.1 3.8-3.1 6.3v81.3c0 4.4 3.6 8 8 8 1.8 0 3.5-0.6 4.9-1.7l219-171.3c6.9-5.4 8.2-15.5 2.7-22.5zM291.1 328.1l-219 171.3c-1 0.8-1.9 1.7-2.7 2.7-5.4 7-4.2 17 2.7 22.5l219 171.3c1.4 1.1 3.1 1.7 4.9 1.7 4.4 0 8-3.6 8-8v-81.3c0-2.5-1.1-4.8-3.1-6.3l-115-90 115-90c1.9-1.5 3.1-3.8 3.1-6.3v-81.3c0-1.8-0.6-3.5-1.7-4.9-2.7-3.5-7.7-4.1-11.2-1.4z" /></svg>',preview:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M646.656 284.672c0-19.968-19.456-35.84-43.52-35.84H243.712c-24.064 0-43.52 15.872-43.52 35.84 0 19.968 19.456 35.84 43.52 35.84h358.912c24.576 0 43.52-15.36 44.032-35.84zM404.48 466.432c0-19.968-19.456-35.84-43.52-35.84H243.712c-24.064 0-43.52 15.872-43.52 35.84 0 19.968 19.456 35.84 43.52 35.84h117.248c24.576 0 43.52-15.36 43.52-35.84zM318.976 641.536H243.712c-24.064 0-43.52 15.872-43.52 35.84 0 19.968 19.456 35.84 43.52 35.84h74.752c24.576 0 43.52-15.872 43.52-35.84 0.512-19.968-18.944-35.84-43.008-35.84zM942.08 908.288l-112.64-111.616c48.128-47.104 78.336-112.128 78.336-184.32 0-142.336-116.736-258.048-260.096-258.048-143.36 0-260.096 115.712-260.096 258.048S504.32 870.4 647.68 870.4c37.376 0 72.704-8.192 104.448-22.016L877.568 972.8c9.216 8.704 20.48 12.8 32.256 12.8 11.776 0 23.04-4.096 31.744-12.8a46.592 46.592 0 0 0 0.512-64.512z m-294.4-117.248c-99.328 0-180.224-80.384-180.224-178.688s80.896-178.688 180.224-178.688 180.224 80.384 180.224 178.688-80.896 178.688-180.224 178.688zM140.288 812.544V141.824c0-17.408 14.336-31.744 31.744-31.744h539.136c17.408 0 31.744 14.336 31.744 31.744V353.28h71.68V141.824c0-56.832-46.08-103.424-103.424-103.424H172.032c-56.832 0-103.424 46.08-103.424 103.424v670.72c0 56.832 46.08 103.424 103.424 103.424h335.36v-71.68H172.032c-17.408 0-31.744-14.336-31.744-31.744z"></path></svg>',print:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M820 436h-40c-4.4 0-8 3.6-8 8v40c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-40c0-4.4-3.6-8-8-8zM852 332H732V120c0-4.4-3.6-8-8-8H300c-4.4 0-8 3.6-8 8v212H172c-44.2 0-80 35.8-80 80v328c0 17.7 14.3 32 32 32h168v132c0 4.4 3.6 8 8 8h424c4.4 0 8-3.6 8-8V772h168c17.7 0 32-14.3 32-32V412c0-44.2-35.8-80-80-80zM360 180h304v152H360V180z m304 664H360V568h304v276z m200-140H732V500H292v204H160V412c0-6.6 5.4-12 12-12h680c6.6 0 12 5.4 12 12v292z" /></svg>',template:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M410.055 157.468h198.201c22.983 0 42.325-22.983 42.325-49.607s-19.342-49.607-43.463-49.607h-196.95c-24.234 0-43.576 22.983-43.576 49.607s19.342 49.607 43.463 49.607z m310.727 484.125H295.253c-15.701 0-29.013 13.312-29.013 29.013s13.312 29.014 29.013 29.014H721.92c15.701 0 29.013-13.312 29.013-29.014-1.137-16.839-14.45-29.013-30.15-29.013z m0-170.667H295.253c-15.701 0-29.013 13.312-29.013 29.014s13.312 29.013 29.013 29.013H721.92c15.701 0 29.013-13.312 29.013-29.013-1.137-16.84-14.45-29.014-30.15-29.014zM266.24 342.7c0 15.701 13.312 29.013 29.013 29.013H721.92c15.701 0 29.013-13.312 29.013-29.013s-13.312-29.014-29.013-29.014H295.253c-15.701-0.113-29.013 13.199-29.013 29.014zM821.02 86.016h-56.775c-15.701 0-33.905 9.671-33.905 25.372s18.09 31.517 33.905 31.517h56.775c33.792 0 56.776 22.983 56.776 56.889v654.79c0 33.907-22.984 56.89-56.776 56.89H209.465c-33.906 0-71.339-22.983-71.339-56.89v-654.79c0-33.906 22.983-56.89 56.775-56.89h71.339c15.701 0 21.732-15.7 21.732-31.516s-6.03-25.372-21.732-25.372h-71.339c-79.758 0-113.664 49.607-113.664 115.03v647.622c0 70.201 42.326 119.808 119.695 119.808H814.99c77.37 0 119.694-41.187 119.694-119.808V201.045c0-65.422-39.936-115.029-113.664-115.029z"></path></svg>',line_height:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M657.067 136.533H76.8c-4.693 0-8.533 3.84-8.533 8.534V281.6c0 4.693 3.84 8.533 8.533 8.533h59.733c4.694 0 8.534-3.84 8.534-8.533v-68.267h179.2v597.334h-98.134c-4.693 0-8.533 3.84-8.533 8.533v59.733c0 4.694 3.84 8.534 8.533 8.534h281.6c4.694 0 8.534-3.84 8.534-8.534V819.2c0-4.693-3.84-8.533-8.534-8.533H409.6V213.333h179.2V281.6c0 4.693 3.84 8.533 8.533 8.533h59.734c4.693 0 8.533-3.84 8.533-8.533V145.067c0-4.694-3.84-8.534-8.533-8.534z m290.986 582.4h-69.12V305.067h69.12c6.4 0 10.027-7.467 6.08-12.48L846.613 156.48c-3.093-3.947-9.066-3.947-12.053 0L727.04 292.587c-3.947 5.013-0.427 12.48 6.08 12.48h69.013v413.866h-69.12c-6.4 0-10.026 7.467-6.08 12.48l107.52 136c3.094 3.947 9.067 3.947 12.054 0l107.52-136c4.053-5.013 0.426-12.48-5.974-12.48z" /></svg>',paragraph_style:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M512 256v640h-85.333333v-213.333333a256 256 0 1 1 0-512h426.666666v85.333333h-128v640h-85.333333V256h-128z m-85.333333 0a170.666667 170.666667 0 1 0 0 341.333333V256z"></path></svg>',text_style:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M890.592 729.19V296.255a115.329 115.329 0 1 0-140.099-163.93H268.452A115.257 115.257 0 1 0 135.213 298.42v428.602A115.293 115.293 0 1 0 270.98 888.426h476.987A115.293 115.293 0 1 0 890.592 729.19z m-39.719-590.727a49.468 49.468 0 1 1-49.467 49.468 49.324 49.324 0 0 1 49.467-49.468zM117.881 187.93a49.468 49.468 0 1 1 49.468 49.468 49.54 49.54 0 0 1-49.468-49.468z m49.468 698.69a49.468 49.468 0 1 1 49.468-49.469 49.324 49.324 0 0 1-49.468 49.468z m569.423-64.634h-454.96a115.834 115.834 0 0 0-80.882-94.964V298.06a114.896 114.896 0 0 0 80.882-99.297h454.6a115.076 115.076 0 0 0 87.742 101.464v424.99a114.787 114.787 0 0 0-87.382 96.77z m114.101 64.633a49.468 49.468 0 1 1 49.468-49.468 49.324 49.324 0 0 1-49.468 49.468zM539.262 283.256a4.983 4.983 0 0 1-1.084-1.444 33.544 33.544 0 0 0-17.332-21.665 32.822 32.822 0 0 0-44.051 15.526L274.95 695.61a32.822 32.822 0 0 0 15.526 44.052 33.725 33.725 0 0 0 14.444 3.25 33.292 33.292 0 0 0 29.97-18.777l64.272-133.6h211.592a10.58 10.58 0 0 0 3.25-0.721l67.883 141.543a33.292 33.292 0 0 0 29.97 18.776 34.953 34.953 0 0 0 14.443-3.25 32.93 32.93 0 0 0 15.526-44.051zM430.576 524.818l75.466-157.43 75.466 157.43z" /></svg>',save:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184z m456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144z m0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z" /></svg>',blockquote:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M384 550.4c-19.2 0-38.4 6.4-44.8 12.8 0-70.4 57.6-147.2 134.4-192L448 320c-102.4 44.8-192 147.2-192 281.6 0 83.2 51.2 140.8 115.2 140.8 70.4 0 102.4-51.2 102.4-96 0-51.2-32-96-89.6-96zM672 550.4c-19.2 0-38.4 6.4-44.8 12.8 0-70.4 51.2-147.2 134.4-192l-25.6-51.2c-96 44.8-185.6 147.2-185.6 281.6 0 83.2 51.2 140.8 115.2 140.8 70.4 0 102.4-51.2 102.4-96 0-51.2-38.4-96-96-96z"></path></svg>',arrow_down:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 15.73 8.67"><g><path d="M18.79,7.52a.8.8,0,0,1,.56-.23.82.82,0,0,1,.79.79.8.8,0,0,1-.23.56l-7.07,7.07a.79.79,0,0,1-.57.25.77.77,0,0,1-.57-.25h0L4.64,8.65a.8.8,0,0,1-.23-.57.82.82,0,0,1,.79-.79.8.8,0,0,1,.56.23L12.28,14l3.26-3.26,3.25-3.26Z" transform="translate(-4.41 -7.29)"/></g></svg>',align_justify:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M163.84 204.8h696.32c5.632 0 10.24 4.608 10.24 10.24v59.392a10.24 10.24 0 0 1-10.24 10.24H163.84a10.24 10.24 0 0 1-10.24-10.24V215.04c0-5.632 4.608-10.24 10.24-10.24z m0 585.728h696.32c5.632 0 10.24 4.608 10.24 10.24v59.392a10.24 10.24 0 0 1-10.24 10.24H163.84a10.24 10.24 0 0 1-10.24-10.24v-59.392c0-5.632 4.608-10.24 10.24-10.24z m0-390.5024h696.32c5.632 0 10.24 4.608 10.24 10.24v59.392a10.24 10.24 0 0 1-10.24 10.24H163.84a10.24 10.24 0 0 1-10.24-10.24v-59.392c0-5.632 4.608-10.24 10.24-10.24z m0 195.2768h696.32c5.632 0 10.24 4.608 10.24 10.24v59.392a10.24 10.24 0 0 1-10.24 10.24H163.84a10.24 10.24 0 0 1-10.24-10.24v-59.392c0-5.632 4.608-10.24 10.24-10.24z"></path></svg>',align_left:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M120 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM120 654h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM904 794H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 370H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z" /></svg>',align_right:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M904 158H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 582H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 794H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 370H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z" /></svg>',align_center:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M264 230h496c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zM760 654c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H264c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h496zM904 794H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM904 370H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z" /></svg>',font:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M170.464 313.527l-25.094 0 3.812-177.812 717.765 0 3.812 177.812-23.453 0c-8.359-48.719-19.812-83.906-34.359-105.547-14.547-21.625-30.188-34.906-46.906-39.812s-45.266-7.359-85.625-7.359L561.526 160.809l0 521.953c0 57.812 1.359 95.812 4.078 114s10.094 31.641 22.094 40.359 34.531 13.078 67.625 13.078l36 0 0 25.094L322.636 875.293l0-25.094 38.172 0c31.625 0 53.531-4 65.719-12s20-20.453 23.453-37.359 5.188-56.266 5.188-118.078L455.168 160.808 345.542 160.808c-47.641 0-79.641 2.281-96 6.812-16.375 4.547-31.734 18.281-46.094 41.188S178.089 266.621 170.464 313.527z"></path></svg>',font_size:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M920 416H616c-4.4 0-8 3.6-8 8v112c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-56h60v320h-46c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h164c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8h-46V480h60v56c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V424c0-4.4-3.6-8-8-8zM656 296V168c0-4.4-3.6-8-8-8H104c-4.4 0-8 3.6-8 8v128c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-64h168v560h-92c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8h-92V232h168v64c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8z"></path></svg>',font_color:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M904 816H120c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8zM253.7 736h85c4.2 0 8-2.7 9.3-6.8l53.7-166h219.2l53.2 166c1.3 4 5 6.8 9.3 6.8h89.1c1.1 0 2.2-0.2 3.2-0.5 5.1-1.8 7.8-7.3 6-12.4L573.6 118.6c-1.4-3.9-5.1-6.6-9.2-6.6H462.1c-4.2 0-7.9 2.6-9.2 6.6L244.5 723.1c-0.4 1-0.5 2.1-0.5 3.2-0.1 5.3 4.3 9.7 9.7 9.7z m255.9-516.1h4.1l83.8 263.8H424.9l84.7-263.8z" /></svg>',format_block:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M725.333333 469.333333V170.666667h85.333334v725.333333h-85.333334v-341.333333H298.666667v341.333333H213.333333V170.666667h85.333334v298.666666z"></path></svg>',highlight_color:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M766.4 744.3c43.7 0 79.4-36.2 79.4-80.5 0-53.5-79.4-140.8-79.4-140.8S687 610.3 687 663.8c0 44.3 35.7 80.5 79.4 80.5zM389.3 700.2c7.1 7.1 18.6 7.1 25.6 0l256.1-256c7.1-7.1 7.1-18.6 0-25.6l-256-256c-0.6-0.6-1.3-1.2-2-1.7l-78.2-78.2c-3.5-3.5-9.3-3.5-12.8 0l-48 48c-3.5 3.5-3.5 9.3 0 12.8l67.2 67.2-207.8 207.9c-7.1 7.1-7.1 18.6 0 25.6l255.9 256z m12.9-448.6l178.9 178.9H223.4l178.8-178.9zM904 816H120c-4.4 0-8 3.6-8 8v80c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-80c0-4.4-3.6-8-8-8z" /></svg>',list_bullets:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M912 192H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM912 476H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM912 760H328c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h584c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM160 228m-56 0a56 56 0 1 0 112 0 56 56 0 1 0-112 0ZM160 512m-56 0a56 56 0 1 0 112 0 56 56 0 1 0-112 0ZM160 796m-56 0a56 56 0 1 0 112 0 56 56 0 1 0-112 0Z" /></svg>',list_number:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M978.285714 795.428571H310.857143c-5.028571 0-9.142857 4.114286-9.142857 9.142858v64c0 5.028571 4.114286 9.142857 9.142857 9.142857h667.428571c5.028571 0 9.142857-4.114286 9.142857-9.142857v-64c0-5.028571-4.114286-9.142857-9.142857-9.142858z m0-649.142857H310.857143c-5.028571 0-9.142857 4.114286-9.142857 9.142857v64c0 5.028571 4.114286 9.142857 9.142857 9.142858h667.428571c5.028571 0 9.142857-4.114286 9.142857-9.142858v-64c0-5.028571-4.114286-9.142857-9.142857-9.142857z m0 324.571429H310.857143c-5.028571 0-9.142857 4.114286-9.142857 9.142857v64c0 5.028571 4.114286 9.142857 9.142857 9.142857h667.428571c5.028571 0 9.142857-4.114286 9.142857-9.142857v-64c0-5.028571-4.114286-9.142857-9.142857-9.142857zM173.714286 740.571429H41.142857c-2.514286 0-4.571429 2.057143-4.571428 4.571428v38.857143c0 2.514286 2.057143 4.571429 4.571428 4.571429h82.742857v23.428571h-40.8c-2.514286 0-4.571429 2.057143-4.571428 4.571429v38.857142c0 2.514286 2.057143 4.571429 4.571428 4.571429h40.8V884.571429H41.142857c-2.514286 0-4.571429 2.057143-4.571428 4.571428v38.857143c0 2.514286 2.057143 4.571429 4.571428 4.571429h132.571429c2.514286 0 4.571429-2.057143 4.571428-4.571429V745.142857c0-2.514286-2.057143-4.571429-4.571428-4.571428zM41.142857 141.714286h43.428572v137.142857c0 2.514286 2.057143 4.571429 4.571428 4.571428h45.714286c2.514286 0 4.571429-2.057143 4.571428-4.571428V100.571429c0-5.028571-4.114286-9.142857-9.142857-9.142858h-89.142857c-2.514286 0-4.571429 2.057143-4.571428 4.571429v41.142857c0 2.514286 2.057143 4.571429 4.571428 4.571429z m132.571429 274.285714H41.142857c-2.514286 0-4.571429 2.057143-4.571428 4.571429v41.142857c0 2.514286 2.057143 4.571429 4.571428 4.571428h78.171429l-80.342857 88.8a9.485714 9.485714 0 0 0-2.4 6.171429V603.428571c0 2.514286 2.057143 4.571429 4.571428 4.571429h132.571429c2.514286 0 4.571429-2.057143 4.571428-4.571429v-41.142857c0-2.514286-2.057143-4.571429-4.571428-4.571428h-78.171429l80.342857-88.8a9.485714 9.485714 0 0 0 2.4-6.171429V420.571429c0-2.514286-2.057143-4.571429-4.571428-4.571429z" /></svg>',table:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M513.7 120.1h385.5c44.3 0 59.5 15 59.5 59 0 221.1 0 442.3-0.1 663.4 0 44.6-14.8 59.6-58.8 59.6-259.2 0.1-518.5 0.1-777.7 0-41 0-57.1-15.7-57.1-56.8-0.2-223.4-0.2-446.8 0-670.1 0-39.6 16.2-55 56.5-55.1 130.7-0.1 261.4 0 392.2 0zM345.3 693.2h-222v150.7h222V693.2z m277 151.6V693.9H401.5v150.9h220.8z m55.9-1.2h222.2V693.5H678.2v150.1zM123.6 490.9v149.4h221V490.9h-221zM678 642.3c72.4 0 142.3 0.2 212.2-0.5 3.8 0 10.7-6.6 10.7-10.3 0.7-46.7 0.5-93.3 0.5-139.8H677.9c0.1 50.4 0.1 98.7 0.1 150.6z m-277.5-1.8h222.1V491.6H400.5v148.9z m-55.7-200.9V289.4H121.9c0 46.8-0.5 91.5 0.6 136.1 0.1 4.8 9.2 13.4 14.2 13.5 68.6 0.9 137.3 0.6 208.1 0.6z m56.3-2.1h221V288.8h-221v148.7z m498.8 0.7V288.7H678.5v149.5h221.4z"></path></svg>',horizontal_rule:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 15.74 2.24"><g><path d="M20.15,12.75V10.51H4.41v2.24H20.15Z" transform="translate(-4.41 -10.51)"/></g></svg>',show_blocks:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M848 160.7c8.7 0 16 7.3 16 16v140c0 8.7-7.3 16-16 16H179.5c-8.7 0-16-7.3-16-16v-140c0-8.7 7.3-16 16-16H848m0-64H179.5c-44 0-80 36-80 80v140c0 44 36 80 80 80H848c44 0 80-36 80-80v-140c0-44-36-80-80-80zM344.9 516.1c8.7 0 16 7.3 16 16V846c0 8.7-7.3 16-16 16H179.5c-8.7 0-16-7.3-16-16V532.1c0-8.7 7.3-16 16-16h165.4m0-64H179.5c-44 0-80 36-80 80V846c0 44 36 80 80 80h165.4c44 0 80-36 80-80V532.1c0-44-36-80-80-80zM848 516.1c8.7 0 16 7.3 16 16V846c0 8.7-7.3 16-16 16H596.1c-8.7 0-16-7.3-16-16V532.1c0-8.7 7.3-16 16-16H848m0-64H596.1c-44 0-80 36-80 80V846c0 44 36 80 80 80H848c44 0 80-36 80-80V532.1c0-44-36-80-80-80z"></path></svg>',cancel:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 15.74 15.74"><g><path d="M14.15,11.63l5.61,5.61a1.29,1.29,0,0,1,.38.93,1.27,1.27,0,0,1-.4.93,1.25,1.25,0,0,1-.92.4,1.31,1.31,0,0,1-.94-.4l-5.61-5.61L6.67,19.1a1.31,1.31,0,0,1-.94.4,1.24,1.24,0,0,1-.92-.4,1.27,1.27,0,0,1-.4-.93,1.33,1.33,0,0,1,.38-.93l5.61-5.63L4.79,6a1.26,1.26,0,0,1-.38-.93,1.22,1.22,0,0,1,.4-.92,1.28,1.28,0,0,1,.92-.39,1.38,1.38,0,0,1,.94.38l5.61,5.61,5.61-5.61a1.33,1.33,0,0,1,.94-.38,1.26,1.26,0,0,1,.92.39,1.24,1.24,0,0,1,.4.92,1.29,1.29,0,0,1-.39.93L17,8.81l-2.8,2.82Z" transform="translate(-4.41 -3.76)"/></g></svg>',image:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32z m-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792z m0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2zM304 456c48.6 0 88-39.4 88-88s-39.4-88-88-88-88 39.4-88 88 39.4 88 88 88z m0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z" /></svg>',audio:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M842 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 140.3-113.7 254-254 254S258 594.3 258 454c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 168.7 126.6 307.9 290 327.6V884H326.7c-13.7 0-24.7 14.3-24.7 32v36c0 4.4 2.8 8 6.2 8h407.6c3.4 0 6.2-3.6 6.2-8v-36c0-17.7-11-32-24.7-32H548V782.1c165.3-18 294-158 294-328.1zM512 624c93.9 0 170-75.2 170-168V232c0-92.8-76.1-168-170-168s-170 75.2-170 168v224c0 92.8 76.1 168 170 168z m-94-392c0-50.6 41.9-92 94-92s94 41.4 94 92v224c0 50.6-41.9 92-94 92s-94-41.4-94-92V232z" /></svg>',video:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M912 302.3L784 376V224c0-35.3-28.7-64-64-64H128c-35.3 0-64 28.7-64 64v576c0 35.3 28.7 64 64 64h592c35.3 0 64-28.7 64-64V648l128 73.7c21.3 12.3 48-3.1 48-27.6V330c0-24.6-26.7-40-48-27.7zM712 792H136V232h576v560z m176-167l-104-59.8V458.9L888 399v226zM208 360h112c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H208c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z" /></svg>',link:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M574 665.4c-3.1-3.1-8.2-3.1-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8c-3.1-3.1-8.2-3.1-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zM832.6 191.4c-84.6-84.6-221.5-84.6-306 0L410.3 307.6c-3.1 3.1-3.1 8.2 0 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6c-3.1 3.1-3.1 8.2 0 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3c-3.1-3.1-8.2-3.1-11.3 0L372.3 598.7c-3.1 3.1-3.1 8.2 0 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z" /></svg>',unlink:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox ="0 0 15.74 15.72"><g><path d="M13.05,13.63a.24.24,0,0,1,.15.22L13.42,16a.19.19,0,0,1-.08.18l-2.12,2.14a4.08,4.08,0,0,1-1.29.85A4,4,0,0,1,4.71,17a3.92,3.92,0,0,1-.3-1.52A4,4,0,0,1,4.71,14a3.91,3.91,0,0,1,.87-1.3L7.7,10.56a.25.25,0,0,1,.2-.06l2.17.22a.21.21,0,0,1,.19.15.24.24,0,0,1,0,.25L7.12,14.23a1.81,1.81,0,0,0,0,2.58,1.78,1.78,0,0,0,1.29.52,1.74,1.74,0,0,0,1.28-.52L12.8,13.7a.24.24,0,0,1,.25-.07ZM19,4.92a4,4,0,0,1,0,5.66L16.86,12.7a.25.25,0,0,1-.17.08l-2.2-.23a.21.21,0,0,1-.19-.15.22.22,0,0,1,0-.25L17.44,9a1.81,1.81,0,0,0,0-2.58,1.78,1.78,0,0,0-1.29-.52,1.74,1.74,0,0,0-1.28.52L11.76,9.57a.21.21,0,0,1-.25,0,.24.24,0,0,1-.16-.21l-.22-2.17a.19.19,0,0,1,.08-.18l2.12-2.14a4.08,4.08,0,0,1,1.29-.85,4.05,4.05,0,0,1,3.06,0,3.85,3.85,0,0,1,1.3.85ZM5.84,9.82a.25.25,0,0,1-.18-.08.19.19,0,0,1-.07-.19l.11-.77a.2.2,0,0,1,.11-.17.24.24,0,0,1,.2,0l2.5.72a.25.25,0,0,1,.15.27.22.22,0,0,1-.23.21l-2.59,0Zm4.12-2-.73-2.5a.27.27,0,0,1,0-.2A.21.21,0,0,1,9.41,5L10.19,5a.25.25,0,0,1,.19,0,.23.23,0,0,1,.08.18l-.05,2.61a.2.2,0,0,1-.19.23h0A.22.22,0,0,1,10,7.85Zm8.76,5.58a.25.25,0,0,1,.18.08.23.23,0,0,1,.06.2l-.11.77a.25.25,0,0,1-.11.17.21.21,0,0,1-.12,0l-.08,0L16,14a.25.25,0,0,1-.15-.27.22.22,0,0,1,.22-.21l1.29,0,1.33,0Zm-4.12,2,.74,2.51a.28.28,0,0,1,0,.2.23.23,0,0,1-.18.11l-.8.11a.23.23,0,0,1-.17-.07.25.25,0,0,1-.08-.18l0-2.61a.22.22,0,0,1,.22-.22.21.21,0,0,1,.26.15Z" transform="translate(-4.41 -3.77)"/></g></svg>',math:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M643.015111 128c9.557333 0 18.773333 3.811556 25.486222 10.581333l0.398223 0.398223 88.974222 91.989333a36.010667 36.010667 0 0 1-51.313778 50.460444l-0.455111-0.398222-78.392889-81.009778H167.025778l196.835555 293.432889a36.010667 36.010667 0 0 1 0.227556 39.822222l-0.284445 0.455112-196.892444 290.247111h460.8l78.392889-81.009778a36.010667 36.010667 0 0 1 50.517333-1.251556l0.398222 0.398223c14.165333 13.653333 14.677333 36.181333 1.251556 50.460444l-0.398222 0.455111-88.974222 91.989333a36.010667 36.010667 0 0 1-25.372445 10.979556H98.986667a36.010667 36.010667 0 0 1-30.264889-55.466667l0.512-0.739555 221.297778-326.428445-220.899556-329.329777a36.010667 36.010667 0 0 1 29.013333-56.035556h544.369778z m306.460445 262.542222c13.880889 13.937778 14.051556 36.408889 0.398222 50.517334L878.876444 512l70.542223 70.542222a36.010667 36.010667 0 0 1-50.460445 51.313778l-0.398222-0.398222-70.542222-70.599111-70.542222 70.599111a36.010667 36.010667 0 0 1-51.370667-50.517334L777.102222 512l-70.542222-70.542222a36.010667 36.010667 0 0 1 50.460444-51.313778l70.940445 70.940444 70.542222-70.542222a36.010667 36.010667 0 0 1 50.972445 0z"></path></svg>',table_header:'<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em"><path d="M128 384 64 384 64 320l64 0L128 384zM128 448 64 448l0 64 64 0L128 448zM128 576 64 576l0 64 64 0L128 576zM128 704 64 704l0 64 64 0L128 704zM896 320l-64 0 0 64 64 0L896 320zM896 448l-64 0 0 64 64 0L896 448zM896 576l-64 0 0 64 64 0L896 576zM896 704l-64 0 0 64 64 0L896 704zM512 832 448 832l0 64 64 0L512 832zM128 832 64 832l0 64 64 0L128 832zM896 832l-64 0 0 64 64 0L896 832zM256 832 192 832l0 64 64 0L256 832zM384 832 320 832l0 64 64 0L384 832zM640 832 576 832l0 64 64 0L640 832zM768 832l-64 0 0 64 64 0L768 832zM896 70.016 64 70.016l0 179.968 832 0L896 70.016z"></path></svg>',merge_cell:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox ="0 0 15.76 15.74"><g><path d="M18.92,13.5h1.23v4.15A1.84,1.84,0,0,1,18.3,19.5H14V18.27H18.3a.6.6,0,0,0,.44-.18.59.59,0,0,0,.18-.44V13.5ZM18.3,3.76a1.84,1.84,0,0,1,1.85,1.85V9.82H18.92V5.6a.6.6,0,0,0-.18-.44A.59.59,0,0,0,18.3,5H14V3.76H18.3Zm1.85,8.51H15.6L17.26,14l-.86.86-3.14-3.17L16.4,8.51l.86.86L15.62,11h4.54v1.24Zm-13.9,6h4.27V19.5H6.25A1.84,1.84,0,0,1,4.4,17.65V13.5H5.63v4.15a.61.61,0,0,0,.62.62Zm0-14.51h4.27V5H6.25a.6.6,0,0,0-.44.18.57.57,0,0,0-.17.43V9.81H4.41V5.6A1.83,1.83,0,0,1,6.25,3.76Zm5,7.9L8.15,14.83,7.3,14,9,12.27H4.41V11H8.94L7.3,9.38,7.73,9l.43-.43Z" transform="translate(-4.4 -3.76)"/></g></svg>',split_cell:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox ="0 0 15.75 15.74"><g><path d="M10.37,12.25H6.74L8.4,13.94l-.87.86L4.41,11.63,7.53,8.5l.87.86L6.74,11h3.62v1.23Zm9.78-.61L17,14.81,16.13,14l1.66-1.69H14.16V11h3.63L16.13,9.37l.43-.43A5.24,5.24,0,0,1,17,8.51ZM18.9,8.22V5.61a.57.57,0,0,0-.18-.43A.65.65,0,0,0,18.29,5H12.88V18.28h5.41a.7.7,0,0,0,.44-.18.57.57,0,0,0,.18-.43V15h1.23v2.64a1.84,1.84,0,0,1-1.85,1.83h-12A1.84,1.84,0,0,1,4.94,19a1.81,1.81,0,0,1-.54-1.29V15H5.63v2.64a.57.57,0,0,0,.18.43.67.67,0,0,0,.44.18h5.41V5H6.25a.7.7,0,0,0-.44.18.56.56,0,0,0-.17.43V8.22H4.41V5.61A1.8,1.8,0,0,1,5,4.31a1.91,1.91,0,0,1,1.31-.55h12a1.89,1.89,0,0,1,1.31.55,1.8,1.8,0,0,1,.54,1.3V8.23H18.9Z" transform="translate(-4.4 -3.76)"/></g></svg>',caption:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox ="0 0 15.74 13.79"><g><path d="M4.41,18.52H20.15v-2H4.41ZM20,4.73H18.07V6h.65v.65H20V4.73ZM17,6V4.73H14.55V6H17ZM13.49,6V4.73H11V6h2.47ZM10,6V4.73H7.5V6H10ZM5.79,6h.65V4.73H4.5V6.67H5.8V6ZM4.5,11.34H5.79V8.48H4.5ZM6.44,13.8H5.79v-.65H4.5v1.94H6.44ZM17,15.09V13.8H14.55v1.29H17Zm-3.52,0V13.8H11v1.29h2.47Zm-3.53,0V13.8H7.5v1.29H10ZM20,13.16H18.72v.65h-.65V15.1H20Zm-1.29-1.82H20V8.48h-1.3v2.86Z" transform="translate(-4.41 -4.73)"/></g></svg>',edit:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox ="0 0 15.74 15.73"><g><path d="M7.51,5.68h6l1.52-1.57H6.94a2.4,2.4,0,0,0-1.79.82A2.8,2.8,0,0,0,4.41,6.8V17a2.55,2.55,0,0,0,.75,1.8A2.48,2.48,0,0,0,7,19.5H17.22a2.57,2.57,0,0,0,1.83-.74,2.52,2.52,0,0,0,.77-1.8V8.83l-1.58,1.54v6a1.54,1.54,0,0,1-1.53,1.53H7.51A1.54,1.54,0,0,1,6,16.41V7.21A1.52,1.52,0,0,1,7.51,5.68Zm5.63,7.47h0L10.7,10.74l-1,3.38,1.71-.48,1.7-.49Zm.34-.34h0l5.36-5.32L16.4,5.08,11,10.4l1.23,1.21,1.21,1.2ZM19.93,6.4a.82.82,0,0,0,.22-.48A.54.54,0,0,0,20,5.47L18.45,4A.67.67,0,0,0,18,3.77a.7.7,0,0,0-.48.21l-.74.72,2.44,2.43.37-.37.35-.36Z" transform="translate(-4.41 -3.77)"/></g></svg>',delete:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M999.04 175.936H677.952v-38.016c0-51.2-45.184-101.312-96.384-101.312H442.432c-51.136 0-88.64 50.112-88.64 101.312v38.016h-328.768a23.424 23.424 0 0 0 0 46.848h119.872v610.816c0 89.472 68.864 153.728 158.4 153.728h417.408c89.472 0 166.08-64.256 166.08-153.728V222.784h112.256a23.36 23.36 0 0 0 23.104-23.424 23.296 23.296 0 0 0-23.104-23.424z m-598.336-38.016c0-25.536 16.256-54.464 41.728-54.464h139.136c25.6 0 50.88 28.864 50.88 54.464v38.016h-231.744v-38.016z m440.64 695.68c0 63.872-56.64 106.88-120.576 106.88h-417.408c-63.872 0-111.488-43.008-111.488-106.88V222.784h649.472v610.816z"></path><path d="M515.904 346.624c-12.8 0-22.72 10.368-22.72 23.168v394.176c0 12.864 9.92 23.232 22.72 23.232 12.8 0 22.784-10.368 22.784-23.232V369.792c0-12.8-9.984-23.168-22.784-23.168M330.432 393.024a23.424 23.424 0 0 0-23.488 23.168v301.44a23.424 23.424 0 0 0 46.848 0v-301.44c0-12.8-10.624-23.168-23.36-23.168M655.168 416.192v301.44a23.36 23.36 0 0 0 46.848 0v-301.44a23.424 23.424 0 0 0-46.848 0"></path></svg>',modify:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox ="0 0 15.7 15.74"><g><path d="M19.79,15.23a.66.66,0,0,1,.3.38.59.59,0,0,1-.07.48l-.8,1.38a.66.66,0,0,1-.38.3.59.59,0,0,1-.48-.07l-.68-.38a4.55,4.55,0,0,1-1.34.77v.78a.64.64,0,0,1-.18.45.61.61,0,0,1-.45.18h-1.6a.6.6,0,0,1-.44-.18.66.66,0,0,1-.19-.45v-.78a4.36,4.36,0,0,1-1.32-.77l-.69.38a.58.58,0,0,1-.48.07.66.66,0,0,1-.38-.3l-.38-.66h.83a1.77,1.77,0,0,0,1.23-.52,1.72,1.72,0,0,0,.51-1.23v-.18a3,3,0,0,0,.49-.28l.15.09a1.83,1.83,0,0,0,.88.23A1.75,1.75,0,0,0,15.84,14l.88-1.52a1.7,1.7,0,0,0,.17-1.32,1.66,1.66,0,0,0-.3-.61,1.84,1.84,0,0,0-.51-.45l-.15-.09,0-.29,0-.28.15-.09a1,1,0,0,0,.26-.18l0,.06v.78a4.34,4.34,0,0,1,1.34.77l.68-.38a.68.68,0,0,1,.48-.06.64.64,0,0,1,.38.29l.8,1.38a.58.58,0,0,1,.07.48.63.63,0,0,1-.3.38l-.68.4a3.84,3.84,0,0,1,.08.76,4.13,4.13,0,0,1-.08.78l.34.18.32.2ZM10.17,7.86a1.9,1.9,0,0,1,1.35,3.23,1.85,1.85,0,0,1-1.35.55A1.9,1.9,0,0,1,8.83,8.41a1.92,1.92,0,0,1,1.34-.55Zm1.58,7.2a.73.73,0,0,1-.21.49.66.66,0,0,1-.48.2H9.29a.68.68,0,0,1-.69-.69V14.2a4.75,4.75,0,0,1-1.48-.86l-.75.45a.73.73,0,0,1-.7,0,.63.63,0,0,1-.25-.26L4.54,12a.67.67,0,0,1-.08-.53.71.71,0,0,1,.32-.42l.75-.43a4.8,4.8,0,0,1-.08-.85,4.71,4.71,0,0,1,.08-.85l-.74-.44a.71.71,0,0,1-.32-.42.65.65,0,0,1,.07-.54L5.42,6a.66.66,0,0,1,.42-.32l.18,0a.73.73,0,0,1,.35.09l.75.43A4.68,4.68,0,0,1,8.6,5.33V4.45a.68.68,0,0,1,.69-.69h1.77a.64.64,0,0,1,.48.2.73.73,0,0,1,.21.49v.88a4.75,4.75,0,0,1,1.48.85L14,5.75a.67.67,0,0,1,.34-.09l.18,0a.71.71,0,0,1,.42.32l.89,1.54a.67.67,0,0,1,.06.52.73.73,0,0,1-.32.43l-.75.42a4.8,4.8,0,0,1,.08.85,4.71,4.71,0,0,1-.08.85l.75.43a.66.66,0,0,1,.32.42.73.73,0,0,1-.06.54l-.89,1.52a.69.69,0,0,1-.25.26.7.7,0,0,1-.35.09.64.64,0,0,1-.34-.09l-.75-.45a4.87,4.87,0,0,1-1.48.86v.87ZM7.23,9.75a3,3,0,0,0,.86,2.08,2.94,2.94,0,1,0,4.16-4.16,3,3,0,0,0-2.08-.85A2.94,2.94,0,0,0,7.23,9.75Z" transform="translate(-4.44 -3.76)"/></g></svg>',revert:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox ="0 0 15.76 14.69"><g><path d="M18.26,15V12.3l1.89-2V15a2.58,2.58,0,0,1-.24,1c-.2.58-.75.92-1.65,1H7.56v2L4.41,15.63,7.56,13v2h10.7ZM6.3,8.28V11L4.41,13V8.28a2.58,2.58,0,0,1,.24-1c.2-.58.75-.92,1.65-1H17v-2l3.15,3.34L17,10.3v-2H6.3Z" transform="translate(-4.4 -4.28)"/></g></svg>',auto_size:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox ="0 0 15.74 15.74"><g><path d="M6.71,17.19,6.89,16l1.21-.15A6,6,0,0,1,6.81,13.9a5.78,5.78,0,0,1-.45-2.27A6,6,0,0,1,8.1,7.45a5.83,5.83,0,0,1,4.17-1.73l1-1-1-1A7.89,7.89,0,0,0,5,14.64a7.73,7.73,0,0,0,1.71,2.55Zm5.57,2.31h0A7.86,7.86,0,0,0,17.85,6.07L17.67,7.3l-1.21.15a5.9,5.9,0,0,1,1.29,1.92,5.81,5.81,0,0,1,.45,2.26,5.91,5.91,0,0,1-5.9,5.9l-1,1,.49.49.47.5Z" transform="translate(-4.41 -3.76)"/></g></svg>',insert_row_below:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M938.666667 426.666667C938.666667 473.6 900.266667 512 853.333333 512L170.666667 512C123.733333 512 85.333333 473.6 85.333333 426.666667L85.333333 128 170.666667 128 170.666667 213.333333 341.333333 213.333333 341.333333 128 426.666667 128 426.666667 213.333333 597.333333 213.333333 597.333333 128 682.666667 128 682.666667 213.333333 853.333333 213.333333 853.333333 128 938.666667 128 938.666667 426.666667M170.666667 426.666667 341.333333 426.666667 341.333333 298.666667 170.666667 298.666667 170.666667 426.666667M426.666667 426.666667 597.333333 426.666667 597.333333 298.666667 426.666667 298.666667 426.666667 426.666667M853.333333 426.666667 853.333333 298.666667 682.666667 298.666667 682.666667 426.666667 853.333333 426.666667M469.333333 597.333333 554.666667 597.333333 554.666667 725.333333 682.666667 725.333333 682.666667 810.666667 554.666667 810.666667 554.666667 938.666667 469.333333 938.666667 469.333333 810.666667 341.333333 810.666667 341.333333 725.333333 469.333333 725.333333 469.333333 597.333333Z"></path></svg>',insert_row_above:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M938.666667 597.333333C938.666667 550.4 900.266667 512 853.333333 512L170.666667 512C123.733333 512 85.333333 550.4 85.333333 597.333333L85.333333 896 170.666667 896 170.666667 810.666667 341.333333 810.666667 341.333333 896 426.666667 896 426.666667 810.666667 597.333333 810.666667 597.333333 896 682.666667 896 682.666667 810.666667 853.333333 810.666667 853.333333 896 938.666667 896 938.666667 597.333333M170.666667 597.333333 341.333333 597.333333 341.333333 725.333333 170.666667 725.333333 170.666667 597.333333M426.666667 597.333333 597.333333 597.333333 597.333333 725.333333 426.666667 725.333333 426.666667 597.333333M853.333333 597.333333 853.333333 725.333333 682.666667 725.333333 682.666667 597.333333 853.333333 597.333333M469.333333 426.666667 554.666667 426.666667 554.666667 298.666667 682.666667 298.666667 682.666667 213.333333 554.666667 213.333333 554.666667 85.333333 469.333333 85.333333 469.333333 213.333333 341.333333 213.333333 341.333333 298.666667 469.333333 298.666667 469.333333 426.666667Z"></path></svg>',insert_column_left:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M554.666667 85.333333C507.733333 85.333333 469.333333 123.733333 469.333333 170.666667L469.333333 853.333333C469.333333 900.266667 507.733333 938.666667 554.666667 938.666667L938.666667 938.666667 938.666667 85.333333 554.666667 85.333333M853.333333 426.666667 853.333333 597.333333 554.666667 597.333333 554.666667 426.666667 853.333333 426.666667M853.333333 682.666667 853.333333 853.333333 554.666667 853.333333 554.666667 682.666667 853.333333 682.666667M853.333333 170.666667 853.333333 341.333333 554.666667 341.333333 554.666667 170.666667 853.333333 170.666667M384 469.333333 256 469.333333 256 341.333333 170.666667 341.333333 170.666667 469.333333 42.666667 469.333333 42.666667 554.666667 170.666667 554.666667 170.666667 682.666667 256 682.666667 256 554.666667 384 554.666667 384 469.333333Z"></path></svg>',insert_column_right:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M469.333333 85.333333C516.266667 85.333333 554.666667 123.733333 554.666667 170.666667L554.666667 853.333333C554.666667 900.266667 516.266667 938.666667 469.333333 938.666667L85.333333 938.666667 85.333333 85.333333 469.333333 85.333333M170.666667 426.666667 170.666667 597.333333 469.333333 597.333333 469.333333 426.666667 170.666667 426.666667M170.666667 682.666667 170.666667 853.333333 469.333333 853.333333 469.333333 682.666667 170.666667 682.666667M170.666667 170.666667 170.666667 341.333333 469.333333 341.333333 469.333333 170.666667 170.666667 170.666667M640 469.333333 768 469.333333 768 341.333333 853.333333 341.333333 853.333333 469.333333 981.333333 469.333333 981.333333 554.666667 853.333333 554.666667 853.333333 682.666667 768 682.666667 768 554.666667 640 554.666667 640 469.333333Z"></path></svg>',delete_row:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024" ><path d="M401.493333 554.666667 512 665.173333 622.506667 554.666667 682.666667 614.826667 572.16 725.333333 682.666667 835.84 622.506667 896 512 785.493333 401.493333 896 341.333333 835.84 451.84 725.333333 341.333333 614.826667 401.493333 554.666667M938.666667 384C938.666667 430.933333 900.266667 469.333333 853.333333 469.333333L170.666667 469.333333C123.733333 469.333333 85.333333 430.933333 85.333333 384L85.333333 256C85.333333 209.066667 123.733333 170.666667 170.666667 170.666667L853.333333 170.666667C900.266667 170.666667 938.666667 209.066667 938.666667 256L938.666667 384M170.666667 384 341.333333 384 341.333333 256 170.666667 256 170.666667 384M426.666667 384 597.333333 384 597.333333 256 426.666667 256 426.666667 384M682.666667 384 853.333333 384 853.333333 256 682.666667 256 682.666667 384Z"></path></svg>',delete_column:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M170.666667 85.333333 469.333333 85.333333C516.266667 85.333333 554.666667 123.733333 554.666667 170.666667L554.666667 853.333333C554.666667 900.266667 516.266667 938.666667 469.333333 938.666667L170.666667 938.666667C123.733333 938.666667 85.333333 900.266667 85.333333 853.333333L85.333333 170.666667C85.333333 123.733333 123.733333 85.333333 170.666667 85.333333M170.666667 426.666667 170.666667 597.333333 469.333333 597.333333 469.333333 426.666667 170.666667 426.666667M170.666667 682.666667 170.666667 853.333333 469.333333 853.333333 469.333333 682.666667 170.666667 682.666667M170.666667 170.666667 170.666667 341.333333 469.333333 341.333333 469.333333 170.666667 170.666667 170.666667M750.506667 512 640 401.493333 700.16 341.333333 810.666667 451.84 921.173333 341.333333 981.333333 401.493333 870.826667 512 981.333333 622.506667 921.173333 682.666667 810.666667 572.16 700.16 682.666667 640 622.506667 750.506667 512Z"></path></svg>',fixed_column_width:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 1024 1024"><path d="M134.258 129.707H65.99c-5.006 0-9.102 4.096-9.102 9.102V885.19c0 5.006 4.096 9.102 9.102 9.102h68.267c5.006 0 9.102-4.096 9.102-9.102V138.81c0-5.006-4.096-9.102-9.102-9.102z m823.75 0h-68.266c-5.006 0-9.102 4.096-9.102 9.102V885.19c0 5.006 4.096 9.102 9.102 9.102h68.267c5.006 0 9.102-4.096 9.102-9.102V138.81c0-5.006-4.096-9.102-9.102-9.102zM822.956 503.239l-145.18-114.574c-5.348-4.21-13.313-0.455-13.313 6.485v75.89H359.538v-71.452c0-6.827-7.965-10.696-13.312-6.486L201.046 507.79c-4.21 3.3-4.21 9.671 0 12.857l145.066 114.688c5.348 4.21 13.312 0.455 13.312-6.485v-75.89h304.924v71.452c0 6.827 7.965 10.696 13.312 6.486L822.727 516.21c4.324-3.3 4.324-9.671 0.228-12.97z"></path></svg>',rotate_left:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox ="0 0 15.8 15.8"><g><path d="M0.5,10.2c0,0.1,0,0.2,0,0.3v0.2l0,0c0.1,0.3,0.3,0.6,0.4,0.9l0,0C1,11.8,1.3,12,1.5,11.9h0.1h0.2h0.1c0.1-0.1,0.3-0.3,0.4-0.5v-0.2c0-0.1,0-0.2-0.1-0.3l0,0c-0.2-0.2-0.3-0.4-0.3-0.7l0,0C1.8,10,1.7,9.9,1.5,9.8c-0.1,0-0.2,0-0.3,0H0.9C0.7,9.9,0.6,10,0.5,10.2L0.5,10.2z"/><path d="M2.2,11.5L2.2,11.5L2.2,11.5z"/><path d="M5.9,3.6L5.9,3.6L5.9,3.6z"/><path d="M0.1,7.9c0,0.3,0,0.6,0,0.9l0,0l0,0l0,0l0,0c0,0.2,0.1,0.3,0.2,0.4l0,0c0.2,0.1,0.3,0.2,0.5,0.2l0,0l0,0c0.2,0,0.4-0.1,0.5-0.3l0,0c0-0.1,0.1-0.3,0.1-0.4V8.6l0,0c0-0.2,0-0.5,0-0.7l0,0c0-0.2-0.1-0.4-0.2-0.5C1.1,7.3,0.9,7.2,0.7,7.2S0.3,7.3,0.2,7.4C0.1,7.5,0,7.7,0.1,7.9z"/><path d="M1.9,12.7L1.9,12.7c0,0.2,0,0.4,0.2,0.5l0,0l0.2,0.3l0,0c0.2,0.1,0.3,0.2,0.5,0.4l0,0l0,0l0,0l0,0C2.9,14,3,14.1,3.2,14.1s0.4-0.1,0.5-0.2c0.1-0.2,0.2-0.3,0.2-0.5v-0.1c0-0.2-0.1-0.4-0.2-0.5l0,0l-0.4-0.4l-0.2-0.2l0,0C3,12.1,2.8,12,2.6,12l0,0c-0.2,0-0.4,0.1-0.5,0.2l0,0C2,12.3,1.9,12.5,1.9,12.7z"/><path d="M6.6,15c0,0.2,0.1,0.4,0.2,0.5c0.1,0.1,0.2,0.2,0.4,0.3l0,0c0.3,0,0.5,0,0.7,0h0.3l0,0c0.2,0,0.4-0.1,0.5-0.2c0.1-0.2,0.2-0.3,0.2-0.5l0,0l0,0c0-0.2-0.1-0.4-0.2-0.5l0,0c-0.1-0.1-0.3-0.2-0.5-0.2l0,0H7.9c-0.1,0-0.3,0-0.5,0l0,0H7.3c-0.2-0.1-0.3,0-0.5,0.1l0,0C6.7,14.6,6.6,14.8,6.6,15L6.6,15L6.6,15L6.6,15z"/><path d="M4.2,7.4C4,7.5,4,7.7,4,7.9c0,0.2,0,0.4,0.2,0.5l0,0l3.2,3.2l0,0c0.1,0.1,0.3,0.2,0.5,0.2s0.3-0.1,0.5-0.2l0,0l3.2-3.2l0,0c0.1-0.1,0.2-0.3,0.2-0.5c0-0.2-0.1-0.4-0.2-0.5l0,0C11.5,7.3,11,6.7,10,5.8l0,0L8.4,4.2l0,0C8.3,4.1,8.1,4,7.9,4S7.5,4.1,7.4,4.2L4.2,7.4L4.2,7.4z M6.8,9L5.7,7.9l2.2-2.2l2.3,2.2l-2.3,2.2C7.7,9.9,7.3,9.5,6.8,9L6.8,9z"/><path d="M4.1,14.1C4,14.2,4,14.3,4,14.4v0.2l0,0c0.1,0.1,0.2,0.3,0.4,0.4l0,0c0.3,0.1,0.6,0.2,0.9,0.4h0.1h0.1l0,0c0.2,0,0.3-0.1,0.5-0.1l0,0c0.2-0.1,0.3-0.3,0.3-0.4l0,0l0,0l0,0l0,0v-0.2c0-0.1-0.1-0.2-0.1-0.3l0,0C6.1,14.2,6,14.1,5.8,14l0,0c-0.3-0.1-0.5-0.2-0.8-0.2l0,0c-0.1-0.1-0.2-0.1-0.3-0.1H4.5C4.3,13.7,4.2,13.9,4.1,14.1z"/><path d="M9.3,14.4c0,0.1-0.1,0.3,0,0.4V15l0,0c0,0.1,0.1,0.3,0.5,0.4c0.1,0.1,0.3,0.1,0.4,0.1l0,0h0.1l0,0c0.3-0.1,0.6-0.2,0.9-0.3l0,0c0.1-0.1,0.2-0.2,0.3-0.4l0.1-0.3c0-0.1-0.1-0.2-0.1-0.3l0,0c-0.1-0.2-0.2-0.3-0.4-0.4l0,0h-0.3c-0.1,0-0.2,0-0.3,0l0,0c-0.2,0.1-0.5,0.2-0.8,0.3l0,0C9.5,14.1,9.4,14.2,9.3,14.4L9.3,14.4z"/><path d="M11.4,14.7L11.4,14.7L11.4,14.7z"/><path d="M9.5,15.3L9.5,15.3L9.5,15.3z"/><path d="M15.9,7.9c0-1-0.2-2-0.6-3l0,0c-0.4-1-1-1.9-1.7-2.6C12.8,1.6,12,1,11,0.6l0,0C10.1,0.2,9,0,8,0C7.3,0,6.5,0.1,5.8,0.3l0,0C5.2,0.5,4.6,0.8,4,1.1L3.1,0.2l0,0C2.9,0.1,2.8,0,2.6,0H2.4l0,0C2.2,0,2,0.2,1.9,0.4l0,0L0.1,4.9l0,0C0,5,0,5.1,0,5.2c0,0.2,0.1,0.4,0.2,0.5l0,0c0.2,0.1,0.3,0.2,0.5,0.2h0.1H1l0,0l4.7-1.8l0,0C5.9,4,6.1,3.8,6.1,3.6V3.4C6.1,3.2,6,3,5.9,2.9l0,0L5.1,2.1c0.4-0.2,0.8-0.4,1.3-0.5c0.5-0.1,1.1-0.2,1.7-0.2c0.9,0,1.7,0.2,2.5,0.5l0,0c0.8,0.3,1.5,0.8,2.1,1.4c0.6,0.6,1.1,1.3,1.4,2.1l0,0c0.3,0.8,0.5,1.6,0.5,2.5s-0.2,1.7-0.5,2.5l0,0c-0.3,0.8-0.8,1.5-1.4,2.1c-0.2,0.2-0.4,0.3-0.6,0.5l0,0c-0.2,0.1-0.3,0.3-0.3,0.5v0.1c0,0.1,0,0.3,0.1,0.4l0,0c0.1,0.2,0.3,0.3,0.5,0.3l0,0c0.1,0,0.3-0.1,0.4-0.2l0,0l0,0l0,0l0,0c0.2-0.2,0.5-0.4,0.7-0.6l0,0l0,0l0,0l0,0c0.7-0.8,1.3-1.6,1.7-2.6C15.6,10,15.8,9,15.9,7.9z M1.9,4C2,3.8,2.1,3.5,2.3,3.1l0,0L2.7,2l1.2,1.2L1.9,4z"/><path d="M6.8,15.5L6.8,15.5L6.8,15.5z"/></g></svg>',rotate_right:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox ="0 0 15.8 15.8"><g><path d="M9.9,15.3L9.9,15.3L9.9,15.3z"/><path d="M6.9,15.1L6.9,15.1c0,0.1,0.1,0.3,0.2,0.4l0,0c0.1,0.2,0.3,0.3,0.5,0.3l0,0h0.3c0.2,0,0.4,0,0.7,0l0,0c0.2-0.1,0.3-0.2,0.4-0.3c0.1-0.1,0.2-0.2,0.2-0.4V15c0-0.2-0.1-0.4-0.2-0.4c-0.2-0.1-0.3-0.2-0.5-0.2H8.4l0,0c-0.1,0-0.3,0-0.5,0H7.6l0,0c-0.2,0-0.4,0.1-0.5,0.2C7,14.7,6.9,14.9,6.9,15.1z"/><path d="M6.5,14.4L6.5,14.4L6.5,14.4z"/><path d="M5.8,5.8L5.8,5.8c-1,0.9-1.5,1.5-1.7,1.6l0,0C4,7.5,4,7.7,4,7.9c0,0.2,0,0.4,0.2,0.5l0,0l3.2,3.2l0,0c0.2,0.1,0.3,0.2,0.5,0.2s0.4-0.1,0.5-0.2l0,0l3.2-3.2l0,0c0.1-0.1,0.2-0.3,0.2-0.5c0-0.2-0.1-0.4-0.2-0.5l0,0L8.4,4.2C8.3,4.1,8.1,4,7.9,4C7.7,4,7.5,4.1,7.4,4.2l0,0L5.8,5.8z M5.6,7.9l2.3-2.2l2.2,2.2L9,9l0,0l0,0l0,0l0,0c-0.5,0.6-0.9,0.9-1.1,1.1L5.6,7.9z"/><path d="M9,15.5L9,15.5L9,15.5z"/><path d="M9.6,14.7v0.2l0,0l0,0l0,0l0,0c0.1,0.2,0.1,0.3,0.3,0.3c0.1,0.1,0.3,0.1,0.4,0.1l0,0h0.1h0.1c0.3-0.1,0.6-0.3,0.9-0.4l0,0c0.1-0.1,0.2-0.2,0.3-0.4l0,0v-0.2c0-0.1,0-0.2-0.1-0.3c-0.1-0.2-0.2-0.3-0.4-0.4H11c-0.1,0-0.2,0.1-0.3,0.1l0,0c-0.2,0.1-0.4,0.2-0.7,0.3l0,0l0,0c-0.1,0.1-0.3,0.2-0.4,0.4C9.6,14.5,9.6,14.6,9.6,14.7z"/><path d="M9,14.5L9,14.5L9,14.5z"/><path d="M9.6,14.4L9.6,14.4L9.6,14.4z"/><path d="M11.7,14L11.7,14L11.7,14z"/><path d="M15.6,7.4L15.6,7.4L15.6,7.4z"/><path d="M15,9.4c0.2,0,0.4,0,0.6-0.2l0,0c0.1-0.1,0.2-0.2,0.2-0.4l0,0l0,0l0,0l0,0c0-0.3,0-0.6,0-0.9c0-0.2-0.1-0.4-0.2-0.5c-0.1-0.1-0.3-0.2-0.5-0.2s-0.4,0.1-0.5,0.2c-0.1,0.1-0.2,0.3-0.2,0.5l0,0c0,0.2,0,0.4,0,0.7l0,0v0.1c0,0.1,0,0.3,0.1,0.4l0,0C14.6,9.3,14.8,9.4,15,9.4L15,9.4L15,9.4z"/><path d="M14,12h0.1h0.2h0.1c0.2,0,0.5-0.2,0.6-0.4l0,0c0.2-0.3,0.3-0.6,0.4-0.9l0,0v-0.2c0-0.1-0.1-0.2-0.1-0.3c-0.1-0.2-0.2-0.3-0.4-0.4h-0.3c-0.1,0-0.2,0-0.3,0C14.2,9.9,14,10,14,10.3l0,0c-0.1,0.2-0.2,0.5-0.3,0.7l0,0c-0.1,0.1-0.1,0.2-0.1,0.3v0.2l0,0l0,0C13.6,11.6,13.8,11.8,14,12z"/><path d="M14.6,7.4L14.6,7.4L14.6,7.4z"/><path d="M4.4,14.2c-0.1,0.1-0.1,0.2-0.1,0.3l0.1,0.2c0,0.2,0.2,0.3,0.3,0.4l0,0c0.3,0.1,0.6,0.3,1.1,0.4l0,0h0.1l0,0c0.1,0,0.2-0.1,0.4-0.2c0.1,0,0.2-0.2,0.3-0.3l0,0v-0.2c0-0.1-0.1-0.3-0.2-0.4c-0.1-0.1-0.2-0.2-0.4-0.3l0,0c-0.2-0.1-0.5-0.2-0.7-0.3l0,0c-0.1,0-0.2,0-0.3,0H4.7l0,0C4.6,13.9,4.4,14,4.4,14.2L4.4,14.2z"/><path d="M11.9,13.3c0,0.2,0.1,0.4,0.2,0.6c0.1,0.1,0.3,0.2,0.5,0.2s0.4-0.1,0.5-0.2l0,0l0,0l0,0l0,0c0.1-0.1,0.3-0.3,0.4-0.4l0,0l0.2-0.3l0,0c0.1-0.2,0.2-0.3,0.2-0.5l0,0c0-0.2-0.1-0.4-0.2-0.5l0,0c-0.1-0.1-0.3-0.2-0.5-0.2l0,0c-0.2,0-0.4,0.1-0.5,0.2l0,0l-0.2,0.2l-0.4,0.4l0,0C12,13,11.9,13.1,11.9,13.3L11.9,13.3z"/><path d="M12.1,13.8L12.1,13.8L12.1,13.8z"/><path d="M11.9,13.3L11.9,13.3L11.9,13.3z"/><path d="M15.9,5.2c0-0.1-0.1-0.2-0.1-0.3l0,0L14,0.4l0,0C13.9,0.2,13.7,0,13.5,0l0,0l0,0h-0.2c-0.2,0-0.4,0.1-0.5,0.2l0,0l-0.9,0.9c-0.5-0.3-1.1-0.6-1.8-0.8l0,0C9.4,0.1,8.7,0,7.9,0c-1,0-2,0.2-3,0.6S3,1.6,2.3,2.3C1.6,3.1,1,3.9,0.6,4.9l0,0C0.2,5.8,0,6.8,0,7.9c0,1,0.2,2,0.6,3s0.9,1.8,1.7,2.6l0,0l0,0l0,0l0,0c0.2,0.2,0.5,0.4,0.7,0.6l0,0l0,0l0,0l0,0c0.2,0.1,0.3,0.2,0.5,0.2l0,0c0.2,0,0.4-0.1,0.6-0.3l0,0c0.1-0.1,0.1-0.3,0.1-0.4v-0.1l0,0C4.1,13.3,4,13.1,3.9,13l0,0c-0.2-0.1-0.4-0.3-0.6-0.5c-0.6-0.6-1.1-1.3-1.4-2.1l0,0C1.6,9.6,1.4,8.8,1.4,7.9s0.2-1.7,0.5-2.5l0,0c0.3-0.8,0.8-1.5,1.4-2.1c0.6-0.6,1.3-1.1,2.1-1.4l0,0C6.2,1.6,7,1.4,7.9,1.4c0.6,0,1.1,0.1,1.7,0.2c0.5,0.1,0.9,0.3,1.3,0.5l-0.8,0.8l0,0C10,3.1,9.9,3.2,9.9,3.4v0.2l0,0l0,0c0,0.2,0.2,0.4,0.4,0.5l0,0l4.5,1.8l0,0H15h0.1c0.2,0,0.4-0.1,0.5-0.2l0,0C15.7,5.6,15.8,5.4,15.9,5.2z M11.8,3.2L13,2l0.4,1.1l0,0c0.2,0.4,0.3,0.7,0.4,0.9L11.8,3.2z"/></g></svg>',mirror_horizontal:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox ="0 0 14.75 15.74"><g><path d="M13.75,3.76l5.9,15.74h-5.9V3.76ZM4.9,19.5,10.8,3.76V19.5H4.9Z" transform="translate(-4.9 -3.76)"/></g></svg>',mirror_vertical:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox ="0 0 15.74 14.75"><g><path d="M20.15,13.1,4.41,19V13.1H20.15ZM4.41,4.25l15.74,5.9H4.41V4.25Z" transform="translate(-4.41 -4.25)"/></g></svg>',checked:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox ="0 0 15.75 12.1"><g><path d="M4.59,12.23l.12.18L9.43,17.5a.58.58,0,0,0,.84,0L20,7.45h0a.58.58,0,0,0,0-.84l-.85-.85a.58.58,0,0,0-.84,0H18.2l-8.12,8.41a.29.29,0,0,1-.42,0l-3.4-3.63a.58.58,0,0,0-.84,0l-.85.85a.6.6,0,0,0-.14.21.51.51,0,0,0,0,.44c.05.06.1.13.16.19Z" transform="translate(-4.38 -5.58)"/></g></svg>',line_break:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox ="0 0 24 24"><path d="M19,6a1,1,0,0,0-1,1v4a1,1,0,0,1-1,1H7.41l1.3-1.29A1,1,0,0,0,7.29,9.29l-3,3a1,1,0,0,0-.21.33,1,1,0,0,0,0,.76,1,1,0,0,0,.21.33l3,3a1,1,0,0,0,1.42,0,1,1,0,0,0,0-1.42L7.41,14H17a3,3,0,0,0,3-3V7A1,1,0,0,0,19,6Z"/></svg>',image_gallery:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox ="30 30 150 150"><g><path d="M152.775,120.548V51.651c0-12.271-9.984-22.254-22.254-22.254H43.727c-12.271,0-22.254,9.983-22.254,22.254v68.896c0,12.27,9.983,22.254,22.254,22.254h86.795C142.791,142.802,152.775,132.817,152.775,120.548z M36.394,51.651c0-4.042,3.291-7.333,7.333-7.333h86.795c4.042,0,7.332,3.291,7.332,7.333v23.917l-14.938-17.767c-1.41-1.678-3.487-2.649-5.68-2.658h-0.029c-2.184,0-4.255,0.954-5.674,2.613L76.709,98.519l-9.096-9.398c-1.427-1.474-3.392-2.291-5.448-2.273c-2.052,0.025-4.004,0.893-5.396,2.4L36.394,111.32V51.651z M41.684,127.585l20.697-22.416l9.312,9.622c1.461,1.511,3.489,2.334,5.592,2.27c2.101-0.066,4.075-1.013,5.44-2.612l34.436-40.308l20.693,24.613v21.794c0,4.042-3.29,7.332-7.332,7.332H43.727C43.018,127.88,42.334,127.775,41.684,127.585z M182.616,152.5V75.657c0-4.12-3.34-7.46-7.461-7.46c-4.119,0-7.46,3.34-7.46,7.46V152.5c0,4.112-3.347,7.46-7.461,7.46h-94c-4.119,0-7.46,3.339-7.46,7.459c0,4.123,3.341,7.462,7.46,7.462h94C172.576,174.881,182.616,164.841,182.616,152.5z"/></g></svg>',bookmark:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17,3H7A2,2 0 0,0 5,5V21L12,18L19,21V5C19,3.89 18.1,3 17,3Z" /></svg>',download:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2 12H4V17H20V12H22V17C22 18.11 21.11 19 20 19H4C2.9 19 2 18.11 2 17V12M12 15L17.55 9.54L16.13 8.13L13 11.25V2H11V11.25L7.88 8.13L6.46 9.55L12 15Z" /></svg>',more_text:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox ="10 10 180 180"><g><path d="M49.711,142.188h49.027c2.328,0.002,4.394,1.492,5.129,3.699l9.742,29.252c0.363,1.092,1.385,1.828,2.537,1.83l15.883,0.01c0.859,0,1.667-0.412,2.17-1.109s0.641-1.594,0.37-2.41l-16.625-50.045L86.503,28.953c-0.36-1.097-1.383-1.839-2.537-1.842H64.532c-1.153-0.001-2.178,0.736-2.542,1.831L13.847,173.457c-0.271,0.816-0.135,1.713,0.369,2.412c0.503,0.697,1.311,1.109,2.171,1.109h15.872c1.151,0,2.173-0.736,2.537-1.828l9.793-29.287C45.325,143.66,47.39,142.18,49.711,142.188L49.711,142.188z M53.493,119.098l15.607-46.9c0.744-2.196,2.806-3.674,5.125-3.674s4.381,1.478,5.125,3.674l15.607,46.904c0.537,1.621,0.263,3.402-0.736,4.789c-1.018,1.408-2.649,2.24-4.386,2.24H58.615c-1.736,0-3.368-0.832-4.386-2.24C53.23,122.504,52.956,120.721,53.493,119.098L53.493,119.098z M190.465,63.32c0-2.919-1.015-5.396-3.059-7.428c-2.029-2.031-4.496-3.047-7.383-3.047c-2.889,0-5.355,1.016-7.388,3.047c-2.029,2.032-3.056,4.498-3.056,7.386c0,2.889,1.026,5.354,3.056,7.385c2.032,2.032,4.499,3.059,7.388,3.059c2.887,0,5.354-1.026,7.383-3.059C189.45,68.633,190.465,66.178,190.465,63.32L190.465,63.32z M190.465,101.994c0-2.858-1.015-5.313-3.059-7.333c-2.029-2.042-4.496-3.047-7.383-3.047c-2.889,0-5.355,1.005-7.388,3.047c-2.029,2.021-3.056,4.486-3.056,7.376c0,2.887,1.026,5.352,3.056,7.395c2.032,2.021,4.499,3.047,7.388,3.047c2.887,0,5.354-1.025,7.383-3.047C189.45,107.389,190.465,104.914,190.465,101.994L190.465,101.994z M190.465,140.76c0-2.918-1.015-5.395-3.059-7.438c-2.029-2.041-4.496-3.047-7.383-3.047c-2.889,0-5.355,1.006-7.388,3.047c-2.029,2.043-3.056,4.52-3.056,7.438c0,2.922,1.026,5.398,3.056,7.439c2.032,2.021,4.499,3.047,7.388,3.047c2.887,0,5.354-1.025,7.383-3.047C189.45,146.158,190.465,143.682,190.465,140.76L190.465,140.76z"/></g></svg>',more_paragraph:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox ="10 10 180 180"><g><path d="M128.39,28.499H63.493c-25.558,0-46.354,20.796-46.354,46.354c0,25.559,20.796,46.353,46.354,46.353h9.271v55.625h18.542V47.04h9.271V176.83h18.543V47.04h9.271V28.499z M72.764,102.664h-9.271c-15.337,0-27.813-12.475-27.813-27.812c0-15.336,12.476-27.813,27.813-27.813h9.271V102.664z M190.465,63.32c0-2.919-1.015-5.396-3.059-7.428c-2.029-2.031-4.496-3.047-7.383-3.047c-2.889,0-5.355,1.016-7.388,3.047c-2.029,2.032-3.056,4.498-3.056,7.386c0,2.889,1.026,5.354,3.056,7.385c2.032,2.032,4.499,3.059,7.388,3.059c2.887,0,5.354-1.026,7.383-3.059C189.45,68.633,190.465,66.178,190.465,63.32L190.465,63.32z M190.465,101.994c0-2.858-1.015-5.313-3.059-7.333c-2.029-2.042-4.496-3.047-7.383-3.047c-2.889,0-5.355,1.005-7.388,3.047c-2.029,2.021-3.056,4.486-3.056,7.376c0,2.887,1.026,5.352,3.056,7.395c2.032,2.021,4.499,3.047,7.388,3.047c2.887,0,5.354-1.025,7.383-3.047C189.45,107.389,190.465,104.914,190.465,101.994L190.465,101.994z M190.465,140.76c0-2.918-1.015-5.395-3.059-7.438c-2.029-2.041-4.496-3.047-7.383-3.047c-2.889,0-5.355,1.006-7.388,3.047c-2.029,2.043-3.056,4.52-3.056,7.438c0,2.922,1.026,5.398,3.056,7.439c2.032,2.021,4.499,3.047,7.388,3.047c2.887,0,5.354-1.025,7.383-3.047C189.45,146.158,190.465,143.682,190.465,140.76L190.465,140.76z"/></g></svg>',more_plus:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox ="35 30 140 140"><g><path d="M137.215,102.045c0,3.498-2.835,6.332-6.333,6.332H24.549c-3.498,0-6.334-2.834-6.334-6.332l0,0c0-3.498,2.836-6.333,6.334-6.333h106.333C134.38,95.711,137.215,98.547,137.215,102.045L137.215,102.045z M77.715,161.545c-3.498,0-6.333-2.836-6.333-6.334V48.878c0-3.498,2.836-6.333,6.333-6.333l0,0c3.498,0,6.334,2.835,6.334,6.333v106.333C84.049,158.709,81.213,161.545,77.715,161.545L77.715,161.545z M190.465,63.32c0-2.919-1.015-5.396-3.059-7.428c-2.029-2.031-4.496-3.047-7.383-3.047c-2.889,0-5.355,1.016-7.388,3.047c-2.029,2.032-3.056,4.498-3.056,7.386c0,2.889,1.026,5.354,3.056,7.385c2.032,2.032,4.499,3.059,7.388,3.059c2.887,0,5.354-1.026,7.383-3.059C189.45,68.632,190.465,66.177,190.465,63.32L190.465,63.32z M190.465,101.993c0-2.858-1.015-5.313-3.059-7.333c-2.029-2.042-4.496-3.047-7.383-3.047c-2.889,0-5.355,1.005-7.388,3.047c-2.029,2.021-3.056,4.486-3.056,7.376c0,2.888,1.026,5.353,3.056,7.396c2.032,2.021,4.499,3.047,7.388,3.047c2.887,0,5.354-1.025,7.383-3.047C189.45,107.389,190.465,104.914,190.465,101.993L190.465,101.993z M190.465,140.76c0-2.918-1.015-5.395-3.059-7.438c-2.029-2.041-4.496-3.047-7.383-3.047c-2.889,0-5.355,1.006-7.388,3.047c-2.029,2.043-3.056,4.52-3.056,7.438c0,2.922,1.026,5.398,3.056,7.439c2.032,2.021,4.499,3.047,7.388,3.047c2.887,0,5.354-1.025,7.383-3.047C189.45,146.158,190.465,143.682,190.465,140.76L190.465,140.76z"/></g></svg>',more_horizontal:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox ="0 0 15.76 3.58"><g><path d="M4.64,10.73a1.84,1.84,0,0,1,.65-.65,1.76,1.76,0,0,1,1.79,0A1.79,1.79,0,0,1,8,11.63a1.84,1.84,0,0,1-.25.9,1.69,1.69,0,0,1-.65.65,1.8,1.8,0,0,1-2.69-1.55A2.08,2.08,0,0,1,4.64,10.73Zm6.09,0a1.84,1.84,0,0,1,.65-.65,1.78,1.78,0,0,1,2.67,1.55,1.73,1.73,0,0,1-.24.9,1.84,1.84,0,0,1-.65.65,1.76,1.76,0,0,1-1.79,0,1.79,1.79,0,0,1-.64-2.44Zm6.08,0a1.69,1.69,0,0,1,.65-.65,1.76,1.76,0,0,1,1.79,0,1.79,1.79,0,0,1,.9,1.54,1.73,1.73,0,0,1-.24.9,1.84,1.84,0,0,1-.65.65,1.8,1.8,0,0,1-2.69-1.55A2,2,0,0,1,16.81,10.73Z" transform="translate(-4.39 -9.84)"/></g></svg>',more_vertical:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox ="0 0 3.94 15.75"><g><path d="M12.28,7.69a1.92,1.92,0,0,1-1.39-.58,2,2,0,0,1-.58-1.39,1.92,1.92,0,0,1,.58-1.39,2,2,0,0,1,1.39-.58,1.92,1.92,0,0,1,1.39.58,2,2,0,0,1,.58,1.39,1.92,1.92,0,0,1-.58,1.39,2,2,0,0,1-1.39.58Zm0,2a1.92,1.92,0,0,1,1.39.58,2,2,0,0,1,.58,1.39A1.92,1.92,0,0,1,13.67,13a2,2,0,0,1-1.39.58A1.92,1.92,0,0,1,10.89,13a2,2,0,0,1-.58-1.39,2,2,0,0,1,2-2Zm0,5.9a1.92,1.92,0,0,1,1.39.58,2,2,0,0,1,.58,1.39,1.92,1.92,0,0,1-.58,1.39,2,2,0,0,1-1.39.58,1.92,1.92,0,0,1-1.39-.58,2,2,0,0,1-.58-1.39,1.92,1.92,0,0,1,.58-1.39,1.94,1.94,0,0,1,1.39-.58Z" transform="translate(-10.31 -3.75)"/></g></svg>',attachment:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox ="0 0 8.38 15.68"><g><path d="M15.23,6h1v9.78a3.88,3.88,0,0,1-1.31,2.45,4,4,0,0,1-6.57-2.45V7A3,3,0,0,1,9.2,4.89a3,3,0,0,1,5,2.09v8.31a1.92,1.92,0,0,1-.58,1.39,2,2,0,0,1-1.39.58,1.92,1.92,0,0,1-1.39-.58,2,2,0,0,1-.58-1.39V8h1v7.32a1,1,0,0,0,.29.69,1,1,0,0,0,.69.28A.9.9,0,0,0,13,16a1,1,0,0,0,.29-.69V7a1.92,1.92,0,0,0-.58-1.39A2,2,0,0,0,11.27,5a1.92,1.92,0,0,0-1.39.58A2,2,0,0,0,9.33,7v8.31a3,3,0,1,0,5.9,0V6Z" transform="translate(-8.08 -3.78)"/></g></svg>',map:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox ="0 0 11.7 15.62"><g><path d="M12.05,12.42a2.93,2.93,0,1,1,2.07-5A2.88,2.88,0,0,1,15,9.49a3,3,0,0,1-.86,2.07,2.89,2.89,0,0,1-2.07.86Zm0-5.36a2.43,2.43,0,0,0-1.72,4.16,2.48,2.48,0,0,0,1.72.72,2.44,2.44,0,0,0,0-4.88Zm0-3.3A5.84,5.84,0,0,1,17.9,9.62a9.94,9.94,0,0,1-1.73,5A33.59,33.59,0,0,1,12.84,19a1.52,1.52,0,0,1-.23.2,1,1,0,0,1-.55.2h0a1,1,0,0,1-.55-.2,1.52,1.52,0,0,1-.23-.2,33.59,33.59,0,0,1-3.33-4.32,9.93,9.93,0,0,1-1.72-5,5.84,5.84,0,0,1,5.85-5.86ZM12,18.34l.08.05.06-.06a35.58,35.58,0,0,0,3.06-3.93,9.35,9.35,0,0,0,1.74-4.77,4.88,4.88,0,0,0-4.88-4.88A4.79,4.79,0,0,0,8.6,6.17,4.84,4.84,0,0,0,7.17,9.62,9.29,9.29,0,0,0,8.91,14.4,36,36,0,0,0,12,18.34Z" transform="translate(-6.2 -3.76)"/></g></svg>',magic_stick:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox ="0 0 15.73 15.75"><g><path d="M19.86,19.21a1,1,0,0,0,.28-.68,1,1,0,0,0-.28-.7L13,10.93a1,1,0,0,0-.7-.28,1,1,0,0,0-.68,1.65l6.9,6.9a1,1,0,0,0,.69.29.93.93,0,0,0,.69-.28ZM9.19,8.55a3,3,0,0,0,1.68,0,14.12,14.12,0,0,0,1.41-.32A11.26,11.26,0,0,0,10.8,7.06c-.56-.36-.86-.56-.91-.58S10,5.91,10,5.11s0-1.26-.15-1.37a4.35,4.35,0,0,0-1.19.71c-.53.4-.81.62-.87.68a9,9,0,0,0-2-.6,6.84,6.84,0,0,0-.76-.09s0,.27.08.77a8.6,8.6,0,0,0,.61,2q-.09.09-.69.87a3.59,3.59,0,0,0-.68,1.17c.12.17.57.23,1.36.15S7,9.26,7.15,9.23s.21.36.57.91a10.49,10.49,0,0,0,1.14,1.48c0-.1.14-.57.31-1.4a3,3,0,0,0,0-1.67Z" transform="translate(-4.41 -3.74)"/></g></svg>',empty_file:'<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox ="0 0 12.78 15.75"><g><path d="M14.73,3.76,18.67,7.7v9.84a2,2,0,0,1-2,2H7.84a1.89,1.89,0,0,1-1.38-.58,2,2,0,0,1-.57-1.39V5.73a1.93,1.93,0,0,1,.57-1.38,2,2,0,0,1,1.38-.58h6.62l.26,0v0Zm2.95,4.92h-2a1.93,1.93,0,0,1-1.38-.57,2,2,0,0,1-.58-1.4V6.17c0-.36,0-.84,0-1.43H7.85a1,1,0,0,0-.7.29,1,1,0,0,0-.29.7V17.54a1,1,0,0,0,.29.69,1,1,0,0,0,.69.29h8.85a1,1,0,0,0,.71-.29.92.92,0,0,0,.28-.69Zm0-1L14.73,4.74v2A1,1,0,0,0,15,7.4a1,1,0,0,0,.69.29Z" transform="translate(-5.89 -3.76)"/></g></svg>'},f={code:"ckb",toolbar:{default:"\u0628\u0646\u0647\u200c\u0695\u0647\u200c\u062a",save:"\u067e\u0627\u0634\u0647\u200c\u0643\u0647\u200c\u0648\u062a\u0643\u0631\u062f\u0646",font:"\u0641\u06c6\u0646\u062a",formats:"Formats",fontSize:"\u0642\u0647\u200c\u0628\u0627\u0631\u0647\u200c",bold:"\u062a\u06c6\u062e\u0643\u0631\u062f\u0646",underline:"\u0647\u06ce\u06b5 \u0628\u0647\u200c\u0698\u06ce\u0631\u062f\u0627 \u0628\u06ce\u0646\u0647\u200c",italic:"\u0644\u0627\u0631",strike:"\u0647\u06ce\u06b5 \u0628\u0647\u200c\u0646\u0627\u0648\u062f\u0627 \u0628\u06ce\u0646\u0647\u200c",subscript:"\u0698\u06ce\u0631\u0633\u06a9\u0631\u06cc\u067e\u062a",superscript:"\u0633\u06d5\u0631\u0646\u0648\u0648\u0633",removeFormat:"\u0644\u0627\u0628\u0631\u062f\u0646\u06cc \u0641\u06c6\u0631\u0645\u0627\u062a",fontColor:"\u0631\u0647\u200c\u0646\u06af\u06cc \u0641\u06c6\u0646\u062a",hiliteColor:"\u0631\u0647\u200c\u0646\u06af\u06cc \u062f\u06cc\u0627\u0631\u0643\u0631\u0627\u0648",indent:"\u0628\u06c6\u0634\u0627\u06cc\u06cc \u0628\u06d5\u062c\u06ce\u0647\u06ce\u0634\u062a\u0646",outdent:"\u0644\u0627\u0628\u0631\u062f\u0646\u06cc \u0628\u06c6\u0634\u0627\u06cc\u06cc",align:"\u0626\u0627\u0631\u0627\u0633\u062a\u0647\u200c",alignLeft:"\u0644\u0627\u06cc \u0686\u0647\u200c\u067e",alignRight:"\u0644\u0627\u06cc \u0631\u0627\u0633\u062a",alignCenter:"\u0646\u0627\u0648\u0647\u200c\u0646\u062f",alignJustify:"\u0628\u0647\u200c\u0631\u06ce\u0643\u06cc \u062f\u0627\u0628\u0647\u200c\u0634 \u0628\u0643\u0647\u200c",list:"\u0644\u06cc\u0633\u062a",orderList:"\u0644\u06cc\u0633\u062a\u06cc \u0631\u06cc\u0632\u0643\u0631\u0627\u0648",unorderList:"\u0644\u06cc\u0633\u062a\u06cc \u0631\u06cc\u0632\u0646\u0647\u200c\u0643\u0631\u0627\u0648",horizontalRule:"\u0647\u06ce\u06b5\u06cc \u0626\u0627\u0633\u06c6\u06cc\u06cc",hr_solid:"\u067e\u062a\u0647\u200c\u0648",hr_dotted:"\u0646\u0648\u0643\u062a\u0647\u200c \u0646\u0648\u0643\u062a\u0647\u200c",hr_dashed:"\u062f\u0627\u0634 \u062f\u0627\u0634",table:"\u062e\u0634\u062a\u0647\u200c",link:"\u0628\u0647\u200c\u0633\u062a\u0647\u200c\u0631",math:"\u0628\u06cc\u0631\u0643\u0627\u0631\u06cc",image:"\u0648\u06ce\u0646\u0647\u200c",video:"\u06a4\u06cc\u062f\u06cc\u06c6",audio:"\u062f\u0647\u200c\u0646\u06af",fullScreen:"\u067e\u0695 \u0628\u0647\u200c \u0634\u0627\u0634\u0647\u200c",showBlocks:"\u0628\u06b5\u06c6\u0643 \u0646\u06cc\u0634\u0627\u0646\u0628\u062f\u0647",codeView:"\u0628\u06cc\u0646\u06cc\u0646\u06cc \u0643\u06c6\u062f\u0647\u200c\u0643\u0627\u0646",undo:"\u0648\u06d5\u06a9 \u062e\u06c6\u06cc \u0644\u06ce \u0628\u06a9\u06d5\u0648\u06d5",redo:"\u0647\u06d5\u06b5\u06af\u06d5\u0695\u0627\u0646\u062f\u0646\u06d5\u0648\u06d5",preview:"\u067e\u06ce\u0634\u0628\u06cc\u0646\u06cc\u0646",print:"\u067e\u0631\u06cc\u0646\u062a",tag_p:"\u067e\u0647\u200c\u0631\u0647\u200c\u06af\u0631\u0627\u0641",tag_div:"\u06cc \u0626\u0627\u0633\u0627\u06cc\u06cc (DIV)",tag_h:"\u0633\u06d5\u0631\u067e\u06d5\u0695\u06d5",tag_blockquote:"\u062f\u0647\u200c\u0642",tag_pre:"\u0643\u06c6\u062f",template:"\u0642\u0627\u06b5\u0628",lineHeight:"\u0628\u06b5\u0646\u062f\u06cc \u062f\u06ce\u0631",paragraphStyle:"\u0633\u062a\u0627\u06cc\u0644\u06cc \u067e\u0647\u200c\u0631\u0647\u200c\u06af\u0631\u0627\u0641",textStyle:"\u0633\u062a\u0627\u06cc\u0644\u06cc \u0646\u0648\u0633\u06cc\u0646",imageGallery:"\u06af\u0627\u0644\u0647\u200c\u0631\u06cc \u0648\u06ce\u0646\u0647\u200c\u0643\u0627\u0646",mention:"\u062a\u0646\u0648\u064a\u0647 \u0628"},dialogBox:{linkBox:{title:"\u0628\u0647\u200c\u0633\u062a\u0647\u200c\u0631 \u062f\u0627\u0628\u0646\u06ce",url:"\u0628\u0647\u200c\u0633\u062a\u0647\u200c\u0631",text:"\u062a\u06ce\u0643\u0633\u062a\u06cc \u0628\u0647\u200c\u0633\u062a\u0647\u200c\u0631",newWindowCheck:"\u0644\u0647\u200c \u067e\u0647\u200c\u0646\u062c\u0647\u200c\u0631\u0647\u200c\u06cc\u0647\u200c\u0643\u06cc \u0646\u0648\u06ce \u0628\u0643\u0647\u200c\u0631\u0647\u200c\u0648\u0647\u200c",downloadLinkCheck:"\u0631\u0627\u0628\u0637 \u0627\u0644\u062a\u062d\u0645\u064a\u0644",bookmark:"\u0627\u0644\u0645\u0631\u062c\u0639\u064a\u0629"},mathBox:{title:"\u0628\u06cc\u0631\u0643\u0627\u0631\u06cc",inputLabel:"\u0646\u06cc\u0634\u0627\u0646\u0647\u200c\u0643\u0627\u0646\u06cc \u0628\u06cc\u0631\u0643\u0627\u0631\u06cc",fontSizeLabel:"\u0642\u0647\u200c\u0628\u0627\u0631\u0647\u200c\u06cc \u0641\u06c6\u0646\u062a",previewLabel:"\u067e\u06ce\u0634\u0628\u06cc\u0646\u06cc\u0646"},imageBox:{title:"\u0648\u06ce\u0646\u0647\u200c\u06cc\u0647\u200c\u0643 \u062f\u0627\u0628\u0646\u06ce",file:"\u0641\u0627\u06cc\u0644\u06ce\u0643 \u0647\u0647\u200c\u06b5\u0628\u0698\u06ce\u0631\u0647\u200c",url:"\u0628\u0647\u200c\u0633\u062a\u0647\u200c\u0631\u06cc \u0648\u06ce\u0646\u0647\u200c",altText:"\u0646\u0648\u0633\u06cc\u0646\u06cc \u062c\u06ce\u06af\u0631\u0647\u200c\u0648\u0647\u200c"},videoBox:{title:"\u06a4\u06cc\u062f\u06cc\u06c6\u06cc\u0647\u200c\u0643 \u062f\u0627\u0628\u0646\u06ce",file:"\u0641\u0627\u06cc\u0644\u06ce\u0643 \u0647\u0647\u200c\u06b5\u0628\u0698\u06ce\u0631\u0647\u200c",url:"YouTube/Vimeo \u0628\u0647\u200c\u0633\u062a\u0647\u200c\u0631\u06cc \u0644\u0647\u200c\u0646\u0627\u0648\u062f\u0627\u0646\u0627\u0646 \u0648\u0647\u200c\u0643 "},audioBox:{title:"\u062f\u0647\u200c\u0646\u06af\u06ce\u0643 \u062f\u0627\u0628\u0646\u06ce",file:"\u0641\u0627\u06cc\u0644\u06ce\u0643 \u0647\u0647\u200c\u06b5\u0628\u0698\u06ce\u0631\u0647\u200c",url:"\u0628\u0647\u200c\u0633\u062a\u0647\u200c\u0631\u06cc \u062f\u0647\u200c\u0646\u06af"},browser:{tags:"\u062a\u0627\u06af\u0647\u200c\u0643\u0627\u0646",search:"\u06af\u0647\u200c\u0631\u0627\u0646"},caption:"\u067e\u06ce\u0646\u0627\u0633\u0647\u200c\u06cc\u0647\u200c\u0643 \u062f\u0627\u0628\u0646\u06ce",close:"\u062f\u0627\u062e\u0633\u062a\u0646",submitButton:"\u0646\u0627\u0631\u062f\u0646",revertButton:"\u0628\u06cc\u06af\u06d5\u0695\u06ce\u0646\u06d5\u0648\u06d5 \u0633\u06d5\u0631 \u0628\u0627\u0631\u06cc \u0633\u06d5\u0631\u06d5\u062a\u0627\u06cc\u06cc",proportion:"\u0631\u06ce\u0698\u0647\u200c\u0643\u0627\u0646 \u0648\u0647\u200c\u0643 \u062e\u06c6\u06cc \u0628\u0647\u06ce\u06b5\u0647\u200c\u0648\u0647\u200c",basic:"\u0633\u0647\u200c\u0631\u0647\u200c\u062a\u0627\u06cc\u06cc",left:"\u0686\u0647\u200c\u067e",right:"\u0631\u0627\u0633\u062a",center:"\u0646\u0627\u0648\u06d5\u0695\u0627\u0633\u062a",width:"\u067e\u0627\u0646\u06cc",height:"\u0628\u0647\u200c\u0631\u0632\u06cc",size:"\u0642\u0647\u200c\u0628\u0627\u0631\u0647\u200c",ratio:"\u0631\u06ce\u0698\u0647\u200c"},controller:{edit:"\u062f\u06d5\u0633\u06a9\u0627\u0631\u06cc\u06a9\u0631\u062f\u0646",unlink:"\u0633\u0695\u06cc\u0646\u06d5\u0648\u06d5\u06cc \u0628\u06d5\u0633\u062a\u06d5\u0631",remove:"\u0633\u0695\u06cc\u0646\u0647\u200c\u0648\u0647\u200c",insertRowAbove:"\u0631\u06cc\u0632\u0643 \u0644\u0647\u200c \u0633\u0647\u200c\u0631\u0647\u200c\u0648\u0647\u200c \u0632\u06cc\u0627\u062f\u0628\u0643\u0647\u200c",insertRowBelow:"\u0631\u06cc\u0632\u06ce\u0643 \u0644\u0647\u200c \u062e\u0648\u0627\u0631\u0647\u200c\u0648\u0647\u200c \u0632\u06cc\u0627\u062f\u0628\u0643\u0647\u200c",deleteRow:"\u0631\u06cc\u0632 \u0628\u0633\u0631\u0647\u200c\u0648\u0647\u200c",insertColumnBefore:"\u0633\u062a\u0648\u0646\u06ce\u0643 \u0644\u0647\u200c \u067e\u06ce\u0634\u0647\u200c\u0648\u0647\u200c \u0632\u06cc\u0627\u062f\u0628\u0643\u0647\u200c",insertColumnAfter:"\u0633\u062a\u0648\u0646\u06ce\u0643 \u0644\u0647\u200c \u062f\u0648\u0627\u0648\u0647\u200c \u0632\u06cc\u0627\u062f\u0628\u0643\u0647\u200c",deleteColumn:"\u0633\u062a\u0648\u0646\u06ce\u0643 \u0628\u0633\u0631\u0647\u200c\u0648\u0647\u200c",fixedColumnWidth:"\u067e\u0627\u0646\u06cc \u0633\u062a\u0648\u0646 \u0646\u0647\u200c\u06af\u06c6\u0631\u0628\u0643\u0647\u200c",resize100:"\u0642\u0647\u200c\u0628\u0627\u0631\u0647\u200c \u0628\u06af\u06c6\u0631\u0647\u200c \u0628\u06c6 \u0661\u0660\u0660%",resize75:"\u0642\u0647\u200c\u0628\u0627\u0631\u0647\u200c \u0628\u06af\u06c6\u0631\u0647\u200c \u0628\u06c6 \u0667\u0665%",resize50:"\u0642\u0647\u200c\u0628\u0627\u0631\u0647\u200c \u0628\u06af\u06c6\u0631\u0647\u200c \u0628\u06c6 \u0665\u0660%",resize25:"\u0642\u0647\u200c\u0628\u0627\u0631\u0647\u200c \u0628\u06af\u06c6\u0631\u0647\u200c \u0628\u06c6 \u0662\u0665%",autoSize:"\u0642\u0647\u200c\u0628\u0627\u0631\u0647\u200c\u06cc \u062e\u06c6\u0643\u0627\u0631\u0627\u0646\u0647\u200c",mirrorHorizontal:"\u0647\u0647\u200c\u06b5\u06af\u0647\u200c\u0631\u06ce\u0646\u0647\u200c\u0648\u0647\u200c \u0628\u0647\u200c\u062f\u0647\u200c\u0648\u0631\u06cc \u062a\u0647\u200c\u0648\u0647\u200c\u0631\u0647\u200c\u06cc \u0626\u0627\u0633\u06c6\u06cc\u06cc",mirrorVertical:"\u0647\u0647\u200c\u06b5\u06af\u0647\u200c\u0631\u06ce\u0646\u0647\u200c\u0648\u0647\u200c \u0628\u0647\u200c\u062f\u0647\u200c\u0648\u0631\u06cc \u062a\u0647\u200c\u0648\u0647\u200c\u0631\u0647\u200c\u06cc \u0633\u062a\u0648\u0646\u06cc",rotateLeft:"\u0628\u0633\u0648\u0695\u06ce\u0646\u0647\u200c \u0628\u0647\u200c\u0644\u0627\u06cc \u0686\u0647\u200c\u067e\u062f\u0627",rotateRight:"\u0628\u0633\u0648\u0631\u06ce\u0646\u0647\u200c \u0628\u0647\u200c\u0644\u0627\u06cc \u0631\u0627\u0633\u062a\u062f\u0627",maxSize:"\u06af\u0647\u200c\u0648\u0631\u0647\u200c\u062a\u0631\u06cc\u0646 \u0642\u0647\u200c\u0628\u0627\u0631\u0647\u200c",minSize:"\u0628\u0686\u0648\u0643\u062a\u0631\u06cc\u0646 \u0642\u0647\u200c\u0628\u0627\u0631\u0647\u200c",tableHeader:"\u0633\u0647\u200c\u0631\u062f\u06ce\u0631\u06cc \u062e\u0634\u062a\u0647\u200c\u0643",mergeCells:"\u062e\u0627\u0646\u0647\u200c\u0643\u0627\u0646 \u062a\u06ce\u0643\u0647\u200c\u06b5\u0628\u0643\u0647\u200c",splitCells:"\u062e\u0627\u0646\u0647\u200c\u0643\u0627\u0646 \u0644\u06ce\u0643 \u062c\u06cc\u0627\u0628\u0643\u0647\u200c\u0648\u0647\u200c",HorizontalSplit:"\u062c\u06cc\u0627\u0643\u0631\u062f\u0646\u0647\u200c\u0648\u0647\u200c\u06cc \u0626\u0627\u0633\u06c6\u06cc\u06cc",VerticalSplit:"\u062c\u06cc\u0627\u0643\u0631\u062f\u0646\u0647\u200c\u0648\u0647\u200c\u06cc \u0633\u062a\u0648\u0646\u06cc"},menu:{spaced:"\u0628\u06c6\u0634\u0627\u06cc \u0647\u0647\u200c\u0628\u06ce\u062a",bordered:"\u0644\u06ce\u0648\u0627\u0631\u06cc \u0647\u0647\u200c\u0628\u06ce\u062a",neon:"\u0646\u06cc\u06c6\u0646",translucent:"\u0643\u0647\u200c\u0645\u06ce\u0643 \u0648\u0647\u200c\u0643 \u0634\u0648\u0648\u0634\u0647\u200c",shadow:"\u0633\u06ce\u0628\u0647\u200c\u0631",code:"\u0643\u06c6\u062f"}},b={code:"da",toolbar:{default:"Default",save:"Gem",font:"Skrifttype",formats:"Format",fontSize:"Skriftst\xf8rrelse",bold:"Fed",underline:"Understreget",italic:"Skr\xe5skrift",strike:"Overstreget",subscript:"S\xe6nket skrift",superscript:"H\xe6vet skrift",removeFormat:"Fjern formatering",fontColor:"Skriftfarve",hiliteColor:"Baggrundsfarve",indent:"Ryk ind",outdent:"Ryk ud",align:"Justering",alignLeft:"Venstrejustering",alignRight:"H\xf8jrejustering",alignCenter:"Midterjustering",alignJustify:"Tilpas margin",list:"Lister",orderList:"Nummereret liste",unorderList:"Uordnet liste",horizontalRule:"Horisontal linie",hr_solid:"Almindelig",hr_dotted:"Punkteret",hr_dashed:"Streget",table:"Tabel",link:"Link",math:"Math",image:"Billede",video:"Video",audio:"Audio",fullScreen:"Fuld sk\xe6rm",showBlocks:"Vis blokke",codeView:"Vis koder",undo:"Undo",redo:"Redo",preview:"Preview",print:"Print",tag_p:"Paragraph",tag_div:"Normal (DIV)",tag_h:"Overskrift",tag_blockquote:"Citer",tag_pre:"Code",template:"Schablone",lineHeight:"Linjeh\xf8jde",paragraphStyle:"Afsnitstil",textStyle:"Tekststil",imageGallery:"Billedgalleri",mention:"N\xe6vne"},dialogBox:{linkBox:{title:"Inds\xe6t link",url:"URL til link",text:"Tekst for link",newWindowCheck:"\xc5ben i nyt faneblad",downloadLinkCheck:"Download link",bookmark:"Bogm\xe6rke"},mathBox:{title:"Math",inputLabel:"Matematisk notation",fontSizeLabel:"Skriftst\xf8rrelse",previewLabel:"Preview"},imageBox:{title:"Inds\xe6t billede",file:"Inds\xe6t fra fil",url:"Inds\xe6t fra URL",altText:"Alternativ tekst"},videoBox:{title:"Inds\xe6t Video",file:"Inds\xe6t fra fil",url:"Indlejr video / YouTube,Vimeo"},audioBox:{title:"Inds\xe6t Audio",file:"Inds\xe6t fra fil",url:"Inds\xe6t fra URL"},browser:{tags:"Tags",search:"S\xf8g"},caption:"Inds\xe6t beskrivelse",close:"Luk",submitButton:"Gennemf\xf8r",revertButton:"Gendan",proportion:"Bevar proportioner",basic:"Basis",left:"Venstre",right:"H\xf8jre",center:"Center",width:"Bredde",height:"H\xf8jde",size:"St\xf8rrelse",ratio:"Forhold"},controller:{edit:"Rediger",unlink:"Fjern link",remove:"Fjern",insertRowAbove:"Inds\xe6t r\xe6kke foroven",insertRowBelow:"Inds\xe6t r\xe6kke nedenfor",deleteRow:"Slet r\xe6kke",insertColumnBefore:"Inds\xe6t kolonne f\xf8r",insertColumnAfter:"Inds\xe6t kolonne efter",deleteColumn:"Slet kolonne",fixedColumnWidth:"Fast s\xf8jlebredde",resize100:"Forst\xf8r 100%",resize75:"Forst\xf8r 75%",resize50:"Forst\xf8r 50%",resize25:"Forst\xf8r 25%",autoSize:"Auto st\xf8rrelse",mirrorHorizontal:"Spejling, horisontal",mirrorVertical:"Spejling, vertikal",rotateLeft:"Roter til venstre",rotateRight:"Toter til h\xf8jre",maxSize:"Max st\xf8rrelse",minSize:"Min st\xf8rrelse",tableHeader:"Tabel overskrift",mergeCells:"Sammenl\xe6g celler (merge)",splitCells:"Opdel celler",HorizontalSplit:"Opdel horisontalt",VerticalSplit:"Opdel vertikalt"},menu:{spaced:"Brev Afstand",bordered:"Afgr\xe6nsningslinje",neon:"Neon",translucent:"Gennemsigtig",shadow:"Skygge",code:"Code"}},v={code:"de",toolbar:{default:"Standard",save:"Speichern",font:"Schriftart",formats:"Format",fontSize:"Schriftgr\xf6\xdfe",bold:"Fett",underline:"Unterstrichen",italic:"Kursiv",strike:"Durchgestrichen",subscript:"Tiefgestellt",superscript:"Hochgestellt",removeFormat:"Format entfernen",fontColor:"Schriftfarbe",hiliteColor:"Farbe f\xfcr Hervorhebungen",indent:"Einzug vergr\xf6\xdfern",outdent:"Einzug verkleinern",align:"Ausrichtung",alignLeft:"Links ausrichten",alignRight:"Rechts ausrichten",alignCenter:"Zentriert ausrichten",alignJustify:"Blocksatz",list:"Liste",orderList:"Nummerierte Liste",unorderList:"Aufz\xe4hlung",horizontalRule:"Horizontale Linie",hr_solid:"Strich",hr_dotted:"Gepunktet",hr_dashed:"Gestrichelt",table:"Tabelle",link:"Link",math:"Mathematik",image:"Bild",video:"Video",audio:"Audio",fullScreen:"Vollbild",showBlocks:"Blockformatierungen anzeigen",codeView:"Quelltext anzeigen",undo:"R\xfcckg\xe4ngig",redo:"Wiederholen",preview:"Vorschau",print:"Drucken",tag_p:"Absatz",tag_div:"Normal (DIV)",tag_h:"Header",tag_blockquote:"Zitat",tag_pre:"Quellcode",template:"Vorlage",lineHeight:"Zeilenh\xf6he",paragraphStyle:"Absatzstil",textStyle:"Textstil",imageGallery:"Bildergalerie",mention:"Erw\xe4hnen"},dialogBox:{linkBox:{title:"Link einf\xfcgen",url:"Link-URL",text:"Link-Text",newWindowCheck:"In neuem Fenster anzeigen",downloadLinkCheck:"Download-Link",bookmark:"Lesezeichen"},mathBox:{title:"Mathematik",inputLabel:"Mathematische Notation",fontSizeLabel:"Schriftgr\xf6\xdfe",previewLabel:"Vorschau"},imageBox:{title:"Bild einf\xfcgen",file:"Datei ausw\xe4hlen",url:"Bild-URL",altText:"Alternativer Text"},videoBox:{title:"Video enf\xfcgen",file:"Datei ausw\xe4hlen",url:"Video-URL, YouTube/Vimeo"},audioBox:{title:"Audio enf\xfcgen",file:"Datei ausw\xe4hlen",url:"Audio-URL"},browser:{tags:"Stichworte",search:"Suche"},caption:"Beschreibung eingeben",close:"Schlie\xdfen",submitButton:"\xdcbernehmen",revertButton:"R\xfcckg\xe4ngig",proportion:"Seitenverh\xe4ltnis beibehalten",basic:"Standard",left:"Links",right:"Rechts",center:"Zentriert",width:"Breite",height:"H\xf6he",size:"Gr\xf6\xdfe",ratio:"Verh\xe4ltnis"},controller:{edit:"Bearbeiten",unlink:"Link entfernen",remove:"L\xf6schen",insertRowAbove:"Zeile oberhalb einf\xfcgen",insertRowBelow:"Zeile unterhalb einf\xfcgen",deleteRow:"Zeile l\xf6schen",insertColumnBefore:"Spalte links einf\xfcgen",insertColumnAfter:"Spalte rechts einf\xfcgen",deleteColumn:"Spalte l\xf6schen",fixedColumnWidth:"Feste Spaltenbreite",resize100:"Zoom 100%",resize75:"Zoom 75%",resize50:"Zoom 50%",resize25:"Zoom 25%",autoSize:"Automatische Gr\xf6\xdfenanpassung",mirrorHorizontal:"Horizontal spiegeln",mirrorVertical:"Vertikal spiegeln",rotateLeft:"Nach links drehen",rotateRight:"Nach rechts drehen",maxSize:"Maximale Gr\xf6\xdfe",minSize:"Mindestgr\xf6\xdfe",tableHeader:"Tabellen\xfcberschrift",mergeCells:"Zellen verbinden",splitCells:"Zellen teilen",HorizontalSplit:"Horizontal teilen",VerticalSplit:"Vertikal teilen"},menu:{spaced:"Buchstabenabstand",bordered:"Umrandet",neon:"Neon",translucent:"Durchscheinend",shadow:"Schatten",code:"Quellcode"}},y={code:"en",toolbar:{default:"Default",save:"Save",font:"Font",formats:"Formats",fontSize:"Size",bold:"Bold",underline:"Underline",italic:"Italic",strike:"Strike",subscript:"Subscript",superscript:"Superscript",removeFormat:"Remove Format",fontColor:"Font Color",hiliteColor:"Highlight Color",indent:"Indent",outdent:"Outdent",align:"Align",alignLeft:"Align left",alignRight:"Align right",alignCenter:"Align center",alignJustify:"Align justify",list:"List",orderList:"Ordered list",unorderList:"Unordered list",horizontalRule:"Horizontal line",hr_solid:"Solid",hr_dotted:"Dotted",hr_dashed:"Dashed",table:"Table",link:"Link",math:"Math",image:"Image",video:"Video",audio:"Audio",fullScreen:"Full screen",showBlocks:"Show blocks",codeView:"Code view",undo:"Undo",redo:"Redo",preview:"Preview",print:"print",tag_p:"Paragraph",tag_div:"Normal (DIV)",tag_h:"Header",tag_blockquote:"Quote",tag_pre:"Code",template:"Template",lineHeight:"Line height",paragraphStyle:"Paragraph style",textStyle:"Text style",imageGallery:"Image gallery",mention:"Mention"},dialogBox:{linkBox:{title:"Insert Link",url:"URL to link",text:"Text to display",newWindowCheck:"Open in new window",downloadLinkCheck:"Download link",bookmark:"Bookmark"},mathBox:{title:"Math",inputLabel:"Mathematical Notation",fontSizeLabel:"Font Size",previewLabel:"Preview"},imageBox:{title:"Insert image",file:"Select from files",url:"Image URL",altText:"Alternative text"},videoBox:{title:"Insert Video",file:"Select from files",url:"Media embed URL, YouTube/Vimeo"},audioBox:{title:"Insert Audio",file:"Select from files",url:"Audio URL"},browser:{tags:"Tags",search:"Search"},caption:"Insert description",close:"Close",submitButton:"Submit",revertButton:"Revert",proportion:"Constrain proportions",basic:"Basic",left:"Left",right:"Right",center:"Center",width:"Width",height:"Height",size:"Size",ratio:"Ratio"},controller:{edit:"Edit",unlink:"Unlink",remove:"Remove",insertRowAbove:"Insert row above",insertRowBelow:"Insert row below",deleteRow:"Delete row",insertColumnBefore:"Insert column before",insertColumnAfter:"Insert column after",deleteColumn:"Delete column",fixedColumnWidth:"Fixed column width",resize100:"Resize 100%",resize75:"Resize 75%",resize50:"Resize 50%",resize25:"Resize 25%",autoSize:"Auto size",mirrorHorizontal:"Mirror, Horizontal",mirrorVertical:"Mirror, Vertical",rotateLeft:"Rotate left",rotateRight:"Rotate right",maxSize:"Max size",minSize:"Min size",tableHeader:"Table header",mergeCells:"Merge cells",splitCells:"Split Cells",HorizontalSplit:"Horizontal split",VerticalSplit:"Vertical split"},menu:{spaced:"Spaced",bordered:"Bordered",neon:"Neon",translucent:"Translucent",shadow:"Shadow",code:"Code"}},k={code:"es",toolbar:{default:"Valor por defecto",save:"Guardar",font:"Fuente",formats:"Formato",fontSize:"Tama\xf1o de fuente",bold:"Negrita",underline:"Subrayado",italic:"Cursiva",strike:"Tachado",subscript:"Sub\xedndice",superscript:"Super\xedndice",removeFormat:"Eliminar formato",fontColor:"Color de fuente",hiliteColor:"Color de resaltado",indent:"M\xe1s tabulaci\xf3n",outdent:"Menos tabulaci\xf3n",align:"Alinear",alignLeft:"Alinear a la izquierda",alignRight:"Alinear a la derecha",alignCenter:"Alinear al centro",alignJustify:"Justificar",list:"Lista",orderList:"Lista ordenada",unorderList:"Lista desordenada",horizontalRule:"Horizontal line",hr_solid:"L\xednea horizontal solida",hr_dotted:"L\xednea horizontal punteada",hr_dashed:"L\xednea horizontal discontinua",table:"Tabla",link:"Link",math:"Matem\xe1ticas",image:"Imagen",video:"Video",audio:"Audio",fullScreen:"Pantalla completa",showBlocks:"Ver bloques",codeView:"Ver c\xf3digo fuente",undo:"UndoDeshacer \xfaltima acci\xf3n",redo:"Rehacer \xfaltima acci\xf3n",preview:"Vista previa",print:"Imprimir",tag_p:"P\xe1rrafo",tag_div:"Normal (DIV)",tag_h:"Header",tag_blockquote:"Cita",tag_pre:"C\xf3digo",template:"Plantilla",lineHeight:"Altura de la l\xednea",paragraphStyle:"Estilo del parrafo",textStyle:"Estilo del texto",imageGallery:"Galer\xeda de im\xe1genes",mention:"Mencionar"},dialogBox:{linkBox:{title:"Insertar Link",url:"\xbfHacia que URL lleva el link?",text:"Texto para mostrar",newWindowCheck:"Abrir en una nueva ventana",downloadLinkCheck:"Enlace de descarga",bookmark:"Marcador"},mathBox:{title:"Matem\xe1ticas",inputLabel:"Notaci\xf3n Matem\xe1tica",fontSizeLabel:"Tama\xf1o de fuente",previewLabel:"Vista previa"},imageBox:{title:"Insertar imagen",file:"Seleccionar desde los archivos",url:"URL de la imagen",altText:"Texto alternativo"},videoBox:{title:"Insertar Video",file:"Seleccionar desde los archivos",url:"\xbfURL del v\xeddeo? Youtube/Vimeo"},audioBox:{title:"Insertar Audio",file:"Seleccionar desde los archivos",url:"URL de la audio"},browser:{tags:"Etiquetas",search:"Buscar"},caption:"Insertar descripci\xf3n",close:"Cerrar",submitButton:"Enviar",revertButton:"revertir",proportion:"Restringir las proporciones",basic:"Basico",left:"Izquierda",right:"derecha",center:"Centro",width:"Ancho",height:"Alto",size:"Tama\xf1o",ratio:"Proporci\xf3n"},controller:{edit:"Editar",unlink:"Desvincular",remove:"RemoveQuitar",insertRowAbove:"Insertar fila arriba",insertRowBelow:"Insertar fila debajo",deleteRow:"Eliminar fila",insertColumnBefore:"Insertar columna antes",insertColumnAfter:"Insertar columna despu\xe9s",deleteColumn:"Eliminar columna",fixedColumnWidth:"Ancho de columna fijo",resize100:"Redimensionar 100%",resize75:"Redimensionar 75%",resize50:"Redimensionar 50%",resize25:"Redimensionar 25%",autoSize:"Tama\xf1o autom\xe1tico",mirrorHorizontal:"Espejo, Horizontal",mirrorVertical:"Espejo, Vertical",rotateLeft:"Girar a la izquierda",rotateRight:"Girar a la derecha",maxSize:"Tama\xf1o m\xe1ximo",minSize:"Tama\xf1o min\xedmo",tableHeader:"Encabezado de tabla",mergeCells:"Combinar celdas",splitCells:"Dividir celdas",HorizontalSplit:"Divisi\xf3n horizontal",VerticalSplit:"Divisi\xf3n vertical"},menu:{spaced:"Espaciado",bordered:"Bordeado",neon:"Ne\xf3n",translucent:"Transl\xfacido",shadow:"Sombreado",code:"C\xf3digo"}},w={code:"fr",toolbar:{default:"D\xe9faut",save:"Sauvegarder",font:"Police",formats:"Formats",fontSize:"Taille",bold:"Gras",underline:"Soulign\xe9",italic:"Italique",strike:"Barr\xe9",subscript:"Indice",superscript:"Exposant",removeFormat:"\xc9ffacer  le Formatage",fontColor:"Couleur du texte",hiliteColor:"Couleur en arri\xe8re plan",indent:"Indenter",outdent:"D\xe9sindenter",align:"Alignenement",alignLeft:"\xc0 gauche",alignRight:"\xc0 droite",alignCenter:"Centr\xe9",alignJustify:"Justifi\xe9",list:"Liste",orderList:"Ordonn\xe9e",unorderList:"Non-ordonn\xe9e",horizontalRule:"Ligne horizontale",hr_solid:"Solide",hr_dotted:"Points",hr_dashed:"Tirets",table:"Table",link:"Lien",math:"Math",image:"Image",video:"Video",audio:"l'audio",fullScreen:"Plein \xe9cran",showBlocks:"Voir les blocs",codeView:"Voir le code",undo:"Annuler",redo:"R\xe9tablir",preview:"Previsualiser",print:"Imprimer",tag_p:"Paragraphe",tag_div:"Normal (DIV)",tag_h:"Titre",tag_blockquote:"Citation",tag_pre:"Code",template:"Template",lineHeight:"Hauteur de la ligne",paragraphStyle:"Style de paragraphe",textStyle:"Style de texte",imageGallery:"Galerie d'images",mention:"Mention"},dialogBox:{linkBox:{title:"Ins\xe9rer un lien",url:"Adresse URL du lien",text:"Texte \xe0 afficher",newWindowCheck:"Ouvrir dans une nouvelle fen\xeatre",downloadLinkCheck:"Lien de t\xe9l\xe9chargement",bookmark:"Signet"},mathBox:{title:"Math",inputLabel:"Notation math\xe9matique",fontSizeLabel:"Taille",previewLabel:"Previsualiser"},imageBox:{title:"Ins\xe9rer une image",file:"S\xe9lectionner le fichier",url:"Adresse URL du fichier",altText:"Texte Alternatif"},videoBox:{title:"Ins\xe9rer une Vid\xe9o",file:"S\xe9lectionner le fichier",url:"URL d\u2019int\xe9gration du m\xe9dia, YouTube/Vimeo"},audioBox:{title:"Insertar une l'audio",file:"S\xe9lectionner le fichier",url:"Adresse URL du fichier"},browser:{tags:"Mots cl\xe9s",search:"Chercher"},caption:"Ins\xe9rer une description",close:"Fermer",submitButton:"Appliquer",revertButton:"Revenir en arri\xe8re",proportion:"Maintenir le rapport hauteur/largeur",basic:"Basique",left:"Gauche",right:"Droite",center:"Centr\xe9",width:"Largeur",height:"Hauteur",size:"La taille",ratio:"Rapport"},controller:{edit:"Modifier",unlink:"Supprimer un lien",remove:"Effacer",insertRowAbove:"Ins\xe9rer une ligne en dessous",insertRowBelow:"Ins\xe9rer une ligne au dessus",deleteRow:"Effacer la ligne",insertColumnBefore:"Ins\xe9rer une colonne avant",insertColumnAfter:"Ins\xe9rer une colonne apr\xe8s",deleteColumn:"Effacer la colonne",fixedColumnWidth:"Largeur de colonne fixe",resize100:"Redimensionner \xe0 100%",resize75:"Redimensionner \xe0 75%",resize50:"Redimensionner \xe0 50%",resize25:"Redimensionner \xe0 25%",autoSize:"Taille automatique",mirrorHorizontal:"Mirroir, Horizontal",mirrorVertical:"Mirroir, Vertical",rotateLeft:"Rotation \xe0 gauche",rotateRight:"Rotation \xe0 droite",maxSize:"Taille max",minSize:"Taille min",tableHeader:"En-t\xeate de table",mergeCells:"Fusionner les cellules",splitCells:"Diviser les Cellules",HorizontalSplit:"Scission horizontale",VerticalSplit:"Scission verticale"},menu:{spaced:"Espacement",bordered:"Ligne de d\xe9marcation",neon:"N\xe9on",translucent:"Translucide",shadow:"L'ombre",code:"Code"}},C={code:"he",toolbar:{default:"\u05d1\u05e8\u05d9\u05e8\u05ea \u05de\u05d7\u05d3\u05dc",save:"\u05e9\u05de\u05d5\u05e8",font:"\u05d2\u05d5\u05e4\u05df",formats:"\u05e2\u05d9\u05e6\u05d5\u05d1",fontSize:"\u05d2\u05d5\u05d3\u05dc",bold:"\u05de\u05d5\u05d3\u05d2\u05e9",underline:"\u05e7\u05d5 \u05ea\u05d7\u05ea\u05d5\u05df",italic:"\u05e0\u05d8\u05d5\u05d9",strike:"\u05e7\u05d5 \u05d7\u05d5\u05e6\u05d4",subscript:"\u05e2\u05d9\u05dc\u05d9",superscript:"\u05ea\u05d7\u05ea\u05d9",removeFormat:"\u05d4\u05e1\u05e8 \u05e2\u05d9\u05e6\u05d5\u05d1",fontColor:"\u05e6\u05d1\u05e2 \u05d2\u05d5\u05e4\u05df",hiliteColor:"\u05e6\u05d1\u05e2 \u05e7\u05d5 \u05ea\u05d7\u05ea\u05d5\u05df",indent:"\u05d4\u05d2\u05d3\u05dc \u05db\u05e0\u05d9\u05e1\u05d4",outdent:"\u05d4\u05e7\u05d8\u05df \u05db\u05e0\u05d9\u05e1\u05d4",align:"\u05d9\u05d9\u05e9\u05d5\u05e8",alignLeft:"\u05d9\u05d9\u05e9\u05e8 \u05dc\u05e9\u05de\u05d0\u05dc",alignRight:"\u05d9\u05d9\u05e9\u05e8 \u05dc\u05d9\u05de\u05d9\u05df",alignCenter:"\u05de\u05e8\u05db\u05d6",alignJustify:"\u05d9\u05d9\u05e9\u05e8 \u05dc\u05e9\u05e0\u05d9 \u05d4\u05e6\u05d3\u05d3\u05d9\u05dd",list:"\u05e8\u05e9\u05d9\u05de\u05d4",orderList:"\u05de\u05e1\u05e4\u05d5\u05e8",unorderList:"\u05ea\u05d1\u05dc\u05d9\u05d8\u05d9\u05dd",horizontalRule:"\u05e7\u05d5 \u05d0\u05d5\u05e4\u05e7\u05d9",hr_solid:"\u05e7\u05d5",hr_dotted:"\u05e0\u05e7\u05d5\u05d3\u05d5\u05ea",hr_dashed:"\u05de\u05e7\u05e4\u05d9\u05dd",table:"\u05d8\u05d1\u05dc\u05d4",link:"\u05e7\u05d9\u05e9\u05d5\u05e8",math:"\u05de\u05ea\u05de\u05d8\u05d9\u05e7\u05d4",image:"\u05ea\u05de\u05d5\u05e0\u05d4",video:"\u05d7\u05d5\u05d6\u05d9",audio:"\u05e9\u05de\u05e2",fullScreen:"\u05de\u05e1\u05da \u05de\u05dc\u05d0",showBlocks:"\u05d4\u05e6\u05d2 \u05d2\u05d5\u05e9\u05d9\u05dd",codeView:"\u05d4\u05e6\u05d2 \u05e7\u05d5\u05d3",undo:"\u05d1\u05d8\u05dc",redo:"\u05d7\u05d6\u05d5\u05e8",preview:"\u05ea\u05e6\u05d5\u05d2\u05d4 \u05de\u05e7\u05d3\u05d9\u05de\u05d4",print:"\u05d4\u05d3\u05e4\u05e1",tag_p:"\u05e4\u05e1\u05e7\u05d4",tag_div:"\u05e8\u05d2\u05d9\u05dc\u05d4 (DIV)",tag_h:"\u05db\u05d5\u05ea\u05e8\u05ea",tag_blockquote:"\u05e6\u05d9\u05d8\u05d5\u05d8",tag_pre:"\u05e7\u05d5\u05d3",template:"\u05ea\u05d1\u05e0\u05d9\u05ea",lineHeight:"\u05d2\u05d5\u05d1\u05d4 \u05d4\u05e9\u05d5\u05e8\u05d4",paragraphStyle:"\u05e1\u05d2\u05e0\u05d5\u05df \u05e4\u05e1\u05e7\u05d4",textStyle:"\u05e1\u05d2\u05e0\u05d5\u05df \u05d2\u05d5\u05e4\u05df",imageGallery:"\u05d2\u05dc\u05e8\u05d9\u05ea \u05ea\u05de\u05d5\u05e0\u05d5\u05ea",mention:"\u05d4\u05d6\u05db\u05e8"},dialogBox:{linkBox:{title:"\u05d4\u05db\u05e0\u05e1 \u05e7\u05e9\u05d5\u05e8",url:"\u05db\u05ea\u05d5\u05d1\u05ea \u05e7\u05e9\u05d5\u05e8",text:"\u05ea\u05d9\u05d0\u05d5\u05e8",newWindowCheck:"\u05e4\u05ea\u05d7 \u05d1\u05d7\u05dc\u05d5\u05df \u05d7\u05d3\u05e9",downloadLinkCheck:"\u05e7\u05d9\u05e9\u05d5\u05e8 \u05dc\u05d4\u05d5\u05e8\u05d3\u05d4",bookmark:"\u05e1\u05de\u05e0\u05d9\u05d4"},mathBox:{title:"\u05e0\u05d5\u05e1\u05d7\u05d4",inputLabel:"\u05e1\u05d9\u05de\u05e0\u05d9\u05dd \u05de\u05ea\u05de\u05d8\u05d9\u05dd",fontSizeLabel:"\u05d2\u05d5\u05d3\u05dc \u05d2\u05d5\u05e4\u05df",previewLabel:"\u05ea\u05e6\u05d5\u05d2\u05d4 \u05de\u05e7\u05d3\u05d9\u05de\u05d4"},imageBox:{title:"\u05d4\u05db\u05e0\u05e1 \u05ea\u05de\u05d5\u05e0\u05d4",file:"\u05d1\u05d7\u05e8 \u05de\u05e7\u05d5\u05d1\u05e5",url:"\u05db\u05ea\u05d5\u05d1\u05ea URL \u05ea\u05de\u05d5\u05e0\u05d4",altText:"\u05ea\u05d9\u05d0\u05d5\u05e8 (\u05ea\u05d2\u05d9\u05ea alt)"},videoBox:{title:"\u05d4\u05db\u05e0\u05e1 \u05e1\u05e8\u05d8\u05d5\u05df",file:"\u05d1\u05d7\u05e8 \u05de\u05e7\u05d5\u05d1\u05e5",url:"\u05db\u05ea\u05d5\u05d1\u05ea \u05d4\u05d8\u05de\u05e2\u05d4 YouTube/Vimeo"},audioBox:{title:"\u05d4\u05db\u05e0\u05e1 \u05e9\u05de\u05e2",file:"\u05d1\u05d7\u05e8 \u05de\u05e7\u05d5\u05d1\u05e5",url:"\u05db\u05ea\u05d5\u05d1\u05ea URL \u05e9\u05de\u05e2"},browser:{tags:"\u05ea\u05d2",search:"\u05d7\u05e4\u05e9"},caption:"\u05d4\u05db\u05e0\u05e1 \u05ea\u05d9\u05d0\u05d5\u05e8",close:"\u05e1\u05d2\u05d5\u05e8",submitButton:"\u05e9\u05dc\u05d7",revertButton:"\u05d1\u05d8\u05dc",proportion:"\u05e9\u05de\u05e8 \u05d9\u05d7\u05e1",basic:"\u05d1\u05e1\u05d9\u05e1\u05d9",left:"\u05e9\u05de\u05d0\u05dc",right:"\u05d9\u05de\u05d9\u05df",center:"\u05de\u05e8\u05db\u05d6",width:"\u05e8\u05d5\u05d7\u05d1",height:"\u05d2\u05d5\u05d1\u05d4",size:"\u05d2\u05d5\u05d3\u05dc",ratio:"\u05d9\u05d7\u05e1"},controller:{edit:"\u05e2\u05e8\u05d5\u05da",unlink:"\u05d4\u05e1\u05e8 \u05e7\u05d9\u05e9\u05d5\u05e8\u05d9\u05dd",remove:"\u05d4\u05e1\u05e8",insertRowAbove:"\u05d4\u05db\u05e0\u05e1 \u05e9\u05d5\u05e8\u05d4 \u05de\u05e2\u05dc",insertRowBelow:"\u05d4\u05db\u05e0\u05e1 \u05e9\u05d5\u05e8\u05d4 \u05de\u05ea\u05d7\u05ea",deleteRow:"\u05de\u05d7\u05e7 \u05e9\u05d5\u05e8\u05d4",insertColumnBefore:"\u05d4\u05db\u05e0\u05e1 \u05e2\u05de\u05d5\u05d3\u05d4 \u05dc\u05e4\u05e0\u05d9",insertColumnAfter:"\u05d4\u05db\u05e0\u05e1 \u05e2\u05de\u05d5\u05d3\u05d4 \u05d0\u05d7\u05e8\u05d9",deleteColumn:"\u05de\u05d7\u05e7 \u05e2\u05de\u05d5\u05d3\u05d4",fixedColumnWidth:"\u05e7\u05d1\u05e2 \u05e8\u05d5\u05d7\u05d1 \u05e2\u05de\u05d5\u05d3\u05d5\u05ea",resize100:"\u05dc\u05dc\u05d0 \u05d4\u05e7\u05d8\u05e0\u05d4",resize75:"\u05d4\u05e7\u05d8\u05df 75%",resize50:"\u05d4\u05e7\u05d8\u05df 50%",resize25:"\u05d4\u05e7\u05d8\u05df 25%",autoSize:"\u05d4\u05e7\u05d8\u05df \u05d0\u05d5\u05d8\u05d5\u05de\u05d8\u05d9\u05ea",mirrorHorizontal:"\u05d4\u05e4\u05d5\u05da \u05dc\u05e8\u05d5\u05d7\u05d1",mirrorVertical:"\u05d4\u05e4\u05d5\u05da \u05dc\u05d2\u05d5\u05d1\u05d4",rotateLeft:"\u05e1\u05d5\u05d1\u05d1 \u05e9\u05de\u05d0\u05dc\u05d4",rotateRight:"\u05e1\u05d5\u05d1\u05d1 \u05d9\u05de\u05d9\u05e0\u05d4",maxSize:"\u05d2\u05d5\u05d3\u05dc \u05de\u05e8\u05d1\u05d9",minSize:"\u05d2\u05d5\u05d3\u05dc \u05de\u05d6\u05e2\u05e8\u05d9",tableHeader:"\u05db\u05d5\u05ea\u05e8\u05ea \u05d8\u05d1\u05dc\u05d4",mergeCells:"\u05de\u05d6\u05d2 \u05ea\u05d0\u05d9\u05dd",splitCells:"\u05e4\u05e6\u05dc \u05ea\u05d0",HorizontalSplit:"\u05e4\u05e6\u05dc \u05dc\u05d2\u05d5\u05d1\u05d4",VerticalSplit:"\u05e4\u05e6\u05dc \u05dc\u05e8\u05d5\u05d7\u05d1"},menu:{spaced:"\u05de\u05e8\u05d5\u05d5\u05d7",bordered:"\u05d1\u05e2\u05dc \u05de\u05d9\u05ea\u05d0\u05e8",neon:"\u05d6\u05d5\u05d4\u05e8",translucent:"\u05e9\u05e7\u05d5\u05e3 \u05dc\u05de\u05d7\u05e6\u05d4",shadow:"\u05e6\u05dc",code:"\u05e7\u05d5\u05d3"}},x={code:"it",toolbar:{default:"Predefinita",save:"Salva",font:"Font",formats:"Formato",fontSize:"Grandezza",bold:"Grassetto",underline:"Sottolineato",italic:"Corsivo",strike:"Barrato",subscript:"Apice",superscript:"Pedice",removeFormat:"Rimuovi formattazione",fontColor:"Colore testo",hiliteColor:"Colore sottolineatura",indent:"Aumenta rientro",outdent:"Riduci rientro",align:"Allinea",alignLeft:"Allinea a sinistra",alignRight:"Allinea a destra",alignCenter:"Allinea al centro",alignJustify:"Giustifica testo",list:"Elenco",orderList:"Elenco numerato",unorderList:"Elenco puntato",horizontalRule:"Linea orizzontale",hr_solid:"Linea continua",hr_dotted:"Puntini",hr_dashed:"Trattini",table:"Tabella",link:"Collegamento ipertestuale",math:"Formula matematica",image:"Immagine",video:"Video",audio:"Audio",fullScreen:"A tutto schermo",showBlocks:"Visualizza blocchi",codeView:"Visualizza codice",undo:"Annulla",redo:"Ripristina",preview:"Anteprima",print:"Stampa",tag_p:"Paragrafo",tag_div:"Normale (DIV)",tag_h:"Titolo",tag_blockquote:"Citazione",tag_pre:"Codice",template:"Modello",lineHeight:"Interlinea",paragraphStyle:"Stile paragrafo",textStyle:"Stile testo",imageGallery:"Galleria di immagini",mention:"Menzione"},dialogBox:{linkBox:{title:"Inserisci un link",url:"Indirizzo",text:"Testo da visualizzare",newWindowCheck:"Apri in una nuova finestra",downloadLinkCheck:"Link per scaricare",bookmark:"Segnalibro"},mathBox:{title:"Matematica",inputLabel:"Notazione matematica",fontSizeLabel:"Grandezza testo",previewLabel:"Anteprima"},imageBox:{title:"Inserisci immagine",file:"Seleziona da file",url:"Indirizzo immagine",altText:"Testo alternativo (ALT)"},videoBox:{title:"Inserisci video",file:"Seleziona da file",url:"Indirizzo video di embed, YouTube/Vimeo"},audioBox:{title:"Inserisci audio",file:"Seleziona da file",url:"Indirizzo audio"},browser:{tags:"tag",search:"Ricerca"},caption:"Inserisci didascalia",close:"Chiudi",submitButton:"Invia",revertButton:"Annulla",proportion:"Proporzionale",basic:"Da impostazione",left:"Sinistra",right:"Destra",center:"Centrato",width:"Larghezza",height:"Altezza",size:"Dimensioni",ratio:"Rapporto"},controller:{edit:"Modifica",unlink:"Elimina link",remove:"Rimuovi",insertRowAbove:"Inserisci riga sopra",insertRowBelow:"Inserisci riga sotto",deleteRow:"Cancella riga",insertColumnBefore:"Inserisci colonna prima",insertColumnAfter:"Inserisci colonna dopo",deleteColumn:"Cancella colonna",fixedColumnWidth:"Larghezza delle colonne fissa",resize100:"Ridimensiona 100%",resize75:"Ridimensiona 75%",resize50:"Ridimensiona 50%",resize25:"Ridimensiona 25%",autoSize:"Ridimensione automatica",mirrorHorizontal:"Capovolgi orizzontalmente",mirrorVertical:"Capovolgi verticalmente",rotateLeft:"Ruota a sinistra",rotateRight:"Ruota a destra",maxSize:"Dimensione massima",minSize:"Dimensione minima",tableHeader:"Intestazione tabella",mergeCells:"Unisci celle",splitCells:"Dividi celle",HorizontalSplit:"Separa orizontalmente",VerticalSplit:"Separa verticalmente"},menu:{spaced:"Spaziato",bordered:"Bordato",neon:"Luminoso",translucent:"Traslucido",shadow:"Ombra",code:"Codice"}},_={code:"ja",toolbar:{default:"\u30c7\u30d5\u30a9\u30eb\u30c8",save:"\u4fdd\u5b58",font:"\u30d5\u30a9\u30f3\u30c8",formats:"\u6bb5\u843d\u5f62\u5f0f",fontSize:"\u30b5\u30a4\u30ba",bold:"\u592a\u5b57",underline:"\u4e0b\u7dda",italic:"\u30a4\u30bf\u30ea\u30c3\u30af",strike:"\u53d6\u308a\u6d88\u3057\u7dda",subscript:"\u4e0b\u4ed8\u304d",superscript:"\u4e0a\u4ed8\u304d",removeFormat:"\u5f62\u5f0f\u3092\u524a\u9664",fontColor:"\u6587\u5b57\u8272",hiliteColor:"\u6587\u5b57\u306e\u80cc\u666f\u8272",indent:"\u30a4\u30f3\u30c7\u30f3\u30c8",outdent:"\u30a4\u30f3\u30c7\u30f3\u30c8",align:"\u30bd\u30fc\u30c8",alignLeft:"\u5de6\u63c3\u3048",alignRight:"\u53f3\u63c3\u3048",alignCenter:"\u4e2d\u592e\u63c3\u3048",alignJustify:"\u4e21\u7aef\u63c3\u3048",list:"\u30ea\u30b9\u30c8",orderList:"\u6570\u5024\u30d6\u30ea\u30c3\u30c8",unorderList:"\u5186\u5f62\u30d6\u30ea\u30c3\u30c8",horizontalRule:"\u6c34\u5e73\u7dda\u3092\u633f\u5165",hr_solid:"\u5b9f\u7dda",hr_dotted:"\u70b9\u7dda",hr_dashed:"\u30c0\u30c3\u30b7\u30e5",table:"\u30c6\u30fc\u30d6\u30eb",link:"\u30ea\u30f3\u30af",math:"\u6570\u5b66",image:"\u753b\u50cf",video:"\u52d5\u753b",audio:"\u30aa\u30fc\u30c7\u30a3\u30aa",fullScreen:"\u30d5\u30eb\u30b9\u30af\u30ea\u30fc\u30f3",showBlocks:"\u30d6\u30ed\u30c3\u30af\u8868\u793a",codeView:"HTML\u306e\u7de8\u96c6",undo:"\u5143\u306b\u623b\u3059",redo:"\u518d\u5b9f\u884c",preview:"\u30d7\u30ec\u30d3\u30e5\u30fc",print:"\u5370\u5237",tag_p:"\u672c\u6587",tag_div:"\u57fa\u672c\uff08DIV\uff09",tag_h:"\u30bf\u30a4\u30c8\u30eb",tag_blockquote:"\u5f15\u7528",tag_pre:"\u30b3\u30fc\u30c9",template:"\u30c6\u30f3\u30d7\u30ec\u30fc\u30c8",lineHeight:"\u884c\u306e\u9ad8\u3055",paragraphStyle:"\u6bb5\u843d\u30b9\u30bf\u30a4\u30eb",textStyle:"\u30c6\u30ad\u30b9\u30c8\u30b9\u30bf\u30a4\u30eb",imageGallery:"\u30a4\u30e1\u30fc\u30b8\u30ae\u30e3\u30e9\u30ea\u30fc",mention:"\u8a00\u53ca\u3059\u308b"},dialogBox:{linkBox:{title:"\u30ea\u30f3\u30af\u306e\u633f\u5165",url:"\u30a4\u30f3\u30bf\u30fc\u30cd\u30c3\u30c8\u30a2\u30c9\u30ec\u30b9",text:"\u753b\u9762\u306e\u30c6\u30ad\u30b9\u30c8",newWindowCheck:"\u5225\u30a6\u30a3\u30f3\u30c9\u30a6\u3067\u958b\u304f",downloadLinkCheck:"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9\u30ea\u30f3\u30af",bookmark:"\u30d6\u30c3\u30af\u30de\u30fc\u30af"},mathBox:{title:"\u6570\u5b66",inputLabel:"\u6570\u5b66\u8868\u8a18",fontSizeLabel:"\u30b5\u30a4\u30ba",previewLabel:"\u30d7\u30ec\u30d3\u30e5\u30fc"},imageBox:{title:"\u753b\u50cf\u306e\u633f\u5165",file:"\u30d5\u30a1\u30a4\u30eb\u306e\u9078\u629e",url:"\u30a4\u30e1\u30fc\u30b8\u30a2\u30c9\u30ec\u30b9",altText:"\u7f6e\u63db\u6587\u5b57\u5217"},videoBox:{title:"\u52d5\u753b\u3092\u633f\u5165",file:"\u30d5\u30a1\u30a4\u30eb\u306e\u9078\u629e",url:"\u30e1\u30c7\u30a3\u30a2\u57cb\u3081\u8fbc\u307f\u30a2\u30c9\u30ec\u30b9, YouTube/Vimeo"},audioBox:{title:"\u30aa\u30fc\u30c7\u30a3\u30aa\u3092\u633f\u5165",file:"\u30d5\u30a1\u30a4\u30eb\u306e\u9078\u629e",url:"\u30aa\u30fc\u30c7\u30a3\u30aa\u30a2\u30c9\u30ec\u30b9"},browser:{tags:"\u30bf\u30b0",search:"\u63a2\u3059"},caption:"\u8aac\u660e\u4ed8\u3051",close:"\u9589\u3058\u308b",submitButton:"\u78ba\u8a8d",revertButton:"\u5143\u306b\u623b\u3059",proportion:"\u306e\u5272\u5408\u30ab\u30b9\u30bf\u30de\u30a4\u30ba",basic:"\u57fa\u672c",left:"\u5de6",right:"\u53f3",center:"\u4e2d\u592e",width:"\u6a2a",height:"\u7e26",size:"\u30b5\u30a4\u30ba",ratio:"\u6bd4\u7387"},controller:{edit:"\u7de8\u96c6",unlink:"\u30ea\u30f3\u30af\u89e3\u9664",remove:"\u524a\u9664",insertRowAbove:"\u4e0a\u306b\u884c\u3092\u633f\u5165",insertRowBelow:"\u4e0b\u306b\u884c\u3092\u633f\u5165",deleteRow:"\u884c\u306e\u524a\u9664",insertColumnBefore:"\u5de6\u306b\u5217\u3092\u633f\u5165",insertColumnAfter:"\u53f3\u306b\u5217\u3092\u633f\u5165",deleteColumn:"\u5217\u3092\u524a\u9664\u3059\u308b",fixedColumnWidth:"\u56fa\u5b9a\u5217\u5e45",resize100:"100\uff05 \u30b5\u30a4\u30ba",resize75:"75\uff05 \u30b5\u30a4\u30ba",resize50:"50\uff05 \u30b5\u30a4\u30ba",resize25:"25\uff05 \u30b5\u30a4\u30ba",autoSize:"\u81ea\u52d5\u30b5\u30a4\u30ba",mirrorHorizontal:"\u5de6\u53f3\u53cd\u8ee2",mirrorVertical:"\u4e0a\u4e0b\u53cd\u8ee2",rotateLeft:"\u5de6\u306b\u56de\u8ee2",rotateRight:"\u53f3\u306b\u56de\u8ee2",maxSize:"\u6700\u5927\u30b5\u30a4\u30ba",minSize:"\u6700\u5c0f\u30b5\u30a4\u30ba",tableHeader:"\u8868\u306e\u30d8\u30c3\u30c0\u30fc",mergeCells:"\u30bb\u30eb\u306e\u7d50\u5408",splitCells:"\u30bb\u30eb\u3092\u5206\u5272",HorizontalSplit:"\u6a2a\u5206\u5272",VerticalSplit:"\u5782\u76f4\u5206\u5272"},menu:{spaced:"\u6587\u5b57\u9593\u9694",bordered:"\u5883\u754c\u7dda",neon:"\u30cd\u30aa\u30f3",translucent:"\u534a\u900f\u660e",shadow:"\u5f71",code:"\u30b3\u30fc\u30c9"}},S={code:"ko",toolbar:{default:"\uae30\ubcf8\uac12",save:"\uc800\uc7a5",font:"\uae00\uaf34",formats:"\ubb38\ub2e8 \ud615\uc2dd",fontSize:"\ud06c\uae30",bold:"\uad75\uac8c",underline:"\ubc11\uc904",italic:"\uae30\uc6b8\uc784",strike:"\ucde8\uc18c\uc120",subscript:"\uc544\ub798 \ucca8\uc790",superscript:"\uc704 \ucca8\uc790",removeFormat:"\ud615\uc2dd \uc81c\uac70",fontColor:"\uae00\uc790\uc0c9",hiliteColor:"\ubc30\uacbd\uc0c9",indent:"\ub4e4\uc5ec\uc4f0\uae30",outdent:"\ub0b4\uc5b4\uc4f0\uae30",align:"\uc815\ub82c",alignLeft:"\uc67c\ucabd \uc815\ub82c",alignRight:"\uc624\ub978\ucabd \uc815\ub82c",alignCenter:"\uac00\uc6b4\ub370 \uc815\ub82c",alignJustify:"\uc591\ucabd \uc815\ub82c",list:"\ub9ac\uc2a4\ud2b8",orderList:"\uc22b\uc790\ud615 \ub9ac\uc2a4\ud2b8",unorderList:"\uc6d0\ud615 \ub9ac\uc2a4\ud2b8",horizontalRule:"\uac00\ub85c \uc904 \uc0bd\uc785",hr_solid:"\uc2e4\uc120",hr_dotted:"\uc810\uc120",hr_dashed:"\ub300\uc2dc",table:"\ud14c\uc774\ube14",link:"\ub9c1\ud06c",math:"\uc218\uc2dd",image:"\uc774\ubbf8\uc9c0",video:"\ub3d9\uc601\uc0c1",audio:"\uc624\ub514\uc624",fullScreen:"\uc804\uccb4 \ud654\uba74",showBlocks:"\ube14\ub85d \ubcf4\uae30",codeView:"HTML \ud3b8\uc9d1",undo:"\uc2e4\ud589 \ucde8\uc18c",redo:"\ub2e4\uc2dc \uc2e4\ud589",preview:"\ubbf8\ub9ac\ubcf4\uae30",print:"\uc778\uc1c4",tag_p:"\ubcf8\ubb38",tag_div:"\uae30\ubcf8 (DIV)",tag_h:"\uc81c\ubaa9",tag_blockquote:"\uc778\uc6a9\ubb38",tag_pre:"\ucf54\ub4dc",template:"\ud15c\ud50c\ub9bf",lineHeight:"\uc904 \ub192\uc774",paragraphStyle:"\ubb38\ub2e8 \uc2a4\ud0c0\uc77c",textStyle:"\uae00\uc790 \uc2a4\ud0c0\uc77c",imageGallery:"\uc774\ubbf8\uc9c0 \uac24\ub7ec\ub9ac",mention:"\uba58\uc158"},dialogBox:{linkBox:{title:"\ub9c1\ud06c \uc0bd\uc785",url:"\uc778\ud130\ub137 \uc8fc\uc18c",text:"\ud654\uba74 \ud14d\uc2a4\ud2b8",newWindowCheck:"\uc0c8\ucc3d\uc73c\ub85c \uc5f4\uae30",downloadLinkCheck:"\ub2e4\uc6b4\ub85c\ub4dc \ub9c1\ud06c",bookmark:"\ubd81\ub9c8\ud06c"},mathBox:{title:"\uc218\uc2dd",inputLabel:"\uc218\ud559\uc801 \ud45c\uae30\ubc95",fontSizeLabel:"\uae00\uc790 \ud06c\uae30",previewLabel:"\ubbf8\ub9ac\ubcf4\uae30"},imageBox:{title:"\uc774\ubbf8\uc9c0 \uc0bd\uc785",file:"\ud30c\uc77c \uc120\ud0dd",url:"\uc774\ubbf8\uc9c0 \uc8fc\uc18c",altText:"\ub300\uccb4 \ubb38\uc790\uc5f4"},videoBox:{title:"\ub3d9\uc601\uc0c1 \uc0bd\uc785",file:"\ud30c\uc77c \uc120\ud0dd",url:"\ubbf8\ub514\uc5b4 \uc784\ubca0\ub4dc \uc8fc\uc18c, \uc720\ud29c\ube0c/\ube44\uba54\uc624"},audioBox:{title:"\uc624\ub514\uc624 \uc0bd\uc785",file:"\ud30c\uc77c \uc120\ud0dd",url:"\uc624\ub514\uc624 \ud30c\uc77c \uc8fc\uc18c"},browser:{tags:"\ud0dc\uadf8",search:"\uac80\uc0c9"},caption:"\uc124\uba85 \ub123\uae30",close:"\ub2eb\uae30",submitButton:"\ud655\uc778",revertButton:"\ub418\ub3cc\ub9ac\uae30",proportion:"\ube44\uc728 \ub9de\ucda4",basic:"\uae30\ubcf8",left:"\uc67c\ucabd",right:"\uc624\ub978\ucabd",center:"\uac00\uc6b4\ub370",width:"\uac00\ub85c",height:"\uc138\ub85c",size:"\ud06c\uae30",ratio:"\ube44\uc728"},controller:{edit:"\ud3b8\uc9d1",unlink:"\ub9c1\ud06c \ud574\uc81c",remove:"\uc0ad\uc81c",insertRowAbove:"\uc704\uc5d0 \ud589 \uc0bd\uc785",insertRowBelow:"\uc544\ub798\uc5d0 \ud589 \uc0bd\uc785",deleteRow:"\ud589 \uc0ad\uc81c",insertColumnBefore:"\uc67c\ucabd\uc5d0 \uc5f4 \uc0bd\uc785",insertColumnAfter:"\uc624\ub978\ucabd\uc5d0 \uc5f4 \uc0bd\uc785",deleteColumn:"\uc5f4 \uc0ad\uc81c",fixedColumnWidth:"\uace0\uc815 \ub41c \uc5f4 \ub108\ube44",resize100:"100% \ud06c\uae30",resize75:"75% \ud06c\uae30",resize50:"50% \ud06c\uae30",resize25:"25% \ud06c\uae30",autoSize:"\uc790\ub3d9 \ud06c\uae30",mirrorHorizontal:"\uc88c\uc6b0 \ubc18\uc804",mirrorVertical:"\uc0c1\ud558 \ubc18\uc804",rotateLeft:"\uc67c\ucabd\uc73c\ub85c \ud68c\uc804",rotateRight:"\uc624\ub978\ucabd\uc73c\ub85c \ud68c\uc804",maxSize:"\ucd5c\ub300\ud654",minSize:"\ucd5c\uc18c\ud654",tableHeader:"\ud14c\uc774\ube14 \uc81c\ubaa9",mergeCells:"\uc140 \ubcd1\ud569",splitCells:"\uc140 \ubd84\ud560",HorizontalSplit:"\uac00\ub85c \ubd84\ud560",VerticalSplit:"\uc138\ub85c \ubd84\ud560"},menu:{spaced:"\uae00\uc790 \uac04\uaca9",bordered:"\uacbd\uacc4\uc120",neon:"\ub124\uc628",translucent:"\ubc18\ud22c\uba85",shadow:"\uadf8\ub9bc\uc790",code:"\ucf54\ub4dc"}},E={code:"lv",toolbar:{default:"Noklus\u0113juma",save:"Saglab\u0101t",font:"Fonts",formats:"Form\u0101ti",fontSize:"Fonta lielums",bold:"Treknraksts",underline:"Pasv\u012btrot",italic:"Sl\u012bpraksts",strike:"P\u0101rsv\u012btrojums",subscript:"Apak\u0161raksts",superscript:"Aug\u0161raksts",removeFormat:"No\u0146emt form\u0101tu",fontColor:"Fonta kr\u0101sa",hiliteColor:"Teksta iez\u012bm\u0113\u0161anas kr\u0101sa",indent:"Palielin\u0101t atk\u0101pi",outdent:"Samazin\u0101t atk\u0101pi",align:"Izl\u012bdzin\u0101t",alignLeft:"L\u012bdzin\u0101t pa kreisi",alignRight:"L\u012bdzin\u0101t pa labi",alignCenter:"Centr\u0113t",alignJustify:"Taisnot",list:"Saraksts",orderList:"Numer\u0101cija",unorderList:"Aizzimes",horizontalRule:"Horizont\u0101la l\u012bnija",hr_solid:"Ciets",hr_dotted:"Punkti\u0146\u0161",hr_dashed:"Bra\u0161a",table:"Tabula",link:"Saite",math:"Matem\u0101tika",image:"Att\u0113ls",video:"Video",audio:"Audio",fullScreen:"Pilnekr\u0101na re\u017e\u012bms",showBlocks:"Par\u0101dit blokus",codeView:"Koda skats",undo:"Atsaukt",redo:"Atk\u0101rtot",preview:"Priek\u0161skat\u012bjums",print:"Druk\u0101t",tag_p:"Paragr\u0101fs",tag_div:"Norm\u0101li (DIV)",tag_h:"Galvene",tag_blockquote:"Cit\u0101ts",tag_pre:"Kods",template:"Veidne",lineHeight:"L\u012bnijas augstums",paragraphStyle:"Paragr\u0101fa stils",textStyle:"Teksta stils",imageGallery:"Att\u0113lu galerija",mention:"Piemin\u0113t"},dialogBox:{linkBox:{title:"Ievietot saiti",url:"Saites URL",text:"Par\u0101d\u0101mais teksts",newWindowCheck:"Atv\u0113rt jaun\u0101 log\u0101",downloadLinkCheck:"Lejupiel\u0101des saite",bookmark:"Gr\u0101matz\u012bme"},mathBox:{title:"Matem\u0101tika",inputLabel:"Matem\u0101tisk\u0101 not\u0101cija",fontSizeLabel:"Fonta lielums",previewLabel:"Priek\u0161skat\u012bjums"},imageBox:{title:"Ievietot att\u0113lu",file:"Izv\u0113lieties no failiem",url:"Att\u0113la URL",altText:"Alternat\u012bvs teksts"},videoBox:{title:"Ievietot video",file:"Izv\u0113lieties no failiem",url:"Multivides iegul\u0161anas URL, YouTube/Vimeo"},audioBox:{title:"Ievietot audio",file:"Izv\u0113lieties no failiem",url:"Audio URL"},browser:{tags:"Tagi",search:"Mekl\u0113t"},caption:"Ievietot aprakstu",close:"Aizv\u0113rt",submitButton:"Iesniegt",revertButton:"Atjaunot",proportion:"Ierobe\u017eo proporcijas",basic:"Nav iesai\u0146ojuma",left:"Pa kreisi",right:"Labaj\u0101 pus\u0113",center:"Centrs",width:"Platums",height:"Augstums",size:"Izm\u0113rs",ratio:"Attiec\u012bba"},controller:{edit:"Redi\u0123\u0113t",unlink:"Atsaist\u012bt",remove:"No\u0146emt",insertRowAbove:"Ievietot rindu virs",insertRowBelow:"Ievietot rindu zem\u0101k",deleteRow:"Dz\u0113st rindu",insertColumnBefore:"Ievietot kolonnu pirms",insertColumnAfter:"Ievietot kolonnu aiz",deleteColumn:"Dz\u0113st kolonnu",fixColumnWidth:"Fiks\u0113ts kolonnas platums",resize100:"Main\u012bt izm\u0113ru 100%",resize75:"Main\u012bt izm\u0113ru 75%",resize50:"Main\u012bt izm\u0113ru 50%",resize25:"Main\u012bt izm\u0113ru 25%",autoSize:"Autom\u0101tiskais izm\u0113rs",mirrorHorizontal:"Spogulis, horizont\u0101ls",mirrorVertical:"Spogulis, vertik\u0101ls",rotateLeft:"Pagriezt pa kreisi",rotateRight:"Pagriezt pa labi",maxSize:"Maksim\u0101lais izm\u0113rs",minSize:"Minim\u0101lais izm\u0113rs",tableHeader:"Tabulas galvene",mergeCells:"Apvienot \u0161\u016bnas",splitCells:"Sadal\u012bt \u0161\u016bnas",HorizontalSplit:"Horizont\u0101ls sadal\u012bjums",VerticalSplit:"Vertik\u0101ls sadal\u012bjums"},menu:{spaced:"Ar atstarpi",bordered:"Robe\u017eoj\u0101s",neon:"Neona",translucent:"Caursp\u012bd\u012bgs",shadow:"\u0112na",code:"Kods"}},z={code:"pl",toolbar:{default:"Domy\u015blne",save:"Zapisz",font:"Czcionka",formats:"Formaty",fontSize:"Rozmiar",bold:"Pogrubienie",underline:"Podkre\u015blenie",italic:"Kursywa",strike:"Przekre\u015blenie",subscript:"Indeks dolny",superscript:"Indeks g\xf3rny",removeFormat:"Wyczy\u015b\u0107 formatowanie",fontColor:"Kolor tekstu",hiliteColor:"Kolor t\u0142a tekstu",indent:"Zwi\u0119ksz wci\u0119cie",outdent:"Zmniejsz wci\u0119cie",align:"Wyr\xf3wnaj",alignLeft:"Do lewej",alignRight:"Do prawej",alignCenter:"Do \u015brodka",alignJustify:"Wyjustuj",list:"Lista",orderList:"Lista numerowana",unorderList:"Lista wypunktowana",horizontalRule:"Pozioma linia",hr_solid:"Ci\u0105g\u0142a",hr_dotted:"Kropkowana",hr_dashed:"Przerywana",table:"Tabela",link:"Odno\u015bnik",math:"Matematyczne",image:"Obraz",video:"Wideo",audio:"Audio",fullScreen:"Pe\u0142ny ekran",showBlocks:"Poka\u017c bloki",codeView:"Widok kodu",undo:"Cofnij",redo:"Pon\xf3w",preview:"Podgl\u0105d",print:"Drukuj",tag_p:"Akapit",tag_div:"Blok (DIV)",tag_h:"Nag\u0142\xf3wek H",tag_blockquote:"Cytat",tag_pre:"Kod",template:"Szablon",lineHeight:"Odst\u0119p mi\u0119dzy wierszami",paragraphStyle:"Styl akapitu",textStyle:"Styl tekstu",imageGallery:"Galeria obraz\xf3w",mention:"Wzmianka"},dialogBox:{linkBox:{title:"Wstaw odno\u015bnik",url:"Adres URL",text:"Tekst do wy\u015bwietlenia",newWindowCheck:"Otw\xf3rz w nowym oknie",downloadLinkCheck:"Link do pobrania",bookmark:"Zak\u0142adka"},mathBox:{title:"Matematyczne",inputLabel:"Zapis matematyczny",fontSizeLabel:"Rozmiar czcionki",previewLabel:"Podgl\u0105d"},imageBox:{title:"Wstaw obraz",file:"Wybierz plik",url:"Adres URL obrazka",altText:"Tekst alternatywny"},videoBox:{title:"Wstaw wideo",file:"Wybierz plik",url:"Adres URL video, np. YouTube/Vimeo"},audioBox:{title:"Wstaw audio",file:"Wybierz plik",url:"Adres URL audio"},browser:{tags:"Tagi",search:"Szukaj"},caption:"Wstaw opis",close:"Zamknij",submitButton:"Zatwierd\u017a",revertButton:"Cofnij zmiany",proportion:"Ogranicz proporcje",basic:"Bez wyr\xf3wnania",left:"Do lewej",right:"Do prawej",center:"Do \u015brodka",width:"Szeroko\u015b\u0107",height:"Wysoko\u015b\u0107",size:"Rozmiar",ratio:"Proporcje"},controller:{edit:"Edycja",unlink:"Usu\u0144 odno\u015bnik",remove:"Usu\u0144",insertRowAbove:"Wstaw wiersz powy\u017cej",insertRowBelow:"Wstaw wiersz poni\u017cej",deleteRow:"Usu\u0144 wiersz",insertColumnBefore:"Wstaw kolumn\u0119 z lewej",insertColumnAfter:"Wstaw kolumn\u0119 z prawej",deleteColumn:"Usu\u0144 kolumn\u0119",fixedColumnWidth:"Sta\u0142a szeroko\u015b\u0107 kolumny",resize100:"Zmie\u0144 rozmiar - 100%",resize75:"Zmie\u0144 rozmiar - 75%",resize50:"Zmie\u0144 rozmiar - 50%",resize25:"Zmie\u0144 rozmiar - 25%",autoSize:"Rozmiar automatyczny",mirrorHorizontal:"Odbicie lustrzane w poziomie",mirrorVertical:"Odbicie lustrzane w pionie",rotateLeft:"Obr\xf3\u0107 w lewo",rotateRight:"Obr\xf3\u0107 w prawo",maxSize:"Maksymalny rozmiar",minSize:"Minimalny rozmiar",tableHeader:"Nag\u0142\xf3wek tabeli",mergeCells:"Scal kom\xf3rki",splitCells:"Podziel kom\xf3rki",HorizontalSplit:"Podzia\u0142 poziomy",VerticalSplit:"Podzia\u0142 pionowy"},menu:{spaced:"Rozstawiony",bordered:"Z obw\xf3dk\u0105",neon:"Neon",translucent:"P\xf3\u0142przezroczysty",shadow:"Cie\u0144",code:"Kod"}},L={code:"pt_br",toolbar:{default:"Padr\xe3o",save:"Salvar",font:"Fonte",formats:"Formatos",fontSize:"Tamanho",bold:"Negrito",underline:"Sublinhado",italic:"It\xe1lico",strike:"Riscado",subscript:"Subescrito",superscript:"Sobrescrito",removeFormat:"Remover Formata\xe7\xe3o",fontColor:"Cor da Fonte",hiliteColor:"Cor de destaque",indent:"Recuo",outdent:"Avan\xe7ar",align:"Alinhar",alignLeft:"Alinhar \xe0 esquerda",alignRight:"Alinhar \xe0 direita",alignCenter:"Alinhar ao centro",alignJustify:"Alinhat justificado",list:"Lista",orderList:"Lista ordenada",unorderList:"Lista desordenada",horizontalRule:"Linha horizontal",hr_solid:"solida",hr_dotted:"pontilhada",hr_dashed:"tracejada",table:"Tabela",link:"Link",math:"Matem\xe1tica",image:"Imagem",video:"V\xeddeo",audio:"\xc1udio",fullScreen:"Tela cheia",showBlocks:"Mostrar blocos",codeView:"Mostrar c\xf3digos",undo:"Voltar",redo:"Refazer",preview:"Prever",print:"imprimir",tag_p:"Paragr\xe1fo",tag_div:"(DIV) Normal",tag_h:"Cabe\xe7alho",tag_blockquote:"Citar",tag_pre:"C\xf3digo",template:"Modelo",lineHeight:"Altura da linha",paragraphStyle:"Estilo do par\xe1grafo",textStyle:"Estilo do texto",imageGallery:"Galeria de imagens",mention:"Men\xe7\xe3o"},dialogBox:{linkBox:{title:"Inserir link",url:"URL para link",text:"Texto \xe0 mostrar",newWindowCheck:"Abrir em nova guia",downloadLinkCheck:"Link para Download",bookmark:"marca p\xe1ginas"},mathBox:{title:"Matem\xe1tica",inputLabel:"Nota\xe7\xe3o matem\xe1tica",fontSizeLabel:"Tamanho",previewLabel:"Prever"},imageBox:{title:"Inserir imagens",file:"Selecionar arquivos",url:"URL da imagem",altText:"Texto alternativo"},videoBox:{title:"Inserir v\xeddeo",file:"Selecionar arquivos",url:"URL do YouTube/Vimeo"},audioBox:{title:"Inserir audio",file:"Selecionar arquivos",url:"URL da audio"},browser:{tags:"Tag",search:"Procurar"},caption:"Inserir descri\xe7\xe3o",close:"Fechar",submitButton:"Enviar",revertButton:"Reverter",proportion:"restringir propor\xe7\xf5es",basic:"B\xe1sico",left:"Esquerda",right:"Direita",center:"Centro",width:"Largura",height:"Altura",size:"Tamanho",ratio:"Propor\xe7\xf5es"},controller:{edit:"Editar",unlink:"Retirar link",remove:"Remover",insertRowAbove:"Inserir linha acima",insertRowBelow:"Inserir linha abaixo",deleteRow:"Deletar linha",insertColumnBefore:"Inserir coluna antes",insertColumnAfter:"Inserir coluna depois",deleteColumn:"Deletar coluna",fixedColumnWidth:"Largura fixa da coluna",resize100:"Redimensionar para 100%",resize75:"Redimensionar para 75%",resize50:"Redimensionar para 50%",resize25:"Redimensionar para 25%",autoSize:"Tamanho autom\xe1tico",mirrorHorizontal:"Espelho, Horizontal",mirrorVertical:"Espelho, Vertical",rotateLeft:"Girar para esquerda",rotateRight:"Girar para direita",maxSize:"Tam max",minSize:"Tam min",tableHeader:"Cabe\xe7alho da tabela",mergeCells:"Mesclar c\xe9lulas",splitCells:"Dividir c\xe9lulas",HorizontalSplit:"Divis\xe3o horizontal",VerticalSplit:"Divis\xe3o vertical"},menu:{spaced:"Espa\xe7ado",bordered:"Com borda",neon:"N\xe9on",translucent:"Transl\xfacido",shadow:"Sombreado",code:"C\xf3digo"}},T={code:"ro",toolbar:{default:"Default",save:"Salveaz\u0103",font:"Font",formats:"Format",fontSize:"Dimensiune",bold:"\xcengro\u0219at",underline:"Subliniat",italic:"\xcenclinat",strike:"T\u0103iat",subscript:"Subscript",superscript:"Superscript",removeFormat:"\u0218terge formatare",fontColor:"Culoare font",hiliteColor:"Culoare de eviden\u021biere",indent:"Indenteaz\u0103",outdent:"F\u0103r\u0103 indentare",align:"Aliniere",alignLeft:"Aliniere la st\xe2nga",alignRight:"Aliniere la dreapta",alignCenter:"Aliniere la centru",alignJustify:"Aliniere st\xe2nga - dreapta",list:"List\u0103",orderList:"List\u0103 ordonat\u0103",unorderList:"List\u0103 neordonat\u0103",horizontalRule:"Linie orizontal\u0103",hr_solid:"Solid",hr_dotted:"Punctat",hr_dashed:"Punctate",table:"Tabel",link:"Link",math:"Matematic\u0103",image:"Imagine",video:"Video",audio:"Audio",fullScreen:"Tot ecranul",showBlocks:"Arat\u0103 blocuri",codeView:"Vizualizare cod",undo:"Anuleaz\u0103",redo:"Ref\u0103",preview:"Previzualizare",print:"printeaz\u0103",tag_p:"Paragraf",tag_div:"Normal (DIV)",tag_h:"Antet",tag_blockquote:"Quote",tag_pre:"Citat",template:"Template",lineHeight:"\xcen\u0103l\u021bime linie",paragraphStyle:"Stil paragraf",textStyle:"Stil text",imageGallery:"Galerie de imagini",mention:"Mentiune"},dialogBox:{linkBox:{title:"Insereaz\u0103 Link",url:"Adres\u0103 link",text:"Text de afi\u0219at",newWindowCheck:"Deschide \xeen fereastr\u0103 nou\u0103",downloadLinkCheck:"Link de desc\u0103rcare",bookmark:"Marcaj"},mathBox:{title:"Matematic\u0103",inputLabel:"Nota\u021bie matematic\u0103",fontSizeLabel:"Dimensiune font",previewLabel:"Previzualizare"},imageBox:{title:"Insereaz\u0103 imagine",file:"Selecteaz\u0103",url:"URL imagine",altText:"text alternativ"},videoBox:{title:"Insereaz\u0103 video",file:"Selecteaz\u0103",url:"Include URL, youtube/vimeo"},audioBox:{title:"Insereaz\u0103 Audio",file:"Selecteaz\u0103",url:"URL Audio"},browser:{tags:"Etichete",search:"C\u0103utareim"},caption:"Insereaz\u0103 descriere",close:"\xcenchide",submitButton:"Salveaz\u0103",revertButton:"Revenire",proportion:"Constr\xe2nge propor\u021biile",basic:"De baz\u0103",left:"St\xe2nga",right:"Dreapta",center:"Centru",width:"L\u0103\u021bime",height:"\xcen\u0103l\u021bime",size:"Dimensiune",ratio:"Ratie"},controller:{edit:"Editeaz\u0103",unlink:"Scoate link",remove:"Elimin\u0103",insertRowAbove:"Insereaz\u0103 r\xe2nd deasupra",insertRowBelow:"Insereaz\u0103 r\xe2nd dedesupt",deleteRow:"\u0218terge linie",insertColumnBefore:"Insereaz\u0103 coloan\u0103 \xeenainte",insertColumnAfter:"Insereaz\u0103 coloan\u0103 dup\u0103",deleteColumn:"\u0218terge coloan\u0103",fixedColumnWidth:"L\u0103\u021bime fix\u0103 coloan\u0103",resize100:"Redimensionare 100%",resize75:"Redimensionare 75%",resize50:"Redimensionare 50%",resize25:"Redimensionare 25%",autoSize:"Dimensiune automat\u0103",mirrorHorizontal:"Oglind\u0103, orizontal",mirrorVertical:"Oglind\u0103, vertical",rotateLeft:"Rote\u0219te la st\xe2nga",rotateRight:"Rote\u0219te la dreapta",maxSize:"Dimensiune maxim\u0103",minSize:"Dimensiune minim\u0103",tableHeader:"Antet tabel",mergeCells:"\xcembin\u0103 celule",splitCells:"Divizeaz\u0103 celule",HorizontalSplit:"Despicare orizontal\u0103",VerticalSplit:"Despicare vertical\u0103"},menu:{spaced:"Spa\u021biat",bordered:"M\u0103rginit",neon:"Neon",translucent:"Translucent",shadow:"Umbr\u0103",code:"Citat"}},N={code:"ru",toolbar:{default:"\u041f\u043e \u0443\u043c\u043e\u043b\u0447\u0430\u043d\u0438\u044e",save:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",font:"\u0428\u0440\u0438\u0444\u0442",formats:"\u0421\u0442\u0438\u043b\u044c \u0430\u0431\u0437\u0430\u0446\u0430",fontSize:"\u0420\u0430\u0437\u043c\u0435\u0440 \u0448\u0440\u0438\u0444\u0442\u0430",bold:"\u041f\u043e\u043b\u0443\u0436\u0438\u0440\u043d\u044b\u0439",underline:"\u041f\u043e\u0434\u0447\u0451\u0440\u043a\u043d\u0443\u0442\u044b\u0439",italic:"\u041a\u0443\u0440\u0441\u0438\u0432",strike:"\u0417\u0430\u0447\u0435\u0440\u043a\u043d\u0443\u0442\u044b\u0439",subscript:"\u041d\u0438\u0436\u043d\u0438\u0439 \u0438\u043d\u0434\u0435\u043a\u0441",superscript:"\u0412\u0435\u0440\u0445\u043d\u0438\u0439 \u0438\u043d\u0434\u0435\u043a\u0441",removeFormat:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0444\u043e\u0440\u043c\u0430\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435",fontColor:"\u0426\u0432\u0435\u0442 \u0442\u0435\u043a\u0441\u0442\u0430",hiliteColor:"\u0426\u0432\u0435\u0442 \u0444\u043e\u043d\u0430",indent:"\u0423\u0432\u0435\u043b\u0438\u0447\u0438\u0442\u044c \u043e\u0442\u0441\u0442\u0443\u043f",outdent:"\u0423\u043c\u0435\u043d\u044c\u0448\u0438\u0442\u044c \u043e\u0442\u0441\u0442\u0443\u043f",align:"\u0412\u044b\u0440\u0430\u0432\u043d\u0438\u0432\u0430\u043d\u0438\u0435",alignLeft:"\u0421\u043b\u0435\u0432\u0430",alignRight:"\u0421\u043f\u0440\u0430\u0432\u0430",alignCenter:"\u041f\u043e \u0446\u0435\u043d\u0442\u0440\u0443",alignJustify:"\u041f\u043e \u0448\u0438\u0440\u0438\u043d\u0435",list:"\u0421\u043f\u0438\u0441\u043a\u0438",orderList:"\u041d\u0443\u043c\u0435\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439",unorderList:"\u041c\u0430\u0440\u043a\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439",horizontalRule:"\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u0430\u044f \u043b\u0438\u043d\u0438\u044f",hr_solid:"\u0421\u043f\u043b\u043e\u0448\u043d\u0430\u044f",hr_dotted:"\u041f\u0443\u043d\u043a\u0442\u0438\u0440",hr_dashed:"\u0428\u0442\u0440\u0438\u0445\u043e\u0432\u0430\u044f",table:"\u0422\u0430\u0431\u043b\u0438\u0446\u0430",link:"\u0421\u0441\u044b\u043b\u043a\u0430",math:"\u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439",image:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",video:"\u0412\u0438\u0434\u0435\u043e",audio:"\u0410\u0443\u0434\u0438\u043e",fullScreen:"\u041f\u043e\u043b\u043d\u044b\u0439 \u044d\u043a\u0440\u0430\u043d",showBlocks:"\u0411\u043b\u043e\u0447\u043d\u044b\u0439 \u0432\u0438\u0434",codeView:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c HTML",undo:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",redo:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c",preview:"\u041f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",print:"\u041f\u0435\u0447\u0430\u0442\u044c",tag_p:"\u0422\u0435\u043a\u0441\u0442",tag_div:"\u0411\u0430\u0437\u043e\u0432\u044b\u0439",tag_h:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",tag_blockquote:"\u0426\u0438\u0442\u0430\u0442\u0430",tag_pre:"\u041a\u043e\u0434",template:"\u0428\u0430\u0431\u043b\u043e\u043d",lineHeight:"\u0412\u044b\u0441\u043e\u0442\u0430 \u043b\u0438\u043d\u0438\u0438",paragraphStyle:"\u0421\u0442\u0438\u043b\u044c \u0430\u0431\u0437\u0430\u0446\u0430",textStyle:"\u0421\u0442\u0438\u043b\u044c \u0442\u0435\u043a\u0441\u0442\u0430",imageGallery:"\u0413\u0430\u043b\u0435\u0440\u0435\u044f",mention:"\u0423\u043f\u043e\u043c\u0438\u043d\u0430\u043d\u0438\u0435"},dialogBox:{linkBox:{title:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443",url:"\u0421\u0441\u044b\u043b\u043a\u0430",text:"\u0422\u0435\u043a\u0441\u0442",newWindowCheck:"\u041e\u0442\u043a\u0440\u044b\u0432\u0430\u0442\u044c \u0432 \u043d\u043e\u0432\u043e\u043c \u043e\u043a\u043d\u0435",downloadLinkCheck:"\u0421\u0441\u044b\u043b\u043a\u0430 \u0434\u043b\u044f \u0441\u043a\u0430\u0447\u0438\u0432\u0430\u043d\u0438\u044f",bookmark:"\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0430"},mathBox:{title:"\u043c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438\u0439",inputLabel:"\u041c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u0437\u0430\u043f\u0438\u0441\u044c",fontSizeLabel:"\u041a\u0435\u0433\u043b\u044c",previewLabel:"\u041f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"},imageBox:{title:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",file:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b",url:"\u0410\u0434\u0440\u0435\u0441 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",altText:"\u0422\u0435\u043a\u0441\u0442\u043e\u0432\u043e\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"},videoBox:{title:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0432\u0438\u0434\u0435\u043e",file:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b",url:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0432\u0438\u0434\u0435\u043e, Youtube,Vimeo"},audioBox:{title:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0430\u0443\u0434\u0438\u043e",file:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b",url:"\u0410\u0434\u0440\u0435\u0441 \u0430\u0443\u0434\u0438\u043e"},browser:{tags:"\u0422\u0435\u0433\u0438",search:"\u041f\u043e\u0438\u0441\u043a"},caption:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u043e\u0434\u043f\u0438\u0441\u044c",close:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",submitButton:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u044c",revertButton:"\u0421\u0431\u0440\u043e\u0441\u0438\u0442\u044c",proportion:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043f\u0440\u043e\u043f\u043e\u0440\u0446\u0438\u0438",basic:"\u0411\u0435\u0437 \u043e\u0431\u0442\u0435\u043a\u0430\u043d\u0438\u044f",left:"\u0421\u043b\u0435\u0432\u0430",right:"\u0421\u043f\u0440\u0430\u0432\u0430",center:"\u041f\u043e \u0446\u0435\u043d\u0442\u0440\u0443",width:"\u0428\u0438\u0440\u0438\u043d\u0430",height:"\u0412\u044b\u0441\u043e\u0442\u0430",size:"\u0420\u0430\u0437\u043c\u0435\u0440",ratio:"\u0421\u043e\u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u0435"},controller:{edit:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c",unlink:"\u0423\u0431\u0440\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443",remove:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",insertRowAbove:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443 \u0432\u044b\u0448\u0435",insertRowBelow:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443 \u043d\u0438\u0436\u0435",deleteRow:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443",insertColumnBefore:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0435\u0446 \u0441\u043b\u0435\u0432\u0430",insertColumnAfter:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0435\u0446 \u0441\u043f\u0440\u0430\u0432\u0430",deleteColumn:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0435\u0446",fixedColumnWidth:"\u0424\u0438\u043a\u0441\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u0448\u0438\u0440\u0438\u043d\u0430 \u0441\u0442\u043e\u043b\u0431\u0446\u0430",resize100:"\u0420\u0430\u0437\u043c\u0435\u0440 100%",resize75:"\u0420\u0430\u0437\u043c\u0435\u0440 75%",resize50:"\u0420\u0430\u0437\u043c\u0435\u0440 50%",resize25:"\u0420\u0430\u0437\u043c\u0435\u0440 25%",autoSize:"\u0410\u0432\u0442\u043e \u0440\u0430\u0437\u043c\u0435\u0440",mirrorHorizontal:"\u041e\u0442\u0440\u0430\u0437\u0438\u0442\u044c \u043f\u043e \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0438",mirrorVertical:"\u041e\u0442\u0440\u0430\u0437\u0438\u0442\u044c \u043f\u043e \u0432\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0438",rotateLeft:"\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043f\u0440\u043e\u0442\u0438\u0432 \u0447\u0430\u0441\u043e\u0432\u043e\u0439 \u0441\u0442\u0440\u0435\u043b\u043a\u0438",rotateRight:"\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u044c \u043f\u043e \u0447\u0430\u0441\u043e\u0432\u043e\u0439 \u0441\u0442\u0440\u0435\u043b\u043a\u0435",maxSize:"\u0428\u0438\u0440\u0438\u043d\u0430 \u043f\u043e \u0440\u0430\u0437\u043c\u0435\u0440\u0443 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b",minSize:"\u0428\u0438\u0440\u0438\u043d\u0430 \u043f\u043e \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u043c\u0443",tableHeader:"\u0421\u0442\u0440\u043e\u043a\u0430 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u043e\u0432",mergeCells:"\u041e\u0431\u044a\u0435\u0434\u0438\u043d\u0438\u0442\u044c \u044f\u0447\u0435\u0439\u043a\u0438",splitCells:"\u0420\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u044c \u044f\u0447\u0435\u0439\u043a\u0443",HorizontalSplit:"\u0420\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u044c \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u043e",VerticalSplit:"\u0420\u0430\u0437\u0434\u0435\u043b\u0438\u0442\u044c \u0432\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u044c\u043d\u043e"},menu:{spaced:"\u0438\u043d\u0442\u0435\u0440\u0432\u0430\u043b",bordered:"\u0413\u0440\u0430\u043d\u0438\u0447\u043d\u0430\u044f \u041b\u0438\u043d\u0438\u044f",neon:"\u043d\u0435\u043e\u043d",translucent:"\u043f\u043e\u043b\u0443\u043f\u0440\u043e\u0437\u0440\u0430\u0447\u043d\u044b\u0439",shadow:"\u0422\u0435\u043d\u044c",code:"\u041a\u043e\u0434"}},B={code:"se",toolbar:{default:"Default",save:"Spara",font:"Typsnitt",formats:"Format",fontSize:"Textstorlek",bold:"Fet",underline:"Understruket",italic:"Kursiv",strike:"\xd6verstruket",subscript:"S\xe4nkt skrift",superscript:"H\xf6jd skrift",removeFormat:"Ta bort formattering",fontColor:"Textf\xe4rg",hiliteColor:"Bakgrundsf\xe4rg",indent:"Minska indrag",outdent:"\xd6ka indrag",align:"Justering",alignLeft:"V\xe4nsterjustering",alignRight:"H\xf6gerjustering",alignCenter:"Mittenjusteirng",alignJustify:"Justera indrag",list:"Listor",orderList:"Numrerad lista",unorderList:"Oordnad lista",horizontalRule:"Horisontell linje",hr_solid:"Solid",hr_dotted:"Punkter",hr_dashed:"Prickad",table:"Tabell",link:"L\xe4nk",math:"Math",image:"Bild",video:"Video",audio:"Ljud",fullScreen:"Helsk\xe4rm",showBlocks:"Visa block",codeView:"Visa koder",undo:"\xc5ngra",redo:"G\xf6r om",preview:"Preview",print:"Print",tag_p:"Paragraf",tag_div:"Normal (DIV)",tag_h:"Rubrik",tag_blockquote:"Citer",tag_pre:"Kod",template:"Mall",lineHeight:"Linjeh\xf6jd",paragraphStyle:"Stil p\xe5 stycke",textStyle:"Textstil",imageGallery:"Bildgalleri",mention:"Namn"},dialogBox:{linkBox:{title:"L\xe4gg till l\xe4nk",url:"URL till l\xe4nk",text:"L\xe4nktext",newWindowCheck:"\xd6ppna i nytt f\xf6nster",downloadLinkCheck:"Nedladdningsl\xe4nk",bookmark:"Bokm\xe4rke"},mathBox:{title:"Math",inputLabel:"Matematisk notation",fontSizeLabel:"Textstorlek",previewLabel:"Preview"},imageBox:{title:"L\xe4gg till bild",file:"L\xe4gg till fr\xe5n fil",url:"L\xe4gg till fr\xe5n URL",altText:"Alternativ text"},videoBox:{title:"L\xe4gg till video",file:"L\xe4gg till fr\xe5n fil",url:"B\xe4dda in video / YouTube,Vimeo"},audioBox:{title:"L\xe4gg till ljud",file:"L\xe4gg till fr\xe5n fil",url:"L\xe4gg till fr\xe5n URL"},browser:{tags:"Tags",search:"S\xf6k"},caption:"L\xe4gg till beskrivning",close:"St\xe4ng",submitButton:"Skicka",revertButton:"\xc5terg\xe5",proportion:"Spara proportioner",basic:"Basic",left:"V\xe4nster",right:"H\xf6ger",center:"Center",width:"Bredd",height:"H\xf6jd",size:"Storlek",ratio:"F\xf6rh\xe5llande"},controller:{edit:"Redigera",unlink:"Ta bort l\xe4nk",remove:"Ta bort",insertRowAbove:"L\xe4gg till rad \xf6ver",insertRowBelow:"L\xe4gg till rad under",deleteRow:"Ta bort rad",insertColumnBefore:"L\xe4gg till kolumn f\xf6re",insertColumnAfter:"L\xe4gg till kolumn efter",deleteColumn:"Ta bort kolumner",fixedColumnWidth:"Fast kolumnbredd",resize100:"F\xf6rstora 100%",resize75:"F\xf6rstora 75%",resize50:"F\xf6rstora 50%",resize25:"F\xf6rstora 25%",autoSize:"Autostorlek",mirrorHorizontal:"Spegling, horisontell",mirrorVertical:"Spegling, vertikal",rotateLeft:"Rotera till v\xe4nster",rotateRight:"Rotera till h\xf6ger",maxSize:"Maxstorlek",minSize:"Minsta storlek",tableHeader:"Rubrik tabell",mergeCells:"Sammanfoga celler (merge)",splitCells:"Separera celler",HorizontalSplit:"Separera horisontalt",VerticalSplit:"Separera vertikalt"},menu:{spaced:"Avst\xe5nd",bordered:"Avgr\xe4nsningslinje",neon:"Neon",translucent:"Genomskinlig",shadow:"Skugga",code:"Kod"}},A={code:"ua",toolbar:{default:"\u041f\u043e \u0437\u0430\u043c\u043e\u0432\u0447\u0443\u0432\u0430\u043d\u043d\u044f\u043c",save:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438",font:"\u0428\u0440\u0438\u0444\u0442",formats:"\u0421\u0442\u0438\u043b\u044c \u0430\u0431\u0437\u0430\u0446\u0443",fontSize:"\u0420\u043e\u0437\u043c\u0456\u0440 \u0448\u0440\u0438\u0444\u0442\u0443",bold:"\u0416\u0438\u0440\u043d\u0438\u0439",underline:"\u041f\u0456\u0434\u043a\u0440\u0435\u0441\u043b\u0435\u043d\u0438\u0439",italic:"\u041a\u0443\u0440\u0441\u0438\u0432",strike:"\u041f\u0435\u0440\u0435\u043a\u0440\u0435\u0441\u043b\u0438\u0442\u0438",subscript:"\u041d\u0438\u0436\u043d\u0456\u0439 \u0456\u043d\u0434\u0435\u043a\u0441",superscript:"\u0412\u0435\u0440\u0445\u043d\u0456\u0439 \u0456\u043d\u0434\u0435\u043a\u0441",removeFormat:"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u0438 \u0444\u043e\u0440\u043c\u0430\u0442\u0443\u0432\u0430\u043d\u043d\u044f",fontColor:"\u041a\u043e\u043b\u0456\u0440 \u0442\u0435\u043a\u0441\u0442\u0443",hiliteColor:"\u041a\u043e\u043b\u0456\u0440 \u0432\u0438\u0434\u0456\u043b\u0435\u043d\u043d\u044f",indent:"\u0417\u0431\u0456\u043b\u044c\u0448\u0438\u0442\u0438 \u0432\u0456\u0434\u0441\u0442\u0443\u043f",outdent:"\u0417\u043c\u0435\u043d\u0448\u0438\u0442\u0438 \u0432\u0456\u0434\u0441\u0442\u0443\u043f",align:"\u0412\u0438\u0440\u0456\u0432\u043d\u044e\u0432\u0430\u043d\u043d\u044f",alignLeft:"\u0417\u0430 \u043b\u0456\u0432\u0438\u043c \u043a\u0440\u0430\u0454\u043c",alignRight:"\u0417\u0430 \u043f\u0440\u0430\u0432\u0438\u043c \u043a\u0440\u0430\u0454\u043c",alignCenter:"\u041f\u043e \u0446\u0435\u043d\u0442\u0440\u0443",alignJustify:"\u0417\u0430 \u0448\u0438\u0440\u0438\u043d\u043e\u044e",list:"\u0421\u043f\u0438\u0441\u043e\u043a",orderList:"\u041d\u0443\u043c\u0435\u0440\u043e\u0432\u0430\u043d\u0438\u0439",unorderList:"\u041c\u0430\u0440\u043a\u043e\u0432\u0430\u043d\u0438\u0439",horizontalRule:"\u0413\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u0430 \u043b\u0456\u043d\u0456\u044f",hr_solid:"\u0421\u0443\u0446\u0456\u043b\u044c\u043d\u0430",hr_dotted:"\u041f\u0443\u043d\u043a\u0442\u0438\u0440\u043d\u0430",hr_dashed:"\u0428\u0442\u0440\u0438\u0445\u043e\u0432\u0430",table:"\u0422\u0430\u0431\u043b\u0438\u0446\u044f",link:"\u041f\u043e\u0441\u0438\u043b\u0430\u043d\u043d\u044f",math:"\u0424\u043e\u0440\u043c\u0443\u043b\u0430",image:"\u0417\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f",video:"\u0412\u0456\u0434\u0435\u043e",audio:"\u0410\u0443\u0434\u0456\u043e",fullScreen:"\u041f\u043e\u0432\u043d\u0438\u0439 \u0435\u043a\u0440\u0430\u043d",showBlocks:"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u0438 \u0431\u043b\u043e\u043a\u0438",codeView:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u0442\u0438 \u044f\u043a HTML",undo:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438",redo:"\u0412\u0438\u043a\u043e\u043d\u0430\u0442\u0438 \u0437\u043d\u043e\u0432\u0443",preview:"\u041f\u043e\u043f\u0435\u0440\u0435\u0434\u043d\u0456\u0439 \u043f\u0435\u0440\u0435\u0433\u043b\u044f\u0434",print:"\u0414\u0440\u0443\u043a",tag_p:"\u0410\u0431\u0437\u0430\u0446",tag_div:"\u0411\u0430\u0437\u043e\u0432\u0438\u0439",tag_h:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",tag_blockquote:"\u0426\u0438\u0442\u0430\u0442\u0430",tag_pre:"\u041a\u043e\u0434",template:"\u0428\u0430\u0431\u043b\u043e\u043d",lineHeight:"\u0412\u0438\u0441\u043e\u0442\u0430 \u043b\u0456\u043d\u0456\u0457",paragraphStyle:"\u0421\u0442\u0438\u043b\u044c \u0430\u0431\u0437\u0430\u0446\u0443",textStyle:"\u0421\u0442\u0438\u043b\u044c \u0442\u0435\u043a\u0441\u0442\u0443",imageGallery:"\u0413\u0430\u043b\u0435\u0440\u0435\u044f",mention:"\u0417\u0433\u0430\u0434\u0430\u0442\u0438"},dialogBox:{linkBox:{title:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u043f\u043e\u0441\u0438\u043b\u0430\u043d\u043d\u044f",url:"\u041f\u043e\u0441\u0438\u043b\u0430\u043d\u043d\u044f",text:"\u0422\u0435\u043a\u0441\u0442",newWindowCheck:"\u0412\u0456\u0434\u043a\u0440\u0438\u0432\u0430\u0442\u0438 \u0432 \u043d\u043e\u0432\u043e\u043c\u0443 \u0432\u0456\u043a\u043d\u0456",downloadLinkCheck:"\u041f\u043e\u0441\u0438\u043b\u0430\u043d\u043d\u044f \u0434\u043b\u044f \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f",bookmark:"\u0417\u0430\u043a\u043b\u0430\u0434\u043a\u0430"},mathBox:{title:"\u0424\u043e\u0440\u043c\u0443\u043b\u0430",inputLabel:"\u041c\u0430\u0442\u0435\u043c\u0430\u0442\u0438\u0447\u043d\u0430 \u0437\u0430\u043f\u0438\u0441",fontSizeLabel:"\u0420\u043e\u0437\u043c\u0456\u0440 \u0448\u0440\u0438\u0444\u0442\u0443",previewLabel:"\u041f\u043e\u043f\u0435\u0440\u0435\u0434\u043d\u0456\u0439 \u043f\u0435\u0440\u0435\u0433\u043b\u044f\u0434"},imageBox:{title:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f",file:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0444\u0430\u0439\u043b",url:"\u041f\u043e\u0441\u0438\u043b\u0430\u043d\u043d\u044f \u043d\u0430 \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f",altText:"\u0422\u0435\u043a\u0441\u0442\u043e\u0432\u0438\u0439 \u043e\u043f\u0438\u0441 \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f"},videoBox:{title:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u0432\u0456\u0434\u0435\u043e",file:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0444\u0430\u0439\u043b",url:"\u041f\u043e\u0441\u0438\u043b\u0430\u043d\u043d\u044f \u043d\u0430 \u0432\u0456\u0434\u0435\u043e, Youtube, Vimeo"},audioBox:{title:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u0430\u0443\u0434\u0456\u043e",file:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0444\u0430\u0439\u043b",url:"\u041f\u043e\u0441\u0438\u043b\u0430\u043d\u043d\u044f \u043d\u0430 \u0430\u0443\u0434\u0456\u043e"},browser:{tags:"\u0422\u0435\u0433\u0438",search:"\u041f\u043e\u0448\u0443\u043a"},caption:"\u0414\u043e\u0434\u0430\u0442\u0438 \u043f\u0456\u0434\u043f\u0438\u0441",close:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438",submitButton:"\u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438",revertButton:"\u0421\u043a\u0438\u043d\u0443\u0442\u0438",proportion:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u043f\u0440\u043e\u043f\u043e\u0440\u0446\u0456\u0457",basic:"\u0411\u0435\u0437 \u043e\u0431\u0442\u0456\u043a\u0430\u043d\u043d\u044f",left:"\u0417\u043b\u0456\u0432\u0430",right:"\u0421\u043f\u0440\u0430\u0432\u0430",center:"\u041f\u043e \u0446\u0435\u043d\u0442\u0440\u0443",width:"\u0428\u0438\u0440\u0438\u043d\u0430",height:"\u0412\u0438\u0441\u043e\u0442\u0430",size:"\u0420\u043e\u0437\u043c\u0456\u0440",ratio:"\u0421\u043f\u0456\u0432\u0432\u0456\u0434\u043d\u043e\u0448\u0435\u043d\u043d\u044f"},controller:{edit:"\u0417\u043c\u0456\u043d\u0438\u0442\u0438",unlink:"\u041f\u0440\u0438\u0431\u0440\u0430\u0442\u0438 \u043f\u043e\u0441\u0438\u043b\u0430\u043d\u043d\u044f",remove:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438",insertRowAbove:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u0440\u044f\u0434\u043e\u043a \u0432\u0438\u0449\u0435",insertRowBelow:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u0440\u044f\u0434\u043e\u043a \u043d\u0438\u0436\u0447\u0435",deleteRow:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0440\u044f\u0434\u043e\u043a",insertColumnBefore:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u0441\u0442\u043e\u0432\u043f\u0435\u0446\u044c \u0437\u043b\u0456\u0432\u0430",insertColumnAfter:"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u0441\u0442\u043e\u0432\u043f\u0435\u0446\u044c \u0441\u043f\u0440\u0430\u0432\u0430",deleteColumn:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0441\u0442\u043e\u0432\u043f\u0435\u0446\u044c",fixedColumnWidth:"\u0424\u0456\u043a\u0441\u043e\u0432\u0430\u043d\u0430 \u0448\u0438\u0440\u0438\u043d\u0430 \u0441\u0442\u043e\u0432\u043f\u0446\u044f",resize100:"\u0420\u043e\u0437\u043c\u0456\u0440 100%",resize75:"\u0420\u043e\u0437\u043c\u0456\u0440 75%",resize50:"\u0420\u043e\u0437\u043c\u0456\u0440 50%",resize25:"\u0420\u043e\u0437\u043c\u0456\u0440 25%",autoSize:"\u0410\u0432\u0442\u043e \u0440\u043e\u0437\u043c\u0456\u0440",mirrorHorizontal:"\u0412\u0456\u0434\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u0438 \u043f\u043e \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u0456",mirrorVertical:"\u0412\u0456\u0434\u043e\u0431\u0440\u0430\u0437\u0438\u0442\u0438 \u043f\u043e \u0432\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u0456",rotateLeft:"\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u0438 \u043f\u0440\u043e\u0442\u0438 \u0433\u043e\u0434\u0438\u043d\u043d\u0438\u043a\u043e\u0432\u043e\u0457 \u0441\u0442\u0440\u0456\u043b\u043a\u0438",rotateRight:"\u041f\u043e\u0432\u0435\u0440\u043d\u0443\u0442\u0438 \u0437\u0430 \u0433\u043e\u0434\u0438\u043d\u043d\u0438\u043a\u043e\u0432\u043e\u044e \u0441\u0442\u0440\u0456\u043b\u043a\u043e\u044e",maxSize:"\u0428\u0438\u0440\u0438\u043d\u0430 \u0437\u0430 \u0440\u043e\u0437\u043c\u0456\u0440\u043e\u043c \u0441\u0442\u043e\u0440\u0456\u043d\u043a\u0438",minSize:"\u0428\u0438\u0440\u0438\u043d\u0430 \u0437\u0430 \u0432\u043c\u0456\u0441\u0442\u043e\u043c",tableHeader:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0442\u0430\u0431\u043b\u0438\u0446\u0456",mergeCells:"\u041e\u0431'\u0454\u0434\u043d\u0430\u0442\u0438 \u043a\u043b\u0456\u0442\u0438\u043d\u043a\u0438",splitCells:"\u0420\u043e\u0437\u0434\u0456\u043b\u0438\u0442\u0438 \u043a\u043b\u0456\u0442\u0438\u043d\u043a\u0443",HorizontalSplit:"\u0420\u043e\u0437\u0434\u0456\u043b\u0438\u0442\u0438 \u0433\u043e\u0440\u0438\u0437\u043e\u043d\u0442\u0430\u043b\u044c\u043d\u043e",VerticalSplit:"\u0420\u043e\u0437\u0434\u0456\u043b\u0438\u0442\u0438 \u0432\u0435\u0440\u0442\u0438\u043a\u0430\u043b\u044c\u043d\u043e"},menu:{spaced:"\u0406\u043d\u0442\u0435\u0440\u0432\u0430\u043b",bordered:"\u0417 \u043b\u0456\u043d\u0456\u044f\u043c\u0438",neon:"\u041d\u0435\u043e\u043d",translucent:"\u041d\u0430\u043f\u0456\u0432\u043f\u0440\u043e\u0437\u043e\u0440\u0438\u0439",shadow:"\u0422\u0456\u043d\u044c",code:"\u041a\u043e\u0434"}},M={code:"zh_cn",toolbar:{default:"\u9ed8\u8ba4",save:"\u4fdd\u5b58",font:"\u5b57\u4f53",formats:"\u683c\u5f0f",fontSize:"\u5b57\u53f7",bold:"\u7c97\u4f53",underline:"\u4e0b\u5212\u7ebf",italic:"\u659c\u4f53",strike:"\u5220\u9664\u7ebf",subscript:"\u4e0b\u6807",superscript:"\u4e0a\u6807",removeFormat:"\u6e05\u9664\u683c\u5f0f",fontColor:"\u5b57\u4f53\u989c\u8272",hiliteColor:"\u80cc\u666f\u989c\u8272",indent:"\u589e\u52a0\u7f29\u8fdb",outdent:"\u51cf\u5c11\u7f29\u8fdb",align:"\u5bf9\u9f50\u65b9\u5f0f",alignLeft:"\u5de6\u5bf9\u9f50",alignRight:"\u53f3\u5bf9\u9f50",alignCenter:"\u5c45\u4e2d",alignJustify:"\u4e24\u7aef\u5bf9\u9f50",list:"\u5217\u8868",orderList:"\u6709\u5e8f\u5217\u8868",unorderList:"\u65e0\u5e8f\u5217\u8868",horizontalRule:"\u6c34\u5e73\u7ebf",hr_solid:"\u5b9e\u7ebf",hr_dotted:"\u70b9\u7ebf",hr_dashed:"\u865a\u7ebf",table:"\u8868\u683c",link:"\u8d85\u94fe\u63a5",math:"\u6570\u5b66",image:"\u56fe\u7247",video:"\u89c6\u9891",audio:"\u97f3\u9891",fullScreen:"\u5168\u5c4f",showBlocks:"\u663e\u793a\u5757\u533a\u57df",codeView:"\u4ee3\u7801\u89c6\u56fe",undo:"\u64a4\u6d88",redo:"\u6062\u590d",preview:"\u9884\u89c8",print:"\u6253\u5370",tag_p:"\u6bb5\u843d",tag_div:"\u6b63\u6587 (DIV)",tag_h:"\u6807\u9898",tag_blockquote:"\u5f15\u7528",tag_pre:"\u4ee3\u7801",template:"\u6a21\u677f",lineHeight:"\u884c\u9ad8",paragraphStyle:"\u6bb5\u843d\u6837\u5f0f",textStyle:"\u6587\u5b57\u6837\u5f0f",imageGallery:"\u56fe\u7247\u5e93",mention:"\u63d0\u5230"},dialogBox:{linkBox:{title:"\u63d2\u5165\u8d85\u94fe\u63a5",url:"\u7f51\u5740",text:"\u5b57\u4f53",newWindowCheck:"\u5728\u65b0\u6807\u7b7e\u9875\u4e2d\u6253\u5f00",downloadLinkCheck:"\u4e0b\u8f7d\u94fe\u63a5",bookmark:"\u4e66\u7b7e"},mathBox:{title:"\u6570\u5b66",inputLabel:"\u6570\u5b66\u7b26\u53f7",fontSizeLabel:"\u5b57\u53f7",previewLabel:"\u9884\u89c8"},imageBox:{title:"\u63d2\u5165\u56fe\u7247",file:"\u4e0a\u4f20\u56fe\u7247",url:"\u56fe\u7247\u7f51\u5740",altText:"\u66ff\u6362\u6587\u5b57"},videoBox:{title:"\u63d2\u5165\u89c6\u9891",file:"\u4e0a\u4f20\u56fe\u7247",url:"\u5d4c\u5165\u7f51\u5740, Youtube,Vimeo"},audioBox:{title:"\u63d2\u5165\u97f3\u9891",file:"\u4e0a\u4f20\u56fe\u7247",url:"\u97f3\u9891\u7f51\u5740"},browser:{tags:"\u6807\u7b7e",search:"\u641c\u7d22"},caption:"\u6807\u9898",close:"\u53d6\u6d88",submitButton:"\u786e\u5b9a",revertButton:"\u6062\u590d",proportion:"\u7ea6\u675f\u6bd4\u4f8b",basic:"\u57fa\u672c",left:"\u5de6",right:"\u53f3",center:"\u5c45\u4e2d",width:"\u5bbd\u5ea6",height:"\u9ad8\u5ea6",size:"\u5c3a\u5bf8",ratio:"\u6bd4\u4f8b"},controller:{edit:"\u7f16\u8f91",unlink:"\u53bb\u9664\u94fe\u63a5",remove:"\u5220\u9664",insertRowAbove:"\u5728\u4e0a\u65b9\u63d2\u5165",insertRowBelow:"\u5728\u4e0b\u65b9\u63d2\u5165",deleteRow:"\u5220\u9664\u884c",insertColumnBefore:"\u5728\u5de6\u4fa7\u63d2\u5165",insertColumnAfter:"\u5728\u53f3\u4fa7\u63d2\u5165",deleteColumn:"\u5220\u9664\u5217",fixedColumnWidth:"\u56fa\u5b9a\u5217\u5bbd",resize100:"\u653e\u5927 100%",resize75:"\u653e\u5927 75%",resize50:"\u653e\u5927 50%",resize25:"\u653e\u5927 25%",mirrorHorizontal:"\u7ffb\u8f6c\u5de6\u53f3",mirrorVertical:"\u7ffb\u8f6c\u4e0a\u4e0b",rotateLeft:"\u5411\u5de6\u65cb\u8f6c",rotateRight:"\u5411\u53f3\u65cb\u8f6c",maxSize:"\u6700\u5927\u5c3a\u5bf8",minSize:"\u6700\u5c0f\u5c3a\u5bf8",tableHeader:"\u8868\u683c\u6807\u9898",mergeCells:"\u5408\u5e76\u5355\u5143\u683c",splitCells:"\u5206\u5272\u5355\u5143\u683c",HorizontalSplit:"\u6c34\u5e73\u5206\u5272",VerticalSplit:"\u5782\u76f4\u5206\u5272"},menu:{spaced:"\u95f4\u9694\u5f00",bordered:"\u8fb9\u754c\u7ebf",neon:"\u9713\u8679\u706f",translucent:"\u534a\u900f\u660e",shadow:"\u9634\u5f71",code:"\u4ee3\u7801"}},I={init:function(e,t){"object"!==typeof t&&(t={}),this.initOptions(e,t);const i=document.createElement("DIV");i.className="kothing-editor"+(t.rtl?" ke-rtl":""),e.id&&(i.id="kothing-editor_"+e.id);const n=document.createElement("DIV");n.className="ke-container";const l=this.createToolBar(t.toolbarItem,t.plugins,t);l.element.style.visibility="hidden",l.pluginCallButtons.math&&this.checkKatexMath(t.katex);const o=document.createElement("DIV");o.className="ke-arrow";const s=document.createElement("DIV");s.className="ke-toolbar-sticky-dummy";const a=document.createElement("DIV");a.className="ke-wrapper";const r=this.initElements(t,i,l.element,o),c=r.bottomBar,d=r.wysiwygFrame,u=r.placeholder;let h=r.codeView;const g=c.resizingBar,p=c.navigation,m=c.charWrapper,f=c.charCounter,b=document.createElement("DIV");b.className="ke-loading-box kothing-editor-common",b.innerHTML='<div class="ke-loading-effect"></div>';const v=document.createElement("DIV");v.className="ke-line-breaker",v.innerHTML='<button class="ke-btn">'+t.icons.line_break+"</button>";const y=document.createElement("DIV");y.className+="ke-line-breaker-component";const k=y.cloneNode(!0);y.innerHTML=k.innerHTML=t.icons.line_break;const w=document.createElement("DIV");w.className="ke-resizing-back";const C=t.toolbarContainer;return C&&C.appendChild(l.element),a.appendChild(h),u&&a.appendChild(u),C||n.appendChild(l.element),n.appendChild(s),n.appendChild(a),n.appendChild(w),n.appendChild(b),n.appendChild(v),n.appendChild(y),n.appendChild(k),g&&n.appendChild(g),i.appendChild(n),h=this.checkCodeMirror(t,h),{constructed:{top:i,relative:n,toolBar:l.element,menuTray:l.menuTray,editorArea:a,wysiwygArea:d,codeArea:h,placeholder:u,resizingBar:g,navigation:p,charWrapper:m,charCounter:f,loading:b,lineBreaker:v,lineBreaker_t:y,lineBreaker_b:k,resizeBack:w,stickyDummy:s,arrow:o},options:t,plugins:l.plugins,pluginCallButtons:l.pluginCallButtons,responsiveButtons:l.responsiveButtons}},getLang:function(e){const t={ckb:f,da:b,de:v,en:y,es:k,fr:w,he:C,it:x,ja:_,ko:S,lv:E,pl:z,pt_br:L,ro:T,ru:N,se:B,ua:A,zh_cn:M};let i="string"===typeof e?e:"en";return Object.keys(t).includes(i)?t[i]:t.en},checkCodeMirror:function(e,t){if(e.codeMirror){const i=[{mode:"htmlmixed",htmlMode:!0,lineNumbers:!0,lineWrapping:!0},e.codeMirror.options||{}].reduce((function(e,t){for(let i in t)s.hasOwn(t,i)&&(e[i]=t[i]);return e}),{});"auto"===e.height&&(i.viewportMargin=1/0,i.height="auto");const n=e.codeMirror.src.fromTextArea(t,i);n.display.wrapper.style.cssText=t.style.cssText,e.codeMirrorEditor=n,(t=n.display.wrapper).className+=" ke-wrapper-code-mirror"}return t},checkKatexMath:function(e){if(!e)throw Error('[KothingEditor.create.fail] To use the math button you need to add a "katex" object to the options.');const t=[{throwOnError:!1},e.options||{}].reduce((function(e,t){for(let i in t)s.hasOwn(t,i)&&(e[i]=t[i]);return e}),{});e.options=t},setOptions:function(e,t,i){this.initOptions(t.element.originElement,e);const n=t.element,l=n.relative,o=n.editorArea,a=e.toolbarContainer&&e.toolbarContainer!==i.toolbarContainer,r="string"===s.typeOf(i.lang)?this.getLang(i.lang):"object"===s.typeOf(i.lang)?this.getLang(i.lang.code):this.getLang("en"),c=e.lang!==r||e.toolbarItem!==i.toolbarItem||e.mode!==i.mode||a,d=this.createToolBar(c?e.toolbarItem:i.toolbarItem,e.plugins,e);d.pluginCallButtons.math&&this.checkKatexMath(e.katex);const u=document.createElement("DIV");u.className="ke-arrow",c&&(d.element.style.visibility="hidden",a?(e.toolbarContainer.appendChild(d.element),n.toolbar.parentElement.removeChild(n.toolbar)):n.toolbar.parentElement.replaceChild(d.element,n.toolbar),n.toolbar=d.element,n.menuTray=d.menuTray,n.arrow=u);const h=this.initElements(e,n.topArea,c?d.element:n.toolbar,u),g=h.bottomBar,p=h.wysiwygFrame,m=h.placeholder;let f=h.codeView;return n.resizingBar&&l.removeChild(n.resizingBar),g.resizingBar&&l.appendChild(g.resizingBar),o.innerHTML="",o.appendChild(f),m&&o.appendChild(m),f=this.checkCodeMirror(e,f),n.resizingBar=g.resizingBar,n.navigation=g.navigation,n.charWrapper=g.charWrapper,n.charCounter=g.charCounter,n.wysiwygFrame=p,n.code=f,n.placeholder=m,e.rtl?s.addClass(n.topArea,"ke-rtl"):s.removeClass(n.topArea,"ke-rtl"),{callButtons:d.pluginCallButtons,plugins:d.plugins,toolbar:d}},initElements:function(e,t,i,n){t.style.cssText=e.editorStyles.top,/inline/i.test(e.mode)?(i.className+=" ke-toolbar-inline",i.style.width=e.toolbarWidth):/balloon/i.test(e.mode)&&(i.className+=" ke-toolbar-balloon",i.style.width=e.toolbarWidth,i.appendChild(n));const l=document.createElement(e.iframe?"IFRAME":"DIV");l.className="ke-wrapper-inner ke-wrapper-wysiwyg",e.iframe?(l.allowFullscreen=!0,l.frameBorder=0,l.style.cssText=e.editorStyles.frame):(l.setAttribute("contenteditable","true"),l.setAttribute("scrolling","auto"),l.className+=" "+e.editableClass,l.style.cssText=e.editorStyles.frame+e.editorStyles.editor);const o=document.createElement("TEXTAREA");o.className="ke-wrapper-inner ke-wrapper-code",o.style.cssText=e.editorStyles.frame,o.style.display="none","auto"===e.height&&(o.style.overflow="hidden");let s=null,a=null,r=null,c=null,d=null,u=null;if(e.resizingBar){if(s=document.createElement("DIV"),s.className="ke-resizing-bar",/\d+/.test(e.height)&&(a=document.createElement("DIV"),a.className="ke-resizing-icon",s.appendChild(a)),r=document.createElement("DIV"),r.className="ke-navigation",s.appendChild(r),e.charCounter){if(c=document.createElement("DIV"),c.className="ke-char-counter-wrapper",e.charCounterLabel){const t=document.createElement("SPAN");t.className="ke-char-label",t.textContent=e.charCounterLabel,c.appendChild(t)}if(d=document.createElement("SPAN"),d.className="ke-char-counter",d.textContent="0",c.appendChild(d),e.maxCharCount>0){const t=document.createElement("SPAN");t.textContent=" / "+e.maxCharCount,c.appendChild(t)}s.appendChild(c)}u=document.createElement("DIV"),u.className="ke-powered-by",u.innerHTML='<a href="https://github.com/kothing/kothing-editor" target="_blank" title="Kothing-Editor">Powered By Kothing</a>',s.appendChild(u)}let h=null;return e.placeholder&&(h=document.createElement("SPAN"),h.className="ke-placeholder",h.innerText=e.placeholder),{bottomBar:{resizingBar:s,navigation:r,charWrapper:c,charCounter:d},wysiwygFrame:l,codeView:o,placeholder:h}},initOptions:function(e,t){t.lang="string"===s.typeOf(t.lang)?this.getLang(t.lang):"object"===s.typeOf(t.lang)?this.getLang(t.lang.code):this.getLang("en"),t.defaultTag="string"===typeof t.defaultTag?t.defaultTag:"p";const i=t.textTags=[{bold:"STRONG",underline:"U",italic:"EM",strike:"DEL",sub:"SUB",sup:"SUP"},t.textTags||{}].reduce((function(e,t){for(let i in t)e[i]=t[i];return e}),{});t.textTagsMap={strong:i.bold.toLowerCase(),b:i.bold.toLowerCase(),u:i.underline.toLowerCase(),ins:i.underline.toLowerCase(),em:i.italic.toLowerCase(),i:i.italic.toLowerCase(),del:i.strike.toLowerCase(),strike:i.strike.toLowerCase(),s:i.strike.toLowerCase(),sub:i.sub.toLowerCase(),sup:i.sup.toLowerCase()},t.value="string"===typeof t.value?t.value:null,t.historyStackDelayTime="number"===typeof t.historyStackDelayTime?t.historyStackDelayTime:400;t.defaultTagsWhitelist="string"===typeof t.defaultTagsWhitelist?t.defaultTagsWhitelist:"br|p|div|pre|blockquote|h1|h2|h3|h4|h5|h6|ol|ul|li|hr|figure|figcaption|img|iframe|audio|video|source|table|thead|tbody|tr|th|td|a|b|strong|var|i|em|u|ins|s|span|strike|del|sub|sup|code|svg|path",t.editorTagsWhitelist=this.setWhitelist(t.defaultTagsWhitelist+("string"===typeof t.addTagsWhitelist&&t.addTagsWhitelist.length>0?"|"+t.addTagsWhitelist:""),t.tagsBlacklist),t.pasteTagsWhitelist=this.setWhitelist("string"===typeof t.pasteTagsWhitelist?t.pasteTagsWhitelist:t.editorTagsWhitelist,t.pasteTagsBlacklist),t.attributesWhitelist=t.attributesWhitelist&&"object"===typeof t.attributesWhitelist?t.attributesWhitelist:null,t.mode=t.mode||"classic",t.rtl=!!t.rtl,t.editableClass="kothing-editor-editable"+(t.rtl?" ke-rtl":""),t.printClass="string"===typeof t.printClass?t.printClass:null,t.toolbarWidth=t.toolbarWidth?s.isNumber(t.toolbarWidth)?t.toolbarWidth+"px":t.toolbarWidth:"auto",t.toolbarContainer="string"===typeof t.toolbarContainer?document.querySelector(t.toolbarContainer):t.toolbarContainer,t.stickyToolbar=/balloon/i.test(t.mode)||t.toolbarContainer?-1:void 0===t.stickyToolbar?0:/^\d+/.test(t.stickyToolbar)?s.getNumber(t.stickyToolbar,0):-1,t.fullScreenOffset=void 0===t.fullScreenOffset?0:/^\d+/.test(t.fullScreenOffset)?s.getNumber(t.fullScreenOffset,0):0,t.iframe=t.fullPage||t.iframe,t.fullPage=!!t.fullPage,t.iframeCSSFileName=t.iframe?"string"===typeof t.iframeCSSFileName?[t.iframeCSSFileName]:t.iframeCSSFileName||["kothing-editor"]:null,t.previewTemplate="string"===typeof t.previewTemplate?t.previewTemplate:null,t.printTemplate="string"===typeof t.printTemplate?t.printTemplate:null,t.codeMirror=t.codeMirror?t.codeMirror.src?t.codeMirror:{src:t.codeMirror}:null,t.katex=t.katex?t.katex.src?t.katex:{src:t.katex}:null,t.mathFontSize=t.mathFontSize?t.mathFontSize:[{text:"1",value:"1em"},{text:"1.5",value:"1.5em"},{text:"2",value:"2em"},{text:"2.5",value:"2.5em"}],t.position="string"===typeof t.position?t.position:null,t.display=t.display||("none"!==e.style.display&&e.style.display?e.style.display:"block"),t.popupDisplay=t.popupDisplay||"full",t.resizingBar=void 0===t.resizingBar?!/inline|balloon/i.test(t.mode):t.resizingBar,t.showPathLabel=!!t.resizingBar&&("boolean"!==typeof t.showPathLabel||t.showPathLabel),t.charCounter=t.maxCharCount>0||"boolean"===typeof t.charCounter&&t.charCounter,t.charCounterType="string"===typeof t.charCounterType?t.charCounterType:"char",t.charCounterLabel="string"===typeof t.charCounterLabel?t.charCounterLabel.trim():null,t.maxCharCount=s.isNumber(t.maxCharCount)&&t.maxCharCount>-1?1*t.maxCharCount:null,t.width=t.width?s.isNumber(t.width)?t.width+"px":t.width:e.clientWidth?e.clientWidth+"px":"100%",t.minWidth=(s.isNumber(t.minWidth)?t.minWidth+"px":t.minWidth)||"",t.maxWidth=(s.isNumber(t.maxWidth)?t.maxWidth+"px":t.maxWidth)||"",t.height=t.height?s.isNumber(t.height)?t.height+"px":t.height:e.clientHeight?e.clientHeight+"px":"auto",t.minHeight=(s.isNumber(t.minHeight)?t.minHeight+"px":t.minHeight)||"",t.maxHeight=(s.isNumber(t.maxHeight)?t.maxHeight+"px":t.maxHeight)||"",t.defaultStyle="string"===typeof t.defaultStyle?t.defaultStyle:"",t.font=t.font?t.font:null,t.fontSize=t.fontSize?t.fontSize:null,t.formats=t.formats?t.formats:null,t.colorList=t.colorList?t.colorList:null,t.lineHeights=t.lineHeights?t.lineHeights:null,t.paragraphStyles=t.paragraphStyles?t.paragraphStyles:null,t.textStyles=t.textStyles?t.textStyles:null,t.fontSizeUnit="string"===typeof t.fontSizeUnit&&t.fontSizeUnit.trim()||"px",t.imageResizing=void 0===t.imageResizing||t.imageResizing,t.imageHeightShow=void 0===t.imageHeightShow||!!t.imageHeightShow,t.imageWidth=t.imageWidth?s.isNumber(t.imageWidth)?t.imageWidth+"px":t.imageWidth:"auto",t.imageHeight=t.imageHeight?s.isNumber(t.imageHeight)?t.imageHeight+"px":t.imageHeight:"auto",t.imageSizeOnlyPercentage=!!t.imageSizeOnlyPercentage,t.imageSizeUnit=t.imageSizeOnlyPercentage?"%":"px",t.imageRotation=void 0!==t.imageRotation?t.imageRotation:!(t.imageSizeOnlyPercentage||!t.imageHeightShow),t.imageFileInput=void 0===t.imageFileInput||t.imageFileInput,t.imageUrlInput=void 0===t.imageUrlInput||!t.imageFileInput||t.imageUrlInput,t.imageUploadHeader=t.imageUploadHeader||null,t.imageUploadUrl="string"===typeof t.imageUploadUrl?t.imageUploadUrl:null,t.imageUploadSizeLimit=/\d+/.test(t.imageUploadSizeLimit)?s.getNumber(t.imageUploadSizeLimit,0):null,t.imageMultipleFile=!!t.imageMultipleFile,t.imageAccept="string"!==typeof t.imageAccept||"*"===t.imageAccept.trim()?"image/*":t.imageAccept.trim()||"image/*",t.imageGalleryUrl="string"===typeof t.imageGalleryUrl?t.imageGalleryUrl:null,t.imageGalleryHeader=t.imageGalleryHeader||null,t.videoResizing=void 0===t.videoResizing||t.videoResizing,t.videoHeightShow=void 0===t.videoHeightShow||!!t.videoHeightShow,t.videoRatioShow=void 0===t.videoRatioShow||!!t.videoRatioShow,t.videoWidth=t.videoWidth&&s.getNumber(t.videoWidth,0)?s.isNumber(t.videoWidth)?t.videoWidth+"px":t.videoWidth:"",t.videoHeight=t.videoHeight&&s.getNumber(t.videoHeight,0)?s.isNumber(t.videoHeight)?t.videoHeight+"px":t.videoHeight:"",t.videoSizeOnlyPercentage=!!t.videoSizeOnlyPercentage,t.videoSizeUnit=t.videoSizeOnlyPercentage?"%":"px",t.videoRotation=void 0!==t.videoRotation?t.videoRotation:!(t.videoSizeOnlyPercentage||!t.videoHeightShow),t.videoRatio=s.getNumber(t.videoRatio,4)||.5625,t.videoRatioList=t.videoRatioList?t.videoRatioList:null,t.youtubeQuery=(t.youtubeQuery||"").replace("?",""),t.videoFileInput=!!t.videoFileInput,t.videoUrlInput=void 0===t.videoUrlInput||!t.videoFileInput||t.videoUrlInput,t.videoUploadHeader=t.videoUploadHeader||null,t.videoUploadUrl="string"===typeof t.videoUploadUrl?t.videoUploadUrl:null,t.videoUploadSizeLimit=/\d+/.test(t.videoUploadSizeLimit)?s.getNumber(t.videoUploadSizeLimit,0):null,t.videoMultipleFile=!!t.videoMultipleFile,t.videoTagAttrs=t.videoTagAttrs||null,t.videoIframeAttrs=t.videoIframeAttrs||null,t.videoAccept="string"!==typeof t.videoAccept||"*"===t.videoAccept.trim()?"video/*":t.videoAccept.trim()||"video/*",t.audioWidth=t.audioWidth?s.isNumber(t.audioWidth)?t.audioWidth+"px":t.audioWidth:"",t.audioHeight=t.audioHeight?s.isNumber(t.audioHeight)?t.audioHeight+"px":t.audioHeight:"",t.audioFileInput=!!t.audioFileInput,t.audioUrlInput=void 0===t.audioUrlInput||!t.audioFileInput||t.audioUrlInput,t.audioUploadHeader=t.audioUploadHeader||null,t.audioUploadUrl="string"===typeof t.audioUploadUrl?t.audioUploadUrl:null,t.audioUploadSizeLimit=/\d+/.test(t.audioUploadSizeLimit)?s.getNumber(t.audioUploadSizeLimit,0):null,t.audioMultipleFile=!!t.audioMultipleFile,t.audioTagAttrs=t.audioTagAttrs||null,t.audioAccept="string"!==typeof t.audioAccept||"*"===t.audioAccept.trim()?"audio/*":t.audioAccept.trim()||"audio/*",t.tableCellControllerPosition="string"===typeof t.tableCellControllerPosition?t.tableCellControllerPosition.toLowerCase():"cell",t.linkProtocol="string"===typeof t.linkProtocol?t.linkProtocol:null,t.linkRel=Array.isArray(t.linkRel)?t.linkRel:[],t.linkRelDefault=t.linkRelDefault||{},t.tabDisable=!!t.tabDisable,t.shortcutsDisable=Array.isArray(t.shortcutsDisable)?t.shortcutsDisable:[],t.shortcutsHint=void 0===t.shortcutsHint||!!t.shortcutsHint,t.callBackSave=t.callBackSave?t.callBackSave:null,t.templates=t.templates?t.templates:null,t.placeholder="string"===typeof t.placeholder?t.placeholder:null,t.mediaAutoSelect=void 0===t.mediaAutoSelect||!!t.mediaAutoSelect,t.toolbarItem=t.toolbarItem?t.toolbarItem:[["undo","redo"],["bold","underline","italic","strike","subscript","superscript"],["removeFormat"],["outdent","indent"],["fullScreen","showBlocks","codeView"],["preview","print"]],t.rtl&&(t.toolbarItem=t.toolbarItem.reverse()),t.icons=t.icons&&"object"===typeof t.icons?[m,t.icons].reduce((function(e,t){for(let i in t)s.hasOwn(t,i)&&(e[i]=t[i]);return e}),{}):m,t.icons=t.rtl?[t.icons,t.icons.rtl].reduce((function(e,t){for(let i in t)s.hasOwn(t,i)&&(e[i]=t[i]);return e}),{}):t.icons,t.editorStyles=s.setDefaultOptionStyle(t,t.defaultStyle)},setWhitelist:function(e,t){if("string"!==typeof t)return e;t=t.split("|"),e=e.split("|");for(let i,n=0,l=t.length;n<l;n++)i=e.indexOf(t[n]),i>-1&&e.splice(i,1);return e.join("|")},createDefaultToolbarItems:function(e){const t=e.icons,i="string"===s.typeOf(e.lang)?this.getLang(e.lang):"object"===s.typeOf(e.lang)?this.getLang(e.lang.code):this.getLang("en"),n=s.isOSX_IOS?"\u2318":"CTRL",l=s.isOSX_IOS?"\u21e7":"+SHIFT",o=e.shortcutsHint?e.shortcutsDisable:["bold","strike","underline","italic","undo","indent","save"],a=e.rtl?["[","]"]:["]","["];return{bold:["_ke_command_bold",i.toolbar.bold+' <span class="ke-shortcut">'+(o.indexOf("bold")>-1?"":n+'+<span class="ke-shortcut-key">B</span>')+"</span>","bold","",t.bold],underline:["_ke_command_underline",i.toolbar.underline+' <span class="ke-shortcut">'+(o.indexOf("underline")>-1?"":n+'+<span class="ke-shortcut-key">U</span>')+"</span>","underline","",t.underline],italic:["_ke_command_italic",i.toolbar.italic+' <span class="ke-shortcut">'+(o.indexOf("italic")>-1?"":n+'+<span class="ke-shortcut-key">I</span>')+"</span>","italic","",t.italic],strike:["_ke_command_strike",i.toolbar.strike+' <span class="ke-shortcut">'+(o.indexOf("strike")>-1?"":n+l+'+<span class="ke-shortcut-key">S</span>')+"</span>","strike","",t.strike],subscript:["_ke_command_subscript",i.toolbar.subscript,"SUB","",t.subscript],superscript:["_ke_command_superscript",i.toolbar.superscript,"SUP","",t.superscript],removeFormat:["",i.toolbar.removeFormat,"removeFormat","",t.erase],indent:["_ke_command_indent",i.toolbar.indent+' <span class="ke-shortcut">'+(o.indexOf("indent")>-1?"":n+'+<span class="ke-shortcut-key">'+a[0]+"</span>")+"</span>","indent","",t.outdent],outdent:["_ke_command_outdent",i.toolbar.outdent+' <span class="ke-shortcut">'+(o.indexOf("indent")>-1?"":n+'+<span class="ke-shortcut-key">'+a[1]+"</span>")+"</span>","outdent","",t.indent],fullScreen:["ke-code-view-enabled ke-resizing-enabled _ke_command_fullScreen",i.toolbar.fullScreen,"fullScreen","",t.expansion],showBlocks:["_ke_command_showBlocks",i.toolbar.showBlocks,"showBlocks","",t.show_blocks],codeView:["ke-code-view-enabled ke-resizing-enabled _ke_command_codeView",i.toolbar.codeView,"codeView","",t.code_view],undo:["_ke_command_undo ke-resizing-enabled",i.toolbar.undo+'<span class="ke-shortcut"> '+(o.indexOf("undo")>-1?"":n+'+<span class="ke-shortcut-key">Z</span>')+"</span>","undo","",t.undo],redo:["_ke_command_redo ke-resizing-enabled",i.toolbar.redo+'<span class="ke-shortcut"> '+(o.indexOf("undo")>-1?"":n+'+<span class="ke-shortcut-key">Y</span> / '+n+l+'+<span class="ke-shortcut-key">Z</span>')+"</span>","redo","",t.redo],preview:["ke-resizing-enabled",i.toolbar.preview,"preview","",t.preview],print:["ke-resizing-enabled",i.toolbar.print,"print","",t.print],save:["_ke_command_save ke-resizing-enabled",i.toolbar.save+' <span class="ke-shortcut">'+(o.indexOf("save")>-1?"":n+'+<span class="ke-shortcut-key">S</span>')+"</span>","save","",t.save],blockquote:["",i.toolbar.tag_blockquote,"blockquote","command",t.blockquote],font:["ke-btn-select ke-btn-tool-font",i.toolbar.font,"font","submenu",`<span class="txt">${t.font}</span> <span class="arrow-icon">${t.arrow_down}</span>`],formatBlock:["ke-btn-select ke-btn-tool-format",i.toolbar.formats,"formatBlock","submenu",`<span class="txt">${t.format_block}</span> <span class="arrow-icon">${t.arrow_down}</span>`],fontSize:["ke-btn-select ke-btn-tool-size",i.toolbar.fontSize,"fontSize","submenu",`<span class="txt">${t.font_size}</span> <span class="arrow-icon">${t.arrow_down}</span>`],fontColor:["",i.toolbar.fontColor,"fontColor","submenu",t.font_color],hiliteColor:["",i.toolbar.hiliteColor,"hiliteColor","submenu",t.highlight_color],align:["ke-btn-select ke-btn-align",i.toolbar.align,"align","submenu",`<span class="txt">${e.rtl?t.align_right:t.align_left}</span> <span class="arrow-icon">${t.arrow_down}</span>`],list:["ke-btn-select ke-btn-tool-list",i.toolbar.list,"list","submenu",`<span class="txt">${t.list_number}</span> <span class="arrow-icon">${t.arrow_down}</span>`],horizontalRule:["btn_line",i.toolbar.horizontalRule,"horizontalRule","submenu",t.horizontal_rule],table:["",i.toolbar.table,"table","submenu",t.table],lineHeight:["",i.toolbar.lineHeight,"lineHeight","submenu",t.line_height],template:["",i.toolbar.template,"template","submenu",t.template],paragraphStyle:["",i.toolbar.paragraphStyle,"paragraphStyle","submenu",t.paragraph_style],textStyle:["",i.toolbar.textStyle,"textStyle","submenu",t.text_style],link:["",i.toolbar.link,"link","dialog",t.link],image:["",i.toolbar.image,"image","dialog",t.image],video:["",i.toolbar.video,"video","dialog",t.video],audio:["",i.toolbar.audio,"audio","dialog",t.audio],math:["",i.toolbar.math,"math","dialog",t.math],imageGallery:["",i.toolbar.imageGallery,"imageGallery","fileBrowser",t.image_gallery]}},createModuleGroup:function(){const e=s.createElement("DIV");e.className="ke-btn-module ke-btn-module-border";const t=s.createElement("UL");return t.className="ke-menu-list",e.appendChild(t),{div:e,ul:t}},createButton:function(e,t,i,n,l,o,a){const r=s.createElement("LI"),c=s.createElement("BUTTON");return c.setAttribute("type","button"),c.setAttribute("class","ke-btn"+(e?" "+e:"")+" ke-tooltip"),c.setAttribute("data-command",i),c.setAttribute("data-display",n),c.setAttribute("tabindex","-1"),l||(l='<span class="ke-icon-text">!</span>'),/^default\./i.test(l)&&(l=a[l.replace(/^default\./i,"")]),/^text\./i.test(l)&&(l=l.replace(/^text\./i,""),c.className+=" ke-btn-more-text"),l+='<span class="ke-tooltip-inner"><span class="ke-tooltip-text">'+(t||i)+"</span></span>",o&&c.setAttribute("disabled","true"),c.innerHTML=l,r.appendChild(c),{li:r,button:c}},createToolBar:function(e,t,i){const n=document.createElement("DIV");n.className="ke-toolbar-separator-vertical";const l=document.createElement("DIV");l.className="ke-toolbar kothing-editor-common";const o=document.createElement("DIV");o.className="ke-btn-tray",l.appendChild(o),e=JSON.parse(JSON.stringify(e));const a=i.icons,r=this.createDefaultToolbarItems(i),c={},d=[],u={};if(t){const e=t.length?t:Object.keys(t).map((function(e){return t[e]}));for(let t,i=0,n=e.length;i<n;i++)t=e[i].default||e[i],u[t.name]=t}let h=null,g=null,p=null,m=null,f="",b=!1;const v=s.createElement("DIV");v.className="ke-toolbar-more-layer";for(let w,C,x,_,S,E=0;E<e.length;E++)if(w=!1,S="",_=e[E],p=this.createModuleGroup(),"object"===typeof _){for(let t,i=0;i<_.length;i++)if(g=_[i],t=!1,/^\%\d+/.test(g)&&0===i)_[0]=g.replace(/[^\d]/g,""),d.push(_),e.splice(E--,1);else{if("object"===s.typeOf(g))"function"===typeof g.add?(f=g.name,h=r[f],u[f]=g):(f=g.name,h=[g.buttonClass,g.title,g.name,g.dataDisplay,g.innerHTML,g.disabled]);else{if(/^\-/.test(g)){S=g.substr(1),p.div.style.float=S;continue}if(/^\:/.test(g)){t=!0;const e=g.match(/^\:([^\-]+)\-([^\-]+)\-([^\-]+)/);x="__ke__"+e[1].trim();h=["ke-btn-more",e[2].trim(),x,"MORE",e[3].trim()]}else h=r[g];if(f=g,!h){const e=u[f];if(!e)throw Error("[KothingEditor.create.toolbar.fail] The button name of a plugin that does not exist. ["+f+"]");h=[e.buttonClass,e.title,e.name,e.display,e.innerHTML,e.disabled]}}m=this.createButton(h[0],h[1],h[2],h[3],h[4],h[5],a),(w?C:p.ul).appendChild(m.li),u[f]&&(c[f]=m.button),t&&(w=!0,C=s.createElement("DIV"),C.className="ke-more-layer "+x,C.innerHTML='<div class="ke-more-form"><ul class="ke-menu-list"'+(S?' style="float: '+S+';"':"")+"></ul></div>",v.appendChild(C),C=C.firstElementChild.firstElementChild)}if(b){const e=n.cloneNode(!1);o.appendChild(e)}o.appendChild(p.div),b=!0}else if(/^\/$/.test(_)){const e=document.createElement("DIV");e.className="ke-btn-module-enter",o.appendChild(e),b=!1}switch(o.children.length){case 0:o.style.display="none";break;case 1:s.removeClass(o.firstElementChild,"ke-btn-module-border");break;default:if(i.rtl){const e=n.cloneNode(!1);e.style.float=o.lastElementChild.style.float,o.appendChild(e)}}d.length>0&&d.unshift(e),v.children.length>0&&o.appendChild(v);const y=document.createElement("DIV");y.className="ke-menu-tray",l.appendChild(y);const k=document.createElement("DIV");return k.className="ke-toolbar-cover",l.appendChild(k),{element:l,plugins:u,pluginCallButtons:c,responsiveButtons:d,menuTray:y,buttonTray:o}}};var R=function(e,t,i){return{element:{originElement:e,topArea:t.top,relative:t.relative,toolbar:t.toolBar,buttonTray:t.toolBar.querySelector(".ke-btn-tray"),menuTray:t.menuTray,resizingBar:t.resizingBar,navigation:t.navigation,charWrapper:t.charWrapper,charCounter:t.charCounter,editorArea:t.editorArea,wysiwygFrame:t.wysiwygArea,wysiwyg:t.wysiwygArea,code:t.codeArea,placeholder:t.placeholder,loading:t.loading,lineBreaker:t.lineBreaker,lineBreaker_t:t.lineBreaker_t,lineBreaker_b:t.lineBreaker_b,resizeBackground:t.resizeBack,stickyDummy:t.stickyDummy,arrow:t.arrow},tool:{cover:t.toolBar.querySelector(".ke-toolbar-cover"),bold:t.toolBar.querySelector("._ke_command_bold"),underline:t.toolBar.querySelector("._ke_command_underline"),italic:t.toolBar.querySelector("._ke_command_italic"),strike:t.toolBar.querySelector("._ke_command_strike"),subscript:t.toolBar.querySelector("._ke_command_subscript"),superscript:t.toolBar.querySelector("._ke_command_superscript"),undo:t.toolBar.querySelector("._ke_command_undo"),redo:t.toolBar.querySelector("._ke_command_redo"),save:t.toolBar.querySelector("._ke_command_save"),outdent:t.toolBar.querySelector("._ke_command_outdent"),indent:t.toolBar.querySelector("._ke_command_indent"),fullScreen:t.toolBar.querySelector("._ke_command_fullScreen"),showBlocks:t.toolBar.querySelector("._ke_command_showBlocks"),codeView:t.toolBar.querySelector("._ke_command_codeView")},options:i}};var H={name:"notice",add:function(e){const t=e.context;t.notice={};let i=e.util.createElement("DIV");const n=e.util.createElement("SPAN"),l=e.util.createElement("BUTTON");i.className="ke-notice",l.className="close",l.setAttribute("aria-label","Close"),l.setAttribute("title",e.lang.dialogBox.close),l.innerHTML=e.icons.cancel,i.appendChild(n),i.appendChild(l),t.notice.modal=i,t.notice.message=n,l.addEventListener("click",this.onClick_cancel.bind(e)),t.element.editorArea.appendChild(i),i=null},onClick_cancel:function(e){e.preventDefault(),e.stopPropagation(),this.plugins.notice.close.call(this)},open:function(e){this.context.notice.message.textContent=e,this.context.notice.modal.style.display="block"},close:function(){this.context.notice.modal.style.display="none"}};var F={init:function(e){return{create:function(t,i){return this.create(t,i,e)}.bind(this)}},create:function(e,t,i){"object"!==s.typeOf(t)&&(t={}),i&&(t=[i,t].reduce((function(e,t){for(const i in t)if(s.hasOwn(t,i))if("plugins"===i&&t[i]&&e[i]){let n=e[i],l=t[i];n=n.length?n:Object.keys(n).map((function(e){return n[e]})),l=l.length?l:Object.keys(l).map((function(e){return l[e]})),e[i]=l.filter((function(e){return-1===n.indexOf(e)})).concat(n)}else e[i]=t[i];return e}),{}));const n="string"===typeof e?document.getElementById(e):e;if(!n){if("string"===typeof e)throw Error(`[KothingEditor.create.fail] The element for that id was not found (ID: "${e}")`);throw Error("[KothingEditor.create.fail] KothingEditor requires html element or element id")}const l=I.init(n,t);if(l.constructed.top.id&&document.getElementById(l.constructed.top.id))throw Error(`[KothingEditor.create.fail] The ID of the KothingEditor you are trying to create already exists (ID:"${l.constructed.top.id}")`);return function(e,t,i,n,l){const o=e.element.originElement.ownerDocument||document,a=o.defaultView||window,r=s,c=t.icons,d={_document:o,_window:a,_wd:null,_ww:null,_parser:new a.DOMParser,shadowRoot:null,shadowRootControllerEventTarget:null,util:r,functions:null,options:null,wwComputedStyle:a.getComputedStyle(e.element.wysiwyg),notice:H,icons:c,history:null,context:e,pluginCallButtons:n,plugins:i||{},initPlugins:{},targetPlugins:{},menuTray:{},lang:t.lang,effectNode:null,submenu:null,container:null,submenuName:"",bindedSubmenuOff:null,bindedContainerOff:null,submenuActiveButton:null,containerActiveButton:null,controllerArray:[],currentControllerName:"",currentControllerTarget:null,currentFileComponentInfo:null,codeViewDisabledButtons:null,resizingDisabledButtons:null,moreLayerActiveButton:null,htmlCheckWhitelistRegExp:null,disallowedTextTagsRegExp:null,editorTagsWhitelistRegExp:null,pasteTagsWhitelistRegExp:null,hasFocus:!1,isDisabled:!1,attributesWhitelistRegExp:null,attributesTagsWhitelist:null,bindControllersOff:null,isInline:null,isBalloon:null,isBalloonAlways:null,inlineToolbarAttr:{top:"",width:"",isShow:!1},notHideToolbar:!1,sticky:!1,antiBlur:!1,lineBreaker:null,lineBreakerButton:null,componentsInfoInit:!0,componentsInfoReset:!1,activePlugins:null,managedTagsInfo:null,charTypeHTML:!1,fileInfoPluginsCheck:null,fileInfoPluginsReset:null,fileManager:{tags:null,regExp:null,queryString:null,pluginRegExp:null,pluginMap:null},commandMap:null,styleCommandMap:null,defaultCommand:{bold:t.textTags.bold,underline:t.textTags.underline,italic:t.textTags.italic,strike:t.textTags.strike,subscript:t.textTags.sub,superscript:t.textTags.sup},_variable:{isChanged:!1,isCodeView:!1,isFullScreen:!1,innerHeight_fullScreen:0,resizeClientY:0,tabSize:4,codeIndent:2,minResizingSize:r.getNumber(e.element.wysiwygFrame.style.minHeight||"65",0),currentNodes:[],currentNodesMap:[],range:null,selectionNode:null,originCssText:e.element.topArea.style.cssText,bodyOverflow:"",editorAreaOriginCssText:"",wysiwygOriginCssText:"",codeOriginCssText:"",fullScreenAttrs:{sticky:!1,balloon:!1,inline:!1},lineBreakComp:null,lineBreakDir:""},callPlugin:function(e,t,i){if(i=i||n[e],!this.plugins[e])throw Error('[KothingEditor.core.callPlugin.fail] The called plugin does not exist or is in an invalid format. (pluginName:"'+e+'")');this.initPlugins[e]?"object"===typeof this.targetPlugins[e]&&i&&this.initMenuTarget(e,i,this.targetPlugins[e]):(this.plugins[e].add(this,i),this.initPlugins[e]=!0),this.plugins[e].active&&!this.commandMap[e]&&i&&(this.commandMap[e]=i,this.activePlugins.push(e)),"function"===typeof t&&t()},addModule:function(e){for(let t,i=0,n=e.length;i<n;i++)t=e[i].name,this.plugins[t]||(this.plugins[t]=e[i]),this.initPlugins[t]||(this.initPlugins[t]=!0,"function"===typeof this.plugins[t].add&&this.plugins[t].add(this))},getGlobalScrollOffset:function(){let t=0,i=0,n=e.element.topArea;for(;n;)t+=n.scrollTop,i+=n.scrollLeft,n=n.parentElement;for(n=this.shadowRoot?this.shadowRoot.host:null;n;)t+=n.scrollTop,i+=n.scrollLeft,n=n.parentElement;return{top:t,left:i}},initMenuTarget:function(t,i,n){i?(e.element.menuTray.appendChild(n),this.targetPlugins[t]=!0,this.menuTray[i.getAttribute("data-command")]=n):this.targetPlugins[t]=n},submenuOn:function(e){this.bindedSubmenuOff&&this.bindedSubmenuOff(),this.bindControllersOff&&this.controllersOff();const t=this.submenuName=e.getAttribute("data-command"),i=this.submenu=this.menuTray[t];this.submenuActiveButton=e,this.setMenuPosition(e,i),this.bindedSubmenuOff=this.submenuOff.bind(this),this.addDocEvent("mousedown",this.bindedSubmenuOff,!1),this.plugins[t].on&&this.plugins[t].on.call(this),this.antiBlur=!0},submenuOff:function(){this.removeDocEvent("mousedown",this.bindedSubmenuOff),this.bindedSubmenuOff=null,this.submenu&&(this.submenuName="",this.submenu.style.display="none",this.submenu=null,r.removeClass(this.submenuActiveButton,"on"),this.submenuActiveButton=null,this.notHideToolbar=!1),this.antiBlur=!1},containerOn:function(e){this.bindedContainerOff&&this.bindedContainerOff();const t=this.containerName=e.getAttribute("data-command"),i=this.container=this.menuTray[t];this.containerActiveButton=e,this.setMenuPosition(e,i),this.bindedContainerOff=this.containerOff.bind(this),this.addDocEvent("mousedown",this.bindedContainerOff,!1),this.plugins[t].on&&this.plugins[t].on.call(this),this.antiBlur=!0},containerOff:function(){this.removeDocEvent("mousedown",this.bindedContainerOff),this.bindedContainerOff=null,this.container&&(this.containerName="",this.container.style.display="none",this.container=null,r.removeClass(this.containerActiveButton,"on"),this.containerActiveButton=null,this.notHideToolbar=!1),this.antiBlur=!1},setMenuPosition:function(i,n){n.style.visibility="hidden",n.style.display="block",n.style.height="",r.addClass(i,"on");const l=this.context.element.toolbar,o=l.offsetWidth,s=u.getEditorOffsets(e.element.toolbar),c=n.offsetWidth,d=i.parentElement.offsetLeft+8;if(t.rtl){const e=i.offsetWidth,t=c>e?c-e:0,l=t>0?0:e-c;n.style.left=d-t+l+"px",s.left>u.getEditorOffsets(n).left&&(n.style.left="0px")}else{const e=o<=c?0:o-(d+c);n.style.left=e<0?d+e+"px":d+"px"}let h=0,g=i;for(;g&&g!==l;)h+=g.offsetTop,g=g.offsetParent;const p=h;this.isBalloon?h+=l.offsetTop+i.offsetHeight:h-=i.offsetHeight;const m=s.top,f=n.offsetHeight,b=this.getGlobalScrollOffset().top,v=a.innerHeight-(m-b+p+i.parentElement.offsetHeight);if(v<f){let e=-1*(f-p+3);const t=m-b+e,l=f+(t<0?t:0);l>v?(n.style.height=l+"px",e=-1*(l-p+3)):(n.style.height=v+"px",e=p+i.parentElement.offsetHeight),n.style.top=e+"px"}else n.style.top=p+i.parentElement.offsetHeight+"px";n.style.visibility=""},controllersOn:function(){this.bindControllersOff&&this.bindControllersOff(),this.controllerArray=[];for(let e,t=0;t<arguments.length;t++)e=arguments[t],e&&("string"!==typeof e?"function"!==typeof e?r.hasClass(e,"ke-controller")?(e.style&&(e.style.display="block",this.shadowRoot&&-1===this.shadowRootControllerEventTarget.indexOf(e)&&(e.addEventListener("mousedown",(function(e){e.preventDefault(),e.stopPropagation()})),this.shadowRootControllerEventTarget.push(e))),this.controllerArray.push(e)):(this.currentControllerTarget=e,this.currentFileComponentInfo=this.getFileComponent(e)):this.controllerArray.push(e):this.currentControllerName=e);this.bindControllersOff=this.controllersOff.bind(this),this.addDocEvent("mousedown",this.bindControllersOff,!1),this.addDocEvent("keydown",this.bindControllersOff,!1),this.antiBlur=!0,"function"===typeof h.showController&&h.showController(this.currentControllerName,this.controllerArray,this)},controllersOff:function(t){this.lineBreaker.style.display="none";const i=this.controllerArray.length;if(t&&t.target&&i>0)for(let e=0;e<i;e++)if(t.target!==window&&"function"===typeof this.controllerArray[e].contains&&this.controllerArray[e].contains(t.target))return;if((!this.fileManager.pluginRegExp.test(this.currentControllerName)||!t||"keydown"!==t.type||27===t.keyCode)&&(e.element.lineBreaker_t.style.display=e.element.lineBreaker_b.style.display="none",this._variable.lineBreakComp=null,this.currentControllerName="",this.currentControllerTarget=null,this.currentFileComponentInfo=null,this.effectNode=null,this.bindControllersOff)){if(this.removeDocEvent("mousedown",this.bindControllersOff),this.removeDocEvent("keydown",this.bindControllersOff),this.bindControllersOff=null,i>0){for(let e=0;e<i;e++)"function"===typeof this.controllerArray[e]?this.controllerArray[e]():this.controllerArray[e].style.display="none";this.controllerArray=[]}this.antiBlur=!1}},setControllerPosition:function(i,n,l,o){t.rtl&&(o.left*=-1);const s=r.getOffset(n,e.element.wysiwygFrame);i.style.visibility="hidden",i.style.display="block";const a="top"===l?-(i.offsetHeight+2):n.offsetHeight+12;i.style.top=s.top+a+o.top+"px";const c=s.left-e.element.wysiwygFrame.scrollLeft+o.left,d=i.offsetWidth,u=n.offsetWidth,h=r.hasClass(i.firstElementChild,"ke-arrow")?i.firstElementChild:null;if(t.rtl){const t=d>u?d-u:0,n=t>0?0:u-d;i.style.left=c-t+n+"px",t>0&&h&&(h.style.left=(d-14<10+t?d-14:10+t)+"px");const l=e.element.wysiwygFrame.offsetLeft-i.offsetLeft;l>0&&(i.style.left="0px",h&&(h.style.left=l+"px"))}else{i.style.left=c+"px";const t=e.element.wysiwygFrame.offsetWidth-(i.offsetLeft+d);t<0?(i.style.left=i.offsetLeft+t+"px",h&&(h.style.left=20-t+"px")):h&&(h.style.left="20px")}i.style.visibility=""},execCommand:function(e,t,i){this._wd.execCommand(e,t,"formatBlock"===e?"<"+i+">":i),this.history.push(!0)},nativeFocus:function(){const t=r.getParentElement(this.getSelectionNode(),"figcaption");t?t.focus():e.element.wysiwyg.focus(),this.editorRange()},focus:function(){if("none"!==e.element.wysiwygFrame.style.display){if(t.iframe)this.nativeFocus();else try{const i=this.getRange();if(i.startContainer===i.endContainer&&r.isWysiwygDiv(i.startContainer)){const n=i.commonAncestorContainer.children[i.startOffset];if(!r.isFormatElement(n)&&!r.isComponent(n)){const i=r.createElement(t.defaultTag),l=r.createElement("BR");return i.appendChild(l),e.element.wysiwyg.insertBefore(i,n),void this.setRange(l,0,l,0)}}this.setRange(i.startContainer,i.startOffset,i.endContainer,i.endOffset)}catch(i){this.nativeFocus()}u.applyTagEffects(),this.isBalloon&&u.toggleToolbarBalloon()}},focusEdge:function(t){t||(t=e.element.wysiwyg.lastElementChild);const i=this.getFileComponent(t);i?this.selectComponent(i.target,i.pluginName):t?(t=r.getChildElement(t,(function(e){return 0===e.childNodes.length||3===e.nodeType}),!0))?this.setRange(t,t.textContent.length,t,t.textContent.length):this.nativeFocus():this.focus()},blur:function(){t.iframe?e.element.wysiwygFrame.blur():e.element.wysiwyg.blur()},setRange:function(e,i,n,l){if(!e||!n)return;i>e.textContent.length&&(i=e.textContent.length),l>n.textContent.length&&(l=n.textContent.length),r.isFormatElement(e)&&(e=e.childNodes[i]||e,i=0),r.isFormatElement(n)&&(n=n.childNodes[l]||n,l=i>1?i:0);const o=this._wd.createRange();try{o.setStart(e,i),o.setEnd(n,l)}catch(a){return console.warn("[KothingEditor.core.focus.error] "+a),void this.nativeFocus()}const s=this.getSelection();return s.removeAllRanges&&s.removeAllRanges(),s.addRange(o),this.editorRange(),t.iframe&&this.nativeFocus(),o},removeRange:function(){this._variable.range=null,this._variable.selectionNode=null,this.hasFocus&&this.getSelection().removeAllRanges();const e=this.commandMap,t=this.activePlugins;for(let n in e)r.hasOwn(e,n)&&(t.indexOf(n)>-1?i[n].active.call(this,null):e.OUTDENT&&/^OUTDENT$/i.test(n)?e.OUTDENT.setAttribute("disabled",!0):e.INDENT&&/^INDENT$/i.test(n)?e.INDENT.removeAttribute("disabled"):r.removeClass(e[n],"active"))},getRange:function(){const t=this._variable.range||this.createDefaultRange(),i=this.getSelection();if(t.collapsed===i.isCollapsed||!e.element.wysiwyg.contains(i.focusNode))return t;if(i.rangeCount>0)return this._variable.range=i.getRangeAt(0),this._variable.range;{const e=i.anchorNode,t=i.focusNode,n=i.anchorOffset,l=i.focusOffset,o=r.compareElements(e,t),s=o.ancestor&&(0===o.result?n<=l:o.result>1);return this.setRange(s?e:t,s?n:l,s?t:e,s?l:n)}},getRange_addLine:function(i,n){if(this.selectionVoid(i)){const l=e.element.wysiwyg,o=r.createElement(t.defaultTag);o.innerHTML="<br>",l.insertBefore(o,n&&n!==l?n.nextElementSibling:l.firstElementChild),this.setRange(o.firstElementChild,0,o.firstElementChild,1),i=this._variable.range}return i},getSelection:function(){return this.shadowRoot&&this.shadowRoot.getSelection?this.shadowRoot.getSelection():this._ww.getSelection()},getSelectionNode:function(){if(e.element.wysiwyg.contains(this._variable.selectionNode)||this.editorRange(),!this._variable.selectionNode){const t=r.getChildElement(e.element.wysiwyg.firstChild,(function(e){return 0===e.childNodes.length||3===e.nodeType}),!1);if(t)return this._variable.selectionNode=t,t;this.editorRange()}return this._variable.selectionNode},editorRange:function(){const e=this.getSelection();if(!e)return null;let t=null,i=null;t=e.rangeCount>0?e.getRangeAt(0):this.createDefaultRange(),this._variable.range=t,i=t.collapsed?r.isWysiwygDiv(t.commonAncestorContainer)&&t.commonAncestorContainer.children[t.startOffset]||t.commonAncestorContainer:e.extentNode||e.anchorNode,this._variable.selectionNode=i},createDefaultRange:function(){const i=e.element.wysiwyg;i.focus();const n=this._wd.createRange();let l=i.firstElementChild;return l||(l=r.createElement(t.defaultTag),l.innerHTML="<br>",i.appendChild(l)),n.setStart(l,0),n.setEnd(l,0),n},selectionVoid:function(e){const t=e.commonAncestorContainer;return r.isWysiwygDiv(e.startContainer)&&r.isWysiwygDiv(e.endContainer)||/FIGURE/i.test(t.nodeName)||this.fileManager.regExp.test(t.nodeName)||r.isMediaComponent(t)},resetRangeToTextNode:function(){const i=this.getRange();if(this.selectionVoid(i))return!1;let n,l,o,s=i.startContainer,a=i.startOffset,c=i.endContainer,d=i.endOffset;if(r.isFormatElement(s)&&(s=s.childNodes[a]||s.lastChild,a=s.textContent.length),r.isFormatElement(c)&&(c=c.childNodes[d]||c.lastChild,d=c.textContent.length),n=r.isWysiwygDiv(s)?e.element.wysiwyg.firstChild:s,l=a,r.isBreak(n)||1===n.nodeType&&n.childNodes.length>0){const e=r.isBreak(n);if(!e){for(;n&&!r.isBreak(n)&&1===n.nodeType;)n=n.childNodes[l]||n.nextElementSibling||n.nextSibling,l=0;let e=r.getFormatElement(n,null);e===r.getRangeFormatElement(e,null)&&(e=r.createElement(r.getParentElement(n,r.isCell)?"DIV":t.defaultTag),n.parentNode.insertBefore(e,n),e.appendChild(n))}if(r.isBreak(n)){const t=r.createTextNode(r.zeroWidthSpace);n.parentNode.insertBefore(t,n),n=t,e&&s===c&&(c=n,d=1)}}if(s=n,a=l,n=r.isWysiwygDiv(c)?e.element.wysiwyg.lastChild:c,l=d,r.isBreak(n)||1===n.nodeType&&n.childNodes.length>0){const e=r.isBreak(n);if(!e){for(;n&&!r.isBreak(n)&&1===n.nodeType&&(o=n.childNodes,0!==o.length);)n=o[l>0?l-1:l]||!/FIGURE/i.test(o[0].nodeName)?o[0]:n.previousElementSibling||n.previousSibling||s,l=l>0?n.textContent.length:l;let e=r.getFormatElement(n,null);e===r.getRangeFormatElement(e,null)&&(e=r.createElement(r.isCell(e)?"DIV":t.defaultTag),n.parentNode.insertBefore(e,n),e.appendChild(n))}if(r.isBreak(n)){const t=r.createTextNode(r.zeroWidthSpace);n.parentNode.insertBefore(t,n),n=t,l=1,e&&!n.previousSibling&&r.removeItem(c)}}return c=n,d=l,this.setRange(s,a,c,d),!0},getSelectedElements:function(t){if(!this.resetRangeToTextNode())return[];let i=this.getRange();if(r.isWysiwygDiv(i.startContainer)){const t=e.element.wysiwyg.children;if(0===t.length)return[];this.setRange(t[0],0,t[t.length-1],t[t.length-1].textContent.trim().length),i=this.getRange()}const n=i.startContainer,l=i.endContainer,o=i.commonAncestorContainer,s=r.getListChildren(o,(function(e){return t?t(e):r.isFormatElement(e)}));if(r.isWysiwygDiv(o)||r.isRangeFormatElement(o)||s.unshift(r.getFormatElement(o,null)),n===l||1===s.length)return s;let a=r.getFormatElement(n,null),c=r.getFormatElement(l,null),d=null,u=null;const h=function(e){return!r.isTable(e)||/^TABLE$/i.test(e.nodeName)};let g=r.getRangeFormatElement(a,h),p=r.getRangeFormatElement(c,h);r.isTable(g)&&r.isListCell(g.parentNode)&&(g=g.parentNode),r.isTable(p)&&r.isListCell(p.parentNode)&&(p=p.parentNode);const m=g===p;for(let e,r=0,f=s.length;r<f;r++)if(e=s[r],a===e||!m&&e===g)d=r;else if(c===e||!m&&e===p){u=r;break}return null===d&&(d=0),null===u&&(u=s.length-1),s.slice(d,u+1)},getSelectedElementsAndComponents:function(e){const t=this.getRange().commonAncestorContainer,i=r.getParentElement(t,r.isComponent),n=r.isTable(t)?this.getSelectedElements(null):this.getSelectedElements(function(e){const t=this.getParentElement(e,this.isComponent);return this.isFormatElement(e)&&(!t||t===i)||this.isComponent(e)&&!this.getFormatElement(e)}.bind(r));if(e)for(let l=0,o=n.length;l<o;l++)for(let e=l-1;e>=0;e--)if(n[e].contains(n[l])){n.splice(l,1),l--,o--;break}return n},isEdgePoint:function(e,t,i){return"end"!==i&&0===t||(!i||"front"!==i)&&!e.nodeValue&&1===t||(!i||"end"===i)&&!!e.nodeValue&&t===e.nodeValue.length},isEdgeFormat:function(e,t,i){if(!this.isEdgePoint(e,t,i))return!1;const n=[];for(i="front"===i?"previousSibling":"nextSibling";e&&!r.isFormatElement(e)&&!r.isWysiwygDiv(e);){if(e[i]&&(!r.isBreak(e[i])||e[i][i]))return null;1===e.nodeType&&n.push(e.cloneNode(!1)),e=e.parentNode}return n},showLoading:function(){e.element.loading.style.display="block"},closeLoading:function(){e.element.loading.style.display="none"},appendFormatTag:function(e,i){const n=r.getFormatElement(this.getSelectionNode(),null),l=i?"string"===typeof i?i:i.nodeName:r.isFormatElement(n)&&!r.isFreeFormatElement(n)?n.nodeName:t.defaultTag,o=r.createElement(l);return o.innerHTML="<br>",(i&&"string"!==typeof i||!i&&r.isFormatElement(n))&&r.copyTagAttributes(o,i||n),r.isCell(e)?e.insertBefore(o,e.nextElementSibling):e.parentNode.insertBefore(o,e.nextElementSibling),o},insertComponent:function(e,t,i,n){if(i&&!this.checkCharCount(e,null))return null;const l=this.removeNode();this.getRange_addLine(this.getRange(),l.container);let o=null,s=this.getSelectionNode(),a=r.getFormatElement(s,null);if(r.isListCell(a))this.insertNode(e,s===a?null:l.container.nextSibling,!1),e.nextSibling||e.parentNode.appendChild(r.createElement("BR"));else{if(this.getRange().collapsed&&(3===l.container.nodeType||r.isBreak(l.container))){const e=r.getParentElement(l.container,function(e){return this.isRangeFormatElement(e)}.bind(r));o=r.splitElement(l.container,l.offset,e?r.getElementDepth(e)+1:0),o&&(a=o.previousSibling)}this.insertNode(e,a,!1),a&&r.onlyZeroWidthSpace(a)&&r.removeItem(a)}if(this.setRange(e,0,e,0),!n){const t=this.getFileComponent(e);t?this.selectComponent(t.target,t.pluginName):o&&(o=r.getEdgeChildNodes(o,null).sc||o,this.setRange(o,0,o,0))}return t||this.history.push(1),o||e},getFileComponent:function(e){if(!this.fileManager.queryString||!e)return null;let t,i;return(/^FIGURE$/i.test(e.nodeName)||/ke-component/.test(e.className))&&(t=e.querySelector(this.fileManager.queryString)),!t&&e.nodeName&&this.fileManager.regExp.test(e.nodeName)&&(t=e),t&&(i=this.fileManager.pluginMap[t.nodeName.toLowerCase()],i)?{target:t,component:r.getParentElement(t,r.isComponent),pluginName:i}:null},selectComponent:function(e,t){if(r.isUneditableComponent(r.getParentElement(e,r.isComponent))||r.isUneditableComponent(e))return!1;this.hasFocus||this.focus();const i=this.plugins[t];i&&a.setTimeout(function(){"function"===typeof i.select&&this.callPlugin(t,i.select.bind(this,e),null),this.setComponentLineBreaker(e)}.bind(this))},setComponentLineBreaker:function(t){this.lineBreaker.style.display="none";const i=r.getParentElement(t,r.isComponent),n=e.element.lineBreaker_t.style,l=e.element.lineBreaker_b.style,o="block"===this.context.resizing.resizeContainer.style.display?this.context.resizing.resizeContainer:t,s=r.isListCell(i.parentNode);let a,c,d;(s?i.previousSibling:r.isFormatElement(i.previousElementSibling))?n.display="none":(this._variable.lineBreakComp=i,c=e.element.wysiwyg.scrollTop,a=r.getOffset(t,e.element.wysiwygFrame).top+c,d=o.offsetWidth/2/2,n.top=a-c-12+"px",n.left=r.getOffset(o).left+d+"px",n.display="block"),(s?i.nextSibling:r.isFormatElement(i.nextElementSibling))?l.display="none":(a||(this._variable.lineBreakComp=i,c=e.element.wysiwyg.scrollTop,a=r.getOffset(t,e.element.wysiwygFrame).top+c,d=o.offsetWidth/2/2),l.top=a+o.offsetHeight-c-12+"px",l.left=r.getOffset(o).left+o.offsetWidth-d-24+"px",l.display="block")},insertNode:function(i,n,l){if(l&&!this.checkCharCount(i,null))return null;const o=r.getFreeFormatElement(this.getSelectionNode(),null),s=!o&&(r.isFormatElement(i)||r.isRangeFormatElement(i))||r.isComponent(i);if(!n&&(s||r.isComponent(i)||r.isMedia(i))){const e=this.removeNode();if(3===e.container.nodeType||r.isBreak(e.container)){const t=r.getParentElement(e.container,function(e){return this.isRangeFormatElement(e)||this.isListCell(e)}.bind(r));(n=r.splitElement(e.container,e.offset,t?r.getElementDepth(t)+1:0))&&(n=n.previousSibling)}}const a=n||s?this.getRange():this.getRange_addLine(this.getRange(),null),c=a.commonAncestorContainer,d=a.startOffset,u=a.endOffset,h=a.startContainer===c&&r.isFormatElement(c),g=h?c.childNodes[d]||c.childNodes[0]:a.startContainer,p=h?c.childNodes[u]||c.childNodes[c.childNodes.length-1]:a.endContainer;let m,f=null;if(n)m=n.parentNode,n=n.nextSibling,f=!0;else if(m=g,3===g.nodeType&&(m=g.parentNode),a.collapsed)if(3===c.nodeType)n=c.textContent.length>u?c.splitText(u):c.nextSibling;else if(r.isBreak(m))n=m,m=m.parentNode;else{let e=m.childNodes[d];const t=e&&3===e.nodeType&&r.onlyZeroWidthSpace(e)&&r.isBreak(e.nextSibling)?e.nextSibling:e;t?t.nextSibling?n=r.isBreak(t)&&!r.isBreak(i)?t:t.nextSibling:(m.removeChild(t),n=null):n=null}else if(g===p){n=this.isEdgePoint(p,u)?p.nextSibling:p.splitText(u);let e=g;this.isEdgePoint(g,d)||(e=g.splitText(d)),m.removeChild(e),0===m.childNodes.length&&s&&(m.innerHTML="<br>")}else{const e=this.removeNode(),i=e.container,l=e.prevContainer;if(i&&0===i.childNodes.length&&s&&(r.isFormatElement(i)?i.innerHTML="<br>":r.isRangeFormatElement(i)&&(i.innerHTML="<"+t.defaultTag+"><br></"+t.defaultTag+">")),!s&&l)if(m=3===l.nodeType?l.parentNode:l,m.contains(i)){let e=!0;for(n=i;n.parentNode!==m;)n=n.parentNode,e=!1;e&&i===l&&(n=n.nextSibling)}else n=null;else m=(n=s?p:i===l?i.nextSibling:i)&&n.parentNode?n.parentNode:c;for(;n&&!r.isFormatElement(n)&&n.parentNode!==c;)n=n.parentNode}try{if((r.isWysiwygDiv(n)||m===e.element.wysiwyg.parentNode)&&(m=e.element.wysiwyg,n=null),r.isFormatElement(i)||r.isRangeFormatElement(i)||!r.isListCell(m)&&r.isComponent(i)){const e=m;if(r.isList(n))m=n,n=null;else if(r.isListCell(n))m=n.previousElementSibling||n;else if(!f&&!n){const e=this.removeNode(),t=3===e.container.nodeType?r.isListCell(r.getFormatElement(e.container,null))?e.container:r.getFormatElement(e.container,null)||e.container.parentNode:e.container,i=r.isWysiwygDiv(t)||r.isRangeFormatElement(t);m=i?t:t.parentNode,n=i?null:t.nextSibling}0===e.childNodes.length&&m!==e&&r.removeItem(e)}if(!s||o||r.isRangeFormatElement(m)||r.isListCell(m)||r.isWysiwygDiv(m)||(n=m.nextElementSibling,m=m.parentNode),r.isWysiwygDiv(m)&&(3===i.nodeType||r.isBreak(i))){const e=r.createElement(t.defaultTag);e.appendChild(i),i=e}m.insertBefore(i,m===n?m.lastChild:n)}catch(b){m.appendChild(i)}finally{if((r.isFormatElement(i)||r.isComponent(i))&&g===p){const e=r.getFormatElement(c,null);e&&1===e.nodeType&&r.isEmptyLine(e)&&r.removeItem(e)}if(o&&(r.isFormatElement(i)||r.isRangeFormatElement(i))&&(i=this.setIntoFreeFormat(i)),!r.isComponent(i)){let e=1;if(i&&3===i.nodeType){const e=i.previousSibling,t=i.nextSibling,n=!e||1===e.nodeType||r.onlyZeroWidthSpace(e)?"":e.textContent,l=!t||1===t.nodeType||r.onlyZeroWidthSpace(t)?"":t.textContent;e&&n.length>0&&(i.textContent=n+i.textContent,r.removeItem(e)),t&&t.length>0&&(i.textContent+=l,r.removeItem(t));const o={container:i,startOffset:n.length,endOffset:i.textContent.length-l.length};return this.setRange(i,o.startOffset,i,o.endOffset),o}if(!r.isBreak(i)&&r.isFormatElement(m)){let t=null;i.previousSibling&&!r.isBreak(i.previousSibling)||(t=r.createTextNode(r.zeroWidthSpace),i.parentNode.insertBefore(t,i)),i.nextSibling&&!r.isBreak(i.nextSibling)||(t=r.createTextNode(r.zeroWidthSpace),i.parentNode.insertBefore(t,i.nextSibling)),r.isIgnoreNodeChange(i)&&(i=i.nextSibling,e=0)}this.setRange(i,e,i,e)}return this.history.push(!0),i}},setIntoFreeFormat:function(e){const t=e.parentNode;let i,n;for(;r.isFormatElement(e)||r.isRangeFormatElement(e);){for(i=e.childNodes,n=null;i[0];)if(n=i[0],r.isFormatElement(n)||r.isRangeFormatElement(n)){if(this.setIntoFreeFormat(n),!e.parentNode)break;i=e.childNodes}else t.insertBefore(n,e);0===e.childNodes.length&&r.removeItem(e),e=r.createElement("BR"),t.insertBefore(e,n.nextSibling)}return e},removeNode:function(){this.resetRangeToTextNode();const t=this.getRange();let i,n=0,l=t.startContainer,o=t.endContainer,s=t.startOffset,a=t.endOffset;const c=3===t.commonAncestorContainer.nodeType&&t.commonAncestorContainer.parentNode===l.parentNode?l.parentNode:t.commonAncestorContainer;c===l&&c===o&&(l=c.children[s],o=c.children[a],s=a=0);let d=null,u=null;const h=r.getListChildNodes(c,null);let g=r.getArrayIndex(h,l),p=r.getArrayIndex(h,o);if(h.length>0&&g>-1&&p>-1){for(let e=g+1,t=l;e>=0;e--)h[e]===t.parentNode&&h[e].firstChild===t&&0===s&&(g=e,t=t.parentNode);for(let e=p-1,t=o;e>g;e--)h[e]===t.parentNode&&1===h[e].nodeType&&(h.splice(e,1),t=t.parentNode,--p)}else{if(0===h.length){if(r.isFormatElement(c)||r.isRangeFormatElement(c)||r.isWysiwygDiv(c)||r.isBreak(c)||r.isMedia(c))return{container:c,offset:0};if(3===c.nodeType)return{container:c,offset:a};h.push(c),l=o=c}else if(l=o=h[0],r.isBreak(l)||r.onlyZeroWidthSpace(l))return{container:r.isMedia(c)?c:l,offset:0};g=p=0}function m(e){const t=r.getFormatElement(e,null);if(r.removeItem(e),r.isListCell(t)){const e=r.getArrayItem(t.children,r.isList,!1);if(e){const i=e.firstElementChild,n=i.childNodes;for(;n[0];)t.insertBefore(n[0],e);r.removeItemAllParents(i,null,null)}}}for(let e=g;e<=p;e++){const t=h[e];if(0===t.length||3===t.nodeType&&void 0===t.data)m(t);else if(t!==l)if(t!==o)m(t);else{if(1===o.nodeType){if(r.isComponent(o))continue;u=r.createTextNode(o.textContent)}else u=r.createTextNode(o.substringData(a,o.length-a));u.length>0?o.data=u.data:m(o)}else{if(1===l.nodeType){if(r.isComponent(l))continue;d=r.createTextNode(l.textContent)}else t===o?(d=r.createTextNode(l.substringData(0,s)+o.substringData(a,o.length-a)),n=s):d=r.createTextNode(l.substringData(0,s));if(d.length>0?l.data=d.data:m(l),t===o)break}}if(i=o&&o.parentNode?o:l&&l.parentNode?l:t.endContainer||t.startContainer,!r.isWysiwygDiv(i)&&0===i.childNodes.length){const t=r.removeItemAllParents(i,function(e){if(this.isComponent(e))return!1;const t=e.textContent;return 0===t.length||/^(\n|\u200B)+$/.test(t)}.bind(r),null);t&&(i=t.sc||t.ec||e.element.wysiwyg)}return this.setRange(i,n,i,n),this.history.push(!0),{container:i,offset:n,prevContainer:l&&l.parentNode?l:null}},applyRangeFormatElement:function(e){this.getRange_addLine(this.getRange(),null);const t=this.getSelectedElementsAndComponents(!1);if(!t||0===t.length)return;for(let h,g,p,m,f,b,v=0,y=t.length;v<y;v++)if(h=t[v],r.isListCell(h)&&(g=h.lastElementChild,g&&r.isListCell(h.nextElementSibling)&&t.indexOf(h.nextElementSibling)>-1&&(m=g.lastElementChild,t.indexOf(m)>-1))){let e=null;for(;e=m.lastElementChild;)if(r.isList(e)){if(!(t.indexOf(e.lastElementChild)>-1))continue;m=e.lastElementChild}p=g.firstElementChild,f=t.indexOf(p),b=t.indexOf(m),t.splice(f,b-f+1),y=t.length}let i,n,l,o=t[t.length-1];i=r.isRangeFormatElement(o)||r.isFormatElement(o)?o:r.getRangeFormatElement(o,null)||r.getFormatElement(o,null),r.isCell(i)?(n=null,l=i):(n=i.nextSibling,l=i.parentNode);let s=r.getElementDepth(i),a=null;const c=[],d=function(e,t,i){let n=null;if(e!==t&&!r.isTable(t)){if(t&&r.getElementDepth(e)===r.getElementDepth(t))return i;n=r.removeItemAllParents(t,null,e)}return n?n.ec:i};for(let h,g,p,m,f,b,v,y=0,k=t.length;y<k;y++)if(h=t[y],g=h.parentNode,g&&!e.contains(g))if(p=r.getElementDepth(h),r.isList(g)){if(null===a&&(b?(a=b,v=!0,b=null):a=g.cloneNode(!1)),c.push(h),f=t[y+1],y===k-1||f&&f.parentNode!==g){f&&h.contains(f.parentNode)&&(b=f.parentNode.cloneNode(!1));let t,i=g.parentNode;for(;r.isList(i);)t=r.createElement(i.nodeName),t.appendChild(a),a=t,i=i.parentNode;const o=this.detachRangeFormatElement(g,c,null,!0,!0);s>=p?(s=p,l=o.cc,n=d(l,g,o.ec),n&&(l=n.parentNode)):l===o.cc&&(n=o.ec),l!==o.cc&&(m=d(l,o.cc,m),n=void 0!==m?m:o.cc);for(let e=0,n=o.removeArray.length;e<n;e++)a.appendChild(o.removeArray[e]);v||e.appendChild(a),b&&o.removeArray[o.removeArray.length-1].appendChild(b),a=null,v=!1}}else s>=p&&(s=p,l=g,n=h.nextSibling),e.appendChild(h),l!==g&&(m=d(l,g,null),void 0!==m&&(n=m));if(this.effectNode=null,r.mergeSameTags(e,null,!1),r.mergeNestedTags(e,function(e){return this.isList(e)}.bind(r)),n&&r.getElementDepth(n)>0&&(r.isList(n.parentNode)||r.isList(n.parentNode.parentNode))){const t=r.getParentElement(n,function(e){return this.isRangeFormatElement(e)&&!this.isList(e)}.bind(r)),i=r.splitElement(n,null,t?r.getElementDepth(t)+1:0);i.parentNode.insertBefore(e,i)}else l.insertBefore(e,n),d(e,n,null);const u=r.getEdgeChildNodes(e.firstElementChild,e.lastElementChild);t.length>1?this.setRange(u.sc,0,u.ec,u.ec.textContent.length):this.setRange(u.ec,u.ec.textContent.length,u.ec,u.ec.textContent.length),this.history.push(!1)},detachRangeFormatElement:function(e,i,n,l,o){const s=this.getRange(),a=s.startOffset,c=s.endOffset;let d=r.getListChildNodes(e,(function(t){return t.parentNode===e})),u=e.parentNode,h=null,g=null,p=e.cloneNode(!1);const m=[],f=r.isList(n);let b=!1,v=!1,y=!1;function k(t,i,n,l){if(r.onlyZeroWidthSpace(i)&&(i.innerHTML=r.zeroWidthSpace),3===i.nodeType)return t.insertBefore(i,n),i;const o=(y?i:l).childNodes;let s=i.cloneNode(!1),a=null,c=null;for(;o[0];)c=o[0],!r.notTextNode(c)||r.isBreak(c)||r.isListCell(s)?s.appendChild(c):(s.childNodes.length>0&&(a||(a=s),t.insertBefore(s,n),s=i.cloneNode(!1)),t.insertBefore(c,n),a||(a=c));if(s.childNodes.length>0){if(r.isListCell(t)&&r.isListCell(s)&&r.isList(n))if(f){for(a=n;n;)s.appendChild(n),n=n.nextSibling;t.parentNode.insertBefore(s,t.nextElementSibling)}else{const t=l.nextElementSibling,i=r.detachNestedList(l,!1);if(e!==i||t!==l.nextElementSibling){const t=s.childNodes;for(;t[0];)l.appendChild(t[0]);e=i,v=!0}}else t.insertBefore(s,n);a||(a=s)}return a}for(let _,S,E,z=0,L=d.length;z<L;z++)if(_=d[z],3!==_.nodeType||!r.isList(p))if(y=!1,l&&0===z&&(h=i&&i.length!==L&&i[0]!==_?p:e.previousSibling),i&&(S=i.indexOf(_)),i&&-1===S)p||(p=e.cloneNode(!1)),p.appendChild(_);else{if(i&&(E=i[S+1]),p&&p.children.length>0&&(u.insertBefore(p,e),p=null),!f&&r.isListCell(_))if(E&&r.getElementDepth(_)!==r.getElementDepth(E)&&(r.isListCell(u)||r.getArrayItem(_.children,r.isList,!1))){const t=_.nextElementSibling,i=r.detachNestedList(_,!1);e===i&&t===_.nextElementSibling||(e=i,v=!0)}else{const i=_;_=r.createElement(l?i.nodeName:r.isList(e.parentNode)||r.isListCell(e.parentNode)?"LI":r.isCell(e.parentNode)?"DIV":t.defaultTag);const n=r.isListCell(_),o=i.childNodes;for(;o[0]&&(!r.isList(o[0])||n);)_.appendChild(o[0]);r.copyFormatAttributes(_,i),y=!0}else _=_.cloneNode(!1);if(!v&&(l?(m.push(_),r.removeItem(d[z])):(n?(b||(u.insertBefore(n,e),b=!0),_=k(n,_,null,d[z])):_=k(u,_,e,d[z]),v||(i?(g=_,h||(h=_)):h||(h=g=_))),v)){v=y=!1,d=r.getListChildNodes(e,(function(t){return t.parentNode===e})),p=e.cloneNode(!1),u=e.parentNode,z=-1,L=d.length;continue}}const w=e.parentNode;let C=e.nextSibling;p&&p.children.length>0&&w.insertBefore(p,C),n?h=n.previousSibling:h||(h=e.previousSibling),C=e.nextSibling,0===e.children.length||0===e.textContent.length?r.removeItem(e):r.removeEmptyNode(e,null);let x=null;if(l)x={cc:w,sc:h,ec:C,removeArray:m};else{h||(h=g),g||(g=h);const e=r.getEdgeChildNodes(h,g.parentNode?h:g);x={cc:(e.sc||e.ec).parentNode,sc:e.sc,ec:e.ec}}if(this.effectNode=null,o)return x;!l&&x&&(i?this.setRange(x.sc,a,x.ec,c):this.setRange(x.sc,0,x.sc,0)),this.history.push(!1)},detachList:function(e,t){let i={},n=!1,l=!1,o=null,s=null;const a=function(e){return!this.isComponent(e)}.bind(r);for(let c,d,u,h,g=0,p=e.length;g<p;g++){if(u=g===p-1,d=r.getRangeFormatElement(e[g],a),h=r.isList(d),!c&&h)c=d,i={r:c,f:[r.getParentElement(e[g],"LI")]},0===g&&(n=!0);else if(c&&h)if(c!==d){const a=this.detachRangeFormatElement(i.f[0].parentNode,i.f,null,t,!0);d=e[g].parentNode,n&&(o=a.sc,n=!1),u&&(s=a.ec),h?(c=d,i={r:c,f:[r.getParentElement(e[g],"LI")]},u&&(l=!0)):c=null}else i.f.push(r.getParentElement(e[g],"LI")),u&&(l=!0);if(u&&r.isList(c)){const e=this.detachRangeFormatElement(i.f[0].parentNode,i.f,null,t,!0);(l||1===p)&&(s=e.ec),n&&(o=e.sc||s)}}return{sc:o,ec:s}},nodeChange:function(e,t,i,n){this.resetRangeToTextNode();let l=this.getRange_addLine(this.getRange(),null);t=!!(t&&t.length>0)&&t,i=!!(i&&i.length>0)&&i;const o=!e,s=o&&!i&&!t;let c=l.startContainer,d=l.startOffset,u=l.endContainer,h=l.endOffset;if(s&&l.collapsed&&r.isFormatElement(c.parentNode)&&r.isFormatElement(u.parentNode)||c===u&&1===c.nodeType&&r.isNonEditable(c))return;if(l.collapsed&&!s&&1===c.nodeType&&!r.isBreak(c)&&!r.isComponent(c)){let e=null;const t=c.childNodes[d];t&&(e=t.nextSibling?r.isBreak(t)?t:t.nextSibling:null);const i=r.createTextNode(r.zeroWidthSpace);c.insertBefore(i,e),this.setRange(i,1,i,1),l=this.getRange(),c=l.startContainer,d=l.startOffset,u=l.endContainer,h=l.endOffset}r.isFormatElement(c)&&(c=c.childNodes[d]||c.firstChild,d=0),r.isFormatElement(u)&&(u=u.childNodes[h]||u.lastChild,h=u.textContent.length),o&&(e=r.createElement("DIV"));const g=a.RegExp,p=e.nodeName;if(!s&&c===u&&!i&&e){let t=c,i=0;const n=[],l=e.style;for(let e=0,o=l.length;e<o;e++)n.push(l[e]);const s=e.classList;for(let e=0,o=s.length;e<o;e++)n.push("."+s[e]);if(n.length>0){for(;!r.isFormatElement(t)&&!r.isWysiwygDiv(t);){for(let l=0;l<n.length;l++)if(1===t.nodeType){const s=n[l],a=!!/^\./.test(s)&&new g("\\s*"+s.replace(/^\./,"")+"(\\s+|$)","ig"),r=o?!!t.style[s]:!!t.style[s]&&!!e.style[s]&&t.style[s]===e.style[s],c=!1!==a&&(o?!!t.className.match(a):!!t.className.match(a)&&!!e.className.match(a));(r||c)&&i++}t=t.parentNode}if(i>=n.length)return}}let m,f,b={},v={},y="",k="";if(t){for(let e,i=0,n=t.length;i<n;i++)e=t[i],/^\./.test(e)?k+=(k?"|":"\\s*(?:")+e.replace(/^\./,""):y+=(y?"|":"(?:;|^|\\s)(?:")+e;y&&(y+=")\\s*:[^;]*\\s*(?:;|$)",y=new g(y,"ig")),k&&(k+=")(?=\\s+|$)",k=new g(k,"ig"))}if(i){let e="^(?:"+i[0];for(let t=1;t<i.length;t++)e+="|"+i[t];e+=")$",e=new g(e,"i")}const w=a.Boolean,C={v:!1},x=function(e){const t=e.cloneNode(!1);if(3===t.nodeType||r.isBreak(t))return t;if(s)return null;const i=o||f;if(i&&!n)return C.v=!0,null;const l=t.style.cssText;let a="";y&&l.length>0&&(a=l.replace(y,"").trim(),a!==l&&(C.v=!0));const c=t.className;let d="";return k&&c.length>0&&(d=c.replace(k,"").trim(),d!==c&&(C.v=!0)),(!o||!k&&c||!y&&l||a||d||!i)&&(a||d||t.nodeName!==p||w(y)!==w(l)||w(k)!==w(c))?(y&&l.length>0&&(t.style.cssText=a),t.style.cssText||t.removeAttribute("style"),k&&c.length>0&&(t.className=d.trim()),t.className.trim()||t.removeAttribute("class"),t.style.cssText||t.className||t.nodeName!==p&&!i?t:(C.v=!0,null)):(C.v=!0,null)},_=this.getSelectedElements(null);l=this.getRange(),c=l.startContainer,d=l.startOffset,u=l.endContainer,h=l.endOffset,r.getFormatElement(c,null)||(c=r.getChildElement(_[0],(function(e){return 3===e.nodeType}),!1),d=0),r.getFormatElement(u,null)||(u=r.getChildElement(_[_.length-1],(function(e){return 3===e.nodeType}),!1),h=u.textContent.length);const S=r.getFormatElement(c,null)===r.getFormatElement(u,null),E=_.length-(S?0:1);m=e.cloneNode(!1);const z=s||o&&function(e){for(let t=0,i=e.length;t<i;t++)if(r.isMaintainedNode(e[t])||r.isSizeNode(e[t]))return!0;return!1}(i),L=o||r.isSizeNode(m),T=this.util_getMaintainedNode.bind(r,z,L),N=this.util_isMaintainedNode.bind(r,z,L);if(S){const e=this.nodeChange_oneLine(_[0],m,x,c,d,u,h,s,o,l.collapsed,C,T,N);b.container=e.startContainer,b.offset=e.startOffset,v.container=e.endContainer,v.offset=e.endOffset,b.container===v.container&&r.onlyZeroWidthSpace(b.container)&&(b.offset=v.offset=1),this.setCommonListStyle(e.ancestor,null)}else{E>0&&(m=e.cloneNode(!1),v=this.nodeChange_endLine(_[E],m,x,u,h,s,o,C,T,N));for(let t,i=E-1;i>0;i--)m=e.cloneNode(!1),t=this.nodeChange_middleLine(_[i],m,x,s,o,C,v.container),t.endContainer&&(v.ancestor=null,v.container=t.endContainer),this.setCommonListStyle(t.ancestor,null);m=e.cloneNode(!1),b=this.nodeChange_startLine(_[0],m,x,c,d,s,o,C,T,N,v.container),b.endContainer&&(v.ancestor=null,v.container=b.endContainer),E<=0?v=b:v.container||(v.ancestor=null,v.container=b.container,v.offset=b.container.textContent.length),this.setCommonListStyle(b.ancestor,null),this.setCommonListStyle(v.ancestor||r.getFormatElement(v.container),null)}this.controllersOff(),this.setRange(b.container,b.offset,v.container,v.offset),this.history.push(!1)},setCommonListStyle:function(e,t){if(!r.isListCell(e))return;t||e.removeAttribute("style");const i=r.getArrayItem((t||e).childNodes,(function(e){return!r.isBreak(e)&&!r.onlyZeroWidthSpace(e.textContent.trim())}),!0);if(i[0]&&1===i.length){if(!(t=i[0])||1!==t.nodeType)return;const n=t.style,l=e.style;/STRONG/i.test(t.nodeName)?l.fontWeight="bold":n.fontWeight&&(l.fontWeight=n.fontWeight),n.color&&(l.color=n.color),n.fontSize&&(l.fontSize=n.fontSize),this.setCommonListStyle(e,t)}},stripRemoveNode:function(e){const t=e.parentNode;if(!e||3===e.nodeType||!t)return;const i=e.childNodes;for(;i[0];)t.insertBefore(i[0],e);t.removeChild(e)},util_getMaintainedNode:function(e,t,i){return!i||e?null:this.getParentElement(i,this.isMaintainedNode.bind(this))||(t?null:this.getParentElement(i,this.isSizeNode.bind(this)))},util_isMaintainedNode:function(e,t,i){if(!i||e||1!==i.nodeType)return!1;const n=this.isMaintainedNode(i);return this.getParentElement(i,this.isMaintainedNode.bind(this))?n:n||!t&&this.isSizeNode(i)},nodeChange_oneLine:function(e,t,i,n,l,o,s,c,d,u,h,g,p){let m=n.parentNode;for(;!m.nextSibling&&!m.previousSibling&&!r.isFormatElement(m.parentNode)&&!r.isWysiwygDiv(m.parentNode)&&m.nodeName!==t.nodeName;)m=m.parentNode;if(!d&&m===o.parentNode&&m.nodeName===t.nodeName&&r.onlyZeroWidthSpace(n.textContent.slice(0,l))&&r.onlyZeroWidthSpace(o.textContent.slice(s))){const e=m.childNodes;let i=!0;for(let t,l,s,a,c=0,d=e.length;c<d;c++)if(t=e[c],a=!r.onlyZeroWidthSpace(t),t!==n)if(t!==o){if(!l&&a||l&&s&&a){i=!1;break}}else s=!0;else l=!0;if(i)return r.copyTagAttributes(m,t),{startContainer:n,startOffset:l,endContainer:o,endOffset:s}}h.v=!1;const f=e,b=[t],v=e.cloneNode(!1),y=n===o;let k,w,C,x,_,S=n,E=l,z=o,L=s,T=!1,N=!1;const B=a.RegExp;function A(e){const t=new B("(?:;|^|\\s)(?:"+x+"null)\\s*:[^;]*\\s*(?:;|$)","ig");let i="";return t&&e.style.cssText.length>0&&(i=t.test(e.style.cssText)),!i}if(function e(n,l){const o=n.childNodes;for(let s,a=0,d=o.length;a<d;a++){let n=o[a];if(!n)continue;let d,h=l;if(!T&&n===S){let e=v;_=g(n);const o=r.createTextNode(1===S.nodeType?"":S.substringData(0,E)),a=r.createTextNode(1===S.nodeType?"":S.substringData(E,y&&L>=E?L-E:S.data.length-E));if(_){const t=g(l);if(t&&t.parentNode!==e){let i=t,n=null;for(;i.parentNode!==e;){for(l=n=i.parentNode.cloneNode(!1);i.childNodes[0];)n.appendChild(i.childNodes[0]);i.appendChild(n),i=i.parentNode}i.parentNode.appendChild(t)}_=_.cloneNode(!1)}r.onlyZeroWidthSpace(o)||l.appendChild(o);const c=g(l);for(c&&(_=c),_&&(e=_),w=n,k=[],x="";w!==e&&w!==f&&null!==w;)s=p(w)?null:i(w),s&&1===w.nodeType&&A(w)&&(k.push(s),x+=w.style.cssText.substr(0,w.style.cssText.indexOf(":"))+"|"),w=w.parentNode;const d=k.pop()||a;for(C=w=d;k.length>0;)w=k.pop(),C.appendChild(w),C=w;if(t.appendChild(d),e.appendChild(t),_&&!g(z)&&(t=t.cloneNode(!1),v.appendChild(t),b.push(t)),S=a,E=0,T=!0,w!==a&&w.appendChild(S),!y)continue}if(N||n!==z){if(T){if(1===n.nodeType&&!r.isBreak(n)){r.isIgnoreNodeChange(n)?(v.appendChild(n.cloneNode(!0)),u||(t=t.cloneNode(!1),v.appendChild(t),b.push(t))):e(n,n);continue}w=n,k=[],x="";const o=[];for(;null!==w.parentNode&&w!==f&&w!==t;)s=N?w.cloneNode(!1):i(w),1===w.nodeType&&!r.isBreak(n)&&s&&A(w)&&(p(w)?_||o.push(s):k.push(s),x+=w.style.cssText.substr(0,w.style.cssText.indexOf(":"))+"|"),w=w.parentNode;k=k.concat(o);const a=k.pop()||n;for(C=w=a;k.length>0;)w=k.pop(),C.appendChild(w),C=w;if(!p(t.parentNode)||p(a)||r.onlyZeroWidthSpace(t)||(t=t.cloneNode(!1),v.appendChild(t),b.push(t)),N||_||!p(a))a===n?l=N?v:t:N?(v.appendChild(a),l=w):(t.appendChild(a),l=w);else{t=t.cloneNode(!1);const e=a.childNodes;for(let i=0,n=e.length;i<n;i++)t.appendChild(e[i]);a.appendChild(t),v.appendChild(a),b.push(t),l=t.children.length>0?w:t}if(_&&3===n.nodeType)if(g(n)){const e=r.getParentElement(l,function(e){return this.isMaintainedNode(e.parentNode)||e.parentNode===v}.bind(r));_.appendChild(e),t=e.cloneNode(!1),b.push(t),v.appendChild(t)}else _=null}d=n.cloneNode(!1),l.appendChild(d),1!==n.nodeType||r.isBreak(n)||(h=d),e(n,h)}else{_=g(n);const e=r.createTextNode(1===z.nodeType?"":z.substringData(L,z.length-L)),l=r.createTextNode(y||1===z.nodeType?"":z.substringData(0,L));if(_?_=_.cloneNode(!1):p(t.parentNode)&&!_&&(t=t.cloneNode(!1),v.appendChild(t),b.push(t)),!r.onlyZeroWidthSpace(e)){w=n,x="",k=[];const t=[];for(;w!==v&&w!==f&&null!==w;)1===w.nodeType&&A(w)&&(p(w)?t.push(w.cloneNode(!1)):k.push(w.cloneNode(!1)),x+=w.style.cssText.substr(0,w.style.cssText.indexOf(":"))+"|"),w=w.parentNode;for(k=k.concat(t),d=C=w=k.pop()||e;k.length>0;)w=k.pop(),C.appendChild(w),C=w;v.appendChild(d),w.textContent=e.data}if(_&&d){const e=g(d);e&&(_=e)}for(w=n,k=[],x="";w!==v&&w!==f&&null!==w;)s=p(w)?null:i(w),s&&1===w.nodeType&&A(w)&&(k.push(s),x+=w.style.cssText.substr(0,w.style.cssText.indexOf(":"))+"|"),w=w.parentNode;const o=k.pop()||l;for(C=w=o;k.length>0;)w=k.pop(),C.appendChild(w),C=w;_?((t=t.cloneNode(!1)).appendChild(o),_.insertBefore(t,_.firstChild),v.appendChild(_),b.push(t),_=null):t.appendChild(o),z=l,L=l.data.length,N=!0,!c&&u&&(t=l,l.textContent=r.zeroWidthSpace),w!==l&&w.appendChild(z)}}}(e,v),d&&!c&&!h.v)return{ancestor:e,startContainer:n,startOffset:l,endContainer:o,endOffset:s};if(c=c&&d)for(let a=0;a<b.length;a++){let e,t,i,n=b[a];if(u)e=r.createTextNode(r.zeroWidthSpace),v.replaceChild(e,n);else{const e=n.childNodes;for(t=e[0];e[0];)i=e[0],v.insertBefore(i,n);r.removeItem(n)}0===a&&(u?S=z=e:(S=t,z=i))}else{if(d)for(let e=0;e<b.length;e++)this.stripRemoveNode(b[e]);u&&(S=z=t)}r.removeEmptyNode(v,t),u&&(E=S.textContent.length,L=z.textContent.length);const M=c||0===z.textContent.length;r.isBreak(z)||0!==z.textContent.length||(r.removeItem(z),z=S),L=M?z.textContent.length:L;const I={s:0,e:0},R=r.getNodePath(S,v,I),H=!z.parentNode;H&&(z=S);const F={s:0,e:0},D=r.getNodePath(z,v,H||M?null:F);E+=I.s,L=u?E:H?S.textContent.length:M?L+I.s:L+F.s;const O=r.mergeSameTags(v,[R,D],!0);return e.parentNode.replaceChild(v,e),S=r.getNodeFromPath(R,v),z=r.getNodeFromPath(D,v),{ancestor:v,startContainer:S,startOffset:E+O[0],endContainer:z,endOffset:L+O[1]}},nodeChange_startLine:function(e,t,i,n,l,o,s,a,c,d,u){let h=n.parentNode;for(;!h.nextSibling&&!h.previousSibling&&!r.isFormatElement(h.parentNode)&&!r.isWysiwygDiv(h.parentNode)&&h.nodeName!==t.nodeName;)h=h.parentNode;if(!s&&h.nodeName===t.nodeName&&!r.isFormatElement(h)&&!h.nextSibling&&r.onlyZeroWidthSpace(n.textContent.slice(0,l))){let i=!0,o=n.previousSibling;for(;o;){if(!r.onlyZeroWidthSpace(o)){i=!1;break}o=o.previousSibling}if(i)return r.copyTagAttributes(h,t),{ancestor:e,container:n,offset:l}}a.v=!1;const g=e,p=[t],m=e.cloneNode(!1);let f,b,v,y,k=n,w=l,C=!1;if(function e(n,l){const o=n.childNodes;for(let s,a,h=0,x=o.length;h<x;h++){const n=o[h];if(!n)continue;let x=l;if(C&&!r.isBreak(n)){if(1===n.nodeType){if(r.isIgnoreNodeChange(n)){if(t=t.cloneNode(!1),a=n.cloneNode(!0),m.appendChild(a),m.appendChild(t),p.push(t),u&&n.contains(u)){const e=r.getNodePath(u,n);u=r.getNodeFromPath(e,a)}}else e(n,n);continue}b=n,f=[];const o=[];for(;null!==b.parentNode&&b!==g&&b!==t;)s=i(b),1===b.nodeType&&s&&(d(b)?y||o.push(s):f.push(s)),b=b.parentNode;f=f.concat(o);const h=f.length>0,k=f.pop()||n;for(v=b=k;f.length>0;)b=f.pop(),v.appendChild(b),v=b;if(d(t.parentNode)&&!d(k)&&(t=t.cloneNode(!1),m.appendChild(t),p.push(t)),!y&&d(k)){t=t.cloneNode(!1);const e=k.childNodes;for(let i=0,n=e.length;i<n;i++)t.appendChild(e[i]);k.appendChild(t),m.appendChild(k),l=d(b)?t:b,p.push(t)}else h?(t.appendChild(k),l=b):l=t;if(y&&3===n.nodeType)if(c(n)){const e=r.getParentElement(l,function(e){return this.isMaintainedNode(e.parentNode)||e.parentNode===m}.bind(r));y.appendChild(e),t=e.cloneNode(!1),p.push(t),m.appendChild(t)}else y=null}if(C||n!==k)s=C?i(n):n.cloneNode(!1),s&&(l.appendChild(s),1!==n.nodeType||r.isBreak(n)||(x=s)),e(n,x);else{let e=m;y=c(n);const o=r.createTextNode(1===k.nodeType?"":k.substringData(0,w)),a=r.createTextNode(1===k.nodeType?"":k.substringData(w,k.length-w));if(y){const t=c(l);if(t&&t.parentNode!==e){let i=t,n=null;for(;i.parentNode!==e;){for(l=n=i.parentNode.cloneNode(!1);i.childNodes[0];)n.appendChild(i.childNodes[0]);i.appendChild(n),i=i.parentNode}i.parentNode.appendChild(t)}y=y.cloneNode(!1)}r.onlyZeroWidthSpace(o)||l.appendChild(o);const d=c(l);for(d&&(y=d),y&&(e=y),b=l,f=[];b!==e&&null!==b;)s=i(b),1===b.nodeType&&s&&f.push(s),b=b.parentNode;const u=f.pop()||l;for(v=b=u;f.length>0;)b=f.pop(),v.appendChild(b),v=b;u!==l?(t.appendChild(u),l=b):l=t,r.isBreak(n)&&t.appendChild(n.cloneNode(!1)),e.appendChild(t),k=a,w=0,C=!0,l.appendChild(k)}}}(e,m),s&&!o&&!a.v)return{ancestor:e,container:n,offset:l,endContainer:u};if(o=o&&s)for(let x=0;x<p.length;x++){let e=p[x];const t=e.childNodes,i=t[0];for(;t[0];)m.insertBefore(t[0],e);r.removeItem(e),0===x&&(k=i)}else if(s){t=t.firstChild;for(let e=0;e<p.length;e++)this.stripRemoveNode(p[e])}if(o||0!==m.childNodes.length){r.removeEmptyNode(m,t),r.onlyZeroWidthSpace(m.textContent)&&(k=m.firstChild,w=0);const i={s:0,e:0},n=r.getNodePath(k,m,i);w+=i.s;const l=r.mergeSameTags(m,[n],!0);e.parentNode.replaceChild(m,e),k=r.getNodeFromPath(n,m),w+=l[0]}else e.childNodes?k=e.childNodes[0]:(k=r.createTextNode(r.zeroWidthSpace),e.appendChild(k));return{ancestor:m,container:k,offset:w,endContainer:u}},nodeChange_middleLine:function(e,t,i,n,l,o,s){if(!l){let i=null;s&&e.contains(s)&&(i=r.getNodePath(s,e));const n=e.cloneNode(!0),l=t.nodeName,o=t.style.cssText,a=t.className;let c,d=n.childNodes,u=0,h=d.length;for(;u<h&&(c=d[u],3!==c.nodeType);u++){if(c.nodeName!==l){if(!r.isBreak(c)&&r.isIgnoreNodeChange(c))continue;if(1===h){d=c.childNodes,h=d.length,u=-1;continue}break}c.style.cssText+=o,r.addClass(c,a)}if(h>0&&u===h)return e.innerHTML=n.innerHTML,{ancestor:e,endContainer:i?r.getNodeFromPath(i,e):null}}o.v=!1;const a=e.cloneNode(!1),c=[t];let d=!0;if(function e(n,l){const o=n.childNodes;for(let u,h,g=0,p=o.length;g<p;g++){let n=o[g];if(!n)continue;let p=l;if(r.isBreak(n)||!r.isIgnoreNodeChange(n))u=i(n),u&&(d=!1,l.appendChild(u),1===n.nodeType&&(p=u)),r.isBreak(n)||e(n,p);else if(t.childNodes.length>0&&(a.appendChild(t),t=t.cloneNode(!1)),h=n.cloneNode(!0),a.appendChild(h),a.appendChild(t),c.push(t),l=t,s&&n.contains(s)){const e=r.getNodePath(s,n);s=r.getNodeFromPath(e,h)}}}(e,t),d||l&&!n&&!o.v)return{ancestor:e,endContainer:s};if(a.appendChild(t),n&&l)for(let u=0;u<c.length;u++){let e=c[u];const t=e.childNodes;for(;t[0];)a.insertBefore(t[0],e);r.removeItem(e)}else if(l){t=t.firstChild;for(let e=0;e<c.length;e++)this.stripRemoveNode(c[e])}return r.removeEmptyNode(a,t),r.mergeSameTags(a,null,!0),e.parentNode.replaceChild(a,e),{ancestor:a,endContainer:s}},nodeChange_endLine:function(e,t,i,n,l,o,s,a,c,d){let u=n.parentNode;for(;!u.nextSibling&&!u.previousSibling&&!r.isFormatElement(u.parentNode)&&!r.isWysiwygDiv(u.parentNode)&&u.nodeName!==t.nodeName;)u=u.parentNode;if(!s&&u.nodeName===t.nodeName&&!r.isFormatElement(u)&&!u.previousSibling&&r.onlyZeroWidthSpace(n.textContent.slice(l))){let i=!0,o=n.nextSibling;for(;o;){if(!r.onlyZeroWidthSpace(o)){i=!1;break}o=o.nextSibling}if(i)return r.copyTagAttributes(u,t),{ancestor:e,container:n,offset:l}}a.v=!1;const h=e,g=[t],p=e.cloneNode(!1);let m,f,b,v,y=n,k=l,w=!1;if(function e(n,l){const o=n.childNodes;for(let s,a=o.length-1;0<=a;a--){const n=o[a];if(!n)continue;let u=l;if(w&&!r.isBreak(n)){if(1===n.nodeType){if(r.isIgnoreNodeChange(n)){t=t.cloneNode(!1);const e=n.cloneNode(!0);p.insertBefore(e,l),p.insertBefore(t,e),g.push(t)}else e(n,n);continue}f=n,m=[];const o=[];for(;null!==f.parentNode&&f!==h&&f!==t;)s=i(f),s&&1===f.nodeType&&(d(f)?v||o.push(s):m.push(s)),f=f.parentNode;m=m.concat(o);const a=m.length>0,u=m.pop()||n;for(b=f=u;m.length>0;)f=m.pop(),b.appendChild(f),b=f;if(d(t.parentNode)&&!d(u)&&(t=t.cloneNode(!1),p.insertBefore(t,p.firstChild),g.push(t)),!v&&d(u)){t=t.cloneNode(!1);const e=u.childNodes;for(let i=0,n=e.length;i<n;i++)t.appendChild(e[i]);u.appendChild(t),p.insertBefore(u,p.firstChild),g.push(t),l=t.children.length>0?f:t}else a?(t.insertBefore(u,t.firstChild),l=f):l=t;if(v&&3===n.nodeType)if(c(n)){const e=r.getParentElement(l,function(e){return this.isMaintainedNode(e.parentNode)||e.parentNode===p}.bind(r));v.appendChild(e),t=e.cloneNode(!1),g.push(t),p.insertBefore(t,p.firstChild)}else v=null}if(w||n!==y)s=w?i(n):n.cloneNode(!1),s&&(l.insertBefore(s,l.firstChild),1!==n.nodeType||r.isBreak(n)||(u=s)),e(n,u);else{v=c(n);const e=r.createTextNode(1===y.nodeType?"":y.substringData(k,y.length-k)),o=r.createTextNode(1===y.nodeType?"":y.substringData(0,k));if(v){v=v.cloneNode(!1);const e=c(l);if(e&&e.parentNode!==p){let t=e,i=null;for(;t.parentNode!==p;){for(l=i=t.parentNode.cloneNode(!1);t.childNodes[0];)i.appendChild(t.childNodes[0]);t.appendChild(i),t=t.parentNode}t.parentNode.insertBefore(e,t.parentNode.firstChild)}v=v.cloneNode(!1)}else d(t.parentNode)&&!v&&(t=t.cloneNode(!1),p.appendChild(t),g.push(t));for(r.onlyZeroWidthSpace(e)||l.insertBefore(e,l.firstChild),f=l,m=[];f!==p&&null!==f;)s=d(f)?null:i(f),s&&1===f.nodeType&&m.push(s),f=f.parentNode;const a=m.pop()||l;for(b=f=a;m.length>0;)f=m.pop(),b.appendChild(f),b=f;a!==l?(t.insertBefore(a,t.firstChild),l=f):l=t,r.isBreak(n)&&t.appendChild(n.cloneNode(!1)),v?(v.insertBefore(t,v.firstChild),p.insertBefore(v,p.firstChild),v=null):p.insertBefore(t,p.firstChild),y=o,k=o.data.length,w=!0,l.insertBefore(y,l.firstChild)}}}(e,p),s&&!o&&!a.v)return{ancestor:e,container:n,offset:l};if(o=o&&s)for(let C=0;C<g.length;C++){let e=g[C];const t=e.childNodes;let i=null;for(;t[0];)i=t[0],p.insertBefore(i,e);r.removeItem(e),C===g.length-1&&(y=i,k=i.textContent.length)}else if(s){t=t.firstChild;for(let e=0;e<g.length;e++)this.stripRemoveNode(g[e])}if(o||0!==p.childNodes.length){if(!s&&0===t.textContent.length)return r.removeEmptyNode(p,null),{ancestor:null,container:null,offset:0};r.removeEmptyNode(p,t),r.onlyZeroWidthSpace(p.textContent)?(y=p.firstChild,k=y.textContent.length):r.onlyZeroWidthSpace(y)&&(y=t,k=1);const i={s:0,e:0},n=r.getNodePath(y,p,i);k+=i.s;const l=r.mergeSameTags(p,[n],!0);e.parentNode.replaceChild(p,e),y=r.getNodeFromPath(n,p),k+=l[0]}else e.childNodes?y=e.childNodes[0]:(y=r.createTextNode(r.zeroWidthSpace),e.appendChild(y));return{ancestor:p,container:y,offset:k}},actionCall:function(t,i,n){if(i){if(/more/i.test(i)&&n!==this.moreLayerActiveButton){const i=e.element.toolbar.querySelector("."+t);return void(i&&(this.moreLayerActiveButton&&(e.element.toolbar.querySelector("."+this.moreLayerActiveButton.getAttribute("data-command")).style.display="none",r.removeClass(this.moreLayerActiveButton,"on")),r.addClass(n,"on"),this.moreLayerActiveButton=n,i.style.display="block",u.showToolbarBalloon(),u.showToolbarInline()))}if(/submenu/.test(i)&&(null===this.menuTray[t]||n!==this.submenuActiveButton))return void this.callPlugin(t,this.submenuOn.bind(this,n),n);if(/dialog/.test(i))return void this.callPlugin(t,this.plugins[t].open.bind(this),n);if(/command/.test(i))this.callPlugin(t,this.plugins[t].action.bind(this),n);else{if(/container/.test(i)&&(null===this.menuTray[t]||n!==this.containerActiveButton))return void this.callPlugin(t,this.containerOn.bind(this,n),n);/fileBrowser/.test(i)&&this.callPlugin(t,this.plugins[t].open.bind(this,null),n)}}else t&&this.commandHandler(n,t);if(/more/i.test(i)){const t=e.element.toolbar.querySelector("."+this.moreLayerActiveButton.getAttribute("data-command"));t&&(r.removeClass(this.moreLayerActiveButton,"on"),this.moreLayerActiveButton=null,t.style.display="none",u.showToolbarBalloon(),u.showToolbarInline())}else/submenu/.test(i)?this.submenuOff():/command/.test(i)||(this.submenuOff(),this.containerOff())},commandHandler:function(i,n){switch(n){case"copy":case"cut":this.execCommand(n);break;case"paste":break;case"selectAll":const l=e.element.wysiwyg;let o=r.getChildElement(l.firstChild,(function(e){return 0===e.childNodes.length||3===e.nodeType}),!1)||l.firstChild,s=r.getChildElement(l.lastChild,(function(e){return 0===e.childNodes.length||3===e.nodeType}),!0)||l.lastChild;if(!o||!s)return;if(r.isMedia(o)){const e=this.getFileComponent(o),i=r.createElement("BR"),n=r.createElement(t.defaultTag);n.appendChild(i),o=e?e.component:o,o.parentNode.insertBefore(n,o),o=i}if(r.isMedia(s)){const e=r.createElement("BR"),i=r.createElement(t.defaultTag);i.appendChild(e),l.appendChild(i),s=e}this.setRange(o,0,s,s.textContent.length);break;case"codeView":this.toggleCodeView();break;case"fullScreen":this.toggleFullScreen(i);break;case"indent":case"outdent":this.indent(n);break;case"undo":this.history.undo();break;case"redo":this.history.redo();break;case"removeFormat":this.removeFormat(),this.focus();break;case"print":this.print();break;case"preview":this.preview(i);break;case"showBlocks":this.toggleDisplayBlocks();break;case"save":if("function"===typeof t.callBackSave)t.callBackSave(this.getContents(!1),this._variable.isChanged);else{if(!this._variable.isChanged||"function"!==typeof h.save)throw Error("[KothingEditor.core.commandHandler.fail] Please register call back function in creation option. (callBackSave : Function)");h.save()}this._variable.isChanged=!1,e.tool.save&&e.tool.save.setAttribute("disabled",!0);break;default:n=this.defaultCommand[n.toLowerCase()]||n,this.commandMap[n]||(this.commandMap[n]=i);const a=this._variable.currentNodesMap,c=a.indexOf(n)>-1?null:r.createElement(n);let d=n;/^SUB$/i.test(n)&&a.indexOf("SUP")>-1?d="SUP":/^SUP$/i.test(n)&&a.indexOf("SUB")>-1&&(d="SUB"),this.nodeChange(c,null,[d],!1),this.focus()}},removeFormat:function(){this.nodeChange(null,null,null,null)},indent:function(e){const i=this.getRange(),n=this.getSelectedElements(null),l=[],o="indent"!==e,s=t.rtl?"marginRight":"marginLeft";let a=i.startContainer,c=i.endContainer,d=i.startOffset,u=i.endOffset;for(let t,h,g=0,p=n.length;g<p;g++)t=n[g],r.isListCell(t)&&this.plugins.list?(o||t.previousElementSibling)&&l.push(t):(h=/\d+/.test(t.style[s])?r.getNumber(t.style[s],0):0,o?h-=25:h+=25,r.setStyle(t,s,h<=0?"":h+"px"));l.length>0&&this.plugins.list.editInsideList.call(this,o,l),this.effectNode=null,this.setRange(a,d,c,u),this.history.push(!1)},toggleDisplayBlocks:function(){const t=e.element.wysiwyg;r.toggleClass(t,"ke-show-block"),r.hasClass(t,"ke-show-block")?r.addClass(this.styleCommandMap.showBlocks,"active"):r.removeClass(this.styleCommandMap.showBlocks,"active"),this.resourcesStateChange()},toggleCodeView:function(){const i=this._variable.isCodeView;this.controllersOff(),r.setDisabledButtons(!i,this.codeViewDisabledButtons),i?(this.setCodeDataToEditor(),e.element.wysiwygFrame.scrollTop=0,e.element.code.style.display="none",e.element.wysiwygFrame.style.display="block",this._variable.codeOriginCssText=this._variable.codeOriginCssText.replace(/(\s?display(\s+)?:(\s+)?)[a-zA-Z]+(?=;)/,"display: none"),this._variable.wysiwygOriginCssText=this._variable.wysiwygOriginCssText.replace(/(\s?display(\s+)?:(\s+)?)[a-zA-Z]+(?=;)/,"display: block"),"auto"!==t.height||t.codeMirrorEditor||(e.element.code.style.height="0px"),this._variable.isCodeView=!1,this._variable.isFullScreen||(this.notHideToolbar=!1,/balloon|balloon-always/i.test(t.mode)&&(e.element.arrow.style.display="",this.isInline=!1,this.isBalloon=!0,u.hideToolbar())),this.nativeFocus(),r.removeClass(this.styleCommandMap.codeView,"active"),this.history.push(!1),this.history.resetCachingButton()):(this.setEditorDataToCodeView(),this._variable.codeOriginCssText=this._variable.codeOriginCssText.replace(/(\s?display(\s+)?:(\s+)?)[a-zA-Z]+(?=;)/,"display: block"),this._variable.wysiwygOriginCssText=this._variable.wysiwygOriginCssText.replace(/(\s?display(\s+)?:(\s+)?)[a-zA-Z]+(?=;)/,"display: none"),"auto"!==t.height||t.codeMirrorEditor||(e.element.code.style.height=e.element.code.scrollHeight>0?e.element.code.scrollHeight+"px":"auto"),t.codeMirrorEditor&&t.codeMirrorEditor.refresh(),this._variable.isCodeView=!0,this._variable.isFullScreen||(this.notHideToolbar=!0,this.isBalloon&&(e.element.arrow.style.display="none",e.element.toolbar.style.left="",this.isInline=!0,this.isBalloon=!1,u.showToolbarInline())),this._variable.range=null,e.element.code.focus(),r.addClass(this.styleCommandMap.codeView,"active")),this.checkPlaceholder(),"function"===typeof h.toggleCodeView&&h.toggleCodeView(this._variable.isCodeView,this)},setCodeDataToEditor:function(){const i=this.getCodeView();if(t.fullPage){const e=this._parser.parseFromString(i,"text/html"),n=e.head.children;for(let t=0,i=n.length;t<i;t++)/^script$/i.test(n[t].tagName)&&(e.head.removeChild(n[t]),t--,i--);this._wd.head.innerHTML=e.head.innerHTML,this._wd.body.innerHTML=this.convertContentsForEditor(e.body.innerHTML);const l=e.body.attributes;for(let t=0,i=l.length;t<i;t++)"contenteditable"!==l[t].name&&this._wd.body.setAttribute(l[t].name,l[t].value);if(!r.hasClass(this._wd.body,"kothing-editor-editable")){const e=t.editableClass.split(" ");for(let i=0;i<e.length;i++)r.addClass(this._wd.body,t.editableClass[i])}}else e.element.wysiwyg.innerHTML=i.length>0?this.convertContentsForEditor(i):"<"+t.defaultTag+"><br></"+t.defaultTag+">"},setEditorDataToCodeView:function(){const i=this.convertHTMLForCodeView(e.element.wysiwyg);let n="";if(t.fullPage){const e=r.getAttributesToString(this._wd.body,null);n="<!DOCTYPE html>\n<html>\n"+this._wd.head.outerHTML.replace(/>(?!\n)/g,">\n")+"<body "+e+">\n"+i+"</body>\n</html>"}else n=i;e.element.code.style.display="block",e.element.wysiwygFrame.style.display="none",this.setCodeView(n)},toggleFullScreen:function(i){const n=e.element.topArea,l=e.element.toolbar,s=e.element.editorArea,d=e.element.wysiwygFrame,g=e.element.code,p=this._variable;this.controllersOff(),p.isFullScreen?(p.isFullScreen=!1,d.style.cssText=p.wysiwygOriginCssText,g.style.cssText=p.codeOriginCssText,l.style.cssText="",s.style.cssText=p.editorAreaOriginCssText,n.style.cssText=p.originCssText,o.body.style.overflow=p.bodyOverflow,t.toolbarContainer&&t.toolbarContainer.appendChild(l),t.stickyToolbar>-1&&r.removeClass(l,"ke-toolbar-sticky"),p.fullScreenAttrs.sticky&&!t.toolbarContainer&&(p.fullScreenAttrs.sticky=!1,e.element.stickyDummy.style.display="block",r.addClass(l,"ke-toolbar-sticky")),this.isInline=p.fullScreenAttrs.inline,this.isBalloon=p.fullScreenAttrs.balloon,this.isInline&&u.showToolbarInline(),t.toolbarContainer&&r.removeClass(l,"ke-toolbar-balloon"),u.onScroll_window(),r.changeElement(i.firstElementChild,c.expansion),e.element.topArea.style.marginTop="",r.removeClass(this.styleCommandMap.fullScreen,"active")):(p.isFullScreen=!0,p.fullScreenAttrs.inline=this.isInline,p.fullScreenAttrs.balloon=this.isBalloon,(this.isInline||this.isBalloon)&&(this.isInline=!1,this.isBalloon=!1),t.toolbarContainer&&e.element.relative.insertBefore(l,s),n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.width="100%",n.style.maxWidth="100%",n.style.height="100%",n.style.zIndex="2147483647",""!==e.element.stickyDummy.style.display&&(p.fullScreenAttrs.sticky=!0,e.element.stickyDummy.style.display="none",r.removeClass(l,"ke-toolbar-sticky")),p.bodyOverflow=o.body.style.overflow,o.body.style.overflow="hidden",p.editorAreaOriginCssText=s.style.cssText,p.wysiwygOriginCssText=d.style.cssText,p.codeOriginCssText=g.style.cssText,s.style.cssText=l.style.cssText="",d.style.cssText=(d.style.cssText.match(/\s?display(\s+)?:(\s+)?[a-zA-Z]+;/)||[""])[0],g.style.cssText=(g.style.cssText.match(/\s?display(\s+)?:(\s+)?[a-zA-Z]+;/)||[""])[0],l.style.width=d.style.height=g.style.height="100%",l.style.position="relative",l.style.display="block",p.innerHeight_fullScreen=a.innerHeight-l.offsetHeight,s.style.height=p.innerHeight_fullScreen-t.fullScreenOffset+"px",r.changeElement(i.firstElementChild,c.reduction),t.iframe&&"auto"===t.height&&(s.style.overflow="auto",this.iframeAutoHeight()),e.element.topArea.style.marginTop=t.fullScreenOffset+"px",r.addClass(this.styleCommandMap.fullScreen,"active")),"function"===typeof h.toggleFullScreen&&h.toggleFullScreen(this._variable.isFullScreen,this)},print:function(){const e=r.createElement("IFRAME");e.style.display="none",o.body.appendChild(e);const i=t.printTemplate?t.printTemplate.replace(/\{\{\s*contents\s*\}\}/i,this.getContents(!0)):this.getContents(!0),n=r.getIframeDocument(e),l=this._wd;if(t.iframe){const e=null!==t.printClass?'class="'+t.printClass+'"':t.fullPage?r.getAttributesToString(l.body,["contenteditable"]):'class="'+t.editableClass+'"';n.write("<!DOCTYPE html><html><head>"+l.head.innerHTML+"</head><body "+e+">"+i+"</body></html>")}else{const e=o.head.getElementsByTagName("link"),l=o.head.getElementsByTagName("style");let s="";for(let t=0,i=e.length;t<i;t++)s+=e[t].outerHTML;for(let t=0,i=l.length;t<i;t++)s+=l[t].outerHTML;n.write("<!DOCTYPE html><html><head>"+s+'</head><body class="'+(null!==t.printClass?t.printClass:t.editableClass)+'">'+i+"</body></html>")}this.showLoading(),a.setTimeout((function(){try{if(e.focus(),r.isIE_Edge||o.documentMode||a.StyleMedia)try{e.contentWindow.document.execCommand("print",!1,null)}catch(t){e.contentWindow.print()}else e.contentWindow.print()}catch(i){throw Error("[KothingEditor.core.print.fail] error: "+i)}finally{d.closeLoading(),r.removeItem(e)}}),1e3)},preview:function(e){d.submenuOff(),d.containerOff(),d.controllersOff(e);const i=t.previewTemplate?t.previewTemplate.replace(/\{\{\s*contents\s*\}\}/i,this.getContents(!0)):this.getContents(!0),n=a.open("","_blank");n.mimeType="text/html";const l=this._wd;if(t.iframe){const e=null!==t.printClass?'class="'+t.printClass+'"':t.fullPage?r.getAttributesToString(l.body,["contenteditable"]):'class="'+t.editableClass+'"';n.document.write("<!DOCTYPE html><html><head>"+l.head.innerHTML+"<style>body {overflow:auto !important; margin: 10px auto !important; height:auto !important; outline:1px dashed #ccc;}</style></head><body "+e+">"+i+"</body></html>")}else{const e=o.head.getElementsByTagName("link"),l=o.head.getElementsByTagName("style");let s="";for(let t=0,i=e.length;t<i;t++)s+=e[t].outerHTML;for(let t=0,i=l.length;t<i;t++)s+=l[t].outerHTML;n.document.write('<!DOCTYPE html><html><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1"><title>'+t.lang.toolbar.preview+"</title>"+s+'</head><body class="'+(null!==t.printClass?t.printClass:t.editableClass)+'" style="margin:10px auto !important; height:auto !important; outline:1px dashed #ccc;">'+i+"</body></html>")}},setContents:function(t){this.removeRange();const i=null===t||void 0===t?"":this.convertContentsForEditor(t);if(this.resetComponents(),this._variable.isCodeView){const e=this.convertHTMLForCodeView(i);this.setCodeView(e)}else e.element.wysiwyg.innerHTML=i,this.history.push(!1)},setIframeContents:function(e){if(!t.iframe)return!1;e.head&&(this._wd.head.innerHTML=e.head.replace(/<script[\s\S]*>[\s\S]*<\/script>/gi,"")),e.body&&(this._wd.body.innerHTML=this.convertContentsForEditor(e.body))},getContents:function(i){const n=e.element.wysiwyg.innerHTML,l=r.createElement("DIV");l.innerHTML=n;const o=r.getListChildren(l,(function(e){return/FIGCAPTION/i.test(e.nodeName)}));for(let e=0,t=o.length;e<t;e++)o[e].removeAttribute("contenteditable");if(t.fullPage&&!i){const e=r.getAttributesToString(this._wd.body,["contenteditable"]);return"<!DOCTYPE html><html>"+this._wd.head.outerHTML+"<body "+e+">"+l.innerHTML+"</body></html>"}return l.innerHTML},makeLine:function(e,i){const n=t.defaultTag;if(1===e.nodeType)return r.disallowedTags(e)?"":!i||r.isFormatElement(e)||r.isRangeFormatElement(e)||r.isComponent(e)||r.isMedia(e)||r.isAnchor(e)&&r.isMedia(e.firstElementChild)?e.outerHTML:"<"+n+">"+e.outerHTML+"</"+n+">";if(3===e.nodeType){if(!i)return r.HTMLConvertor(e.textContent);const t=e.textContent.split(/\n/g);let l="";for(let e,i=0,o=t.length;i<o;i++)e=t[i].trim(),e.length>0&&(l+="<"+n+">"+r.HTMLConvertor(e)+"</"+n+">");return l}return 8===e.nodeType&&this.allowHTMLComments?"\x3c!--"+e.textContent.trim()+"--\x3e":""},tagConvertor:function(e){if(!this.disallowedTextTagsRegExp)return e;const i=t.textTagsMap;return e.replace(this.disallowedTextTagsRegExp,(function(e,t,n,l){return t+("string"===typeof i[n]?i[n]:n)+(l?" "+l:"")}))},deleteDisallowedTags:function(e){return e.replace(/\n/g,"").replace(/<(script|style)[\s\S]*>[\s\S]*<\/(script|style)>/gi,"").replace(/<[a-z0-9]+\:[a-z0-9]+[^>^\/]*>[^>]*<\/[a-z0-9]+\:[a-z0-9]+>/gi,"").replace(this.editorTagsWhitelistRegExp,"")},cleanTags:function(e,t,i){if(/^<[a-z0-9]+\:[a-z0-9]+/i.test(t))return t;let n=null;const l=this.attributesTagsWhitelist[i.match(/(?!<)[a-zA-Z0-9\-]+/)[0].toLowerCase()];if(n=l?t.match(l):t.match(this.attributesWhitelistRegExp),(e||/<span/i.test(i))&&(!n||!/style=/i.test(n.toString()))){const e=t.match(/style\s*=\s*(?:"|')[^"']*(?:"|')/);e&&(n||(n=[]),n.push(e[0]))}if(/<a\b/i.test(i)){const e=t.match(/id\s*=\s*(?:"|')[^"']*(?:"|')/);e&&(n||(n=[]),n.push(e[0]))}if(n)for(let o=0,s=n.length;o<s;o++)!e&&/^class="(?!(__ke__|ke-|katex))/.test(n[o])||(i+=" "+(/^href\s*=\s*('|"|\s)*javascript\s*\:/i.test(n[o])?"":n[o]));return i},cleanHTML:function(e,t){e=this.deleteDisallowedTags(this._parser.parseFromString(e,"text/html").body.innerHTML).replace(/(<[a-zA-Z0-9\-]+)[^>]*(?=>)/g,this.cleanTags.bind(this,!1));const i=o.createRange().createContextualFragment(e);try{r.consistencyCheckOfHTML(i,this.htmlCheckWhitelistRegExp)}catch(a){console.warn("[KothingEditor.cleanHTML.consistencyCheck.fail] "+a)}if(this.managedTagsInfo&&this.managedTagsInfo.query){const e=i.querySelectorAll(this.managedTagsInfo.query);for(let t,i,n=0,l=e.length;n<l;n++){i=[].slice.call(e[n].classList);for(let l=0,o=i.length;l<o;l++)if(t=this.managedTagsInfo.map[i[l]],t){t(e[n]);break}}}const n=i.childNodes;let l="",s=!1;for(let o,c=0,d=n.length;c<d;c++)if(o=n[c],1===o.nodeType&&!r.isTextStyleElement(o)&&!r.isBreak(o)&&!r.disallowedTags(o)){s=!0;break}for(let o=0,r=n.length;o<r;o++)l+=this.makeLine(n[o],s);return l=r.htmlRemoveWhiteSpace(l),this.tagConvertor(l?t?l.replace("string"===typeof t?r.createTagsWhitelist(t):t,""):l:e)},convertContentsForEditor:function(e){e=this.deleteDisallowedTags(this._parser.parseFromString(e,"text/html").body.innerHTML).replace(/(<[a-zA-Z0-9\-]+)[^>]*(?=>)/g,this.cleanTags.bind(this,!0));const i=o.createRange().createContextualFragment(e);try{r.consistencyCheckOfHTML(i,this.htmlCheckWhitelistRegExp)}catch(s){console.warn("[KothingEditor.convertContentsForEditor.consistencyCheck.fail] "+s)}if(this.managedTagsInfo&&this.managedTagsInfo.query){const e=i.querySelectorAll(this.managedTagsInfo.query);for(let t,i,n=0,l=e.length;n<l;n++){i=[].slice.call(e[n].classList);for(let l=0,o=i.length;l<o;l++)if(t=this.managedTagsInfo.map[i[l]],t){t(e[n]);break}}}const n=i.childNodes;let l="";for(let t=0,o=n.length;t<o;t++)l+=this.makeLine(n[t],!0);return 0===l.length?"<"+t.defaultTag+"><br></"+t.defaultTag+">":(l=r.htmlRemoveWhiteSpace(l),this.tagConvertor(l))},convertHTMLForCodeView:function(e){let t="";const i=a.RegExp,n=new i("^(BLOCKQUOTE|PRE|TABLE|THEAD|TBODY|TR|TH|TD|OL|UL|IMG|IFRAME|VIDEO|AUDIO|FIGURE|FIGCAPTION|HR|BR|CANVAS|SELECT)$","i"),l="string"===typeof e?o.createRange().createContextualFragment(e):e,s=function(e){return this.isFormatElement(e)||this.isComponent(e)}.bind(r);let c=1*this._variable.codeIndent;return c=c>0?new a.Array(c+1).join(" "):"",function e(l,o,d){const u=l.childNodes,h=n.test(l.nodeName),g=h?o:"";for(let p,m,f,b,v,y=0,k=u.length;y<k;y++)p=u[y],f=n.test(p.nodeName),m=f?"\n":"",d=!s(p)||h||/^(TH|TD)$/i.test(l.nodeName)?"":"\n",8!==p.nodeType?3!==p.nodeType?0!==p.childNodes.length?p.outerHTML?(b=p.nodeName.toLowerCase(),v=g||f?o:"",t+=(d||(h?"":m))+v+p.outerHTML.match(i("<"+b+"[^>]*>","i"))[0]+m,e(p,o+c,""),t+=(/\n$/.test(t)?v:"")+"</"+b+">"+(d||m||h||/^(TH|TD)$/i.test(p.nodeName)?"\n":"")):t+=(new a.XMLSerializer).serializeToString(p):t+=(/^HR$/i.test(p.nodeName)?"\n":"")+(/^PRE$/i.test(p.parentElement.nodeName)&&/^BR$/i.test(p.nodeName)?"":g)+p.outerHTML+m:r.isList(p.parentElement)||(t+=r.HTMLConvertor(/^\n+$/.test(p.data)?"":p.data)):t+="\n\x3c!-- "+p.textContent.trim()+" --\x3e"+m}(l,"","\n"),t.trim()+"\n"},addDocEvent:function(e,i,n){o.addEventListener(e,i,n),t.iframe&&this._wd.addEventListener(e,i)},removeDocEvent:function(e,i){o.removeEventListener(e,i),t.iframe&&this._wd.removeEventListener(e,i)},charCount:function(e){const i=t.maxCharCount,n=t.charCounterType;let l=0;if(e&&(l=this.getCharLength(e,n)),this.setCharCount(),i>0){let e=!1;const t=h.getCharCount(n);if(t>i){if(e=!0,l>0){this.editorRange();const e=this.getRange(),n=e.endOffset-1,l=this.getSelectionNode().textContent,o=e.endOffset-(t-i);this.getSelectionNode().textContent=l.slice(0,o<0?0:o)+l.slice(e.endOffset,l.length),this.setRange(e.endContainer,n,e.endContainer,n)}}else t+l>i&&(e=!0);if(e&&(this.callCounterBlink(),l>0))return!1}return!0},checkCharCount:function(e,i){if(t.maxCharCount){const n=i||t.charCounterType,l=this.getCharLength("string"===typeof e?e:this.charTypeHTML&&1===e.nodeType?e.outerHTML:e.textContent,n);if(l>0&&l+h.getCharCount(n)>t.maxCharCount)return this.callCounterBlink(),!1}return!0},getCharLength:function(e,t){return/byte/.test(t)?r.getByteLength(e):e.length},setCharCount:function(){e.element.charCounter&&a.setTimeout((function(){e.element.charCounter.textContent=h.getCharCount(t.charCounterType)}))},callCounterBlink:function(){const t=e.element.charWrapper;t&&!r.hasClass(t,"ke-blink")&&(r.addClass(t,"ke-blink"),a.setTimeout((function(){r.removeClass(t,"ke-blink")}),600))},checkComponents:function(){for(let e=0,t=this.fileInfoPluginsCheck.length;e<t;e++)this.fileInfoPluginsCheck[e]()},resetComponents:function(){for(let e=0,t=this.fileInfoPluginsReset.length;e<t;e++)this.fileInfoPluginsReset[e]()},setCodeView:function(i){t.codeMirrorEditor?t.codeMirrorEditor.getDoc().setValue(i):e.element.code.value=i},getCodeView:function(){return t.codeMirrorEditor?t.codeMirrorEditor.getDoc().getValue():e.element.code.value},init:function(l,s){const c=a.RegExp;if(this._ww=t.iframe?e.element.wysiwygFrame.contentWindow:a,this._wd=o,this.charTypeHTML="byte-html"===t.charCounterType,!t.iframe&&"function"===typeof a.ShadowRoot){let t=e.element.wysiwygFrame;for(;t;){if(t.shadowRoot){this.shadowRoot=t.shadowRoot;break}if(t instanceof a.ShadowRoot){this.shadowRoot=t;break}t=t.parentNode}this.shadowRoot&&(this.shadowRootControllerEventTarget=[])}const d=a.Object.keys(t.textTagsMap),u=t.addTagsWhitelist?t.addTagsWhitelist.split("|").filter((function(e){return/b|i|ins|s|strike/i.test(e)})):[];for(let e=0;e<u.length;e++)d.splice(d.indexOf(u[e].toLowerCase()),1);this.disallowedTextTagsRegExp=0===d.length?null:new c("(<\\/?)("+d.join("|")+")\\b\\s*([^>^<]+)?\\s*(?=>)","gi");const h="contenteditable|id|colspan|rowspan|target|href|download|rel|src|alt|class|type|controls|data-format|data-size|data-file-size|data-file-name|data-origin|data-align|data-image-link|data-rotate|data-proportion|data-percentage|origin-size|data-exp|data-font-size";this.allowHTMLComments=t.editorTagsWhitelist.indexOf("//")>-1,this.htmlCheckWhitelistRegExp=new c("^("+t.editorTagsWhitelist.replace("|//","")+")$","i"),this.editorTagsWhitelistRegExp=r.createTagsWhitelist(t.editorTagsWhitelist.replace("|//","|\x3c!--|--\x3e")),this.pasteTagsWhitelistRegExp=r.createTagsWhitelist(t.pasteTagsWhitelist);const g='\\s*=\\s*(")[^"]*\\1',p=t.attributesWhitelist,m={};let f="";if(p)for(let e in p)r.hasOwn(p,e)&&!/^on[a-z]+$/i.test(p[e])&&("all"===e?f=p[e]+"|":m[e]=new c("(?:"+p[e]+"|"+h+")"+g,"ig"));this.attributesWhitelistRegExp=new c("(?:"+f+h+")"+g,"ig"),this.attributesTagsWhitelist=m,this.isInline=/inline/i.test(t.mode),this.isBalloon=/balloon|balloon-always/i.test(t.mode),this.isBalloonAlways=/balloon-always/i.test(t.mode),this.cachingButtons(),this.fileInfoPluginsCheck=[],this.fileInfoPluginsReset=[],this.managedTagsInfo={query:"",map:{}};const b=[];this.activePlugins=[],this.fileManager.tags=[],this.fileManager.pluginMap={};let v,y,k=[];for(let e in i)if(r.hasOwn(i,e)){if(v=i[e],y=n[e],v.active&&y&&this.callPlugin(e,null,y),"function"===typeof v.checkFileInfo&&"function"===typeof v.resetFileInfo&&(this.callPlugin(e,null,y),this.fileInfoPluginsCheck.push(v.checkFileInfo.bind(this)),this.fileInfoPluginsReset.push(v.resetFileInfo.bind(this))),a.Array.isArray(v.fileTags)){const t=v.fileTags;this.callPlugin(e,null,y),this.fileManager.tags=this.fileManager.tags.concat(t),k.push(e);for(let i=0,n=t.length;i<n;i++)this.fileManager.pluginMap[t[i].toLowerCase()]=e}if(v.managedTags){const e=v.managedTags();b.push("."+e.className),this.managedTagsInfo.map[e.className]=e.method.bind(this)}}this.managedTagsInfo.query=b.toString(),this.fileManager.queryString=this.fileManager.tags.join(","),this.fileManager.regExp=new c("^("+this.fileManager.tags.join("|")+")$","i"),this.fileManager.pluginRegExp=new c("^("+(0===k.length?"undefined":k.join("|"))+")$","i"),this._variable.originCssText=e.element.topArea.style.cssText,this.placeholder=e.element.placeholder,this.lineBreaker=e.element.lineBreaker,this.lineBreakerButton=this.lineBreaker.querySelector("button"),this.history=function(e,t){const i=e._window,n=e.util,l=e.options.historyStackDelayTime;let o=e.context.element,s=e.context.tool.undo,a=e.context.tool.redo,r=null,c=0,d=[];function u(){const i=d[c];o.wysiwyg.innerHTML=i.contents,e.setRange(n.getNodeFromPath(i.s.path,o.wysiwyg),i.s.offset,n.getNodeFromPath(i.e.path,o.wysiwyg),i.e.offset),e.focus(),0===c?(s&&s.setAttribute("disabled",!0),a&&a.removeAttribute("disabled")):c===d.length-1?(s&&s.removeAttribute("disabled"),a&&a.setAttribute("disabled",!0)):(s&&s.removeAttribute("disabled"),a&&a.removeAttribute("disabled")),e.controllersOff(),e.checkComponents(),e.setCharCount(),e.resourcesStateChange(),t()}function h(){e.checkComponents();const i=e.getContents(!0);if(!i||d[c]&&i===d[c].contents)return;c++;const l=e._variable.range;d.length>c&&(d=d.slice(0,c),a&&a.setAttribute("disabled",!0)),d[c]=l?{contents:i,s:{path:n.getNodePath(l.startContainer,null,null),offset:l.startOffset},e:{path:n.getNodePath(l.endContainer,null,null),offset:l.endOffset}}:{contents:i,s:{path:[0,0],offset:[0,0]},e:{path:0,offset:0}},1===c&&s&&s.removeAttribute("disabled"),e.setCharCount(),t()}return{stack:d,push:function(t){i.setTimeout(e.resourcesStateChange.bind(e));const n="number"===typeof t?t>0?t:0:t?l:0;n&&!r||(i.clearTimeout(r),n)?r=i.setTimeout((function(){i.clearTimeout(r),r=null,h()}),n):h()},undo:function(){c>0&&(c--,u())},redo:function(){d.length-1>c&&(c++,u())},go:function(e){c=e<0?d.length-1:e,u()},reset:function(i){s&&s.setAttribute("disabled",!0),a&&a.setAttribute("disabled",!0),e._variable.isChanged=!1,e.context.tool.save&&e.context.tool.save.setAttribute("disabled",!0),d.splice(0),c=0,d[c]={contents:e.getContents(!0),s:{path:[0,0],offset:0},e:{path:[0,0],offset:0}},i||t()},resetCachingButton:function(){o=e.context.element,s=e.context.tool.undo,a=e.context.tool.redo,0===c?(s&&s.setAttribute("disabled",!0),a&&c===d.length-1&&a.setAttribute("disabled",!0),e._variable.isChanged=!1,e.context.tool.save&&e.context.tool.save.setAttribute("disabled",!0)):c===d.length-1&&a&&a.setAttribute("disabled",!0)},destroy:function(){r&&i.clearTimeout(r),d=null}}}(this,this.onChange_historyStack.bind(this)),this.addModule([H]),t.iframe&&(this._wd=e.element.wysiwygFrame.contentDocument,e.element.wysiwyg=this._wd.body,t.editorStyles.editor&&(e.element.wysiwyg.style.cssText=t.editorStyles.editor),"auto"===t.height&&(this.iframeAuto=this._wd.body)),this.initWysiwygArea(l,s)},cachingButtons:function(){a.setTimeout(function(){this.codeViewDisabledButtons=e.element.buttonTray.querySelectorAll('.ke-menu-list button[data-display]:not([class~="ke-code-view-enabled"])'),this.resizingDisabledButtons=e.element.buttonTray.querySelectorAll('.ke-menu-list button[data-display]:not([class~="ke-resizing-enabled"]):not([data-display="MORE"])')}.bind(this));const i=e.tool;this.commandMap={SUB:i.subscript,SUP:i.superscript,OUTDENT:i.outdent,INDENT:i.indent},this.commandMap[t.textTags.bold.toUpperCase()]=i.bold,this.commandMap[t.textTags.underline.toUpperCase()]=i.underline,this.commandMap[t.textTags.italic.toUpperCase()]=i.italic,this.commandMap[t.textTags.strike.toUpperCase()]=i.strike,this.styleCommandMap={fullScreen:i.fullScreen,showBlocks:i.showBlocks,codeView:i.codeView}},initWysiwygArea:function(t,i){e.element.wysiwyg.innerHTML=t?i:this.convertContentsForEditor("string"===typeof i?i:e.element.originElement.value||"")},resourcesStateChange:function(){this.iframeAutoHeight(),this.checkPlaceholder()},onChange_historyStack:function(){this.hasFocus&&u.applyTagEffects(),this._variable.isChanged=!0,e.tool.save&&e.tool.save.removeAttribute("disabled"),h.onChange&&h.onChange(this.getContents(!0),this),"block"===e.element.toolbar.style.display&&u.showToolbarBalloon()},iframeAutoHeight:function(){const t=this;this.iframeAuto&&a.setTimeout((function(){e.element.wysiwygFrame.style.height=t.iframeAuto.offsetHeight+"px"}))},checkPlaceholder:function(){if(this.placeholder){if(this._variable.isCodeView)return void(this.placeholder.style.display="none");const t=e.element.wysiwyg;!r.onlyZeroWidthSpace(t.textContent)||t.querySelector(r.allowedEmptyNodeList)||(t.innerText.match(/\n/g)||"").length>1?this.placeholder.style.display="none":this.placeholder.style.display="block"}},setDefaultFormat:function(e){if(this.fileManager.pluginRegExp.test(this.currentControllerName))return;const i=this.getRange(),n=i.commonAncestorContainer,l=i.startContainer,o=r.getRangeFormatElement(n,null);let s,a,c;const d=r.getParentElement(n,r.isComponent);if((!d||r.isTable(d))&&(!r.isRangeFormatElement(l)&&!r.isWysiwygDiv(l)||!r.isComponent(l.children[i.startOffset])&&!r.isComponent(l.children[i.startOffset-1]))){if(o)return c=r.createElement(e||t.defaultTag),c.innerHTML=o.innerHTML,0===c.childNodes.length&&(c.innerHTML=r.zeroWidthSpace),o.innerHTML=c.outerHTML,c=o.firstChild,s=r.getEdgeChildNodes(c,null).sc,s||(s=r.createTextNode(r.zeroWidthSpace),c.insertBefore(s,c.firstChild)),a=s.textContent.length,void this.setRange(s,a,s,a);if(r.isRangeFormatElement(n)&&n.childNodes.length<=1){let e=null;return 1===n.childNodes.length&&r.isBreak(n.firstChild)?e=n.firstChild:(e=r.createTextNode(r.zeroWidthSpace),n.appendChild(e)),void this.setRange(e,1,e,1)}if(this.execCommand("formatBlock",!1,e||t.defaultTag),s=r.getEdgeChildNodes(n,n),s=s?s.ec:n,c=r.getFormatElement(s,null),!c)return this.removeRange(),void this.editorRange();if(r.isBreak(c.nextSibling)&&r.removeItem(c.nextSibling),r.isBreak(c.previousSibling)&&r.removeItem(c.previousSibling),r.isBreak(s)){const e=r.createTextNode(r.zeroWidthSpace);s.parentNode.insertBefore(e,s),s=e}this.effectNode=null,this.nativeFocus()}},setOptionsInit:function(i,n){this.context=e=R(i.originElement,this.getConstructed(i),t),this.componentsInfoReset=!0,this.editorInit(!0,n)},editorInit:function(t,i){this.init(t,i),u.addEvent(),this.setCharCount(),u.offStickyToolbar(),u.onResize_window(),e.element.toolbar.style.visibility="",this.checkComponents(),this.componentsInfoInit=!1,this.componentsInfoReset=!1,this.history.reset(!0),this.resourcesStateChange(),a.setTimeout((function(){"function"===typeof h.onload&&h.onload(d,t)}))},getConstructed:function(e){return{top:e.topArea,relative:e.relative,toolBar:e.toolbar,menuTray:e.menuTray,editorArea:e.editorArea,wysiwygArea:e.wysiwygFrame,codeArea:e.code,placeholder:e.placeholder,resizingBar:e.resizingBar,navigation:e.navigation,charCounter:e.charCounter,charWrapper:e.charWrapper,loading:e.loading,lineBreaker:e.lineBreaker,lineBreaker_t:e.lineBreaker_t,lineBreaker_b:e.lineBreaker_b,resizeBack:e.resizeBackground,stickyDummy:e.stickyDummy,arrow:e.arrow}},containerName:null,iframeAuto:null,modalForm:null},u={IEisComposing:!1,lineBreakerBind:null,responsiveCurrentSize:"default",responsiveButtonSize:null,responsiveButtons:null,directionKeyCode:new a.RegExp("^(8|13|3[2-9]|40|46)$"),nonTextKeyCode:new a.RegExp("^(8|13|1[6-9]|20|27|3[3-9]|40|45|46|11[2-9]|12[0-3]|144|145)$"),historyIgnoreKeyCode:new a.RegExp("^(1[6-9]|20|27|3[3-9]|40|45|11[2-9]|12[0-3]|144|145)$"),onButtonsCheck:new a.RegExp("^("+a.Object.keys(t.textTagsMap).join("|")+")$","i"),frontZeroWidthReg:new a.RegExp(r.zeroWidthSpace+"+",""),keyCodeShortcut:{65:"A",66:"B",83:"S",85:"U",73:"I",89:"Y",90:"Z",219:"[",221:"]"},shortcutCommand:function(e,i){let n=null;switch(u.keyCodeShortcut[e]){case"A":n="selectAll";break;case"B":-1===t.shortcutsDisable.indexOf("bold")&&(n="bold");break;case"S":i&&-1===t.shortcutsDisable.indexOf("strike")?n="strike":i||-1!==t.shortcutsDisable.indexOf("save")||(n="save");break;case"U":-1===t.shortcutsDisable.indexOf("underline")&&(n="underline");break;case"I":-1===t.shortcutsDisable.indexOf("italic")&&(n="italic");break;case"Z":-1===t.shortcutsDisable.indexOf("undo")&&(n=i?"redo":"undo");break;case"Y":-1===t.shortcutsDisable.indexOf("undo")&&(n="redo");break;case"[":-1===t.shortcutsDisable.indexOf("indent")&&(n=t.rtl?"indent":"outdent");break;case"]":-1===t.shortcutsDisable.indexOf("indent")&&(n=t.rtl?"outdent":"indent")}return!!n&&(d.commandHandler(d.commandMap[n],n),!0)},applyTagEffects:function(){let n=d.getSelectionNode();if(n===d.effectNode)return;d.effectNode=n;const l=t.rtl?"marginRight":"marginLeft",o=d.commandMap,s=this.onButtonsCheck,a=[],c=[],u=d.activePlugins,h=u.length;let g="";for(;n.firstChild;)n=n.firstChild;for(let e=n;!r.isWysiwygDiv(e)&&e;e=e.parentNode)if(1===e.nodeType&&!r.isBreak(e)){g=e.nodeName.toUpperCase(),c.push(g);for(let t,n=0;n<h;n++)t=u[n],-1===a.indexOf(t)&&i[t].active.call(d,e)&&a.push(t);r.isFormatElement(e)?(-1===a.indexOf("OUTDENT")&&o.OUTDENT&&(r.isListCell(e)||e.style[l]&&r.getNumber(e.style[l],0)>0)&&(a.push("OUTDENT"),o.OUTDENT.removeAttribute("disabled")),-1===a.indexOf("INDENT")&&o.INDENT&&(a.push("INDENT"),r.isListCell(e)&&!e.previousElementSibling?o.INDENT.setAttribute("disabled",!0):o.INDENT.removeAttribute("disabled"))):s.test(g)&&(a.push(g),r.addClass(o[g],"active"))}for(let e in o)a.indexOf(e)>-1||!r.hasOwn(o,e)||(u.indexOf(e)>-1?i[e].active.call(d,null):o.OUTDENT&&/^OUTDENT$/i.test(e)?o.OUTDENT.setAttribute("disabled",!0):o.INDENT&&/^INDENT$/i.test(e)?o.INDENT.removeAttribute("disabled"):r.removeClass(o[e],"active"));d._variable.currentNodes=c.reverse(),d._variable.currentNodesMap=a,t.showPathLabel&&(e.element.navigation.textContent=d._variable.currentNodes.join(" > "))},cancelCaptionEdit:function(){this.setAttribute("contenteditable",!1),this.removeEventListener("blur",u.cancelCaptionEdit)},buttonsEventHandler:function(e){let t=e.target;if(d.bindControllersOff&&e.stopPropagation(),/^(input|textarea|select|option)$/i.test(t.nodeName)?d.antiBlur=!1:e.preventDefault(),r.getParentElement(t,".ke-submenu"))e.stopPropagation(),d.notHideToolbar=!0;else{let i=t.getAttribute("data-command"),n=t.className;for(;!i&&!/ke-menu-list/.test(n)&&!/kothing-editor-common/.test(n);)t=t.parentNode,i=t.getAttribute("data-command"),n=t.className;i!==d.submenuName&&i!==d.containerName||e.stopPropagation()}},onClick_toolbar:function(e){let t=e.target,i=t.getAttribute("data-display"),n=t.getAttribute("data-command"),l=t.className;for(d.controllersOff(e);t.parentNode&&!n&&!/ke-menu-list/.test(l)&&!/ke-toolbar/.test(l);)t=t.parentNode,n=t.getAttribute("data-command"),i=t.getAttribute("data-display"),l=t.className;(n||i)&&(t.disabled||(d.hasFocus||d.nativeFocus(),d._variable.isCodeView||d.editorRange(),d.actionCall(n,i,t)))},onMouseDown_wysiwyg:function(t){if(r.isNonEditable(e.element.wysiwyg))return;if("function"===typeof h.onMouseDown&&!1===h.onMouseDown(t,d))return;const i=r.getParentElement(t.target,r.isCell);if(i){const e=d.plugins.table;e&&i!==e.fixedCell&&!e.shift&&d.callPlugin("table",(function(){e.onTableCellMultiSelect.call(d,i,!1)}),null)}d.isBalloon&&u.hideToolbar(),/FIGURE/i.test(t.target.nodeName)&&t.preventDefault()},onClick_wysiwyg:function(i){const n=i.target;if(r.isNonEditable(e.element.wysiwyg))return;if("function"===typeof h.onClick&&!1===h.onClick(i,d))return;const l=d.getFileComponent(n);if(l)return i.preventDefault(),void d.selectComponent(l.target,l.pluginName);const o=r.getParentElement(n,"FIGCAPTION");if(r.isNonEditable(o)&&(i.preventDefault(),o.setAttribute("contenteditable","true"),o.focus(),d.isInline&&!d.inlineToolbarAttr.isShow)){u.showToolbarInline();const e=function(){u.hideToolbar(),o.removeEventListener("blur",e)};o.addEventListener("blur",e)}a.setTimeout(d.editorRange.bind(d)),d.editorRange();const s=d.getSelectionNode(),c=r.getFormatElement(s,null),g=r.getRangeFormatElement(s,null);if(c&&c!==g||r.isNonEditable(n)||r.isList(g))u.applyTagEffects();else{const e=d.getRange();if(r.getFormatElement(e.startContainer)===r.getFormatElement(e.endContainer))if(r.isList(g)){i.preventDefault();const e=r.createElement("LI"),t=s.nextElementSibling;e.appendChild(s),g.insertBefore(e,t),d.focus()}else r.isWysiwygDiv(s)||r.isComponent(s)||r.isTable(s)&&!r.isCell(s)?u.applyTagEffects():(i.preventDefault(),d.setDefaultFormat(r.isRangeFormatElement(g)?"DIV":t.defaultTag),d.focus())}d.isBalloon&&a.setTimeout(u.toggleToolbarBalloon)},balloonDelay:null,showToolbarBalloonDelay:function(){u.balloonDelay&&a.clearTimeout(u.balloonDelay),u.balloonDelay=a.setTimeout(function(){a.clearTimeout(this.balloonDelay),this.balloonDelay=null,this.showToolbarBalloon()}.bind(u),350)},toggleToolbarBalloon:function(){d.editorRange();const e=d.getRange();d.bindControllersOff||!d.isBalloonAlways&&e.collapsed?u.hideToolbar():u.showToolbarBalloon(e)},showToolbarBalloon:function(i){if(!d.isBalloon)return;const n=i||d.getRange(),l=e.element.toolbar,o=e.element.topArea,s=d.getSelection();let c;if(d.isBalloonAlways&&n.collapsed)c=!0;else if(s.focusNode===s.anchorNode)c=s.focusOffset<s.anchorOffset;else{const e=r.getListChildNodes(n.commonAncestorContainer,null);c=r.getArrayIndex(e,s.focusNode)<r.getArrayIndex(e,s.anchorNode)}let h=n.getClientRects();h=h[c?0:h.length-1];const g=d.getGlobalScrollOffset();let p=g.left,m=g.top;const f=o.offsetWidth,b=u.getEditorOffsets(null),v=b.top,y=b.left;if(l.style.top="-10000px",l.style.visibility="hidden",l.style.display="block",!h){const t=d.getSelectionNode();if(r.isFormatElement(t)){const e=r.createTextNode(r.zeroWidthSpace);d.insertNode(e,null,!1),d.setRange(e,1,e,1),d.editorRange(),h=d.getRange().getClientRects(),h=h[c?0:h.length-1]}if(!h){const i=r.getOffset(t,e.element.wysiwygFrame);h={left:i.left,top:i.top,right:i.left,bottom:i.top+t.offsetHeight,noText:!0},p=0,m=0}c=!0}const k=a.Math.round(e.element.arrow.offsetWidth/2),w=l.offsetWidth,C=l.offsetHeight,x=/iframe/i.test(e.element.wysiwygFrame.nodeName)?e.element.wysiwygFrame.getClientRects()[0]:null;if(x&&(h={left:h.left+x.left,top:h.top+x.top,right:h.right+x.right-x.width,bottom:h.bottom+x.bottom-x.height}),u.setToolbarOffset(c,h,l,y,f,p,m,v,k),w===l.offsetWidth&&C===l.offsetHeight||u.setToolbarOffset(c,h,l,y,f,p,m,v,k),t.toolbarContainer){const e=o.parentElement;let i=t.toolbarContainer,n=i.offsetLeft,s=i.offsetTop;for(;!i.parentElement.contains(e)||!/^(BODY|HTML)$/i.test(i.parentElement.nodeName);)i=i.offsetParent,n+=i.offsetLeft,s+=i.offsetTop;l.style.left=l.offsetLeft-n+o.offsetLeft+"px",l.style.top=l.offsetTop-s+o.offsetTop+"px"}l.style.visibility=""},setToolbarOffset:function(t,i,n,l,s,c,d,h,g){const p=n.offsetWidth,m=i.noText&&!t?0:n.offsetHeight,f=(t?i.left:i.right)-l-p/2+c,b=f+p-s;let v=(t?i.top-m-g:i.bottom+g)-(i.noText?0:h)+d,y=f<0?1:b<0?f:f-b-1-1,k=!1;const w=v+(t?u.getEditorOffsets(null).top:n.offsetHeight-e.element.wysiwyg.offsetHeight);!t&&w>0&&u.getPageBottomSpace()<w?(t=!0,k=!0):t&&o.documentElement.offsetTop>w&&(t=!1,k=!0),k&&(v=(t?i.top-m-g:i.bottom+g)-(i.noText?0:h)+d),n.style.left=a.Math.floor(y)+"px",n.style.top=a.Math.floor(v)+"px",t?(r.removeClass(e.element.arrow,"ke-arrow-up"),r.addClass(e.element.arrow,"ke-arrow-down"),e.element.arrow.style.top=m+"px"):(r.removeClass(e.element.arrow,"ke-arrow-down"),r.addClass(e.element.arrow,"ke-arrow-up"),e.element.arrow.style.top=-g+"px");const C=a.Math.floor(p/2+(f-y));e.element.arrow.style.left=(C+g>n.offsetWidth?n.offsetWidth-g:C<g?g:C)+"px"},showToolbarInline:function(){if(!d.isInline)return;const i=e.element.toolbar;t.toolbarContainer?i.style.position="relative":i.style.position="absolute",i.style.visibility="hidden",i.style.display="block",d.inlineToolbarAttr.width=i.style.width=t.toolbarWidth,d.inlineToolbarAttr.top=i.style.top=(t.toolbarContainer?0:-1-i.offsetHeight)+"px","function"===typeof h.showInline&&h.showInline(i,e,d),u.onScroll_window(),d.inlineToolbarAttr.isShow=!0,i.style.visibility=""},hideToolbar:function(){d.notHideToolbar||d._variable.isFullScreen||(e.element.toolbar.style.display="none",d.inlineToolbarAttr.isShow=!1)},onInput_wysiwyg:function(e){if(d.editorRange(),"function"===typeof h.onInput&&!1===h.onInput(e,d))return;const t=(null===e.data?"":void 0===e.data?" ":e.data)||"";d.charCount(t)||(e.preventDefault(),e.stopPropagation()),d.history.push(!0)},isUneditableNode:function(e,t){const i=t?e.startContainer:e.endContainer,n=t?e.startOffset:e.endOffset,l=t?"previousSibling":"nextSibling";let o;return 1===i.nodeType?(o=u.isUneditableNode_getSibling(i.childNodes[n],l,i),o&&1===o.nodeType&&"false"===o.getAttribute("contenteditable")):(o=u.isUneditableNode_getSibling(i,l,i),d.isEdgePoint(i,n,t?"front":"end")&&o&&1===o.nodeType&&"false"===o.getAttribute("contenteditable"))},isUneditableNode_getSibling:function(e,t,i){if(!e)return null;let n=e[t];if(!n){if(n=r.getFormatElement(i),n=n?n[t]:null,!n||r.isComponent(n))return null;n="previousSibling"===t?n.firstElementChild:n.lastElementChild}return n},onShortcutKey:!1,onKeyDown_wysiwyg:function(i){const n=i.keyCode,l=i.shiftKey,o=i.ctrlKey||i.metaKey||91===n||92===n||224===n,s=i.altKey;if(u.IEisComposing=229===n,d.submenuOff(),d.isBalloon&&u.hideToolbar(),"function"===typeof h.onKeyDown&&!1===h.onKeyDown(i,d))return;if(o&&u.shortcutCommand(n,l))return u.onShortcutKey=!0,i.preventDefault(),i.stopPropagation(),!1;u.onShortcutKey&&(u.onShortcutKey=!1);let c=d.getSelectionNode();const g=d.getRange(),p=!g.collapsed||g.startContainer!==g.endContainer,m=d.fileManager.pluginRegExp.test(d.currentControllerName)?d.currentControllerName:"";let f=r.getFormatElement(c,null)||c,b=r.getRangeFormatElement(f,null);switch(n){case 8:if(!p&&m){i.preventDefault(),i.stopPropagation(),d.plugins[m].destroy.call(d);break}if(p&&u.hardDelete()){i.preventDefault(),i.stopPropagation();break}if(!r.isFormatElement(f)&&!e.element.wysiwyg.firstElementChild&&!r.isComponent(c))return i.preventDefault(),i.stopPropagation(),d.setDefaultFormat(t.defaultTag),!1;if(!p&&!f.previousElementSibling&&0===g.startOffset&&!c.previousSibling&&!r.isListCell(f)&&r.isFormatElement(f)&&(!r.isFreeFormatElement(f)||r.isClosureFreeFormatElement(f))){if(r.isClosureRangeFormatElement(f.parentNode))return i.preventDefault(),i.stopPropagation(),!1;if(r.isWysiwygDiv(f.parentNode)&&f.childNodes.length<=1&&(!f.firstChild||r.onlyZeroWidthSpace(f.textContent))){if(i.preventDefault(),i.stopPropagation(),f.nodeName.toUpperCase()===t.defaultTag.toUpperCase()){f.innerHTML="<br>";const e=f.attributes;for(;e[0];)f.removeAttribute(e[0].name)}else{const e=r.createElement(t.defaultTag);e.innerHTML="<br>",f.parentElement.replaceChild(e,f)}return d.nativeFocus(),!1}}if(f&&g.startContainer===g.endContainer&&3===c.nodeType&&!r.isFormatElement(c.parentNode)&&(g.collapsed?1===c.textContent.length:g.endOffset-g.startOffset===c.textContent.length)){i.preventDefault();let e=null,t=c.parentNode.previousSibling;const n=c.parentNode.nextSibling;t||(n?(t=n,e=0):(t=r.createElement("BR"),f.appendChild(t))),c.textContent="",r.removeItemAllParents(c,null,f),e="number"===typeof e?e:3===t.nodeType?t.textContent.length:1,d.setRange(t,e,t,e);break}if(u.isUneditableNode(g,!0)){i.preventDefault(),i.stopPropagation();break}const n=g.commonAncestorContainer;if(f=r.getFormatElement(g.startContainer,null),b=r.getRangeFormatElement(f,null),b&&f&&!r.isCell(b)&&!/^FIGCAPTION$/i.test(b.nodeName)){if(r.isListCell(f)&&r.isList(b)&&(r.isListCell(b.parentNode)||f.previousElementSibling)&&(c===f||3===c.nodeType&&(!c.previousSibling||r.isList(c.previousSibling)))&&(r.getFormatElement(g.startContainer,null)!==r.getFormatElement(g.endContainer,null)?b.contains(g.startContainer):0===g.startOffset&&g.collapsed)){if(g.startContainer!==g.endContainer)i.preventDefault(),d.removeNode(),3===g.startContainer.nodeType&&d.setRange(g.startContainer,g.startContainer.textContent.length,g.startContainer,g.startContainer.textContent.length),d.history.push(!0);else{let e=f.previousElementSibling||b.parentNode;if(r.isListCell(e)){i.preventDefault();let t=e;if(!e.contains(f)&&r.isListCell(t)&&r.isList(t.lastElementChild)){for(t=t.lastElementChild.lastElementChild;r.isListCell(t)&&r.isList(t.lastElementChild);)t=t.lastElementChild&&t.lastElementChild.lastElementChild;e=t}let n=e===b.parentNode?b.previousSibling:e.lastChild;n||(n=r.createTextNode(r.zeroWidthSpace),b.parentNode.insertBefore(n,b.parentNode.firstChild));const l=3===n.nodeType?n.textContent.length:1,o=f.childNodes;let s=n,a=o[0];for(;a=o[0];)e.insertBefore(a,s.nextSibling),s=a;r.removeItem(f),0===b.children.length&&r.removeItem(b),d.setRange(n,l,n,l),d.history.push(!0)}}break}if(!p&&0===g.startOffset){let e=!0,t=n;for(;t&&t!==b&&!r.isWysiwygDiv(t);){if(t.previousSibling&&(1===t.previousSibling.nodeType||!r.onlyZeroWidthSpace(t.previousSibling.textContent.trim()))){e=!1;break}t=t.parentNode}if(e&&b.parentNode){i.preventDefault(),d.detachRangeFormatElement(b,r.isListCell(f)?[f]:null,null,!1,!1),d.history.push(!0);break}}}if(!p&&f&&(0===g.startOffset||c===f&&f.childNodes[g.startOffset])){const e=c===f?f.childNodes[g.startOffset]:c,t=f.previousSibling,l=(3===n.nodeType||r.isBreak(n))&&!n.previousSibling&&0===g.startOffset;if(!e.previousSibling&&(r.isComponent(n.previousSibling)||l&&r.isComponent(t))){const e=d.getFileComponent(t);e?(i.preventDefault(),i.stopPropagation(),0===f.textContent.length&&r.removeItem(f),!1===d.selectComponent(e.target,e.pluginName)&&d.blur()):r.isComponent(t)&&(i.preventDefault(),i.stopPropagation(),r.removeItem(t));break}if(r.isNonEditable(e.previousSibling)){i.preventDefault(),i.stopPropagation(),r.removeItem(e.previousSibling);break}}break;case 46:if(m){i.preventDefault(),i.stopPropagation(),d.plugins[m].destroy.call(d);break}if(p&&u.hardDelete()){i.preventDefault(),i.stopPropagation();break}if(u.isUneditableNode(g,!1)){i.preventDefault(),i.stopPropagation();break}if((r.isFormatElement(c)||null===c.nextSibling||r.onlyZeroWidthSpace(c.nextSibling)&&null===c.nextSibling.nextSibling)&&g.startOffset===c.textContent.length){const e=f.nextElementSibling;if(!e)break;if(r.isComponent(e)){if(i.preventDefault(),r.onlyZeroWidthSpace(f)&&(r.removeItem(f),r.isTable(e))){let t=r.getChildElement(e,r.isCell,!1);t=t.firstElementChild||t,d.setRange(t,0,t,0);break}const t=d.getFileComponent(e);t?(i.stopPropagation(),!1===d.selectComponent(t.target,t.pluginName)&&d.blur()):r.isComponent(e)&&(i.stopPropagation(),r.removeItem(e));break}}if(!p&&(d.isEdgePoint(g.endContainer,g.endOffset,null)||c===f&&f.childNodes[g.startOffset])){const e=c===f?f.childNodes[g.startOffset]:c;if(r.isNonEditable(e.nextSibling)){i.preventDefault(),i.stopPropagation(),r.removeItem(e.nextSibling);break}}if(f=r.getFormatElement(g.startContainer,null),b=r.getRangeFormatElement(f,null),r.isListCell(f)&&r.isList(b)&&(c===f||3===c.nodeType&&(!c.nextSibling||r.isList(c.nextSibling))&&(r.getFormatElement(g.startContainer,null)!==r.getFormatElement(g.endContainer,null)?b.contains(g.endContainer):g.endOffset===c.textContent.length&&g.collapsed))){g.startContainer!==g.endContainer&&d.removeNode();let e=r.getArrayItem(f.children,r.isList,!1),t=b.parentNode;if(e=e||f.nextElementSibling||t.nextElementSibling,e&&(r.isList(e)||r.getArrayItem(e.children,r.isList,!1))){let t,n;if(i.preventDefault(),r.isList(e)){const i=e.firstElementChild;for(n=i.childNodes,t=n[0];n[0];)f.insertBefore(n[0],e);r.removeItem(i)}else{for(t=e.firstChild,n=e.childNodes;n[0];)f.appendChild(n[0]);r.removeItem(e)}d.setRange(t,0,t,0),d.history.push(!0)}break}break;case 9:if(m||t.tabDisable)break;if(i.preventDefault(),o||s||r.isWysiwygDiv(c))break;const v=!g.collapsed||d.isEdgePoint(g.startContainer,g.startOffset),y=d.getSelectedElements(null);c=d.getSelectionNode();const k=[];let w=[],C=r.isListCell(y[0]),x=r.isListCell(y[y.length-1]),_={sc:g.startContainer,so:g.startOffset,ec:g.endContainer,eo:g.endOffset};for(let e,t=0,i=y.length;t<i;t++)if(e=y[t],r.isListCell(e)){if(!e.previousElementSibling&&!l)continue;k.push(e)}else w.push(e);if(k.length>0&&v&&d.plugins.list)_=d.plugins.list.editInsideList.call(d,l,k);else{const e=r.getParentElement(c,r.isCell);if(e&&v){const t=r.getParentElement(e,"table"),i=r.getListChildren(t,r.isCell);let n=l?r.prevIdx(i,e):r.nextIdx(i,e);n!==i.length||l||(n=0),-1===n&&l&&(n=i.length-1);let o=i[n];if(!o)break;o=o.firstElementChild||o,d.setRange(o,0,o,0);break}w=w.concat(k),C=x=null}if(w.length>0)if(l){const e=w.length-1;for(let n,l=0;l<=e;l++){n=w[l].childNodes;for(let e,t=0,i=n.length;t<i&&(e=n[t],e);t++)if(!r.onlyZeroWidthSpace(e)){/^\s{1,4}$/.test(e.textContent)?r.removeItem(e):/^\s{1,4}/.test(e.textContent)&&(e.textContent=e.textContent.replace(/^\s{1,4}/,""));break}}const t=r.getChildElement(w[0],"text",!1),i=r.getChildElement(w[e],"text",!0);!C&&t&&(_.sc=t,_.so=0),!x&&i&&(_.ec=i,_.eo=i.textContent.length)}else{const e=r.createTextNode(new a.Array(d._variable.tabSize+1).join("\xa0"));if(1===w.length){const t=d.insertNode(e,null,!0);if(!t)return!1;C||(_.sc=e,_.so=t.endOffset),x||(_.ec=e,_.eo=t.endOffset)}else{const t=w.length-1;for(let l,o=0;o<=t;o++)l=w[o].firstChild,l&&(r.isBreak(l)?w[o].insertBefore(e.cloneNode(!1),l):l.textContent=e.textContent+l.textContent);const i=r.getChildElement(w[0],"text",!1),n=r.getChildElement(w[t],"text",!0);!C&&i&&(_.sc=i,_.so=0),!x&&n&&(_.ec=n,_.eo=n.textContent.length)}}d.setRange(_.sc,_.so,_.ec,_.eo),d.history.push(!1);break;case 13:const S=r.getFreeFormatElement(c,null);if(d.charTypeHTML){let e="";if(e=!l&&S||l?"<br>":"<"+f.nodeName+"><br></"+f.nodeName+">",!d.checkCharCount(e,"byte-html"))return i.preventDefault(),!1}if(!l){const e=d.isEdgeFormat(g.endContainer,g.endOffset,"end");if(e&&/^H[1-6]$/i.test(f.nodeName)||/^HR$/i.test(f.nodeName)){i.preventDefault();let n=null;const l=d.appendFormatTag(f,t.defaultTag);if(e&&e.length>0){n=e.pop();const t=n;for(;e.length>0;)n=n.appendChild(e.pop());l.appendChild(t)}n=n?n.appendChild(l.firstChild):l.firstChild,d.setRange(n,0,n,0);break}if(S){i.preventDefault();const e=c===S,t=d.getSelection(),n=c.childNodes,l=t.focusOffset,o=c.previousElementSibling,s=c.nextSibling;if(!r.isClosureFreeFormatElement(S)&&n&&(e&&g.collapsed&&n.length-1<=l+1&&r.isBreak(n[l])&&(!n[l+1]||(!n[l+2]||r.onlyZeroWidthSpace(n[l+2].textContent))&&3===n[l+1].nodeType&&r.onlyZeroWidthSpace(n[l+1].textContent))&&l>0&&r.isBreak(n[l-1])||!e&&r.onlyZeroWidthSpace(c.textContent)&&r.isBreak(o)&&(r.isBreak(o.previousSibling)||!r.onlyZeroWidthSpace(o.previousSibling.textContent))&&(!s||!r.isBreak(s)&&r.onlyZeroWidthSpace(s.textContent)))){e?r.removeItem(n[l-1]):r.removeItem(c);const t=d.appendFormatTag(S,r.isFormatElement(S.nextElementSibling)?S.nextElementSibling:null);r.copyFormatAttributes(t,S),d.setRange(t,1,t,1);break}if(e){h.insertHTML(g.collapsed&&r.isBreak(g.startContainer.childNodes[g.startOffset-1])?"<br>":"<br><br>",!0,!1);let e=t.focusNode;const i=t.focusOffset;S===e&&(e=e.childNodes[i-l>1?i-1:i]),d.setRange(e,1,e,1)}else{const e=t.focusNode.nextSibling,i=r.createElement("BR");d.insertNode(i,null,!1);const n=i.previousSibling,l=i.nextSibling;r.isBreak(e)||r.isBreak(n)||l&&!r.onlyZeroWidthSpace(l)?d.setRange(l,0,l,0):(i.parentNode.insertBefore(i.cloneNode(!1),i),d.setRange(i,1,i,1))}u.onShortcutKey=!0;break}}if(p)break;if(b&&f&&!r.isCell(b)&&!/^FIGCAPTION$/i.test(b.nodeName)){const e=d.getRange();if(d.isEdgePoint(e.endContainer,e.endOffset)&&r.isList(c.nextSibling)){i.preventDefault();const e=r.createElement("LI"),t=r.createElement("BR");e.appendChild(t),f.parentNode.insertBefore(e,f.nextElementSibling),e.appendChild(c.nextSibling),d.setRange(t,1,t,1);break}if((3!==e.commonAncestorContainer.nodeType||!e.commonAncestorContainer.nextElementSibling)&&r.onlyZeroWidthSpace(f.innerText.trim())){i.preventDefault();let e=null;if(r.isListCell(b.parentNode)){if(b=f.parentNode.parentNode.parentNode,e=r.splitElement(f,null,r.getElementDepth(f)-2),!e){const t=r.createElement("LI");t.innerHTML="<br>",b.insertBefore(t,e),e=t}}else{const i=r.isCell(b.parentNode)?"DIV":r.isList(b.parentNode)?"LI":r.isFormatElement(b.nextElementSibling)?b.nextElementSibling.nodeName:r.isFormatElement(b.previousElementSibling)?b.previousElementSibling.nodeName:t.defaultTag;e=r.createElement(i);const n=d.detachRangeFormatElement(b,[f],null,!0,!0);n.cc.insertBefore(e,n.ec)}e.innerHTML="<br>",r.copyFormatAttributes(e,f),r.removeItemAllParents(f,null,null),d.setRange(e,1,e,1);break}}if(b&&r.getParentElement(b,"FIGCAPTION")&&r.getParentElement(b,r.isList)&&(i.preventDefault(),f=d.appendFormatTag(f,null),d.setRange(f,0,f,0)),m){i.preventDefault(),i.stopPropagation();const n=e[m],l=n.container,o=l.previousElementSibling||l.nextElementSibling;let s=null;r.isListCell(l.parentNode)?s=r.createElement("BR"):(s=r.createElement(r.isFormatElement(o)?o.nodeName:t.defaultTag),s.innerHTML="<br>"),l.parentNode.insertBefore(s,l),d.callPlugin(m,(function(){!1===d.selectComponent(n.element,m)&&d.blur()}),null)}break;case 27:if(m)return i.preventDefault(),i.stopPropagation(),d.controllersOff(i),!1}if(l&&16===n){i.preventDefault(),i.stopPropagation();const e=d.plugins.table;if(e&&!e.shift&&!e.ref){const t=r.getParentElement(f,r.isCell);if(t)return void e.onTableCellMultiSelect.call(d,t,!0)}}else if(l&&(r.isOSX_IOS?s:o)&&32===n){i.preventDefault(),i.stopPropagation();const e=d.insertNode(r.createTextNode("\xa0"));if(e&&e.container)return void d.setRange(e.container,e.endOffset,e.container,e.endOffset)}if(!o&&!s&&!p&&!u.nonTextKeyCode.test(n)&&g.collapsed&&g.startContainer===g.endContainer&&r.isBreak(g.commonAncestorContainer)){const e=r.createTextNode(r.zeroWidthSpace);d.insertNode(e,null,!1),d.setRange(e,1,e,1)}},onKeyUp_wysiwyg:function(e){if(u.onShortcutKey)return;d.editorRange();const i=d.getRange(),n=e.keyCode,l=e.ctrlKey||e.metaKey||91===n||92===n||224===n,o=e.altKey;let s=d.getSelectionNode();if(d.isBalloon&&(d.isBalloonAlways&&27!==n||!i.collapsed)){if(!d.isBalloonAlways)return void u.showToolbarBalloon();27!==n&&u.showToolbarBalloonDelay()}if("function"===typeof h.onKeyUp&&!1===h.onKeyUp(e,d))return;if(8===n&&r.isWysiwygDiv(s)&&""===s.textContent&&0===s.children.length){e.preventDefault(),e.stopPropagation(),s.innerHTML="";const i=r.createElement(r.isFormatElement(d._variable.currentNodes[0])?d._variable.currentNodes[0]:t.defaultTag);return i.innerHTML="<br>",s.appendChild(i),d.setRange(i,0,i,0),u.applyTagEffects(),void d.history.push(!1)}const a=r.getFormatElement(s,null),c=r.getRangeFormatElement(s,null);if((a||!i.collapsed)&&a!==c||r.isComponent(s)||r.isList(s)||(d.setDefaultFormat(r.isRangeFormatElement(c)?"DIV":t.defaultTag),s=d.getSelectionNode()),u.directionKeyCode.test(n)&&u.applyTagEffects(),!l&&!o&&!u.nonTextKeyCode.test(n)&&3===s.nodeType&&r.zeroWidthRegExp.test(s.textContent)&&!(void 0!==e.isComposing?e.isComposing:u.IEisComposing)){let e=i.startOffset,t=i.endOffset;const n=(s.textContent.substring(0,t).match(u.frontZeroWidthReg)||"").length;e=i.startOffset-n,t=i.endOffset-n,s.textContent=s.textContent.replace(r.zeroWidthRegExp,""),d.setRange(s,e<0?0:e,s,t<0?0:t)}d.charCount(""),d.history.push(!0)},onScroll_wysiwyg:function(e){d.controllersOff(e),d.isBalloon&&u.hideToolbar(),"function"===typeof h.onScroll&&h.onScroll(e,d)},onFocus_wysiwyg:function(e){d.antiBlur||(d.hasFocus=!0,u.applyTagEffects(),d.isInline&&u.showToolbarInline(),"function"===typeof h.onFocus&&h.onFocus(e,d))},onBlur_wysiwyg:function(n){if(d.antiBlur||d._variable.isCodeView)return;d.hasFocus=!1,d.controllersOff(n),(d.isInline||d.isBalloon)&&u.hideToolbar(),"function"===typeof h.onBlur&&h.onBlur(n,d);const l=d.commandMap,o=d.activePlugins;for(let e in l)r.hasOwn(l,e)&&(o.indexOf(e)>-1?i[e].active.call(d,null):l.OUTDENT&&/^OUTDENT$/i.test(e)?l.OUTDENT.setAttribute("disabled",!0):l.INDENT&&/^INDENT$/i.test(e)?l.INDENT.removeAttribute("disabled"):r.removeClass(l[e],"active"));d._variable.currentNodes=[],d._variable.currentNodesMap=[],t.showPathLabel&&(e.element.navigation.textContent="")},onMouseDown_resizingBar:function(t){t.stopPropagation(),d.submenuOff(),d.controllersOff(t);const i=r.getNumber(e.element.wysiwygFrame.style.height,0);d._variable.resizeClientY=t.clientY,e.element.resizeBackground.style.display="block",o.addEventListener("mousemove",u.resize_editor),o.addEventListener("mouseup",(function t(){e.element.resizeBackground.style.display="none",o.removeEventListener("mousemove",u.resize_editor),o.removeEventListener("mouseup",t),"function"===typeof h.onResizeEditor&&h.onResizeEditor(r.getNumber(e.element.wysiwygFrame.style.height,0),i,d)}))},resize_editor:function(t){const i=e.element.editorArea.offsetHeight+(t.clientY-d._variable.resizeClientY);e.element.wysiwygFrame.style.height=e.element.code.style.height=(i<d._variable.minResizingSize?d._variable.minResizingSize:i)+"px",d._variable.resizeClientY=t.clientY},onResize_window:function(i){d.controllersOff(i);const n=u.responsiveButtonSize;if(n){let i=0;i=(d.isBalloon||d.isInline)&&"auto"===t.toolbarWidth?e.element.topArea.offsetWidth:e.element.toolbar.offsetWidth;let l="default";for(let e=1,t=n.length;e<t;e++)if(i<n[e]){l=n[e]+"";break}u.responsiveCurrentSize!==l&&(u.responsiveCurrentSize=l,h.setToolbarButtons(u.responsiveButtons[l]))}if(0!==e.element.toolbar.offsetWidth){if(e.fileBrowser&&"block"===e.fileBrowser.area.style.display&&(e.fileBrowser.body.style.maxHeight=a.innerHeight-e.fileBrowser.header.offsetHeight-50+"px"),d.submenuActiveButton&&d.submenu&&d.setMenuPosition(d.submenuActiveButton,d.submenu),d._variable.isFullScreen)return d._variable.innerHeight_fullScreen+=a.innerHeight-e.element.toolbar.offsetHeight-d._variable.innerHeight_fullScreen,void(e.element.editorArea.style.height=d._variable.innerHeight_fullScreen+"px");d._variable.isCodeView&&d.isInline?u.showToolbarInline():(d.iframeAutoHeight(),d.sticky&&(e.element.toolbar.style.width=e.element.topArea.offsetWidth-2+"px",u.onScroll_window()))}},onScroll_window:function(){if(d._variable.isFullScreen||0===e.element.toolbar.offsetWidth||t.stickyToolbar<0)return;const i=e.element,n=i.editorArea.offsetHeight,l=(this.scrollY||o.documentElement.scrollTop)+t.stickyToolbar,s=u.getEditorOffsets(t.toolbarContainer).top-(d.isInline?i.toolbar.offsetHeight:0),a=d.isInline&&l-s>0?l-s-e.element.toolbar.offsetHeight:0;l<s?u.offStickyToolbar():l+d._variable.minResizingSize>=n+s?(d.sticky||u.onStickyToolbar(a),i.toolbar.style.top=a+n+s+t.stickyToolbar-l-d._variable.minResizingSize+"px"):l>=s&&u.onStickyToolbar(a)},getEditorOffsets:function(t){let i=t||e.element.topArea,n=0,l=0,o=0;for(;i;)n+=i.offsetTop,l+=i.offsetLeft,o+=i.scrollTop,i=i.offsetParent;return{top:n,left:l,scroll:o}},getPageBottomSpace:function(){return o.documentElement.scrollHeight-(u.getEditorOffsets(null).top+e.element.topArea.offsetHeight)},onStickyToolbar:function(i){const n=e.element;d.isInline||t.toolbarContainer||(n.stickyDummy.style.height=n.toolbar.offsetHeight+"px",n.stickyDummy.style.display="block"),n.toolbar.style.top=t.stickyToolbar+i+"px",n.toolbar.style.width=d.isInline?d.inlineToolbarAttr.width:n.toolbar.offsetWidth+"px",r.addClass(n.toolbar,"ke-toolbar-sticky"),d.sticky=!0},offStickyToolbar:function(){const t=e.element;t.stickyDummy.style.display="none",t.toolbar.style.top=d.isInline?d.inlineToolbarAttr.top:"",t.toolbar.style.width=d.isInline?d.inlineToolbarAttr.width:"",t.editorArea.style.marginTop="",r.removeClass(t.toolbar,"ke-toolbar-sticky"),d.sticky=!1},codeViewAutoHeight:function(){e.element.code.style.height=e.element.code.scrollHeight+"px"},hardDelete:function(){const e=d.getRange(),t=e.startContainer,i=e.endContainer,n=r.getRangeFormatElement(t),l=r.getRangeFormatElement(i),o=r.isCell(n),s=r.isCell(l);if((o&&!n.previousElementSibling&&!n.parentElement.previousElementSibling||s&&!l.nextElementSibling&&!l.parentElement.nextElementSibling)&&n!==l)if(o){if(s)return r.removeItem(r.getParentElement(n,r.isComponent)),d.nativeFocus(),!0;r.removeItem(r.getParentElement(n,r.isComponent))}else r.removeItem(r.getParentElement(l,r.isComponent));const a=1===t.nodeType?r.getParentElement(t,".ke-component"):null,c=1===i.nodeType?r.getParentElement(i,".ke-component"):null;return a&&r.removeItem(a),c&&r.removeItem(c),!1},onPaste_wysiwyg:function(e){const t=r.isIE?a.clipboardData:e.clipboardData;return!t||u.dataTransferAction("paste",e,t)},setClipboardComponent:function(e,t,i){e.preventDefault(),e.stopPropagation(),i.setData("text/html",t.component.outerHTML)},onCopy_wysiwyg:function(e){const t=r.isIE?a.clipboardData:e.clipboardData;if("function"===typeof h.onCopy&&!h.onCopy(e,t,d))return e.preventDefault(),e.stopPropagation(),!1;const i=d.currentFileComponentInfo;i&&!r.isIE&&(u.setClipboardComponent(e,i,t),r.addClass(i.component,"ke-component-copy"),a.setTimeout((function(){r.removeClass(i.component,"ke-component-copy")}),150))},onCut_wysiwyg:function(e){const t=r.isIE?a.clipboardData:e.clipboardData;if("function"===typeof h.onCut&&!h.onCut(e,t,d))return e.preventDefault(),e.stopPropagation(),!1;const i=d.currentFileComponentInfo;i&&!r.isIE&&(u.setClipboardComponent(e,i,t),r.removeItem(i.component),d.controllersOff(e)),a.setTimeout((function(){d.history.push(!1)}))},onDrop_wysiwyg:function(e){const t=e.dataTransfer;return!t||(r.isIE?(e.preventDefault(),e.stopPropagation(),!1):(d.removeNode(),u.setDropLocationSelection(e),u.dataTransferAction("drop",e,t)))},setDropLocationSelection:function(e){if(e.rangeParent)d.setRange(e.rangeParent,e.rangeOffset,e.rangeParent,e.rangeOffset);else if(d._wd.caretRangeFromPoint){const t=d._wd.caretRangeFromPoint(e.clientX,e.clientY);d.setRange(t.startContainer,t.startOffset,t.endContainer,t.endOffset)}else{const e=d.getRange();d.setRange(e.startContainer,e.startOffset,e.endContainer,e.endOffset)}},dataTransferAction:function(t,i,n){let l,o;if(r.isIE){l=n.getData("Text");const s=d.getRange(),c=r.createElement("DIV"),h={sc:s.startContainer,so:s.startOffset,ec:s.endContainer,eo:s.endOffset};return c.setAttribute("contenteditable","true"),c.style.cssText="position:absolute; top:0; left:0; width:1px; height:1px; overflow:hidden;",e.element.relative.appendChild(c),c.focus(),a.setTimeout((function(){o=c.innerHTML,r.removeItem(c),d.setRange(h.sc,h.so,h.ec,h.eo),u.setClipboardData(t,i,l,o,n)})),!0}if(l=n.getData("text/plain"),o=n.getData("text/html"),!1===u.setClipboardData(t,i,l,o,n))return i.preventDefault(),i.stopPropagation(),!1},setClipboardData:function(e,t,i,n,l){const o=/class=["']*Mso(Normal|List)/i.test(n)||/content=["']*Word.Document/i.test(n)||/content=["']*OneNote.File/i.test(n)||/content=["']*Excel.Sheet/i.test(n);n?(o?(n=n.replace(/\n/g," "),i=i.replace(/\n/g," ")):n=(i===n?i:n).replace(/\n/g,"<br>"),n=d.cleanHTML(n,d.pasteTagsWhitelistRegExp)):n=r.HTMLConvertor(i).replace(/\n/g,"<br>");const s=d.charCount(d.charTypeHTML?n:i);if("paste"===e&&"function"===typeof h.onPaste){const e=h.onPaste(t,n,s,d);if(!e)return!1;"string"===typeof e&&(n=e)}if("drop"===e&&"function"===typeof h.onDrop){const e=h.onDrop(t,n,s,d);if(!e)return!1;"string"===typeof e&&(n=e)}const a=l.files;return a.length>0&&!o?(/^image/.test(a[0].type)&&d.plugins.image&&h.insertImage(a),!1):!!s&&(n?(h.insertHTML(n,!0,!1),!1):void 0)},onMouseMove_wysiwyg:function(i){if(d.isDisabled)return;const n=r.getParentElement(i.target,r.isComponent),l=d.lineBreaker.style;if(n&&!d.currentControllerName){const o=e.element;let s=0,a=o.wysiwyg;do{s+=a.scrollTop,a=a.parentElement}while(a&&!/^(BODY|HTML)$/i.test(a.nodeName));const c=o.wysiwyg.scrollTop,h=u.getEditorOffsets(null),g=r.getOffset(n,o.wysiwygFrame).top+c,p=i.pageY+s+(t.iframe&&!t.toolbarContainer?o.toolbar.offsetHeight:0),m=g+(t.iframe?s:h.top),f=r.isListCell(n.parentNode);let b,v="";if((f?!n.previousSibling:!r.isFormatElement(n.previousElementSibling))&&p<m+20)b=g,v="t";else{if((f?n.nextSibling:r.isFormatElement(n.nextElementSibling))||!(p>m+n.offsetHeight-20))return void(l.display="none");b=g+n.offsetHeight,v="b"}d._variable.lineBreakComp=n,d._variable.lineBreakDir=v,l.top=b-c+"px",d.lineBreakerButton.style.left=r.getOffset(n).left+n.offsetWidth/2-15+"px",l.display="block"}else"none"!==l.display&&(l.display="none")},onMouseDown_lineBreak:function(e){e.preventDefault()},onLineBreak:function(e){e.preventDefault();const i=d._variable.lineBreakComp,n=this?this:d._variable.lineBreakDir,l=r.isListCell(i.parentNode),o=r.createElement(l?"BR":r.isCell(i.parentNode)?"DIV":t.defaultTag);if(l||(o.innerHTML="<br>"),d.charTypeHTML&&!d.checkCharCount(o.outerHTML,"byte-html"))return;i.parentNode.insertBefore(o,"t"===n?i:i.nextSibling),d.lineBreaker.style.display="none",d._variable.lineBreakComp=null;const s=l?o:o.firstChild;d.setRange(s,1,s,1),d.history.push(!1)},addEvent:function(){const i=t.iframe?d._ww:e.element.wysiwyg;e.element.toolbar.addEventListener("mousedown",u.buttonsEventHandler,!1),e.element.menuTray.addEventListener("mousedown",u.buttonsEventHandler,!1),e.element.toolbar.addEventListener("click",u.onClick_toolbar,!1),i.addEventListener("mousedown",u.onMouseDown_wysiwyg,!1),i.addEventListener("click",u.onClick_wysiwyg,!1),i.addEventListener(r.isIE?"textinput":"input",u.onInput_wysiwyg,!1),i.addEventListener("keydown",u.onKeyDown_wysiwyg,!1),i.addEventListener("keyup",u.onKeyUp_wysiwyg,!1),i.addEventListener("paste",u.onPaste_wysiwyg,!1),i.addEventListener("copy",u.onCopy_wysiwyg,!1),i.addEventListener("cut",u.onCut_wysiwyg,!1),i.addEventListener("drop",u.onDrop_wysiwyg,!1),i.addEventListener("scroll",u.onScroll_wysiwyg,!1),i.addEventListener("focus",u.onFocus_wysiwyg,!1),i.addEventListener("blur",u.onBlur_wysiwyg,!1),u.lineBreakerBind={a:u.onLineBreak.bind(""),t:u.onLineBreak.bind("t"),b:u.onLineBreak.bind("b")},i.addEventListener("mousemove",u.onMouseMove_wysiwyg,!1),d.lineBreakerButton.addEventListener("mousedown",u.onMouseDown_lineBreak,!1),d.lineBreakerButton.addEventListener("click",u.lineBreakerBind.a,!1),e.element.lineBreaker_t.addEventListener("mousedown",u.lineBreakerBind.t,!1),e.element.lineBreaker_b.addEventListener("mousedown",u.lineBreakerBind.b,!1),d.plugins.table&&i.addEventListener("touchstart",u.onMouseDown_wysiwyg,{passive:!0,useCapture:!1}),"auto"!==t.height||t.codeMirrorEditor||(e.element.code.addEventListener("keydown",u.codeViewAutoHeight,!1),e.element.code.addEventListener("keyup",u.codeViewAutoHeight,!1),e.element.code.addEventListener("paste",u.codeViewAutoHeight,!1)),e.element.resizingBar&&(/\d+/.test(t.height)?e.element.resizingBar.addEventListener("mousedown",u.onMouseDown_resizingBar,!1):r.addClass(e.element.resizingBar,"ke-resizing-none")),u.setResponsiveToolbar(),a.removeEventListener("resize",u.onResize_window),a.removeEventListener("scroll",u.onScroll_window),a.addEventListener("resize",u.onResize_window,!1),t.stickyToolbar>-1&&a.addEventListener("scroll",u.onScroll_window,!1)},removeEvent:function(){const i=t.iframe?d._ww:e.element.wysiwyg;e.element.toolbar.removeEventListener("mousedown",u.buttonsEventHandler),e.element.menuTray.removeEventListener("mousedown",u.buttonsEventHandler),e.element.toolbar.removeEventListener("click",u.onClick_toolbar),i.removeEventListener("mousedown",u.onMouseDown_wysiwyg),i.removeEventListener("click",u.onClick_wysiwyg),i.removeEventListener(r.isIE?"textinput":"input",u.onInput_wysiwyg),i.removeEventListener("keydown",u.onKeyDown_wysiwyg),i.removeEventListener("keyup",u.onKeyUp_wysiwyg),i.removeEventListener("paste",u.onPaste_wysiwyg),i.removeEventListener("copy",u.onCopy_wysiwyg),i.removeEventListener("cut",u.onCut_wysiwyg),i.removeEventListener("drop",u.onDrop_wysiwyg),i.removeEventListener("scroll",u.onScroll_wysiwyg),i.removeEventListener("mousemove",u.onMouseMove_wysiwyg),d.lineBreakerButton.removeEventListener("mousedown",u.onMouseDown_lineBreak),d.lineBreakerButton.removeEventListener("click",u.lineBreakerBind.a),e.element.lineBreaker_t.removeEventListener("mousedown",u.lineBreakerBind.t),e.element.lineBreaker_b.removeEventListener("mousedown",u.lineBreakerBind.b),u.lineBreakerBind=null,i.removeEventListener("touchstart",u.onMouseDown_wysiwyg,{passive:!0,useCapture:!1}),i.removeEventListener("focus",u.onFocus_wysiwyg),i.removeEventListener("blur",u.onBlur_wysiwyg),e.element.code.removeEventListener("keydown",u.codeViewAutoHeight),e.element.code.removeEventListener("keyup",u.codeViewAutoHeight),e.element.code.removeEventListener("paste",u.codeViewAutoHeight),e.element.resizingBar&&e.element.resizingBar.removeEventListener("mousedown",u.onMouseDown_resizingBar),a.removeEventListener("resize",u.onResize_window),a.removeEventListener("scroll",u.onScroll_window)},setResponsiveToolbar:function(){if(0===l.length)return void(l=null);u.responsiveCurrentSize="default";const e=u.responsiveButtonSize=[],t=u.responsiveButtons={default:l[0]};for(let i,n,o=1,s=l.length;o<s;o++)n=l[o],i=1*n[0],e.push(i),t[i]=n[1];e.sort((function(e,t){return e-t})).unshift("default")}},h={core:d,util:r,onload:null,onScroll:null,onMouseDown:null,onClick:null,onInput:null,onKeyDown:null,onKeyUp:null,onCopy:null,onCut:null,onFocus:null,onBlur:null,onChange:null,onDrop:null,onPaste:null,showInline:null,showController:null,toggleCodeView:null,toggleFullScreen:null,imageUploadHandler:null,videoUploadHandler:null,audioUploadHandler:null,onImageUploadBefore:null,onVideoUploadBefore:null,onAudioUploadBefore:null,onImageUpload:null,onVideoUpload:null,onAudioUpload:null,onImageUploadError:null,onVideoUploadError:null,onAudioUploadError:null,onResizeEditor:null,setToolbarButtons:function(o){d.submenuOff(),d.containerOff();const s=I.createToolBar(o,d.plugins,t);l=s.responsiveButtons,d.moreLayerActiveButton=null,u.setResponsiveToolbar(),e.element.toolbar.replaceChild(s.buttonTray,e.element.buttonTray);const a=R(e.element.originElement,d.getConstructed(e.element),t);e.element=a.element,e.tool=a.tool,t.iframe&&(e.element.wysiwyg=d._wd.body),d.cachingButtons(),d.history.resetCachingButton(),d.activePlugins=[];const c=n;let h,g,p;n=s.pluginCallButtons;for(let e in n)r.hasOwn(n,e)&&(h=i[e],g=n[e],h.active&&g&&(p=c[e],d.callPlugin(e,null,p||g),p&&(g.parentElement.replaceChild(p,g),n[e]=p)));d.hasFocus&&u.applyTagEffects(),d._variable.isCodeView&&r.addClass(d.styleCommandMap.codeView,"active"),d._variable.isFullScreen&&r.addClass(d.styleCommandMap.fullScreen,"active"),r.hasClass(e.element.wysiwyg,"ke-show-block")&&r.addClass(d.styleCommandMap.showBlocks,"active")},setOptions:function(o){u.removeEvent(),d.resetComponents(),r.removeClass(d.styleCommandMap.showBlocks,"active"),r.removeClass(d.styleCommandMap.codeView,"active"),d._variable.isCodeView=!1,d.iframeAuto=null,d.plugins=o.plugins||d.plugins;const s=[t,o].reduce((function(e,t){for(let i in t)if(r.hasOwn(t,i))if("plugins"===i&&t[i]&&e[i]){let n=e[i],l=t[i];n=n.length?n:a.Object.keys(n).map((function(e){return n[e]})),l=l.length?l:a.Object.keys(l).map((function(e){return l[e]})),e[i]=l.filter((function(e){return-1===n.indexOf(e)})).concat(n)}else e[i]=t[i];return e}),{}),c=e.element,h=c.wysiwyg.innerHTML,g=I.setOptions(s,e,t);g.callButtons&&(n=g.callButtons,d.initPlugins={}),g.plugins&&(d.plugins=i=g.plugins),0===c.menuTray.children.length&&(this.menuTray={}),l=g.toolbar.responsiveButtons,d.options=t=s,d.lang=t.lang,t.iframe&&c.wysiwygFrame.addEventListener("load",(function(){r.setIframeDocument(this,t),d.setOptionsInit(c,h)})),c.editorArea.appendChild(c.wysiwygFrame),t.iframe||d.setOptionsInit(c,h)},setDefaultStyle:function(i){const n=t.editorStyles=r.setDefaultOptionStyle(t,i),l=e.element;l.topArea.style.cssText=n.top,l.code.style.cssText=t.editorStyles.frame,l.code.style.display="none","auto"===t.height?l.code.style.overflow="hidden":l.code.style.overflow="",t.iframe?(l.wysiwygFrame.style.cssText=n.frame,l.wysiwyg.style.cssText=n.editor):l.wysiwygFrame.style.cssText=n.frame+n.editor},noticeOpen:function(e){d.notice.open.call(d,e)},noticeClose:function(){d.notice.close.call(d)},save:function(){e.element.originElement.value=d.getContents(!1)},getContext:function(){return e},getContents:function(e){return d.getContents(e)},getText:function(){return e.element.wysiwyg.textContent},getCharCount:function(i){return i="string"===typeof i?i:t.charCounterType,d.getCharLength(d.charTypeHTML?e.element.wysiwyg.innerHTML:e.element.wysiwyg.textContent,i)},getImagesInfo:function(){return e.image?e.image.infoList:[]},getFilesInfo:function(t){return e[t]?e[t].infoList:[]},insertImage:function(e){d.plugins.image&&e&&(d.initPlugins.image?d.plugins.image.submitAction.call(d,e):d.callPlugin("image",d.plugins.image.submitAction.bind(d,e),null),d.focus())},insertHTML:function(e,t,i,n){if("string"===typeof e){t||(e=d.cleanHTML(e,null));try{const t=o.createRange().createContextualFragment(e).childNodes;if(i){const e=d.charTypeHTML?"outerHTML":"textContent";let i="";for(let n=0,l=t.length;n<l;n++)i+=t[n][e];if(!d.checkCharCount(i,null))return}let l,s,a,c,u;for(;l=t[0];)c&&3===c.nodeType&&s&&1===s.nodeType&&r.isBreak(l)?(c=l,r.removeItem(l)):(a=d.insertNode(l,s,!1),s=a.container||a,u||(u=a),c=l);3===c.nodeType&&1===s.nodeType&&(s=c);const h=3===s.nodeType?a.endOffset||s.textContent.length:s.childNodes.length;n?d.setRange(u.container||u,u.startOffset||0,s,h):d.setRange(s,h,s,h)}catch(l){console.warn("[KothingEditor.insertHTML.fail] "+l),d.execCommand("insertHTML",!1,e)}}else if(r.isComponent(e))d.insertComponent(e,!1,i,!1);else{let t=null;(r.isFormatElement(e)||r.isMedia(e))&&(t=r.getFormatElement(d.getSelectionNode(),null)),d.insertNode(e,t,i)}d.effectNode=null,d.focus(),d.history.push(!1)},setContents:function(e){d.setContents(e)},appendContents:function(t){const i=d.convertContentsForEditor(t);if(d._variable.isCodeView)d.setCodeView(d.getCodeView()+"\n"+d.convertHTMLForCodeView(i));else{const t=r.createElement("DIV");t.innerHTML=i;const n=e.element.wysiwyg,l=t.children;for(let e=0,i=l.length;e<i;e++)n.appendChild(l[e])}d.history.push(!1)},disabled:function(){e.tool.cover.style.display="block",e.element.wysiwyg.setAttribute("contenteditable",!1),d.isDisabled=!0,t.codeMirrorEditor?t.codeMirrorEditor.setOption("readOnly",!0):e.element.code.setAttribute("disabled","disabled")},enabled:function(){e.tool.cover.style.display="none",e.element.wysiwyg.setAttribute("contenteditable",!0),d.isDisabled=!1,t.codeMirrorEditor?t.codeMirrorEditor.setOption("readOnly",!1):e.element.code.removeAttribute("disabled")},show:function(){const i=e.element.topArea.style;"none"===i.display&&(i.display=t.display)},hide:function(){e.element.topArea.style.display="none"},destroy:function(t){d.submenuOff(),d.containerOff(),d.controllersOff(t),d.notice&&d.notice.close.call(d),d.modalForm&&d.plugins.dialog.close.call(d),d.history.destroy(),u.removeEvent(),r.removeItem(e.element.toolbar),r.removeItem(e.element.topArea);for(let e in d.functions)r.hasOwn(d,e)&&delete d.functions[e];for(let e in d)r.hasOwn(d,e)&&delete d[e];for(let e in u)r.hasOwn(u,e)&&delete u[e];for(let i in e)r.hasOwn(e,i)&&delete e[i];for(let e in n)r.hasOwn(n,e)&&delete n[e];for(let e in this)r.hasOwn(this,e)&&delete this[e]},toolbar:{disabled:function(){e.tool.cover.style.display="block"},enabled:function(){e.tool.cover.style.display="none"},show:function(){d.isInline?u.showToolbarInline():(e.element.toolbar.style.display="",e.element.stickyDummy.style.display="")},hide:function(){d.isInline?u.hideToolbar():(e.element.toolbar.style.display="none",e.element.stickyDummy.style.display="none")}}};d.functions=h,d.options=t;let g=e.element,p=g.originElement,m=g.topArea;return p.style.display="none",m.style.display="block",t.iframe&&g.wysiwygFrame.addEventListener("load",(function(){r.setIframeDocument(this,t),d.editorInit(!1,t.value),t.value=null})),"object"===typeof p.nextElementSibling?p.parentNode.insertBefore(m,p.nextElementSibling):p.parentNode.appendChild(m),g.editorArea.appendChild(g.wysiwygFrame),g=p=m=null,t.iframe||(d.editorInit(!1,t.value),t.value=null),h}(R(n,l.constructed,l.options),t,l.plugins,l.pluginCallButtons,l.responsiveButtons)}};window.KothingEditor||Object.defineProperty(window,"KothingEditor",{enumerable:!0,writable:!1,configurable:!1,value:F.init({plugins:p})})}();
